(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yk(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var cS={exports:{}},Hd={},uS={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc=Symbol.for("react.element"),xk=Symbol.for("react.portal"),vk=Symbol.for("react.fragment"),_k=Symbol.for("react.strict_mode"),wk=Symbol.for("react.profiler"),bk=Symbol.for("react.provider"),Ak=Symbol.for("react.context"),Sk=Symbol.for("react.forward_ref"),Tk=Symbol.for("react.suspense"),Ek=Symbol.for("react.memo"),Ck=Symbol.for("react.lazy"),Bv=Symbol.iterator;function Rk(t){return t===null||typeof t!="object"?null:(t=Bv&&t[Bv]||t["@@iterator"],typeof t=="function"?t:null)}var hS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dS=Object.assign,fS={};function Fa(t,e,r){this.props=t,this.context=e,this.refs=fS,this.updater=r||hS}Fa.prototype.isReactComponent={};Fa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pS(){}pS.prototype=Fa.prototype;function _0(t,e,r){this.props=t,this.context=e,this.refs=fS,this.updater=r||hS}var w0=_0.prototype=new pS;w0.constructor=_0;dS(w0,Fa.prototype);w0.isPureReactComponent=!0;var Dv=Array.isArray,mS=Object.prototype.hasOwnProperty,b0={current:null},gS={key:!0,ref:!0,__self:!0,__source:!0};function yS(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)mS.call(e,n)&&!gS.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Lc,type:t,key:i,ref:o,props:s,_owner:b0.current}}function Pk(t,e){return{$$typeof:Lc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function A0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lc}function Mk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Uv=/\/+/g;function Hf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Mk(""+t.key):e.toString(36)}function eh(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Lc:case xk:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Hf(o,0):n,Dv(s)?(r="",t!=null&&(r=t.replace(Uv,"$&/")+"/"),eh(s,e,r,"",function(c){return c})):s!=null&&(A0(s)&&(s=Pk(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Uv,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Dv(t))for(var a=0;a<t.length;a++){i=t[a];var l=n+Hf(i,a);o+=eh(i,e,r,l,s)}else if(l=Rk(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=n+Hf(i,a++),o+=eh(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function eu(t,e,r){if(t==null)return t;var n=[],s=0;return eh(t,n,"","",function(i){return e.call(r,i,s++)}),n}function Ik(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rr={current:null},th={transition:null},kk={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:th,ReactCurrentOwner:b0};function xS(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:eu,forEach:function(t,e,r){eu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return eu(t,function(){e++}),e},toArray:function(t){return eu(t,function(e){return e})||[]},only:function(t){if(!A0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Fa;me.Fragment=vk;me.Profiler=wk;me.PureComponent=_0;me.StrictMode=_k;me.Suspense=Tk;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kk;me.act=xS;me.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=dS({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=b0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)mS.call(e,l)&&!gS.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Lc,type:t.type,key:s,ref:i,props:n,_owner:o}};me.createContext=function(t){return t={$$typeof:Ak,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bk,_context:t},t.Consumer=t};me.createElement=yS;me.createFactory=function(t){var e=yS.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:Sk,render:t}};me.isValidElement=A0;me.lazy=function(t){return{$$typeof:Ck,_payload:{_status:-1,_result:t},_init:Ik}};me.memo=function(t,e){return{$$typeof:Ek,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=th.transition;th.transition={};try{t()}finally{th.transition=e}};me.unstable_act=xS;me.useCallback=function(t,e){return rr.current.useCallback(t,e)};me.useContext=function(t){return rr.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return rr.current.useDeferredValue(t)};me.useEffect=function(t,e){return rr.current.useEffect(t,e)};me.useId=function(){return rr.current.useId()};me.useImperativeHandle=function(t,e,r){return rr.current.useImperativeHandle(t,e,r)};me.useInsertionEffect=function(t,e){return rr.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return rr.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return rr.current.useMemo(t,e)};me.useReducer=function(t,e,r){return rr.current.useReducer(t,e,r)};me.useRef=function(t){return rr.current.useRef(t)};me.useState=function(t){return rr.current.useState(t)};me.useSyncExternalStore=function(t,e,r){return rr.current.useSyncExternalStore(t,e,r)};me.useTransition=function(){return rr.current.useTransition()};me.version="18.3.1";uS.exports=me;var C=uS.exports;const On=Fc(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nk=C,Fk=Symbol.for("react.element"),Lk=Symbol.for("react.fragment"),Ok=Object.prototype.hasOwnProperty,Bk=Nk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dk={key:!0,ref:!0,__self:!0,__source:!0};function vS(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Ok.call(e,n)&&!Dk.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:Fk,type:t,key:i,ref:o,props:s,_owner:Bk.current}}Hd.Fragment=Lk;Hd.jsx=vS;Hd.jsxs=vS;cS.exports=Hd;var w=cS.exports,Zm={},_S={exports:{}},Ir={},wS={exports:{}},bS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,O){var I=F.length;F.push(O);e:for(;0<I;){var L=I-1>>>1,z=F[L];if(0<s(z,O))F[L]=O,F[I]=z,I=L;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var O=F[0],I=F.pop();if(I!==O){F[0]=I;e:for(var L=0,z=F.length,X=z>>>1;L<X;){var H=2*(L+1)-1,oe=F[H],te=H+1,ie=F[te];if(0>s(oe,I))te<z&&0>s(ie,oe)?(F[L]=ie,F[te]=I,L=te):(F[L]=oe,F[H]=I,L=H);else if(te<z&&0>s(ie,I))F[L]=ie,F[te]=I,L=te;else break e}}return O}function s(F,O){var I=F.sortIndex-O.sortIndex;return I!==0?I:F.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,d=3,f=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var O=r(c);O!==null;){if(O.callback===null)n(c);else if(O.startTime<=F)n(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=r(c)}}function _(F){if(m=!1,x(F),!p)if(r(l)!==null)p=!0,B(b);else{var O=r(c);O!==null&&U(_,O.startTime-F)}}function b(F,O){p=!1,m&&(m=!1,y(T),T=-1),f=!0;var I=d;try{for(x(O),u=r(l);u!==null&&(!(u.expirationTime>O)||F&&!P());){var L=u.callback;if(typeof L=="function"){u.callback=null,d=u.priorityLevel;var z=L(u.expirationTime<=O);O=t.unstable_now(),typeof z=="function"?u.callback=z:u===r(l)&&n(l),x(O)}else n(l);u=r(l)}if(u!==null)var X=!0;else{var H=r(c);H!==null&&U(_,H.startTime-O),X=!1}return X}finally{u=null,d=I,f=!1}}var A=!1,S=null,T=-1,E=5,R=-1;function P(){return!(t.unstable_now()-R<E)}function D(){if(S!==null){var F=t.unstable_now();R=F;var O=!0;try{O=S(!0,F)}finally{O?k():(A=!1,S=null)}}else A=!1}var k;if(typeof v=="function")k=function(){v(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,G=M.port2;M.port1.onmessage=D,k=function(){G.postMessage(null)}}else k=function(){g(D,0)};function B(F){S=F,A||(A=!0,k())}function U(F,O){T=g(function(){F(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,B(b))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var I=d;d=O;try{return F()}finally{d=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,O){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var I=d;d=F;try{return O()}finally{d=I}},t.unstable_scheduleCallback=function(F,O,I){var L=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?L+I:L):I=L,F){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=I+z,F={id:h++,callback:O,priorityLevel:F,startTime:I,expirationTime:z,sortIndex:-1},I>L?(F.sortIndex=I,e(c,F),r(l)===null&&F===r(c)&&(m?(y(T),T=-1):m=!0,U(_,I-L))):(F.sortIndex=z,e(l,F),p||f||(p=!0,B(b))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var O=d;return function(){var I=d;d=O;try{return F.apply(this,arguments)}finally{d=I}}}})(bS);wS.exports=bS;var Uk=wS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk=C,Pr=Uk;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AS=new Set,Ql={};function ao(t,e){ma(t,e),ma(t+"Capture",e)}function ma(t,e){for(Ql[t]=e,t=0;t<e.length;t++)AS.add(e[t])}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qm=Object.prototype.hasOwnProperty,jk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vv={},jv={};function $k(t){return Qm.call(jv,t)?!0:Qm.call(Vv,t)?!1:jk.test(t)?jv[t]=!0:(Vv[t]=!0,!1)}function Gk(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zk(t,e,r,n){if(e===null||typeof e>"u"||Gk(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nr(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new nr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new nr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new nr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new nr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new nr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new nr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new nr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new nr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new nr(t,5,!1,t.toLowerCase(),null,!1,!1)});var S0=/[\-:]([a-z])/g;function T0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(S0,T0);Dt[e]=new nr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(S0,T0);Dt[e]=new nr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(S0,T0);Dt[e]=new nr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new nr(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new nr(t,1,!1,t.toLowerCase(),null,!0,!0)});function E0(t,e,r,n){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zk(e,r,s,n)&&(r=null),n||s===null?$k(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var _s=Vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tu=Symbol.for("react.element"),Fo=Symbol.for("react.portal"),Lo=Symbol.for("react.fragment"),C0=Symbol.for("react.strict_mode"),Jm=Symbol.for("react.profiler"),SS=Symbol.for("react.provider"),TS=Symbol.for("react.context"),R0=Symbol.for("react.forward_ref"),eg=Symbol.for("react.suspense"),tg=Symbol.for("react.suspense_list"),P0=Symbol.for("react.memo"),Ms=Symbol.for("react.lazy"),ES=Symbol.for("react.offscreen"),$v=Symbol.iterator;function Ya(t){return t===null||typeof t!="object"?null:(t=$v&&t[$v]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,Wf;function gl(t){if(Wf===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Wf=e&&e[1]||""}return`
`+Wf+t}var Xf=!1;function Yf(t,e){if(!t||Xf)return"";Xf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xf=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?gl(t):""}function Hk(t){switch(t.tag){case 5:return gl(t.type);case 16:return gl("Lazy");case 13:return gl("Suspense");case 19:return gl("SuspenseList");case 0:case 2:case 15:return t=Yf(t.type,!1),t;case 11:return t=Yf(t.type.render,!1),t;case 1:return t=Yf(t.type,!0),t;default:return""}}function rg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lo:return"Fragment";case Fo:return"Portal";case Jm:return"Profiler";case C0:return"StrictMode";case eg:return"Suspense";case tg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case TS:return(t.displayName||"Context")+".Consumer";case SS:return(t._context.displayName||"Context")+".Provider";case R0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P0:return e=t.displayName||null,e!==null?e:rg(t.type)||"Memo";case Ms:e=t._payload,t=t._init;try{return rg(t(e))}catch{}}return null}function Wk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rg(e);case 8:return e===C0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ti(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xk(t){var e=CS(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ru(t){t._valueTracker||(t._valueTracker=Xk(t))}function RS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=CS(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Fh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ng(t,e){var r=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Gv(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ti(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function PS(t,e){e=e.checked,e!=null&&E0(t,"checked",e,!1)}function sg(t,e){PS(t,e);var r=ti(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ig(t,e.type,r):e.hasOwnProperty("defaultValue")&&ig(t,e.type,ti(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zv(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ig(t,e,r){(e!=="number"||Fh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var yl=Array.isArray;function ta(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ti(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function og(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hv(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error($(92));if(yl(r)){if(1<r.length)throw Error($(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ti(r)}}function MS(t,e){var r=ti(e.value),n=ti(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Wv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ag(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nu,kS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nu=nu||document.createElement("div"),nu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ml={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yk=["Webkit","ms","Moz","O"];Object.keys(Ml).forEach(function(t){Yk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ml[e]=Ml[t]})});function NS(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ml.hasOwnProperty(t)&&Ml[t]?(""+e).trim():e+"px"}function FS(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=NS(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var qk=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lg(t,e){if(e){if(qk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function cg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ug=null;function M0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hg=null,ra=null,na=null;function Xv(t){if(t=Dc(t)){if(typeof hg!="function")throw Error($(280));var e=t.stateNode;e&&(e=Kd(e),hg(t.stateNode,t.type,e))}}function LS(t){ra?na?na.push(t):na=[t]:ra=t}function OS(){if(ra){var t=ra,e=na;if(na=ra=null,Xv(t),e)for(t=0;t<e.length;t++)Xv(e[t])}}function BS(t,e){return t(e)}function DS(){}var qf=!1;function US(t,e,r){if(qf)return t(e,r);qf=!0;try{return BS(t,e,r)}finally{qf=!1,(ra!==null||na!==null)&&(DS(),OS())}}function ec(t,e){var r=t.stateNode;if(r===null)return null;var n=Kd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error($(231,e,typeof r));return r}var dg=!1;if(us)try{var qa={};Object.defineProperty(qa,"passive",{get:function(){dg=!0}}),window.addEventListener("test",qa,qa),window.removeEventListener("test",qa,qa)}catch{dg=!1}function Kk(t,e,r,n,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var Il=!1,Lh=null,Oh=!1,fg=null,Zk={onError:function(t){Il=!0,Lh=t}};function Qk(t,e,r,n,s,i,o,a,l){Il=!1,Lh=null,Kk.apply(Zk,arguments)}function Jk(t,e,r,n,s,i,o,a,l){if(Qk.apply(this,arguments),Il){if(Il){var c=Lh;Il=!1,Lh=null}else throw Error($(198));Oh||(Oh=!0,fg=c)}}function lo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function VS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yv(t){if(lo(t)!==t)throw Error($(188))}function e2(t){var e=t.alternate;if(!e){if(e=lo(t),e===null)throw Error($(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Yv(s),t;if(i===n)return Yv(s),e;i=i.sibling}throw Error($(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(r.alternate!==n)throw Error($(190))}if(r.tag!==3)throw Error($(188));return r.stateNode.current===r?t:e}function jS(t){return t=e2(t),t!==null?$S(t):null}function $S(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$S(t);if(e!==null)return e;t=t.sibling}return null}var GS=Pr.unstable_scheduleCallback,qv=Pr.unstable_cancelCallback,t2=Pr.unstable_shouldYield,r2=Pr.unstable_requestPaint,ct=Pr.unstable_now,n2=Pr.unstable_getCurrentPriorityLevel,I0=Pr.unstable_ImmediatePriority,zS=Pr.unstable_UserBlockingPriority,Bh=Pr.unstable_NormalPriority,s2=Pr.unstable_LowPriority,HS=Pr.unstable_IdlePriority,Wd=null,Bn=null;function i2(t){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Wd,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:l2,o2=Math.log,a2=Math.LN2;function l2(t){return t>>>=0,t===0?32:31-(o2(t)/a2|0)|0}var su=64,iu=4194304;function xl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=xl(a):(i&=o,i!==0&&(n=xl(i)))}else o=r&~s,o!==0?n=xl(o):i!==0&&(n=xl(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-un(e),s=1<<r,n|=t[r],e&=~s;return n}function c2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u2(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-un(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=c2(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function pg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function WS(){var t=su;return su<<=1,!(su&4194240)&&(su=64),t}function Kf(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Oc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=r}function h2(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-un(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function k0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-un(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Pe=0;function XS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YS,N0,qS,KS,ZS,mg=!1,ou=[],Gs=null,zs=null,Hs=null,tc=new Map,rc=new Map,Ns=[],d2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kv(t,e){switch(t){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":tc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(e.pointerId)}}function Ka(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Dc(e),e!==null&&N0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function f2(t,e,r,n,s){switch(e){case"focusin":return Gs=Ka(Gs,t,e,r,n,s),!0;case"dragenter":return zs=Ka(zs,t,e,r,n,s),!0;case"mouseover":return Hs=Ka(Hs,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return tc.set(i,Ka(tc.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,rc.set(i,Ka(rc.get(i)||null,t,e,r,n,s)),!0}return!1}function QS(t){var e=Ui(t.target);if(e!==null){var r=lo(e);if(r!==null){if(e=r.tag,e===13){if(e=VS(r),e!==null){t.blockedOn=e,ZS(t.priority,function(){qS(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=gg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);ug=n,r.target.dispatchEvent(n),ug=null}else return e=Dc(r),e!==null&&N0(e),t.blockedOn=r,!1;e.shift()}return!0}function Zv(t,e,r){rh(t)&&r.delete(e)}function p2(){mg=!1,Gs!==null&&rh(Gs)&&(Gs=null),zs!==null&&rh(zs)&&(zs=null),Hs!==null&&rh(Hs)&&(Hs=null),tc.forEach(Zv),rc.forEach(Zv)}function Za(t,e){t.blockedOn===e&&(t.blockedOn=null,mg||(mg=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,p2)))}function nc(t){function e(s){return Za(s,t)}if(0<ou.length){Za(ou[0],t);for(var r=1;r<ou.length;r++){var n=ou[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Gs!==null&&Za(Gs,t),zs!==null&&Za(zs,t),Hs!==null&&Za(Hs,t),tc.forEach(e),rc.forEach(e),r=0;r<Ns.length;r++)n=Ns[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ns.length&&(r=Ns[0],r.blockedOn===null);)QS(r),r.blockedOn===null&&Ns.shift()}var sa=_s.ReactCurrentBatchConfig,Uh=!0;function m2(t,e,r,n){var s=Pe,i=sa.transition;sa.transition=null;try{Pe=1,F0(t,e,r,n)}finally{Pe=s,sa.transition=i}}function g2(t,e,r,n){var s=Pe,i=sa.transition;sa.transition=null;try{Pe=4,F0(t,e,r,n)}finally{Pe=s,sa.transition=i}}function F0(t,e,r,n){if(Uh){var s=gg(t,e,r,n);if(s===null)op(t,e,n,Vh,r),Kv(t,n);else if(f2(s,t,e,r,n))n.stopPropagation();else if(Kv(t,n),e&4&&-1<d2.indexOf(t)){for(;s!==null;){var i=Dc(s);if(i!==null&&YS(i),i=gg(t,e,r,n),i===null&&op(t,e,n,Vh,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else op(t,e,n,null,r)}}var Vh=null;function gg(t,e,r,n){if(Vh=null,t=M0(n),t=Ui(t),t!==null)if(e=lo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=VS(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vh=t,null}function JS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n2()){case I0:return 1;case zS:return 4;case Bh:case s2:return 16;case HS:return 536870912;default:return 16}default:return 16}}var Ls=null,L0=null,nh=null;function eT(){if(nh)return nh;var t,e=L0,r=e.length,n,s="value"in Ls?Ls.value:Ls.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return nh=s.slice(t,1<n?1-n:void 0)}function sh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function au(){return!0}function Qv(){return!1}function kr(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?au:Qv,this.isPropagationStopped=Qv,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=au)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=au)},persist:function(){},isPersistent:au}),e}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},O0=kr(La),Bc=Qe({},La,{view:0,detail:0}),y2=kr(Bc),Zf,Qf,Qa,Xd=Qe({},Bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qa&&(Qa&&t.type==="mousemove"?(Zf=t.screenX-Qa.screenX,Qf=t.screenY-Qa.screenY):Qf=Zf=0,Qa=t),Zf)},movementY:function(t){return"movementY"in t?t.movementY:Qf}}),Jv=kr(Xd),x2=Qe({},Xd,{dataTransfer:0}),v2=kr(x2),_2=Qe({},Bc,{relatedTarget:0}),Jf=kr(_2),w2=Qe({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),b2=kr(w2),A2=Qe({},La,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),S2=kr(A2),T2=Qe({},La,{data:0}),e_=kr(T2),E2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=R2[t])?!!e[t]:!1}function B0(){return P2}var M2=Qe({},Bc,{key:function(t){if(t.key){var e=E2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?C2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B0,charCode:function(t){return t.type==="keypress"?sh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),I2=kr(M2),k2=Qe({},Xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t_=kr(k2),N2=Qe({},Bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B0}),F2=kr(N2),L2=Qe({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),O2=kr(L2),B2=Qe({},Xd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),D2=kr(B2),U2=[9,13,27,32],D0=us&&"CompositionEvent"in window,kl=null;us&&"documentMode"in document&&(kl=document.documentMode);var V2=us&&"TextEvent"in window&&!kl,tT=us&&(!D0||kl&&8<kl&&11>=kl),r_=String.fromCharCode(32),n_=!1;function rT(t,e){switch(t){case"keyup":return U2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oo=!1;function j2(t,e){switch(t){case"compositionend":return nT(e);case"keypress":return e.which!==32?null:(n_=!0,r_);case"textInput":return t=e.data,t===r_&&n_?null:t;default:return null}}function $2(t,e){if(Oo)return t==="compositionend"||!D0&&rT(t,e)?(t=eT(),nh=L0=Ls=null,Oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tT&&e.locale!=="ko"?null:e.data;default:return null}}var G2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!G2[t.type]:e==="textarea"}function sT(t,e,r,n){LS(n),e=jh(e,"onChange"),0<e.length&&(r=new O0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Nl=null,sc=null;function z2(t){mT(t,0)}function Yd(t){var e=Uo(t);if(RS(e))return t}function H2(t,e){if(t==="change")return e}var iT=!1;if(us){var ep;if(us){var tp="oninput"in document;if(!tp){var i_=document.createElement("div");i_.setAttribute("oninput","return;"),tp=typeof i_.oninput=="function"}ep=tp}else ep=!1;iT=ep&&(!document.documentMode||9<document.documentMode)}function o_(){Nl&&(Nl.detachEvent("onpropertychange",oT),sc=Nl=null)}function oT(t){if(t.propertyName==="value"&&Yd(sc)){var e=[];sT(e,sc,t,M0(t)),US(z2,e)}}function W2(t,e,r){t==="focusin"?(o_(),Nl=e,sc=r,Nl.attachEvent("onpropertychange",oT)):t==="focusout"&&o_()}function X2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yd(sc)}function Y2(t,e){if(t==="click")return Yd(e)}function q2(t,e){if(t==="input"||t==="change")return Yd(e)}function K2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:K2;function ic(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Qm.call(e,s)||!mn(t[s],e[s]))return!1}return!0}function a_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function l_(t,e){var r=a_(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=a_(r)}}function aT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lT(){for(var t=window,e=Fh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Fh(t.document)}return e}function U0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Z2(t){var e=lT(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&aT(r.ownerDocument.documentElement,r)){if(n!==null&&U0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=l_(r,i);var o=l_(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Q2=us&&"documentMode"in document&&11>=document.documentMode,Bo=null,yg=null,Fl=null,xg=!1;function c_(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xg||Bo==null||Bo!==Fh(n)||(n=Bo,"selectionStart"in n&&U0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fl&&ic(Fl,n)||(Fl=n,n=jh(yg,"onSelect"),0<n.length&&(e=new O0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Bo)))}function lu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Do={animationend:lu("Animation","AnimationEnd"),animationiteration:lu("Animation","AnimationIteration"),animationstart:lu("Animation","AnimationStart"),transitionend:lu("Transition","TransitionEnd")},rp={},cT={};us&&(cT=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function qd(t){if(rp[t])return rp[t];if(!Do[t])return t;var e=Do[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in cT)return rp[t]=e[r];return t}var uT=qd("animationend"),hT=qd("animationiteration"),dT=qd("animationstart"),fT=qd("transitionend"),pT=new Map,u_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(t,e){pT.set(t,e),ao(e,[t])}for(var np=0;np<u_.length;np++){var sp=u_[np],J2=sp.toLowerCase(),eN=sp[0].toUpperCase()+sp.slice(1);oi(J2,"on"+eN)}oi(uT,"onAnimationEnd");oi(hT,"onAnimationIteration");oi(dT,"onAnimationStart");oi("dblclick","onDoubleClick");oi("focusin","onFocus");oi("focusout","onBlur");oi(fT,"onTransitionEnd");ma("onMouseEnter",["mouseout","mouseover"]);ma("onMouseLeave",["mouseout","mouseover"]);ma("onPointerEnter",["pointerout","pointerover"]);ma("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tN=new Set("cancel close invalid load scroll toggle".split(" ").concat(vl));function h_(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Jk(n,e,void 0,t),t.currentTarget=null}function mT(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;h_(s,a,c),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;h_(s,a,c),i=l}}}if(Oh)throw t=fg,Oh=!1,fg=null,t}function Be(t,e){var r=e[Ag];r===void 0&&(r=e[Ag]=new Set);var n=t+"__bubble";r.has(n)||(gT(e,t,2,!1),r.add(n))}function ip(t,e,r){var n=0;e&&(n|=4),gT(r,t,n,e)}var cu="_reactListening"+Math.random().toString(36).slice(2);function oc(t){if(!t[cu]){t[cu]=!0,AS.forEach(function(r){r!=="selectionchange"&&(tN.has(r)||ip(r,!1,t),ip(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cu]||(e[cu]=!0,ip("selectionchange",!1,e))}}function gT(t,e,r,n){switch(JS(e)){case 1:var s=m2;break;case 4:s=g2;break;default:s=F0}r=s.bind(null,e,r,t),s=void 0,!dg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function op(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ui(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}US(function(){var c=i,h=M0(r),u=[];e:{var d=pT.get(t);if(d!==void 0){var f=O0,p=t;switch(t){case"keypress":if(sh(r)===0)break e;case"keydown":case"keyup":f=I2;break;case"focusin":p="focus",f=Jf;break;case"focusout":p="blur",f=Jf;break;case"beforeblur":case"afterblur":f=Jf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Jv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=v2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=F2;break;case uT:case hT:case dT:f=b2;break;case fT:f=O2;break;case"scroll":f=y2;break;case"wheel":f=D2;break;case"copy":case"cut":case"paste":f=S2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=t_}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=c,x;v!==null;){x=v;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,y!==null&&(_=ec(v,y),_!=null&&m.push(ac(v,_,x)))),g)break;v=v.return}0<m.length&&(d=new f(d,p,null,r,h),u.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&r!==ug&&(p=r.relatedTarget||r.fromElement)&&(Ui(p)||p[hs]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=r.relatedTarget||r.toElement,f=c,p=p?Ui(p):null,p!==null&&(g=lo(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=Jv,_="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=t_,_="onPointerLeave",y="onPointerEnter",v="pointer"),g=f==null?d:Uo(f),x=p==null?d:Uo(p),d=new m(_,v+"leave",f,r,h),d.target=g,d.relatedTarget=x,_=null,Ui(h)===c&&(m=new m(y,v+"enter",p,r,h),m.target=x,m.relatedTarget=g,_=m),g=_,f&&p)t:{for(m=f,y=p,v=0,x=m;x;x=vo(x))v++;for(x=0,_=y;_;_=vo(_))x++;for(;0<v-x;)m=vo(m),v--;for(;0<x-v;)y=vo(y),x--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=vo(m),y=vo(y)}m=null}else m=null;f!==null&&d_(u,d,f,m,!1),p!==null&&g!==null&&d_(u,g,p,m,!0)}}e:{if(d=c?Uo(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var b=H2;else if(s_(d))if(iT)b=q2;else{b=X2;var A=W2}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=Y2);if(b&&(b=b(t,c))){sT(u,b,r,h);break e}A&&A(t,d,c),t==="focusout"&&(A=d._wrapperState)&&A.controlled&&d.type==="number"&&ig(d,"number",d.value)}switch(A=c?Uo(c):window,t){case"focusin":(s_(A)||A.contentEditable==="true")&&(Bo=A,yg=c,Fl=null);break;case"focusout":Fl=yg=Bo=null;break;case"mousedown":xg=!0;break;case"contextmenu":case"mouseup":case"dragend":xg=!1,c_(u,r,h);break;case"selectionchange":if(Q2)break;case"keydown":case"keyup":c_(u,r,h)}var S;if(D0)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Oo?rT(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(tT&&r.locale!=="ko"&&(Oo||T!=="onCompositionStart"?T==="onCompositionEnd"&&Oo&&(S=eT()):(Ls=h,L0="value"in Ls?Ls.value:Ls.textContent,Oo=!0)),A=jh(c,T),0<A.length&&(T=new e_(T,t,null,r,h),u.push({event:T,listeners:A}),S?T.data=S:(S=nT(r),S!==null&&(T.data=S)))),(S=V2?j2(t,r):$2(t,r))&&(c=jh(c,"onBeforeInput"),0<c.length&&(h=new e_("onBeforeInput","beforeinput",null,r,h),u.push({event:h,listeners:c}),h.data=S))}mT(u,e)})}function ac(t,e,r){return{instance:t,listener:e,currentTarget:r}}function jh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ec(t,r),i!=null&&n.unshift(ac(t,i,s)),i=ec(t,e),i!=null&&n.push(ac(t,i,s))),t=t.return}return n}function vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d_(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,s?(l=ec(r,i),l!=null&&o.unshift(ac(r,l,a))):s||(l=ec(r,i),l!=null&&o.push(ac(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var rN=/\r\n?/g,nN=/\u0000|\uFFFD/g;function f_(t){return(typeof t=="string"?t:""+t).replace(rN,`
`).replace(nN,"")}function uu(t,e,r){if(e=f_(e),f_(t)!==e&&r)throw Error($(425))}function $h(){}var vg=null,_g=null;function wg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bg=typeof setTimeout=="function"?setTimeout:void 0,sN=typeof clearTimeout=="function"?clearTimeout:void 0,p_=typeof Promise=="function"?Promise:void 0,iN=typeof queueMicrotask=="function"?queueMicrotask:typeof p_<"u"?function(t){return p_.resolve(null).then(t).catch(oN)}:bg;function oN(t){setTimeout(function(){throw t})}function ap(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),nc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);nc(e)}function Ws(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function m_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Oa,lc="__reactProps$"+Oa,hs="__reactContainer$"+Oa,Ag="__reactEvents$"+Oa,aN="__reactListeners$"+Oa,lN="__reactHandles$"+Oa;function Ui(t){var e=t[Nn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[hs]||r[Nn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=m_(t);t!==null;){if(r=t[Nn])return r;t=m_(t)}return e}t=r,r=t.parentNode}return null}function Dc(t){return t=t[Nn]||t[hs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Kd(t){return t[lc]||null}var Sg=[],Vo=-1;function ai(t){return{current:t}}function Ue(t){0>Vo||(t.current=Sg[Vo],Sg[Vo]=null,Vo--)}function Fe(t,e){Vo++,Sg[Vo]=t.current,t.current=e}var ri={},Yt=ai(ri),dr=ai(!1),Ki=ri;function ga(t,e){var r=t.type.contextTypes;if(!r)return ri;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function fr(t){return t=t.childContextTypes,t!=null}function Gh(){Ue(dr),Ue(Yt)}function g_(t,e,r){if(Yt.current!==ri)throw Error($(168));Fe(Yt,e),Fe(dr,r)}function yT(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error($(108,Wk(t)||"Unknown",s));return Qe({},r,n)}function zh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ri,Ki=Yt.current,Fe(Yt,t),Fe(dr,dr.current),!0}function y_(t,e,r){var n=t.stateNode;if(!n)throw Error($(169));r?(t=yT(t,e,Ki),n.__reactInternalMemoizedMergedChildContext=t,Ue(dr),Ue(Yt),Fe(Yt,t)):Ue(dr),Fe(dr,r)}var Zn=null,Zd=!1,lp=!1;function xT(t){Zn===null?Zn=[t]:Zn.push(t)}function cN(t){Zd=!0,xT(t)}function li(){if(!lp&&Zn!==null){lp=!0;var t=0,e=Pe;try{var r=Zn;for(Pe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Zn=null,Zd=!1}catch(s){throw Zn!==null&&(Zn=Zn.slice(t+1)),GS(I0,li),s}finally{Pe=e,lp=!1}}return null}var jo=[],$o=0,Hh=null,Wh=0,Br=[],Dr=0,Zi=null,Jn=1,es="";function yi(t,e){jo[$o++]=Wh,jo[$o++]=Hh,Hh=t,Wh=e}function vT(t,e,r){Br[Dr++]=Jn,Br[Dr++]=es,Br[Dr++]=Zi,Zi=t;var n=Jn;t=es;var s=32-un(n)-1;n&=~(1<<s),r+=1;var i=32-un(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Jn=1<<32-un(e)+s|r<<s|n,es=i+t}else Jn=1<<i|r<<s|n,es=t}function V0(t){t.return!==null&&(yi(t,1),vT(t,1,0))}function j0(t){for(;t===Hh;)Hh=jo[--$o],jo[$o]=null,Wh=jo[--$o],jo[$o]=null;for(;t===Zi;)Zi=Br[--Dr],Br[Dr]=null,es=Br[--Dr],Br[Dr]=null,Jn=Br[--Dr],Br[Dr]=null}var Cr=null,Tr=null,je=!1,sn=null;function _T(t,e){var r=Ur(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function x_(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cr=t,Tr=Ws(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cr=t,Tr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Zi!==null?{id:Jn,overflow:es}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ur(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Cr=t,Tr=null,!0):!1;default:return!1}}function Tg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Eg(t){if(je){var e=Tr;if(e){var r=e;if(!x_(t,e)){if(Tg(t))throw Error($(418));e=Ws(r.nextSibling);var n=Cr;e&&x_(t,e)?_T(n,r):(t.flags=t.flags&-4097|2,je=!1,Cr=t)}}else{if(Tg(t))throw Error($(418));t.flags=t.flags&-4097|2,je=!1,Cr=t}}}function v_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cr=t}function hu(t){if(t!==Cr)return!1;if(!je)return v_(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wg(t.type,t.memoizedProps)),e&&(e=Tr)){if(Tg(t))throw wT(),Error($(418));for(;e;)_T(t,e),e=Ws(e.nextSibling)}if(v_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Tr=Ws(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Tr=null}}else Tr=Cr?Ws(t.stateNode.nextSibling):null;return!0}function wT(){for(var t=Tr;t;)t=Ws(t.nextSibling)}function ya(){Tr=Cr=null,je=!1}function $0(t){sn===null?sn=[t]:sn.push(t)}var uN=_s.ReactCurrentBatchConfig;function Ja(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error($(309));var n=r.stateNode}if(!n)throw Error($(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!r._owner)throw Error($(290,t))}return t}function du(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function __(t){var e=t._init;return e(t._payload)}function bT(t){function e(y,v){if(t){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function r(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=Ks(y,v),y.index=0,y.sibling=null,y}function i(y,v,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,_){return v===null||v.tag!==6?(v=mp(x,y.mode,_),v.return=y,v):(v=s(v,x),v.return=y,v)}function l(y,v,x,_){var b=x.type;return b===Lo?h(y,v,x.props.children,_,x.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ms&&__(b)===v.type)?(_=s(v,x.props),_.ref=Ja(y,v,x),_.return=y,_):(_=hh(x.type,x.key,x.props,null,y.mode,_),_.ref=Ja(y,v,x),_.return=y,_)}function c(y,v,x,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=gp(x,y.mode,_),v.return=y,v):(v=s(v,x.children||[]),v.return=y,v)}function h(y,v,x,_,b){return v===null||v.tag!==7?(v=Yi(x,y.mode,_,b),v.return=y,v):(v=s(v,x),v.return=y,v)}function u(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=mp(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case tu:return x=hh(v.type,v.key,v.props,null,y.mode,x),x.ref=Ja(y,null,v),x.return=y,x;case Fo:return v=gp(v,y.mode,x),v.return=y,v;case Ms:var _=v._init;return u(y,_(v._payload),x)}if(yl(v)||Ya(v))return v=Yi(v,y.mode,x,null),v.return=y,v;du(y,v)}return null}function d(y,v,x,_){var b=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:a(y,v,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tu:return x.key===b?l(y,v,x,_):null;case Fo:return x.key===b?c(y,v,x,_):null;case Ms:return b=x._init,d(y,v,b(x._payload),_)}if(yl(x)||Ya(x))return b!==null?null:h(y,v,x,_,null);du(y,x)}return null}function f(y,v,x,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(x)||null,a(v,y,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case tu:return y=y.get(_.key===null?x:_.key)||null,l(v,y,_,b);case Fo:return y=y.get(_.key===null?x:_.key)||null,c(v,y,_,b);case Ms:var A=_._init;return f(y,v,x,A(_._payload),b)}if(yl(_)||Ya(_))return y=y.get(x)||null,h(v,y,_,b,null);du(v,_)}return null}function p(y,v,x,_){for(var b=null,A=null,S=v,T=v=0,E=null;S!==null&&T<x.length;T++){S.index>T?(E=S,S=null):E=S.sibling;var R=d(y,S,x[T],_);if(R===null){S===null&&(S=E);break}t&&S&&R.alternate===null&&e(y,S),v=i(R,v,T),A===null?b=R:A.sibling=R,A=R,S=E}if(T===x.length)return r(y,S),je&&yi(y,T),b;if(S===null){for(;T<x.length;T++)S=u(y,x[T],_),S!==null&&(v=i(S,v,T),A===null?b=S:A.sibling=S,A=S);return je&&yi(y,T),b}for(S=n(y,S);T<x.length;T++)E=f(S,y,T,x[T],_),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?T:E.key),v=i(E,v,T),A===null?b=E:A.sibling=E,A=E);return t&&S.forEach(function(P){return e(y,P)}),je&&yi(y,T),b}function m(y,v,x,_){var b=Ya(x);if(typeof b!="function")throw Error($(150));if(x=b.call(x),x==null)throw Error($(151));for(var A=b=null,S=v,T=v=0,E=null,R=x.next();S!==null&&!R.done;T++,R=x.next()){S.index>T?(E=S,S=null):E=S.sibling;var P=d(y,S,R.value,_);if(P===null){S===null&&(S=E);break}t&&S&&P.alternate===null&&e(y,S),v=i(P,v,T),A===null?b=P:A.sibling=P,A=P,S=E}if(R.done)return r(y,S),je&&yi(y,T),b;if(S===null){for(;!R.done;T++,R=x.next())R=u(y,R.value,_),R!==null&&(v=i(R,v,T),A===null?b=R:A.sibling=R,A=R);return je&&yi(y,T),b}for(S=n(y,S);!R.done;T++,R=x.next())R=f(S,y,T,R.value,_),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?T:R.key),v=i(R,v,T),A===null?b=R:A.sibling=R,A=R);return t&&S.forEach(function(D){return e(y,D)}),je&&yi(y,T),b}function g(y,v,x,_){if(typeof x=="object"&&x!==null&&x.type===Lo&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case tu:e:{for(var b=x.key,A=v;A!==null;){if(A.key===b){if(b=x.type,b===Lo){if(A.tag===7){r(y,A.sibling),v=s(A,x.props.children),v.return=y,y=v;break e}}else if(A.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ms&&__(b)===A.type){r(y,A.sibling),v=s(A,x.props),v.ref=Ja(y,A,x),v.return=y,y=v;break e}r(y,A);break}else e(y,A);A=A.sibling}x.type===Lo?(v=Yi(x.props.children,y.mode,_,x.key),v.return=y,y=v):(_=hh(x.type,x.key,x.props,null,y.mode,_),_.ref=Ja(y,v,x),_.return=y,y=_)}return o(y);case Fo:e:{for(A=x.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){r(y,v.sibling),v=s(v,x.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else e(y,v);v=v.sibling}v=gp(x,y.mode,_),v.return=y,y=v}return o(y);case Ms:return A=x._init,g(y,v,A(x._payload),_)}if(yl(x))return p(y,v,x,_);if(Ya(x))return m(y,v,x,_);du(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(r(y,v.sibling),v=s(v,x),v.return=y,y=v):(r(y,v),v=mp(x,y.mode,_),v.return=y,y=v),o(y)):r(y,v)}return g}var xa=bT(!0),AT=bT(!1),Xh=ai(null),Yh=null,Go=null,G0=null;function z0(){G0=Go=Yh=null}function H0(t){var e=Xh.current;Ue(Xh),t._currentValue=e}function Cg(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ia(t,e){Yh=t,G0=Go=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ur=!0),t.firstContext=null)}function Hr(t){var e=t._currentValue;if(G0!==t)if(t={context:t,memoizedValue:e,next:null},Go===null){if(Yh===null)throw Error($(308));Go=t,Yh.dependencies={lanes:0,firstContext:t}}else Go=Go.next=t;return e}var Vi=null;function W0(t){Vi===null?Vi=[t]:Vi.push(t)}function ST(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,W0(e)):(r.next=s.next,s.next=r),e.interleaved=r,ds(t,n)}function ds(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Is=!1;function X0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ds(t,r)}return s=n.interleaved,s===null?(e.next=e,W0(n)):(e.next=s.next,s.next=e),n.interleaved=e,ds(t,r)}function ih(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,k0(t,r)}}function w_(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function qh(t,e,r,n){var s=t.updateQueue;Is=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var u=s.baseState;o=0,h=c=l=null,a=i;do{var d=a.lane,f=a.eventTime;if((n&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(d=e,f=r,m.tag){case 1:if(p=m.payload,typeof p=="function"){u=p.call(f,u,d);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(f,u,d):p,d==null)break e;u=Qe({},u,d);break e;case 2:Is=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=f,l=u):h=h.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(1);if(h===null&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ji|=o,t.lanes=o,t.memoizedState=u}}function b_(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error($(191,s));s.call(n)}}}var Uc={},Dn=ai(Uc),cc=ai(Uc),uc=ai(Uc);function ji(t){if(t===Uc)throw Error($(174));return t}function Y0(t,e){switch(Fe(uc,e),Fe(cc,t),Fe(Dn,Uc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ag(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ag(e,t)}Ue(Dn),Fe(Dn,e)}function va(){Ue(Dn),Ue(cc),Ue(uc)}function ET(t){ji(uc.current);var e=ji(Dn.current),r=ag(e,t.type);e!==r&&(Fe(cc,t),Fe(Dn,r))}function q0(t){cc.current===t&&(Ue(Dn),Ue(cc))}var Xe=ai(0);function Kh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cp=[];function K0(){for(var t=0;t<cp.length;t++)cp[t]._workInProgressVersionPrimary=null;cp.length=0}var oh=_s.ReactCurrentDispatcher,up=_s.ReactCurrentBatchConfig,Qi=0,Ze=null,At=null,Rt=null,Zh=!1,Ll=!1,hc=0,hN=0;function Ut(){throw Error($(321))}function Z0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!mn(t[r],e[r]))return!1;return!0}function Q0(t,e,r,n,s,i){if(Qi=i,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oh.current=t===null||t.memoizedState===null?mN:gN,t=r(n,s),Ll){i=0;do{if(Ll=!1,hc=0,25<=i)throw Error($(301));i+=1,Rt=At=null,e.updateQueue=null,oh.current=yN,t=r(n,s)}while(Ll)}if(oh.current=Qh,e=At!==null&&At.next!==null,Qi=0,Rt=At=Ze=null,Zh=!1,e)throw Error($(300));return t}function J0(){var t=hc!==0;return hc=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ze.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Wr(){if(At===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var e=Rt===null?Ze.memoizedState:Rt.next;if(e!==null)Rt=e,At=t;else{if(t===null)throw Error($(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Rt===null?Ze.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function dc(t,e){return typeof e=="function"?e(t):e}function hp(t){var e=Wr(),r=e.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=t;var n=At,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((Qi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=n):l=l.next=u,Ze.lanes|=h,Ji|=h}c=c.next}while(c!==null&&c!==i);l===null?o=n:l.next=a,mn(n,e.memoizedState)||(ur=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Ze.lanes|=i,Ji|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function dp(t){var e=Wr(),r=e.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);mn(i,e.memoizedState)||(ur=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function CT(){}function RT(t,e){var r=Ze,n=Wr(),s=e(),i=!mn(n.memoizedState,s);if(i&&(n.memoizedState=s,ur=!0),n=n.queue,ex(IT.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Rt!==null&&Rt.memoizedState.tag&1){if(r.flags|=2048,fc(9,MT.bind(null,r,n,s,e),void 0,null),Mt===null)throw Error($(349));Qi&30||PT(r,e,s)}return s}function PT(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function MT(t,e,r,n){e.value=r,e.getSnapshot=n,kT(e)&&NT(t)}function IT(t,e,r){return r(function(){kT(e)&&NT(t)})}function kT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!mn(t,r)}catch{return!0}}function NT(t){var e=ds(t,1);e!==null&&hn(e,t,1,-1)}function A_(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:t},e.queue=t,t=t.dispatch=pN.bind(null,Ze,t),[e.memoizedState,t]}function fc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function FT(){return Wr().memoizedState}function ah(t,e,r,n){var s=Rn();Ze.flags|=t,s.memoizedState=fc(1|e,r,void 0,n===void 0?null:n)}function Qd(t,e,r,n){var s=Wr();n=n===void 0?null:n;var i=void 0;if(At!==null){var o=At.memoizedState;if(i=o.destroy,n!==null&&Z0(n,o.deps)){s.memoizedState=fc(e,r,i,n);return}}Ze.flags|=t,s.memoizedState=fc(1|e,r,i,n)}function S_(t,e){return ah(8390656,8,t,e)}function ex(t,e){return Qd(2048,8,t,e)}function LT(t,e){return Qd(4,2,t,e)}function OT(t,e){return Qd(4,4,t,e)}function BT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DT(t,e,r){return r=r!=null?r.concat([t]):null,Qd(4,4,BT.bind(null,e,t),r)}function tx(){}function UT(t,e){var r=Wr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Z0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function VT(t,e){var r=Wr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Z0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function jT(t,e,r){return Qi&21?(mn(r,e)||(r=WS(),Ze.lanes|=r,Ji|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ur=!0),t.memoizedState=r)}function dN(t,e){var r=Pe;Pe=r!==0&&4>r?r:4,t(!0);var n=up.transition;up.transition={};try{t(!1),e()}finally{Pe=r,up.transition=n}}function $T(){return Wr().memoizedState}function fN(t,e,r){var n=qs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},GT(t))zT(e,r);else if(r=ST(t,e,r,n),r!==null){var s=tr();hn(r,t,n,s),HT(r,e,n)}}function pN(t,e,r){var n=qs(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(GT(t))zT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,mn(a,o)){var l=e.interleaved;l===null?(s.next=s,W0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=ST(t,e,s,n),r!==null&&(s=tr(),hn(r,t,n,s),HT(r,e,n))}}function GT(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function zT(t,e){Ll=Zh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function HT(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,k0(t,r)}}var Qh={readContext:Hr,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},mN={readContext:Hr,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:Hr,useEffect:S_,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ah(4194308,4,BT.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ah(4194308,4,t,e)},useInsertionEffect:function(t,e){return ah(4,2,t,e)},useMemo:function(t,e){var r=Rn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Rn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=fN.bind(null,Ze,t),[n.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:A_,useDebugValue:tx,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=A_(!1),e=t[0];return t=dN.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ze,s=Rn();if(je){if(r===void 0)throw Error($(407));r=r()}else{if(r=e(),Mt===null)throw Error($(349));Qi&30||PT(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,S_(IT.bind(null,n,i,t),[t]),n.flags|=2048,fc(9,MT.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Rn(),e=Mt.identifierPrefix;if(je){var r=es,n=Jn;r=(n&~(1<<32-un(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=hc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=hN++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gN={readContext:Hr,useCallback:UT,useContext:Hr,useEffect:ex,useImperativeHandle:DT,useInsertionEffect:LT,useLayoutEffect:OT,useMemo:VT,useReducer:hp,useRef:FT,useState:function(){return hp(dc)},useDebugValue:tx,useDeferredValue:function(t){var e=Wr();return jT(e,At.memoizedState,t)},useTransition:function(){var t=hp(dc)[0],e=Wr().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:RT,useId:$T,unstable_isNewReconciler:!1},yN={readContext:Hr,useCallback:UT,useContext:Hr,useEffect:ex,useImperativeHandle:DT,useInsertionEffect:LT,useLayoutEffect:OT,useMemo:VT,useReducer:dp,useRef:FT,useState:function(){return dp(dc)},useDebugValue:tx,useDeferredValue:function(t){var e=Wr();return At===null?e.memoizedState=t:jT(e,At.memoizedState,t)},useTransition:function(){var t=dp(dc)[0],e=Wr().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:RT,useId:$T,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Rg(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Qe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Jd={isMounted:function(t){return(t=t._reactInternals)?lo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=tr(),s=qs(t),i=rs(n,s);i.payload=e,r!=null&&(i.callback=r),e=Xs(t,i,s),e!==null&&(hn(e,t,s,n),ih(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=tr(),s=qs(t),i=rs(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Xs(t,i,s),e!==null&&(hn(e,t,s,n),ih(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=tr(),n=qs(t),s=rs(r,n);s.tag=2,e!=null&&(s.callback=e),e=Xs(t,s,n),e!==null&&(hn(e,t,n,r),ih(e,t,n))}};function T_(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!ic(r,n)||!ic(s,i):!0}function WT(t,e,r){var n=!1,s=ri,i=e.contextType;return typeof i=="object"&&i!==null?i=Hr(i):(s=fr(e)?Ki:Yt.current,n=e.contextTypes,i=(n=n!=null)?ga(t,s):ri),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jd,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function E_(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Jd.enqueueReplaceState(e,e.state,null)}function Pg(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},X0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Hr(i):(i=fr(e)?Ki:Yt.current,s.context=ga(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Rg(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jd.enqueueReplaceState(s,s.state,null),qh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _a(t,e){try{var r="",n=e;do r+=Hk(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function fp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Mg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var xN=typeof WeakMap=="function"?WeakMap:Map;function XT(t,e,r){r=rs(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ed||(ed=!0,Vg=n),Mg(t,e)},r}function YT(t,e,r){r=rs(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Mg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Mg(t,e),typeof n!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function C_(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new xN;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=kN.bind(null,t,e,r),e.then(t,t))}function R_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function P_(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=rs(-1,1),e.tag=2,Xs(r,e,1))),r.lanes|=1),t)}var vN=_s.ReactCurrentOwner,ur=!1;function Jt(t,e,r,n){e.child=t===null?AT(e,null,r,n):xa(e,t.child,r,n)}function M_(t,e,r,n,s){r=r.render;var i=e.ref;return ia(e,s),n=Q0(t,e,r,n,i,s),r=J0(),t!==null&&!ur?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fs(t,e,s)):(je&&r&&V0(e),e.flags|=1,Jt(t,e,n,s),e.child)}function I_(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!cx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,qT(t,e,i,n,s)):(t=hh(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ic,r(o,n)&&t.ref===e.ref)return fs(t,e,s)}return e.flags|=1,t=Ks(i,n),t.ref=e.ref,t.return=e,e.child=t}function qT(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(ic(i,n)&&t.ref===e.ref)if(ur=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(ur=!0);else return e.lanes=t.lanes,fs(t,e,s)}return Ig(t,e,r,n,s)}function KT(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Ho,Sr),Sr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(Ho,Sr),Sr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Fe(Ho,Sr),Sr|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Fe(Ho,Sr),Sr|=n;return Jt(t,e,s,r),e.child}function ZT(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ig(t,e,r,n,s){var i=fr(r)?Ki:Yt.current;return i=ga(e,i),ia(e,s),r=Q0(t,e,r,n,i,s),n=J0(),t!==null&&!ur?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fs(t,e,s)):(je&&n&&V0(e),e.flags|=1,Jt(t,e,r,s),e.child)}function k_(t,e,r,n,s){if(fr(r)){var i=!0;zh(e)}else i=!1;if(ia(e,s),e.stateNode===null)lh(t,e),WT(e,r,n),Pg(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Hr(c):(c=fr(r)?Ki:Yt.current,c=ga(e,c));var h=r.getDerivedStateFromProps,u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&E_(e,o,n,c),Is=!1;var d=e.memoizedState;o.state=d,qh(e,n,o,s),l=e.memoizedState,a!==n||d!==l||dr.current||Is?(typeof h=="function"&&(Rg(e,r,h,n),l=e.memoizedState),(a=Is||T_(e,r,a,n,d,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,TT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:rn(e.type,a),o.props=c,u=e.pendingProps,d=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Hr(l):(l=fr(r)?Ki:Yt.current,l=ga(e,l));var f=r.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||d!==l)&&E_(e,o,n,l),Is=!1,d=e.memoizedState,o.state=d,qh(e,n,o,s);var p=e.memoizedState;a!==u||d!==p||dr.current||Is?(typeof f=="function"&&(Rg(e,r,f,n),p=e.memoizedState),(c=Is||T_(e,r,c,n,d,p,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return kg(t,e,r,n,i,s)}function kg(t,e,r,n,s,i){ZT(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&y_(e,r,!1),fs(t,e,i);n=e.stateNode,vN.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=xa(e,t.child,null,i),e.child=xa(e,null,a,i)):Jt(t,e,a,i),e.memoizedState=n.state,s&&y_(e,r,!0),e.child}function QT(t){var e=t.stateNode;e.pendingContext?g_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&g_(t,e.context,!1),Y0(t,e.containerInfo)}function N_(t,e,r,n,s){return ya(),$0(s),e.flags|=256,Jt(t,e,r,n),e.child}var Ng={dehydrated:null,treeContext:null,retryLane:0};function Fg(t){return{baseLanes:t,cachePool:null,transitions:null}}function JT(t,e,r){var n=e.pendingProps,s=Xe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Fe(Xe,s&1),t===null)return Eg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rf(o,n,0,null),t=Yi(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Fg(r),e.memoizedState=Ng,t):rx(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return _N(t,e,o,n,a,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ks(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ks(a,i):(i=Yi(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Fg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Ng,n}return i=t.child,t=i.sibling,n=Ks(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function rx(t,e){return e=rf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fu(t,e,r,n){return n!==null&&$0(n),xa(e,t.child,null,r),t=rx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _N(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=fp(Error($(422))),fu(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=rf({mode:"visible",children:n.children},s,0,null),i=Yi(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&xa(e,t.child,null,o),e.child.memoizedState=Fg(o),e.memoizedState=Ng,i);if(!(e.mode&1))return fu(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error($(419)),n=fp(i,n,void 0),fu(t,e,o,n)}if(a=(o&t.childLanes)!==0,ur||a){if(n=Mt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ds(t,s),hn(n,t,s,-1))}return lx(),n=fp(Error($(421))),fu(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=NN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tr=Ws(s.nextSibling),Cr=e,je=!0,sn=null,t!==null&&(Br[Dr++]=Jn,Br[Dr++]=es,Br[Dr++]=Zi,Jn=t.id,es=t.overflow,Zi=e),e=rx(e,n.children),e.flags|=4096,e)}function F_(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Cg(t.return,e,r)}function pp(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function eE(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Jt(t,e,n.children,r),n=Xe.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F_(t,r,e);else if(t.tag===19)F_(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Fe(Xe,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Kh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),pp(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}pp(e,!0,r,null,i);break;case"together":pp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fs(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ji|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,r=Ks(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ks(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function wN(t,e,r){switch(e.tag){case 3:QT(e),ya();break;case 5:ET(e);break;case 1:fr(e.type)&&zh(e);break;case 4:Y0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Fe(Xh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Fe(Xe,Xe.current&1),e.flags|=128,null):r&e.child.childLanes?JT(t,e,r):(Fe(Xe,Xe.current&1),t=fs(t,e,r),t!==null?t.sibling:null);Fe(Xe,Xe.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return eE(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(Xe,Xe.current),n)break;return null;case 22:case 23:return e.lanes=0,KT(t,e,r)}return fs(t,e,r)}var tE,Lg,rE,nE;tE=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Lg=function(){};rE=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ji(Dn.current);var i=null;switch(r){case"input":s=ng(t,s),n=ng(t,n),i=[];break;case"select":s=Qe({},s,{value:void 0}),n=Qe({},n,{value:void 0}),i=[];break;case"textarea":s=og(t,s),n=og(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=$h)}lg(r,n);var o;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ql.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ql.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Be("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};nE=function(t,e,r,n){r!==n&&(e.flags|=4)};function el(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function bN(t,e,r){var n=e.pendingProps;switch(j0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return fr(e.type)&&Gh(),Vt(e),null;case 3:return n=e.stateNode,va(),Ue(dr),Ue(Yt),K0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(hu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(Gg(sn),sn=null))),Lg(t,e),Vt(e),null;case 5:q0(e);var s=ji(uc.current);if(r=e.type,t!==null&&e.stateNode!=null)rE(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error($(166));return Vt(e),null}if(t=ji(Dn.current),hu(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Nn]=e,n[lc]=i,t=(e.mode&1)!==0,r){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(s=0;s<vl.length;s++)Be(vl[s],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":Gv(n,i),Be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Be("invalid",n);break;case"textarea":Hv(n,i),Be("invalid",n)}lg(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&uu(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&uu(n.textContent,a,t),s=["children",""+a]):Ql.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",n)}switch(r){case"input":ru(n),zv(n,i,!0);break;case"textarea":ru(n),Wv(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=$h)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IS(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Nn]=e,t[lc]=n,tE(t,e,!1,!1),e.stateNode=t;e:{switch(o=cg(r,n),r){case"dialog":Be("cancel",t),Be("close",t),s=n;break;case"iframe":case"object":case"embed":Be("load",t),s=n;break;case"video":case"audio":for(s=0;s<vl.length;s++)Be(vl[s],t);s=n;break;case"source":Be("error",t),s=n;break;case"img":case"image":case"link":Be("error",t),Be("load",t),s=n;break;case"details":Be("toggle",t),s=n;break;case"input":Gv(t,n),s=ng(t,n),Be("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Qe({},n,{value:void 0}),Be("invalid",t);break;case"textarea":Hv(t,n),s=og(t,n),Be("invalid",t);break;default:s=n}lg(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?FS(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kS(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Jl(t,l):typeof l=="number"&&Jl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ql.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Be("scroll",t):l!=null&&E0(t,i,l,o))}switch(r){case"input":ru(t),zv(t,n,!1);break;case"textarea":ru(t),Wv(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ti(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ta(t,!!n.multiple,i,!1):n.defaultValue!=null&&ta(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$h)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)nE(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error($(166));if(r=ji(uc.current),ji(Dn.current),hu(e)){if(n=e.stateNode,r=e.memoizedProps,n[Nn]=e,(i=n.nodeValue!==r)&&(t=Cr,t!==null))switch(t.tag){case 3:uu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uu(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Nn]=e,e.stateNode=n}return Vt(e),null;case 13:if(Ue(Xe),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Tr!==null&&e.mode&1&&!(e.flags&128))wT(),ya(),e.flags|=98560,i=!1;else if(i=hu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Nn]=e}else ya(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),i=!1}else sn!==null&&(Gg(sn),sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?Tt===0&&(Tt=3):lx())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return va(),Lg(t,e),t===null&&oc(e.stateNode.containerInfo),Vt(e),null;case 10:return H0(e.type._context),Vt(e),null;case 17:return fr(e.type)&&Gh(),Vt(e),null;case 19:if(Ue(Xe),i=e.memoizedState,i===null)return Vt(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)el(i,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kh(t),o!==null){for(e.flags|=128,el(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Fe(Xe,Xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&ct()>wa&&(e.flags|=128,n=!0,el(i,!1),e.lanes=4194304)}else{if(!n)if(t=Kh(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),el(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!je)return Vt(e),null}else 2*ct()-i.renderingStartTime>wa&&r!==1073741824&&(e.flags|=128,n=!0,el(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ct(),e.sibling=null,r=Xe.current,Fe(Xe,n?r&1|2:r&1),e):(Vt(e),null);case 22:case 23:return ax(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Sr&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function AN(t,e){switch(j0(e),e.tag){case 1:return fr(e.type)&&Gh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return va(),Ue(dr),Ue(Yt),K0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return q0(e),null;case 13:if(Ue(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ya()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Xe),null;case 4:return va(),null;case 10:return H0(e.type._context),null;case 22:case 23:return ax(),null;case 24:return null;default:return null}}var pu=!1,zt=!1,SN=typeof WeakSet=="function"?WeakSet:Set,q=null;function zo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){nt(t,e,n)}else r.current=null}function Og(t,e,r){try{r()}catch(n){nt(t,e,n)}}var L_=!1;function TN(t,e){if(vg=Uh,t=lT(),U0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,h=0,u=t,d=null;t:for(;;){for(var f;u!==r||s!==0&&u.nodeType!==3||(a=o+s),u!==i||n!==0&&u.nodeType!==3||(l=o+n),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)d=u,u=f;for(;;){if(u===t)break t;if(d===r&&++c===s&&(a=o),d===i&&++h===n&&(l=o),(f=u.nextSibling)!==null)break;u=d,d=u.parentNode}u=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(_g={focusedElem:t,selectionRange:r},Uh=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:rn(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(_){nt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return p=L_,L_=!1,p}function Ol(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Og(e,r,i)}s=s.next}while(s!==n)}}function ef(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Bg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function sE(t){var e=t.alternate;e!==null&&(t.alternate=null,sE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[lc],delete e[Ag],delete e[aN],delete e[lN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iE(t){return t.tag===5||t.tag===3||t.tag===4}function O_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=$h));else if(n!==4&&(t=t.child,t!==null))for(Dg(t,e,r),t=t.sibling;t!==null;)Dg(t,e,r),t=t.sibling}function Ug(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ug(t,e,r),t=t.sibling;t!==null;)Ug(t,e,r),t=t.sibling}var It=null,nn=!1;function Ss(t,e,r){for(r=r.child;r!==null;)oE(t,e,r),r=r.sibling}function oE(t,e,r){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Wd,r)}catch{}switch(r.tag){case 5:zt||zo(r,e);case 6:var n=It,s=nn;It=null,Ss(t,e,r),It=n,nn=s,It!==null&&(nn?(t=It,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):It.removeChild(r.stateNode));break;case 18:It!==null&&(nn?(t=It,r=r.stateNode,t.nodeType===8?ap(t.parentNode,r):t.nodeType===1&&ap(t,r),nc(t)):ap(It,r.stateNode));break;case 4:n=It,s=nn,It=r.stateNode.containerInfo,nn=!0,Ss(t,e,r),It=n,nn=s;break;case 0:case 11:case 14:case 15:if(!zt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Og(r,e,o),s=s.next}while(s!==n)}Ss(t,e,r);break;case 1:if(!zt&&(zo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){nt(r,e,a)}Ss(t,e,r);break;case 21:Ss(t,e,r);break;case 22:r.mode&1?(zt=(n=zt)||r.memoizedState!==null,Ss(t,e,r),zt=n):Ss(t,e,r);break;default:Ss(t,e,r)}}function B_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new SN),e.forEach(function(n){var s=FN.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Kr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:It=a.stateNode,nn=!1;break e;case 3:It=a.stateNode.containerInfo,nn=!0;break e;case 4:It=a.stateNode.containerInfo,nn=!0;break e}a=a.return}if(It===null)throw Error($(160));oE(i,o,s),It=null,nn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){nt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aE(e,t),e=e.sibling}function aE(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kr(e,t),An(t),n&4){try{Ol(3,t,t.return),ef(3,t)}catch(m){nt(t,t.return,m)}try{Ol(5,t,t.return)}catch(m){nt(t,t.return,m)}}break;case 1:Kr(e,t),An(t),n&512&&r!==null&&zo(r,r.return);break;case 5:if(Kr(e,t),An(t),n&512&&r!==null&&zo(r,r.return),t.flags&32){var s=t.stateNode;try{Jl(s,"")}catch(m){nt(t,t.return,m)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&PS(s,i),cg(a,o);var c=cg(a,i);for(o=0;o<l.length;o+=2){var h=l[o],u=l[o+1];h==="style"?FS(s,u):h==="dangerouslySetInnerHTML"?kS(s,u):h==="children"?Jl(s,u):E0(s,h,u,c)}switch(a){case"input":sg(s,i);break;case"textarea":MS(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?ta(s,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?ta(s,!!i.multiple,i.defaultValue,!0):ta(s,!!i.multiple,i.multiple?[]:"",!1))}s[lc]=i}catch(m){nt(t,t.return,m)}}break;case 6:if(Kr(e,t),An(t),n&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){nt(t,t.return,m)}}break;case 3:if(Kr(e,t),An(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{nc(e.containerInfo)}catch(m){nt(t,t.return,m)}break;case 4:Kr(e,t),An(t);break;case 13:Kr(e,t),An(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ix=ct())),n&4&&B_(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(zt=(c=zt)||h,Kr(e,t),zt=c):Kr(e,t),An(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(q=t,h=t.child;h!==null;){for(u=q=h;q!==null;){switch(d=q,f=d.child,d.tag){case 0:case 11:case 14:case 15:Ol(4,d,d.return);break;case 1:zo(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){nt(n,r,m)}}break;case 5:zo(d,d.return);break;case 22:if(d.memoizedState!==null){U_(u);continue}}f!==null?(f.return=d,q=f):U_(u)}h=h.sibling}e:for(h=null,u=t;;){if(u.tag===5){if(h===null){h=u;try{s=u.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NS("display",o))}catch(m){nt(t,t.return,m)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){nt(t,t.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Kr(e,t),An(t),n&4&&B_(t);break;case 21:break;default:Kr(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(iE(r)){var n=r;break e}r=r.return}throw Error($(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Jl(s,""),n.flags&=-33);var i=O_(t);Ug(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=O_(t);Dg(t,a,o);break;default:throw Error($(161))}}catch(l){nt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function EN(t,e,r){q=t,lE(t)}function lE(t,e,r){for(var n=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||pu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||zt;a=pu;var c=zt;if(pu=o,(zt=l)&&!c)for(q=s;q!==null;)o=q,l=o.child,o.tag===22&&o.memoizedState!==null?V_(s):l!==null?(l.return=o,q=l):V_(s);for(;i!==null;)q=i,lE(i),i=i.sibling;q=s,pu=a,zt=c}D_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):D_(t)}}function D_(t){for(;q!==null;){var e=q;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zt||ef(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!zt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:rn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&b_(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}b_(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&nc(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}zt||e.flags&512&&Bg(e)}catch(d){nt(e,e.return,d)}}if(e===t){q=null;break}if(r=e.sibling,r!==null){r.return=e.return,q=r;break}q=e.return}}function U_(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var r=e.sibling;if(r!==null){r.return=e.return,q=r;break}q=e.return}}function V_(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ef(4,e)}catch(l){nt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){nt(e,s,l)}}var i=e.return;try{Bg(e)}catch(l){nt(e,i,l)}break;case 5:var o=e.return;try{Bg(e)}catch(l){nt(e,o,l)}}}catch(l){nt(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var CN=Math.ceil,Jh=_s.ReactCurrentDispatcher,nx=_s.ReactCurrentOwner,zr=_s.ReactCurrentBatchConfig,be=0,Mt=null,mt=null,Lt=0,Sr=0,Ho=ai(0),Tt=0,pc=null,Ji=0,tf=0,sx=0,Bl=null,or=null,ix=0,wa=1/0,qn=null,ed=!1,Vg=null,Ys=null,mu=!1,Os=null,td=0,Dl=0,jg=null,ch=-1,uh=0;function tr(){return be&6?ct():ch!==-1?ch:ch=ct()}function qs(t){return t.mode&1?be&2&&Lt!==0?Lt&-Lt:uN.transition!==null?(uh===0&&(uh=WS()),uh):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:JS(t.type)),t):1}function hn(t,e,r,n){if(50<Dl)throw Dl=0,jg=null,Error($(185));Oc(t,r,n),(!(be&2)||t!==Mt)&&(t===Mt&&(!(be&2)&&(tf|=r),Tt===4&&Fs(t,Lt)),pr(t,n),r===1&&be===0&&!(e.mode&1)&&(wa=ct()+500,Zd&&li()))}function pr(t,e){var r=t.callbackNode;u2(t,e);var n=Dh(t,t===Mt?Lt:0);if(n===0)r!==null&&qv(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&qv(r),e===1)t.tag===0?cN(j_.bind(null,t)):xT(j_.bind(null,t)),iN(function(){!(be&6)&&li()}),r=null;else{switch(XS(n)){case 1:r=I0;break;case 4:r=zS;break;case 16:r=Bh;break;case 536870912:r=HS;break;default:r=Bh}r=gE(r,cE.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function cE(t,e){if(ch=-1,uh=0,be&6)throw Error($(327));var r=t.callbackNode;if(oa()&&t.callbackNode!==r)return null;var n=Dh(t,t===Mt?Lt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=rd(t,n);else{e=n;var s=be;be|=2;var i=hE();(Mt!==t||Lt!==e)&&(qn=null,wa=ct()+500,Xi(t,e));do try{MN();break}catch(a){uE(t,a)}while(1);z0(),Jh.current=i,be=s,mt!==null?e=0:(Mt=null,Lt=0,e=Tt)}if(e!==0){if(e===2&&(s=pg(t),s!==0&&(n=s,e=$g(t,s))),e===1)throw r=pc,Xi(t,0),Fs(t,n),pr(t,ct()),r;if(e===6)Fs(t,n);else{if(s=t.current.alternate,!(n&30)&&!RN(s)&&(e=rd(t,n),e===2&&(i=pg(t),i!==0&&(n=i,e=$g(t,i))),e===1))throw r=pc,Xi(t,0),Fs(t,n),pr(t,ct()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error($(345));case 2:xi(t,or,qn);break;case 3:if(Fs(t,n),(n&130023424)===n&&(e=ix+500-ct(),10<e)){if(Dh(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){tr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bg(xi.bind(null,t,or,qn),e);break}xi(t,or,qn);break;case 4:if(Fs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-un(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=ct()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*CN(n/1960))-n,10<n){t.timeoutHandle=bg(xi.bind(null,t,or,qn),n);break}xi(t,or,qn);break;case 5:xi(t,or,qn);break;default:throw Error($(329))}}}return pr(t,ct()),t.callbackNode===r?cE.bind(null,t):null}function $g(t,e){var r=Bl;return t.current.memoizedState.isDehydrated&&(Xi(t,e).flags|=256),t=rd(t,e),t!==2&&(e=or,or=r,e!==null&&Gg(e)),t}function Gg(t){or===null?or=t:or.push.apply(or,t)}function RN(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!mn(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fs(t,e){for(e&=~sx,e&=~tf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-un(e),n=1<<r;t[r]=-1,e&=~n}}function j_(t){if(be&6)throw Error($(327));oa();var e=Dh(t,0);if(!(e&1))return pr(t,ct()),null;var r=rd(t,e);if(t.tag!==0&&r===2){var n=pg(t);n!==0&&(e=n,r=$g(t,n))}if(r===1)throw r=pc,Xi(t,0),Fs(t,e),pr(t,ct()),r;if(r===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xi(t,or,qn),pr(t,ct()),null}function ox(t,e){var r=be;be|=1;try{return t(e)}finally{be=r,be===0&&(wa=ct()+500,Zd&&li())}}function eo(t){Os!==null&&Os.tag===0&&!(be&6)&&oa();var e=be;be|=1;var r=zr.transition,n=Pe;try{if(zr.transition=null,Pe=1,t)return t()}finally{Pe=n,zr.transition=r,be=e,!(be&6)&&li()}}function ax(){Sr=Ho.current,Ue(Ho)}function Xi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,sN(r)),mt!==null)for(r=mt.return;r!==null;){var n=r;switch(j0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Gh();break;case 3:va(),Ue(dr),Ue(Yt),K0();break;case 5:q0(n);break;case 4:va();break;case 13:Ue(Xe);break;case 19:Ue(Xe);break;case 10:H0(n.type._context);break;case 22:case 23:ax()}r=r.return}if(Mt=t,mt=t=Ks(t.current,null),Lt=Sr=e,Tt=0,pc=null,sx=tf=Ji=0,or=Bl=null,Vi!==null){for(e=0;e<Vi.length;e++)if(r=Vi[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Vi=null}return t}function uE(t,e){do{var r=mt;try{if(z0(),oh.current=Qh,Zh){for(var n=Ze.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Zh=!1}if(Qi=0,Rt=At=Ze=null,Ll=!1,hc=0,nx.current=null,r===null||r.return===null){Tt=1,pc=e,mt=null;break}e:{var i=t,o=r.return,a=r,l=e;if(e=Lt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=R_(o);if(f!==null){f.flags&=-257,P_(f,o,a,i,e),f.mode&1&&C_(i,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){C_(i,c,e),lx();break e}l=Error($(426))}}else if(je&&a.mode&1){var g=R_(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),P_(g,o,a,i,e),$0(_a(l,a));break e}}i=l=_a(l,a),Tt!==4&&(Tt=2),Bl===null?Bl=[i]:Bl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=XT(i,l,e);w_(i,y);break e;case 1:a=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ys===null||!Ys.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=YT(i,a,e);w_(i,_);break e}}i=i.return}while(i!==null)}fE(r)}catch(b){e=b,mt===r&&r!==null&&(mt=r=r.return);continue}break}while(1)}function hE(){var t=Jh.current;return Jh.current=Qh,t===null?Qh:t}function lx(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Mt===null||!(Ji&268435455)&&!(tf&268435455)||Fs(Mt,Lt)}function rd(t,e){var r=be;be|=2;var n=hE();(Mt!==t||Lt!==e)&&(qn=null,Xi(t,e));do try{PN();break}catch(s){uE(t,s)}while(1);if(z0(),be=r,Jh.current=n,mt!==null)throw Error($(261));return Mt=null,Lt=0,Tt}function PN(){for(;mt!==null;)dE(mt)}function MN(){for(;mt!==null&&!t2();)dE(mt)}function dE(t){var e=mE(t.alternate,t,Sr);t.memoizedProps=t.pendingProps,e===null?fE(t):mt=e,nx.current=null}function fE(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=AN(r,e),r!==null){r.flags&=32767,mt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,mt=null;return}}else if(r=bN(r,e,Sr),r!==null){mt=r;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);Tt===0&&(Tt=5)}function xi(t,e,r){var n=Pe,s=zr.transition;try{zr.transition=null,Pe=1,IN(t,e,r,n)}finally{zr.transition=s,Pe=n}return null}function IN(t,e,r,n){do oa();while(Os!==null);if(be&6)throw Error($(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(h2(t,i),t===Mt&&(mt=Mt=null,Lt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||mu||(mu=!0,gE(Bh,function(){return oa(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=zr.transition,zr.transition=null;var o=Pe;Pe=1;var a=be;be|=4,nx.current=null,TN(t,r),aE(r,t),Z2(_g),Uh=!!vg,_g=vg=null,t.current=r,EN(r),r2(),be=a,Pe=o,zr.transition=i}else t.current=r;if(mu&&(mu=!1,Os=t,td=s),i=t.pendingLanes,i===0&&(Ys=null),i2(r.stateNode),pr(t,ct()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(ed)throw ed=!1,t=Vg,Vg=null,t;return td&1&&t.tag!==0&&oa(),i=t.pendingLanes,i&1?t===jg?Dl++:(Dl=0,jg=t):Dl=0,li(),null}function oa(){if(Os!==null){var t=XS(td),e=zr.transition,r=Pe;try{if(zr.transition=null,Pe=16>t?16:t,Os===null)var n=!1;else{if(t=Os,Os=null,td=0,be&6)throw Error($(331));var s=be;for(be|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(q=c;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:Ol(8,h,i)}var u=h.child;if(u!==null)u.return=h,q=u;else for(;q!==null;){h=q;var d=h.sibling,f=h.return;if(sE(h),h===c){q=null;break}if(d!==null){d.return=f,q=d;break}q=f}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ol(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,q=y;break e}q=i.return}}var v=t.current;for(q=v;q!==null;){o=q;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,q=x;else e:for(o=v;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ef(9,a)}}catch(b){nt(a,a.return,b)}if(a===o){q=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,q=_;break e}q=a.return}}if(be=s,li(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Wd,t)}catch{}n=!0}return n}finally{Pe=r,zr.transition=e}}return!1}function $_(t,e,r){e=_a(r,e),e=XT(t,e,1),t=Xs(t,e,1),e=tr(),t!==null&&(Oc(t,1,e),pr(t,e))}function nt(t,e,r){if(t.tag===3)$_(t,t,r);else for(;e!==null;){if(e.tag===3){$_(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ys===null||!Ys.has(n))){t=_a(r,t),t=YT(e,t,1),e=Xs(e,t,1),t=tr(),e!==null&&(Oc(e,1,t),pr(e,t));break}}e=e.return}}function kN(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=tr(),t.pingedLanes|=t.suspendedLanes&r,Mt===t&&(Lt&r)===r&&(Tt===4||Tt===3&&(Lt&130023424)===Lt&&500>ct()-ix?Xi(t,0):sx|=r),pr(t,e)}function pE(t,e){e===0&&(t.mode&1?(e=iu,iu<<=1,!(iu&130023424)&&(iu=4194304)):e=1);var r=tr();t=ds(t,e),t!==null&&(Oc(t,e,r),pr(t,r))}function NN(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),pE(t,r)}function FN(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error($(314))}n!==null&&n.delete(e),pE(t,r)}var mE;mE=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||dr.current)ur=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ur=!1,wN(t,e,r);ur=!!(t.flags&131072)}else ur=!1,je&&e.flags&1048576&&vT(e,Wh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;lh(t,e),t=e.pendingProps;var s=ga(e,Yt.current);ia(e,r),s=Q0(null,e,n,t,s,r);var i=J0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fr(n)?(i=!0,zh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,X0(e),s.updater=Jd,e.stateNode=s,s._reactInternals=e,Pg(e,n,t,r),e=kg(null,e,n,!0,i,r)):(e.tag=0,je&&i&&V0(e),Jt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(lh(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=ON(n),t=rn(n,t),s){case 0:e=Ig(null,e,n,t,r);break e;case 1:e=k_(null,e,n,t,r);break e;case 11:e=M_(null,e,n,t,r);break e;case 14:e=I_(null,e,n,rn(n.type,t),r);break e}throw Error($(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:rn(n,s),Ig(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:rn(n,s),k_(t,e,n,s,r);case 3:e:{if(QT(e),t===null)throw Error($(387));n=e.pendingProps,i=e.memoizedState,s=i.element,TT(t,e),qh(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_a(Error($(423)),e),e=N_(t,e,n,r,s);break e}else if(n!==s){s=_a(Error($(424)),e),e=N_(t,e,n,r,s);break e}else for(Tr=Ws(e.stateNode.containerInfo.firstChild),Cr=e,je=!0,sn=null,r=AT(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ya(),n===s){e=fs(t,e,r);break e}Jt(t,e,n,r)}e=e.child}return e;case 5:return ET(e),t===null&&Eg(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,wg(n,s)?o=null:i!==null&&wg(n,i)&&(e.flags|=32),ZT(t,e),Jt(t,e,o,r),e.child;case 6:return t===null&&Eg(e),null;case 13:return JT(t,e,r);case 4:return Y0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=xa(e,null,n,r):Jt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:rn(n,s),M_(t,e,n,s,r);case 7:return Jt(t,e,e.pendingProps,r),e.child;case 8:return Jt(t,e,e.pendingProps.children,r),e.child;case 12:return Jt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Fe(Xh,n._currentValue),n._currentValue=o,i!==null)if(mn(i.value,o)){if(i.children===s.children&&!dr.current){e=fs(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=rs(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Cg(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Cg(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Jt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ia(e,r),s=Hr(s),n=n(s),e.flags|=1,Jt(t,e,n,r),e.child;case 14:return n=e.type,s=rn(n,e.pendingProps),s=rn(n.type,s),I_(t,e,n,s,r);case 15:return qT(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:rn(n,s),lh(t,e),e.tag=1,fr(n)?(t=!0,zh(e)):t=!1,ia(e,r),WT(e,n,s),Pg(e,n,s,r),kg(null,e,n,!0,t,r);case 19:return eE(t,e,r);case 22:return KT(t,e,r)}throw Error($(156,e.tag))};function gE(t,e){return GS(t,e)}function LN(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(t,e,r,n){return new LN(t,e,r,n)}function cx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ON(t){if(typeof t=="function")return cx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R0)return 11;if(t===P0)return 14}return 2}function Ks(t,e){var r=t.alternate;return r===null?(r=Ur(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function hh(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")cx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Lo:return Yi(r.children,s,i,e);case C0:o=8,s|=8;break;case Jm:return t=Ur(12,r,e,s|2),t.elementType=Jm,t.lanes=i,t;case eg:return t=Ur(13,r,e,s),t.elementType=eg,t.lanes=i,t;case tg:return t=Ur(19,r,e,s),t.elementType=tg,t.lanes=i,t;case ES:return rf(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SS:o=10;break e;case TS:o=9;break e;case R0:o=11;break e;case P0:o=14;break e;case Ms:o=16,n=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Ur(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Yi(t,e,r,n){return t=Ur(7,t,n,e),t.lanes=r,t}function rf(t,e,r,n){return t=Ur(22,t,n,e),t.elementType=ES,t.lanes=r,t.stateNode={isHidden:!1},t}function mp(t,e,r){return t=Ur(6,t,null,e),t.lanes=r,t}function gp(t,e,r){return e=Ur(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BN(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kf(0),this.expirationTimes=Kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kf(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ux(t,e,r,n,s,i,o,a,l){return t=new BN(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ur(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},X0(i),t}function DN(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function yE(t){if(!t)return ri;t=t._reactInternals;e:{if(lo(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var r=t.type;if(fr(r))return yT(t,r,e)}return e}function xE(t,e,r,n,s,i,o,a,l){return t=ux(r,n,!0,t,s,i,o,a,l),t.context=yE(null),r=t.current,n=tr(),s=qs(r),i=rs(n,s),i.callback=e??null,Xs(r,i,s),t.current.lanes=s,Oc(t,s,n),pr(t,n),t}function nf(t,e,r,n){var s=e.current,i=tr(),o=qs(s);return r=yE(r),e.context===null?e.context=r:e.pendingContext=r,e=rs(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Xs(s,e,o),t!==null&&(hn(t,s,o,i),ih(t,s,o)),o}function nd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function hx(t,e){G_(t,e),(t=t.alternate)&&G_(t,e)}function UN(){return null}var vE=typeof reportError=="function"?reportError:function(t){console.error(t)};function dx(t){this._internalRoot=t}sf.prototype.render=dx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));nf(t,e,null,null)};sf.prototype.unmount=dx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;eo(function(){nf(null,t,null,null)}),e[hs]=null}};function sf(t){this._internalRoot=t}sf.prototype.unstable_scheduleHydration=function(t){if(t){var e=KS();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ns.length&&e!==0&&e<Ns[r].priority;r++);Ns.splice(r,0,t),r===0&&QS(t)}};function fx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function of(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function z_(){}function VN(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=nd(o);i.call(c)}}var o=xE(e,n,t,0,null,!1,!1,"",z_);return t._reactRootContainer=o,t[hs]=o.current,oc(t.nodeType===8?t.parentNode:t),eo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=nd(l);a.call(c)}}var l=ux(t,0,!1,null,null,!1,!1,"",z_);return t._reactRootContainer=l,t[hs]=l.current,oc(t.nodeType===8?t.parentNode:t),eo(function(){nf(e,l,r,n)}),l}function af(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=nd(o);a.call(l)}}nf(e,o,t,s)}else o=VN(r,e,t,s,n);return nd(o)}YS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=xl(e.pendingLanes);r!==0&&(k0(e,r|1),pr(e,ct()),!(be&6)&&(wa=ct()+500,li()))}break;case 13:eo(function(){var n=ds(t,1);if(n!==null){var s=tr();hn(n,t,1,s)}}),hx(t,1)}};N0=function(t){if(t.tag===13){var e=ds(t,134217728);if(e!==null){var r=tr();hn(e,t,134217728,r)}hx(t,134217728)}};qS=function(t){if(t.tag===13){var e=qs(t),r=ds(t,e);if(r!==null){var n=tr();hn(r,t,e,n)}hx(t,e)}};KS=function(){return Pe};ZS=function(t,e){var r=Pe;try{return Pe=t,e()}finally{Pe=r}};hg=function(t,e,r){switch(e){case"input":if(sg(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Kd(n);if(!s)throw Error($(90));RS(n),sg(n,s)}}}break;case"textarea":MS(t,r);break;case"select":e=r.value,e!=null&&ta(t,!!r.multiple,e,!1)}};BS=ox;DS=eo;var jN={usingClientEntryPoint:!1,Events:[Dc,Uo,Kd,LS,OS,ox]},tl={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$N={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_s.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jS(t),t===null?null:t.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||UN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gu.isDisabled&&gu.supportsFiber)try{Wd=gu.inject($N),Bn=gu}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jN;Ir.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fx(e))throw Error($(200));return DN(t,e,null,r)};Ir.createRoot=function(t,e){if(!fx(t))throw Error($(299));var r=!1,n="",s=vE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ux(t,1,!1,null,null,r,!1,n,s),t[hs]=e.current,oc(t.nodeType===8?t.parentNode:t),new dx(e)};Ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=jS(e),t=t===null?null:t.stateNode,t};Ir.flushSync=function(t){return eo(t)};Ir.hydrate=function(t,e,r){if(!of(e))throw Error($(200));return af(null,t,e,!0,r)};Ir.hydrateRoot=function(t,e,r){if(!fx(t))throw Error($(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=vE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=xE(e,null,t,1,r??null,s,!1,i,o),t[hs]=e.current,oc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new sf(e)};Ir.render=function(t,e,r){if(!of(e))throw Error($(200));return af(null,t,e,!1,r)};Ir.unmountComponentAtNode=function(t){if(!of(t))throw Error($(40));return t._reactRootContainer?(eo(function(){af(null,null,t,!1,function(){t._reactRootContainer=null,t[hs]=null})}),!0):!1};Ir.unstable_batchedUpdates=ox;Ir.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!of(r))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return af(t,e,r,!1,n)};Ir.version="18.3.1-next-f1338f8080-20240426";function _E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_E)}catch(t){console.error(t)}}_E(),_S.exports=Ir;var GN=_S.exports,H_=GN;Zm.createRoot=H_.createRoot,Zm.hydrateRoot=H_.hydrateRoot;function wE(t,e){return function(){return t.apply(e,arguments)}}const{toString:zN}=Object.prototype,{getPrototypeOf:px}=Object,{iterator:lf,toStringTag:bE}=Symbol,cf=(t=>e=>{const r=zN.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),gn=t=>(t=t.toLowerCase(),e=>cf(e)===t),uf=t=>e=>typeof e===t,{isArray:Ba}=Array,mc=uf("undefined");function Vc(t){return t!==null&&!mc(t)&&t.constructor!==null&&!mc(t.constructor)&&mr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const AE=gn("ArrayBuffer");function HN(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&AE(t.buffer),e}const WN=uf("string"),mr=uf("function"),SE=uf("number"),jc=t=>t!==null&&typeof t=="object",XN=t=>t===!0||t===!1,dh=t=>{if(cf(t)!=="object")return!1;const e=px(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(bE in t)&&!(lf in t)},YN=t=>{if(!jc(t)||Vc(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},qN=gn("Date"),KN=gn("File"),ZN=gn("Blob"),QN=gn("FileList"),JN=t=>jc(t)&&mr(t.pipe),eF=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||mr(t.append)&&((e=cf(t))==="formdata"||e==="object"&&mr(t.toString)&&t.toString()==="[object FormData]"))},tF=gn("URLSearchParams"),[rF,nF,sF,iF]=["ReadableStream","Request","Response","Headers"].map(gn),oF=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $c(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Ba(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{if(Vc(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(n=0;n<o;n++)a=i[n],e.call(null,t[a],a,t)}}function TE(t,e){if(Vc(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const $i=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),EE=t=>!mc(t)&&t!==$i;function zg(){const{caseless:t}=EE(this)&&this||{},e={},r=(n,s)=>{const i=t&&TE(e,s)||s;dh(e[i])&&dh(n)?e[i]=zg(e[i],n):dh(n)?e[i]=zg({},n):Ba(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&$c(arguments[n],r);return e}const aF=(t,e,r,{allOwnKeys:n}={})=>($c(e,(s,i)=>{r&&mr(s)?t[i]=wE(s,r):t[i]=s},{allOwnKeys:n}),t),lF=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),cF=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},uF=(t,e,r,n)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&px(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},hF=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},dF=t=>{if(!t)return null;if(Ba(t))return t;let e=t.length;if(!SE(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},fF=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&px(Uint8Array)),pF=(t,e)=>{const n=(t&&t[lf]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},mF=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},gF=gn("HTMLFormElement"),yF=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),W_=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),xF=gn("RegExp"),CE=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};$c(r,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(n[i]=o||s)}),Object.defineProperties(t,n)},vF=t=>{CE(t,(e,r)=>{if(mr(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(mr(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},_F=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Ba(t)?n(t):n(String(t).split(e)),r},wF=()=>{},bF=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function AF(t){return!!(t&&mr(t.append)&&t[bE]==="FormData"&&t[lf])}const SF=t=>{const e=new Array(10),r=(n,s)=>{if(jc(n)){if(e.indexOf(n)>=0)return;if(Vc(n))return n;if(!("toJSON"in n)){e[s]=n;const i=Ba(n)?[]:{};return $c(n,(o,a)=>{const l=r(o,s+1);!mc(l)&&(i[a]=l)}),e[s]=void 0,i}}return n};return r(t,0)},TF=gn("AsyncFunction"),EF=t=>t&&(jc(t)||mr(t))&&mr(t.then)&&mr(t.catch),RE=((t,e)=>t?setImmediate:e?((r,n)=>($i.addEventListener("message",({source:s,data:i})=>{s===$i&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),$i.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",mr($i.postMessage)),CF=typeof queueMicrotask<"u"?queueMicrotask.bind($i):typeof process<"u"&&process.nextTick||RE,RF=t=>t!=null&&mr(t[lf]),N={isArray:Ba,isArrayBuffer:AE,isBuffer:Vc,isFormData:eF,isArrayBufferView:HN,isString:WN,isNumber:SE,isBoolean:XN,isObject:jc,isPlainObject:dh,isEmptyObject:YN,isReadableStream:rF,isRequest:nF,isResponse:sF,isHeaders:iF,isUndefined:mc,isDate:qN,isFile:KN,isBlob:ZN,isRegExp:xF,isFunction:mr,isStream:JN,isURLSearchParams:tF,isTypedArray:fF,isFileList:QN,forEach:$c,merge:zg,extend:aF,trim:oF,stripBOM:lF,inherits:cF,toFlatObject:uF,kindOf:cf,kindOfTest:gn,endsWith:hF,toArray:dF,forEachEntry:pF,matchAll:mF,isHTMLForm:gF,hasOwnProperty:W_,hasOwnProp:W_,reduceDescriptors:CE,freezeMethods:vF,toObjectSet:_F,toCamelCase:yF,noop:wF,toFiniteNumber:bF,findKey:TE,global:$i,isContextDefined:EE,isSpecCompliantForm:AF,toJSONObject:SF,isAsyncFn:TF,isThenable:EF,setImmediate:RE,asap:CF,isIterable:RF};function le(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}N.inherits(le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.status}}});const PE=le.prototype,ME={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ME[t]={value:t}});Object.defineProperties(le,ME);Object.defineProperty(PE,"isAxiosError",{value:!0});le.from=(t,e,r,n,s,i)=>{const o=Object.create(PE);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),le.call(o,t.message,e,r,n,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const PF=null;function Hg(t){return N.isPlainObject(t)||N.isArray(t)}function IE(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function X_(t,e,r){return t?t.concat(e).map(function(s,i){return s=IE(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function MF(t){return N.isArray(t)&&!t.some(Hg)}const IF=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function hf(t,e,r){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=N.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!N.isUndefined(g[m])});const n=r.metaTokens,s=r.visitor||h,i=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(s))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(N.isDate(p))return p.toISOString();if(N.isBoolean(p))return p.toString();if(!l&&N.isBlob(p))throw new le("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(p)||N.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function h(p,m,g){let y=p;if(p&&!g&&typeof p=="object"){if(N.endsWith(m,"{}"))m=n?m:m.slice(0,-2),p=JSON.stringify(p);else if(N.isArray(p)&&MF(p)||(N.isFileList(p)||N.endsWith(m,"[]"))&&(y=N.toArray(p)))return m=IE(m),y.forEach(function(x,_){!(N.isUndefined(x)||x===null)&&e.append(o===!0?X_([m],_,i):o===null?m:m+"[]",c(x))}),!1}return Hg(p)?!0:(e.append(X_(g,m,i),c(p)),!1)}const u=[],d=Object.assign(IF,{defaultVisitor:h,convertValue:c,isVisitable:Hg});function f(p,m){if(!N.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(p),N.forEach(p,function(y,v){(!(N.isUndefined(y)||y===null)&&s.call(e,y,N.isString(v)?v.trim():v,m,d))===!0&&f(y,m?m.concat(v):[v])}),u.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return f(t),e}function Y_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function mx(t,e){this._pairs=[],t&&hf(t,this,e)}const kE=mx.prototype;kE.append=function(e,r){this._pairs.push([e,r])};kE.toString=function(e){const r=e?function(n){return e.call(this,n,Y_)}:Y_;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function kF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function NE(t,e,r){if(!e)return t;const n=r&&r.encode||kF;N.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(e,r):i=N.isURLSearchParams(e)?e.toString():new mx(e,r).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class NF{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(n){n!==null&&e(n)})}}const q_=NF,FE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FF=typeof URLSearchParams<"u"?URLSearchParams:mx,LF=typeof FormData<"u"?FormData:null,OF=typeof Blob<"u"?Blob:null,BF={isBrowser:!0,classes:{URLSearchParams:FF,FormData:LF,Blob:OF},protocols:["http","https","file","blob","url","data"]},gx=typeof window<"u"&&typeof document<"u",Wg=typeof navigator=="object"&&navigator||void 0,DF=gx&&(!Wg||["ReactNative","NativeScript","NS"].indexOf(Wg.product)<0),UF=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),VF=gx&&window.location.href||"http://localhost",jF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gx,hasStandardBrowserEnv:DF,hasStandardBrowserWebWorkerEnv:UF,navigator:Wg,origin:VF},Symbol.toStringTag,{value:"Module"})),Ht={...jF,...BF};function $F(t,e){return hf(t,new Ht.classes.URLSearchParams,{visitor:function(r,n,s,i){return Ht.isNode&&N.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function GF(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zF(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function LE(t){function e(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=r.length;return o=!o&&N.isArray(s)?s.length:o,l?(N.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!N.isObject(s[o]))&&(s[o]=[]),e(r,n,s[o],i)&&N.isArray(s[o])&&(s[o]=zF(s[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const r={};return N.forEachEntry(t,(n,s)=>{e(GF(n),s,r,0)}),r}return null}function HF(t,e,r){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const yx={transitional:FE,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=N.isObject(e);if(i&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return s?JSON.stringify(LE(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e)||N.isReadableStream(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return $F(e,this.formSerializer).toString();if((a=N.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return hf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),HF(e)):e}],transformResponse:[function(e){const r=this.transitional||yx.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(N.isResponse(e)||N.isReadableStream(e))return e;if(e&&N.isString(e)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?le.from(a,le.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ht.classes.FormData,Blob:Ht.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{yx.headers[t]={}});const xx=yx,WF=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),XF=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||e[r]&&WF[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},K_=Symbol("internals");function rl(t){return t&&String(t).trim().toLowerCase()}function fh(t){return t===!1||t==null?t:N.isArray(t)?t.map(fh):String(t)}function YF(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const qF=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function yp(t,e,r,n,s){if(N.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!N.isString(e)){if(N.isString(n))return e.indexOf(n)!==-1;if(N.isRegExp(n))return n.test(e)}}function KF(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function ZF(t,e){const r=N.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,o){return this[n].call(this,e,s,i,o)},configurable:!0})})}class df{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(a,l,c){const h=rl(l);if(!h)throw new Error("header name must be a non-empty string");const u=N.findKey(s,h);(!u||s[u]===void 0||c===!0||c===void 0&&s[u]!==!1)&&(s[u||l]=fh(a))}const o=(a,l)=>N.forEach(a,(c,h)=>i(c,h,l));if(N.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(N.isString(e)&&(e=e.trim())&&!qF(e))o(XF(e),r);else if(N.isObject(e)&&N.isIterable(e)){let a={},l,c;for(const h of e){if(!N.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[c=h[0]]=(l=a[c])?N.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(a,r)}else e!=null&&i(r,e,n);return this}get(e,r){if(e=rl(e),e){const n=N.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return YF(s);if(N.isFunction(r))return r.call(this,s,n);if(N.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=rl(e),e){const n=N.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||yp(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(o){if(o=rl(o),o){const a=N.findKey(n,o);a&&(!r||yp(n,n[a],a,r))&&(delete n[a],s=!0)}}return N.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||yp(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return N.forEach(this,(s,i)=>{const o=N.findKey(n,i);if(o){r[o]=fh(s),delete r[i];return}const a=e?KF(i):String(i).trim();a!==i&&delete r[i],r[a]=fh(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return N.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&N.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[K_]=this[K_]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=rl(o);n[a]||(ZF(s,o),n[a]=!0)}return N.isArray(e)?e.forEach(i):i(e),this}}df.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(df.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});N.freezeMethods(df);const dn=df;function xp(t,e){const r=this||xx,n=e||r,s=dn.from(n.headers);let i=n.data;return N.forEach(t,function(a){i=a.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function OE(t){return!!(t&&t.__CANCEL__)}function Da(t,e,r){le.call(this,t??"canceled",le.ERR_CANCELED,e,r),this.name="CanceledError"}N.inherits(Da,le,{__CANCEL__:!0});function BE(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new le("Request failed with status code "+r.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function QF(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function JF(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=n[i];o||(o=c),r[s]=l,n[s]=c;let u=i,d=0;for(;u!==s;)d+=r[u++],u=u%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const f=h&&c-h;return f?Math.round(d*1e3/f):void 0}}function eL(t,e){let r=0,n=1e3/e,s,i;const o=(c,h=Date.now())=>{r=h,s=null,i&&(clearTimeout(i),i=null),t(...c)};return[(...c)=>{const h=Date.now(),u=h-r;u>=n?o(c,h):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},n-u)))},()=>s&&o(s)]}const sd=(t,e,r=3)=>{let n=0;const s=JF(50,250);return eL(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-n,c=s(l),h=o<=a;n=o;const u={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(u)},r)},Z_=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},Q_=t=>(...e)=>N.asap(()=>t(...e)),tL=Ht.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Ht.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Ht.origin),Ht.navigator&&/(msie|trident)/i.test(Ht.navigator.userAgent)):()=>!0,rL=Ht.hasStandardBrowserEnv?{write(t,e,r,n,s,i){const o=[t+"="+encodeURIComponent(e)];N.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),N.isString(n)&&o.push("path="+n),N.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function nL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function sL(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function DE(t,e,r){let n=!nL(e);return t&&(n||r==!1)?sL(t,e):e}const J_=t=>t instanceof dn?{...t}:t;function to(t,e){e=e||{};const r={};function n(c,h,u,d){return N.isPlainObject(c)&&N.isPlainObject(h)?N.merge.call({caseless:d},c,h):N.isPlainObject(h)?N.merge({},h):N.isArray(h)?h.slice():h}function s(c,h,u,d){if(N.isUndefined(h)){if(!N.isUndefined(c))return n(void 0,c,u,d)}else return n(c,h,u,d)}function i(c,h){if(!N.isUndefined(h))return n(void 0,h)}function o(c,h){if(N.isUndefined(h)){if(!N.isUndefined(c))return n(void 0,c)}else return n(void 0,h)}function a(c,h,u){if(u in e)return n(c,h);if(u in t)return n(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,u)=>s(J_(c),J_(h),u,!0)};return N.forEach(Object.keys({...t,...e}),function(h){const u=l[h]||s,d=u(t[h],e[h],h);N.isUndefined(d)&&u!==a||(r[h]=d)}),r}const UE=t=>{const e=to({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=dn.from(o),e.url=NE(DE(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(N.isFormData(r)){if(Ht.hasStandardBrowserEnv||Ht.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(u=>u.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(Ht.hasStandardBrowserEnv&&(n&&N.isFunction(n)&&(n=n(e)),n||n!==!1&&tL(e.url))){const c=s&&i&&rL.read(i);c&&o.set(s,c)}return e},iL=typeof XMLHttpRequest<"u",oL=iL&&function(t){return new Promise(function(r,n){const s=UE(t);let i=s.data;const o=dn.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,h,u,d,f,p;function m(){f&&f(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function y(){if(!g)return;const x=dn.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:x,config:t,request:g};BE(function(S){r(S),m()},function(S){n(S),m()},b),g=null}"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(y)},g.onabort=function(){g&&(n(new le("Request aborted",le.ECONNABORTED,t,g)),g=null)},g.onerror=function(){n(new le("Network Error",le.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let _=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const b=s.transitional||FE;s.timeoutErrorMessage&&(_=s.timeoutErrorMessage),n(new le(_,b.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,t,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&N.forEach(o.toJSON(),function(_,b){g.setRequestHeader(b,_)}),N.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),a&&a!=="json"&&(g.responseType=s.responseType),c&&([d,p]=sd(c,!0),g.addEventListener("progress",d)),l&&g.upload&&([u,f]=sd(l),g.upload.addEventListener("progress",u),g.upload.addEventListener("loadend",f)),(s.cancelToken||s.signal)&&(h=x=>{g&&(n(!x||x.type?new Da(null,t,g):x),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const v=QF(s.url);if(v&&Ht.protocols.indexOf(v)===-1){n(new le("Unsupported protocol "+v+":",le.ERR_BAD_REQUEST,t));return}g.send(i||null)})},aL=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const i=function(c){if(!s){s=!0,a();const h=c instanceof Error?c:this.reason;n.abort(h instanceof le?h:new Da(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new le(`timeout ${e} of ms exceeded`,le.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=n;return l.unsubscribe=()=>N.asap(a),l}},lL=aL,cL=function*(t,e){let r=t.byteLength;if(!e||r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},uL=async function*(t,e){for await(const r of hL(t))yield*cL(r,e)},hL=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},e1=(t,e,r,n)=>{const s=uL(t,e);let i=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await s.next();if(c){a(),l.close();return}let u=h.byteLength;if(r){let d=i+=u;r(d)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},ff=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",VE=ff&&typeof ReadableStream=="function",dL=ff&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),jE=(t,...e)=>{try{return!!t(...e)}catch{return!1}},fL=VE&&jE(()=>{let t=!1;const e=new Request(Ht.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),t1=64*1024,Xg=VE&&jE(()=>N.isReadableStream(new Response("").body)),id={stream:Xg&&(t=>t.body)};ff&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!id[e]&&(id[e]=N.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new le(`Response type '${e}' is not supported`,le.ERR_NOT_SUPPORT,n)})})})(new Response);const pL=async t=>{if(t==null)return 0;if(N.isBlob(t))return t.size;if(N.isSpecCompliantForm(t))return(await new Request(Ht.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(N.isArrayBufferView(t)||N.isArrayBuffer(t))return t.byteLength;if(N.isURLSearchParams(t)&&(t=t+""),N.isString(t))return(await dL(t)).byteLength},mL=async(t,e)=>{const r=N.toFiniteNumber(t.getContentLength());return r??pL(e)},gL=ff&&(async t=>{let{url:e,method:r,data:n,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:u="same-origin",fetchOptions:d}=UE(t);c=c?(c+"").toLowerCase():"text";let f=lL([s,i&&i.toAbortSignal()],o),p;const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&fL&&r!=="get"&&r!=="head"&&(g=await mL(h,n))!==0){let b=new Request(e,{method:"POST",body:n,duplex:"half"}),A;if(N.isFormData(n)&&(A=b.headers.get("content-type"))&&h.setContentType(A),b.body){const[S,T]=Z_(g,sd(Q_(l)));n=e1(b.body,t1,S,T)}}N.isString(u)||(u=u?"include":"omit");const y="credentials"in Request.prototype;p=new Request(e,{...d,signal:f,method:r.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:y?u:void 0});let v=await fetch(p,d);const x=Xg&&(c==="stream"||c==="response");if(Xg&&(a||x&&m)){const b={};["status","statusText","headers"].forEach(E=>{b[E]=v[E]});const A=N.toFiniteNumber(v.headers.get("content-length")),[S,T]=a&&Z_(A,sd(Q_(a),!0))||[];v=new Response(e1(v.body,t1,S,()=>{T&&T(),m&&m()}),b)}c=c||"text";let _=await id[N.findKey(id,c)||"text"](v,t);return!x&&m&&m(),await new Promise((b,A)=>{BE(b,A,{data:_,headers:dn.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:p})})}catch(y){throw m&&m(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new le("Network Error",le.ERR_NETWORK,t,p),{cause:y.cause||y}):le.from(y,y&&y.code,t,p)}}),Yg={http:PF,xhr:oL,fetch:gL};N.forEach(Yg,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const r1=t=>`- ${t}`,yL=t=>N.isFunction(t)||t===null||t===!1,$E={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let i=0;i<e;i++){r=t[i];let o;if(n=r,!yL(r)&&(n=Yg[(o=String(r)).toLowerCase()],n===void 0))throw new le(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+i]=n}if(!n){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(r1).join(`
`):" "+r1(i[0]):"as no adapter specified";throw new le("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Yg};function vp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Da(null,t)}function n1(t){return vp(t),t.headers=dn.from(t.headers),t.data=xp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),$E.getAdapter(t.adapter||xx.adapter)(t).then(function(n){return vp(t),n.data=xp.call(t,t.transformResponse,n),n.headers=dn.from(n.headers),n},function(n){return OE(n)||(vp(t),n&&n.response&&(n.response.data=xp.call(t,t.transformResponse,n.response),n.response.headers=dn.from(n.response.headers))),Promise.reject(n)})}const GE="1.11.0",pf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{pf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const s1={};pf.transitional=function(e,r,n){function s(i,o){return"[Axios v"+GE+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(e===!1)throw new le(s(o," has been removed"+(r?" in "+r:"")),le.ERR_DEPRECATED);return r&&!s1[o]&&(s1[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,a):!0}};pf.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function xL(t,e,r){if(typeof t!="object")throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new le("option "+i+" must be "+l,le.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new le("Unknown option "+i,le.ERR_BAD_OPTION)}}const ph={assertOptions:xL,validators:pf},Sn=ph.validators;class od{constructor(e){this.defaults=e||{},this.interceptors={request:new q_,response:new q_}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=to(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&ph.assertOptions(n,{silentJSONParsing:Sn.transitional(Sn.boolean),forcedJSONParsing:Sn.transitional(Sn.boolean),clarifyTimeoutError:Sn.transitional(Sn.boolean)},!1),s!=null&&(N.isFunction(s)?r.paramsSerializer={serialize:s}:ph.assertOptions(s,{encode:Sn.function,serialize:Sn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ph.assertOptions(r,{baseUrl:Sn.spelling("baseURL"),withXsrfToken:Sn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&N.merge(i.common,i[r.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=dn.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let h,u=0,d;if(!l){const p=[n1.bind(this),void 0];for(p.unshift(...a),p.push(...c),d=p.length,h=Promise.resolve(r);u<d;)h=h.then(p[u++],p[u++]);return h}d=a.length;let f=r;for(u=0;u<d;){const p=a[u++],m=a[u++];try{f=p(f)}catch(g){m.call(this,g);break}}try{h=n1.call(this,f)}catch(p){return Promise.reject(p)}for(u=0,d=c.length;u<d;)h=h.then(c[u++],c[u++]);return h}getUri(e){e=to(this.defaults,e);const r=DE(e.baseURL,e.url,e.allowAbsoluteUrls);return NE(r,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){od.prototype[e]=function(r,n){return this.request(to(n||{},{method:e,url:r,data:(n||{}).data}))}});N.forEach(["post","put","patch"],function(e){function r(n){return function(i,o,a){return this.request(to(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}od.prototype[e]=r(),od.prototype[e+"Form"]=r(!0)});const mh=od;class vx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,a){n.reason||(n.reason=new Da(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new vx(function(s){e=s}),cancel:e}}}const vL=vx;function _L(t){return function(r){return t.apply(null,r)}}function wL(t){return N.isObject(t)&&t.isAxiosError===!0}const qg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qg).forEach(([t,e])=>{qg[e]=t});const bL=qg;function zE(t){const e=new mh(t),r=wE(mh.prototype.request,e);return N.extend(r,mh.prototype,e,{allOwnKeys:!0}),N.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return zE(to(t,s))},r}const yt=zE(xx);yt.Axios=mh;yt.CanceledError=Da;yt.CancelToken=vL;yt.isCancel=OE;yt.VERSION=GE;yt.toFormData=hf;yt.AxiosError=le;yt.Cancel=yt.CanceledError;yt.all=function(e){return Promise.all(e)};yt.spread=_L;yt.isAxiosError=wL;yt.mergeConfig=to;yt.AxiosHeaders=dn;yt.formToJSON=t=>LE(N.isHTMLForm(t)?new FormData(t):t);yt.getAdapter=$E.getAdapter;yt.HttpStatusCode=bL;yt.default=yt;const AL=yt,Ie=AL.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});Ie.interceptors.request.use(t=>{if(t.url.startsWith("/admin/")){const e=localStorage.getItem("zoggy_admin_token");e&&(t.headers.Authorization=`Bearer ${e}`)}else{const e=localStorage.getItem("zoggy_token");e&&(t.headers.Authorization=`Bearer ${e}`)}return t});Ie.interceptors.response.use(t=>t,t=>{var e,r,n;return((e=t.response)==null?void 0:e.status)===401&&((n=(r=t.config)==null?void 0:r.url)!=null&&n.startsWith("/admin/")?(localStorage.removeItem("zoggy_admin_token"),window.location.href="/"):(localStorage.removeItem("zoggy_token"),window.location.href="/signin")),Promise.reject(t)});const ba={signup:(t,e=null,r=null)=>Ie.post("/auth/signup",{email:t,ref:e,deviceFingerprint:r,timestamp:Date.now()}),signin:t=>Ie.post("/auth/signin",{email:t}),getMe:()=>Ie.get("/me"),resendVerification:t=>Ie.post("/auth/resend",{email:t}),checkEmailExists:t=>Ie.post("/auth/check-email",{email:t})},HE={register:(t,e)=>Ie.post("/auth/register",{email:t,referralCode:e}),login:t=>Ie.post("/auth/login",{email:t}),verifyEmail:t=>Ie.post("/auth/verify-email",{token:t}),getProfile:()=>Ie.get("/auth/profile"),getDashboard:()=>Ie.get("/dashboard")},i1={login:t=>Ie.post("/telegram/login",t),getDeeplink:()=>Ie.get("/telegram/deeplink"),verifyStatus:()=>Ie.get("/telegram/verify-status"),markAsVerified:t=>Ie.post("/telegram/verify",{telegramUserId:t}),reCheck:()=>Ie.get("/telegram/recheck"),nonce:()=>Ie.post("/telegram/nonce"),callback:t=>Ie.get("/telegram/callback",{params:t})},SL={open:()=>Ie.post("/chest/open")},WE={getStats:()=>Ie.get("/stats"),getLatestWins:(t=4)=>Ie.get(`/wins/latest?limit=${t}`),getLeaderboard:()=>Ie.get("/leaderboard/top10")},Co={login:(t,e)=>Ie.post("/admin/login",{email:t,password:e}),getUsers:()=>Ie.get("/admin/users"),getReferrals:()=>Ie.get("/admin/referrals"),exportClaimCodes:()=>Ie.get("/admin/exports/claim-codes.csv",{responseType:"blob"}),exportReferrals:()=>Ie.get("/admin/exports/referrals.csv",{responseType:"blob"})},XE=C.createContext(),TL=(t,e)=>{switch(e.type){case"SET_LOADING":return{...t,loading:e.payload};case"SET_TOKEN":return{...t,token:e.payload,isAuthenticated:!!e.payload};case"SET_USER":return{...t,user:e.payload};case"SET_TELEGRAM_VERIFIED":return{...t,user:{...t.user,telegramVerified:e.payload}};case"LOGOUT":return{...t,token:null,user:null,isAuthenticated:!1};default:return t}},EL={token:localStorage.getItem("zoggy_token"),user:null,isAuthenticated:!!localStorage.getItem("zoggy_token"),loading:!1},CL=({children:t})=>{const[e,r]=C.useReducer(TL,EL),n=C.useRef(!1),s=C.useCallback(h=>{h?localStorage.setItem("zoggy_token",h):localStorage.removeItem("zoggy_token"),r({type:"SET_TOKEN",payload:h})},[]),i=C.useCallback(h=>{r({type:"SET_USER",payload:h})},[]),o=C.useCallback(h=>{r({type:"SET_TELEGRAM_VERIFIED",payload:h})},[]),a=C.useCallback(()=>{localStorage.removeItem("zoggy_token"),r({type:"LOGOUT"})},[]),l=C.useCallback(async()=>{var h;if(!(!e.token||n.current)){n.current=!0;try{r({type:"SET_LOADING",payload:!0});const u=await ba.getMe();r({type:"SET_USER",payload:u.data})}catch(u){console.error("Failed to fetch user:",u),((h=u.response)==null?void 0:h.status)===401&&(localStorage.removeItem("zoggy_token"),r({type:"LOGOUT"}))}finally{r({type:"SET_LOADING",payload:!1}),n.current=!1}}},[e.token]);C.useEffect(()=>{const h=async()=>{var u;if(!(!e.token||e.user||n.current)){n.current=!0;try{r({type:"SET_LOADING",payload:!0});const d=await ba.getMe();r({type:"SET_USER",payload:d.data})}catch(d){console.error("Failed to fetch user:",d),((u=d.response)==null?void 0:u.status)===401&&(localStorage.removeItem("zoggy_token"),r({type:"LOGOUT"}))}finally{r({type:"SET_LOADING",payload:!1}),n.current=!1}}};e.isAuthenticated&&!e.user&&h()},[e.isAuthenticated,e.user,e.token]);const c={...e,setToken:s,setUser:i,setTelegramVerified:o,logout:a,fetchUser:l};return w.jsx(XE.Provider,{value:c,children:t})},co=()=>{const t=C.useContext(XE);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},RL="modulepreload",PL=function(t){return"/"+t},o1={},gc=function(e,r,n){if(!r||r.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=PL(i),i in o1)return;o1[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=s.length-1;h>=0;h--){const u=s[h];if(u.href===i&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":RL,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var a1="popstate";function ML(t={}){function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return Kg("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:yc(s)}return kL(e,r,null,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IL(){return Math.random().toString(36).substring(2,10)}function l1(t,e){return{usr:t.state,key:t.key,idx:e}}function Kg(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ua(e):e,state:r,key:e&&e.key||n||IL()}}function yc({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ua(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function kL(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a="POP",l=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function u(){a="POP";let g=h(),y=g==null?null:g-c;c=g,l&&l({action:a,location:m.location,delta:y})}function d(g,y){a="PUSH";let v=Kg(m.location,g,y);r&&r(v,g),c=h()+1;let x=l1(v,c),_=m.createHref(v);try{o.pushState(x,"",_)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(_)}i&&l&&l({action:a,location:m.location,delta:1})}function f(g,y){a="REPLACE";let v=Kg(m.location,g,y);r&&r(v,g),c=h();let x=l1(v,c),_=m.createHref(v);o.replaceState(x,"",_),i&&l&&l({action:a,location:m.location,delta:0})}function p(g){return NL(g)}let m={get action(){return a},get location(){return t(s,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(a1,u),l=g,()=>{s.removeEventListener(a1,u),l=null}},createHref(g){return e(s,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:f,go(g){return o.go(g)}};return m}function NL(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),$e(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:yc(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function YE(t,e,r="/"){return FL(t,e,r,!1)}function FL(t,e,r,n){let s=typeof e=="string"?Ua(e):e,i=ps(s.pathname||"/",r);if(i==null)return null;let o=qE(t);LL(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=WL(i);a=zL(o[l],c,n)}return a}function qE(t,e=[],r=[],n="",s=!1){let i=(o,a,l=s,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&l)return;$e(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let u=ns([n,h.relativePath]),d=r.concat(h);o.children&&o.children.length>0&&($e(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),qE(o.children,e,d,u,l)),!(o.path==null&&!o.index)&&e.push({path:u,score:$L(u,o.index),routesMeta:d})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of KE(o.path))i(o,a,!0,c)}),e}function KE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=KE(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function LL(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:GL(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var OL=/^:[\w-]+$/,BL=3,DL=2,UL=1,VL=10,jL=-2,c1=t=>t==="*";function $L(t,e){let r=t.split("/"),n=r.length;return r.some(c1)&&(n+=jL),e&&(n+=DL),r.filter(s=>!c1(s)).reduce((s,i)=>s+(OL.test(i)?BL:i===""?UL:VL),n)}function GL(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function zL(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",u=ad({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),d=l.route;if(!u&&c&&r&&!n[n.length-1].route.index&&(u=ad({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!u)return null;Object.assign(s,u.params),o.push({params:s,pathname:ns([i,u.pathname]),pathnameBase:KL(ns([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=ns([i,u.pathnameBase]))}return o}function ad(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=HL(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,{paramName:h,isOptional:u},d)=>{if(h==="*"){let p=a[d]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[d];return u&&!f?c[h]=void 0:c[h]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function HL(t,e=!1,r=!0){Xr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function WL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ps(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function XL(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Ua(t):t;return{pathname:r?r.startsWith("/")?r:YL(r,e):e,search:ZL(n),hash:QL(s)}}function YL(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function _p(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qL(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function _x(t){let e=qL(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function wx(t,e,r,n=!1){let s;typeof t=="string"?s=Ua(t):(s={...t},$e(!s.pathname||!s.pathname.includes("?"),_p("?","pathname","search",s)),$e(!s.pathname||!s.pathname.includes("#"),_p("#","pathname","hash",s)),$e(!s.search||!s.search.includes("#"),_p("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let u=e.length-1;if(!n&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),u-=1;s.pathname=d.join("/")}a=u>=0?e[u]:"/"}let l=XL(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var ns=t=>t.join("/").replace(/\/\/+/g,"/"),KL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var ZE=["POST","PUT","PATCH","DELETE"];new Set(ZE);var eO=["GET",...ZE];new Set(eO);var Va=C.createContext(null);Va.displayName="DataRouter";var mf=C.createContext(null);mf.displayName="DataRouterState";C.createContext(!1);var QE=C.createContext({isTransitioning:!1});QE.displayName="ViewTransition";var tO=C.createContext(new Map);tO.displayName="Fetchers";var rO=C.createContext(null);rO.displayName="Await";var yn=C.createContext(null);yn.displayName="Navigation";var Gc=C.createContext(null);Gc.displayName="Location";var Gn=C.createContext({outlet:null,matches:[],isDataRoute:!1});Gn.displayName="Route";var bx=C.createContext(null);bx.displayName="RouteError";function nO(t,{relative:e}={}){$e(ja(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=C.useContext(yn),{hash:s,pathname:i,search:o}=zc(t,{relative:e}),a=i;return r!=="/"&&(a=i==="/"?r:ns([r,i])),n.createHref({pathname:a,search:o,hash:s})}function ja(){return C.useContext(Gc)!=null}function xn(){return $e(ja(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Gc).location}var JE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eC(t){C.useContext(yn).static||C.useLayoutEffect(t)}function ws(){let{isDataRoute:t}=C.useContext(Gn);return t?gO():sO()}function sO(){$e(ja(),"useNavigate() may be used only in the context of a <Router> component.");let t=C.useContext(Va),{basename:e,navigator:r}=C.useContext(yn),{matches:n}=C.useContext(Gn),{pathname:s}=xn(),i=JSON.stringify(_x(n)),o=C.useRef(!1);return eC(()=>{o.current=!0}),C.useCallback((l,c={})=>{if(Xr(o.current,JE),!o.current)return;if(typeof l=="number"){r.go(l);return}let h=wx(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ns([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,i,s,t])}C.createContext(null);function zc(t,{relative:e}={}){let{matches:r}=C.useContext(Gn),{pathname:n}=xn(),s=JSON.stringify(_x(r));return C.useMemo(()=>wx(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function iO(t,e){return tC(t,e)}function tC(t,e,r,n,s){var v;$e(ja(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=C.useContext(yn),{matches:o}=C.useContext(Gn),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",u=a&&a.route;{let x=u&&u.path||"";rC(c,!u||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let d=xn(),f;if(e){let x=typeof e=="string"?Ua(e):e;$e(h==="/"||((v=x.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${x.pathname}" was given in the \`location\` prop.`),f=x}else f=d;let p=f.pathname||"/",m=p;if(h!=="/"){let x=h.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=YE(t,{pathname:m});Xr(u||g!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Xr(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=uO(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:ns([h,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:ns([h,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,r,n,s);return e&&y?C.createElement(Gc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},y):y}function oO(){let t=mO(),e=JL(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=C.createElement(C.Fragment,null,C.createElement("p",null,"💿 Hey developer 👋"),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:i},"ErrorBoundary")," or"," ",C.createElement("code",{style:i},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),r?C.createElement("pre",{style:s},r):null,o)}var aO=C.createElement(oO,null),lO=class extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?C.createElement(Gn.Provider,{value:this.props.routeContext},C.createElement(bx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cO({routeContext:t,match:e,children:r}){let n=C.useContext(Va);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Gn.Provider,{value:t},r)}function uO(t,e=[],r=null,n=null,s=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=r==null?void 0:r.errors;if(o!=null){let c=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);$e(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,l=-1;if(r)for(let c=0;c<i.length;c++){let h=i[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=c),h.route.id){let{loaderData:u,errors:d}=r,f=h.route.loader&&!u.hasOwnProperty(h.route.id)&&(!d||d[h.route.id]===void 0);if(h.route.lazy||f){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,h,u)=>{let d,f=!1,p=null,m=null;r&&(d=o&&h.route.id?o[h.route.id]:void 0,p=h.route.errorElement||aO,a&&(l<0&&u===0?(rC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,m=null):l===u&&(f=!0,m=h.route.hydrateFallbackElement||null)));let g=e.concat(i.slice(0,u+1)),y=()=>{let v;return d?v=p:f?v=m:h.route.Component?v=C.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=c,C.createElement(cO,{match:h,routeContext:{outlet:c,matches:g,isDataRoute:r!=null},children:v})};return r&&(h.route.ErrorBoundary||h.route.errorElement||u===0)?C.createElement(lO,{location:r.location,revalidation:r.revalidation,component:p,error:d,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:n}):y()},null)}function Ax(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hO(t){let e=C.useContext(Va);return $e(e,Ax(t)),e}function dO(t){let e=C.useContext(mf);return $e(e,Ax(t)),e}function fO(t){let e=C.useContext(Gn);return $e(e,Ax(t)),e}function Sx(t){let e=fO(t),r=e.matches[e.matches.length-1];return $e(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function pO(){return Sx("useRouteId")}function mO(){var n;let t=C.useContext(bx),e=dO("useRouteError"),r=Sx("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function gO(){let{router:t}=hO("useNavigate"),e=Sx("useNavigate"),r=C.useRef(!1);return eC(()=>{r.current=!0}),C.useCallback(async(s,i={})=>{Xr(r.current,JE),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var u1={};function rC(t,e,r){!e&&!u1[t]&&(u1[t]=!0,Xr(!1,r))}C.memo(yO);function yO({routes:t,future:e,state:r,unstable_onError:n}){return tC(t,void 0,r,n,e)}function Tx({to:t,replace:e,state:r,relative:n}){$e(ja(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=C.useContext(yn);Xr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=C.useContext(Gn),{pathname:o}=xn(),a=ws(),l=wx(t,_x(i),o,n==="path"),c=JSON.stringify(l);return C.useEffect(()=>{a(JSON.parse(c),{replace:e,state:r,relative:n})},[a,c,n,e,r]),null}function vi(t){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xO({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){$e(!ja(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=C.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=Ua(r));let{pathname:l="/",search:c="",hash:h="",state:u=null,key:d="default"}=r,f=C.useMemo(()=>{let p=ps(l,o);return p==null?null:{location:{pathname:p,search:c,hash:h,state:u,key:d},navigationType:n}},[o,l,c,h,u,d,n]);return Xr(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:C.createElement(yn.Provider,{value:a},C.createElement(Gc.Provider,{children:e,value:f}))}function vO({children:t,location:e}){return iO(Zg(t),e)}function Zg(t,e=[]){let r=[];return C.Children.forEach(t,(n,s)=>{if(!C.isValidElement(n))return;let i=[...e,s];if(n.type===C.Fragment){r.push.apply(r,Zg(n.props.children,i));return}$e(n.type===vi,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Zg(n.props.children,i)),r.push(o)}),r}var gh="get",yh="application/x-www-form-urlencoded";function gf(t){return t!=null&&typeof t.tagName=="string"}function _O(t){return gf(t)&&t.tagName.toLowerCase()==="button"}function wO(t){return gf(t)&&t.tagName.toLowerCase()==="form"}function bO(t){return gf(t)&&t.tagName.toLowerCase()==="input"}function AO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function SO(t,e){return t.button===0&&(!e||e==="_self")&&!AO(t)}function Qg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function TO(t,e){let r=Qg(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}var yu=null;function EO(){if(yu===null)try{new FormData(document.createElement("form"),0),yu=!1}catch{yu=!0}return yu}var CO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wp(t){return t!=null&&!CO.has(t)?(Xr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yh}"`),null):t}function RO(t,e){let r,n,s,i,o;if(wO(t)){let a=t.getAttribute("action");n=a?ps(a,e):null,r=t.getAttribute("method")||gh,s=wp(t.getAttribute("enctype"))||yh,i=new FormData(t)}else if(_O(t)||bO(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(n=l?ps(l,e):null,r=t.getAttribute("formmethod")||a.getAttribute("method")||gh,s=wp(t.getAttribute("formenctype"))||wp(a.getAttribute("enctype"))||yh,i=new FormData(a,t),!EO()){let{name:c,type:h,value:u}=t;if(h==="image"){let d=c?`${c}.`:"";i.append(`${d}x`,"0"),i.append(`${d}y`,"0")}else c&&i.append(c,u)}}else{if(gf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=gh,n=null,s=yh,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ex(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function PO(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&ps(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function MO(t,e){if(t.id in e)return e[t.id];try{let r=await gc(()=>import(t.module),[]);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IO(t){return t!=null&&typeof t.page=="string"}function kO(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function NO(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await MO(i,r);return o.links?o.links():[]}return[]}));return BO(n.flat(1).filter(kO).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function h1(t,e,r,n,s,i){let o=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,a=(l,c)=>{var h;return r[c].pathname!==l.pathname||((h=r[c].route.path)==null?void 0:h.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var u;let h=n.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((u=r[0])==null?void 0:u.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function FO(t,e,{includeHydrateFallback:r}={}){return LO(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function LO(t){return[...new Set(t)]}function OO(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function BO(t,e){let r=new Set,n=new Set(e);return t.reduce((s,i)=>{if(e&&!IO(i)&&i.as==="script"&&i.href&&n.has(i.href))return s;let a=JSON.stringify(OO(i));return r.has(a)||(r.add(a),s.push({key:a,link:i})),s},[])}function nC(){let t=C.useContext(Va);return Ex(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function DO(){let t=C.useContext(mf);return Ex(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Cx=C.createContext(void 0);Cx.displayName="FrameworkContext";function sC(){let t=C.useContext(Cx);return Ex(t,"You must render this element inside a <HydratedRouter> element"),t}function UO(t,e){let r=C.useContext(Cx),[n,s]=C.useState(!1),[i,o]=C.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:u}=e,d=C.useRef(null);C.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let m=y=>{y.forEach(v=>{o(v.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[t]),C.useEffect(()=>{if(n){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[n]);let f=()=>{s(!0)},p=()=>{s(!1),o(!1)};return r?t!=="intent"?[i,d,{}]:[i,d,{onFocus:nl(a,f),onBlur:nl(l,p),onMouseEnter:nl(c,f),onMouseLeave:nl(h,p),onTouchStart:nl(u,f)}]:[!1,d,{}]}function nl(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function VO({page:t,...e}){let{router:r}=nC(),n=C.useMemo(()=>YE(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?C.createElement($O,{page:t,matches:n,...e}):null}function jO(t){let{manifest:e,routeModules:r}=sC(),[n,s]=C.useState([]);return C.useEffect(()=>{let i=!1;return NO(t,e,r).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,r]),n}function $O({page:t,matches:e,...r}){let n=xn(),{manifest:s,routeModules:i}=sC(),{basename:o}=nC(),{loaderData:a,matches:l}=DO(),c=C.useMemo(()=>h1(t,e,l,s,n,"data"),[t,e,l,s,n]),h=C.useMemo(()=>h1(t,e,l,s,n,"assets"),[t,e,l,s,n]),u=C.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let p=new Set,m=!1;if(e.forEach(y=>{var x;let v=s.routes[y.route.id];!v||!v.hasLoader||(!c.some(_=>_.route.id===y.route.id)&&y.route.id in a&&((x=i[y.route.id])!=null&&x.shouldRevalidate)||v.hasClientLoader?m=!0:p.add(y.route.id))}),p.size===0)return[];let g=PO(t,o,"data");return m&&p.size>0&&g.searchParams.set("_routes",e.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[g.pathname+g.search]},[o,a,n,s,c,e,t,i]),d=C.useMemo(()=>FO(h,s),[h,s]),f=jO(h);return C.createElement(C.Fragment,null,u.map(p=>C.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...r})),d.map(p=>C.createElement("link",{key:p,rel:"modulepreload",href:p,...r})),f.map(({key:p,link:m})=>C.createElement("link",{key:p,nonce:r.nonce,...m})))}function GO(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var iC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iC&&(window.__reactRouterVersion="7.8.2")}catch{}function zO({basename:t,children:e,window:r}){let n=C.useRef();n.current==null&&(n.current=ML({window:r,v5Compat:!0}));let s=n.current,[i,o]=C.useState({action:s.action,location:s.location}),a=C.useCallback(l=>{C.startTransition(()=>o(l))},[o]);return C.useLayoutEffect(()=>s.listen(a),[s,a]),C.createElement(xO,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var oC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ld=C.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:u,...d},f){let{basename:p}=C.useContext(yn),m=typeof c=="string"&&oC.test(c),g,y=!1;if(typeof c=="string"&&m&&(g=c,iC))try{let E=new URL(window.location.href),R=c.startsWith("//")?new URL(E.protocol+c):new URL(c),P=ps(R.pathname,p);R.origin===E.origin&&P!=null?c=P+R.search+R.hash:y=!0}catch{Xr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=nO(c,{relative:s}),[x,_,b]=UO(n,d),A=YO(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:u});function S(E){e&&e(E),E.defaultPrevented||A(E)}let T=C.createElement("a",{...d,...b,href:g||v,onClick:y||i?e:S,ref:GO(f,_),target:l,"data-discover":!m&&r==="render"?"true":void 0});return x&&!m?C.createElement(C.Fragment,null,T,C.createElement(VO,{page:v})):T});ld.displayName="Link";var HO=C.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},h){let u=zc(o,{relative:c.relative}),d=xn(),f=C.useContext(mf),{navigator:p,basename:m}=C.useContext(yn),g=f!=null&&eB(u)&&a===!0,y=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,v=d.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(v=v.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&m&&(x=ps(x,m)||x);const _=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let b=v===y||!s&&v.startsWith(y)&&v.charAt(_)==="/",A=x!=null&&(x===y||!s&&x.startsWith(y)&&x.charAt(y.length)==="/"),S={isActive:b,isPending:A,isTransitioning:g},T=b?e:void 0,E;typeof n=="function"?E=n(S):E=[n,b?"active":null,A?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(S):i;return C.createElement(ld,{...c,"aria-current":T,className:E,ref:h,style:R,to:o,viewTransition:a},typeof l=="function"?l(S):l)});HO.displayName="NavLink";var WO=C.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:o=gh,action:a,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:u,...d},f)=>{let p=QO(),m=JO(a,{relative:c}),g=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&oC.test(a),v=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let _=x.nativeEvent.submitter,b=(_==null?void 0:_.getAttribute("formmethod"))||o;p(_||x.currentTarget,{fetcherKey:e,method:b,navigate:r,replace:s,state:i,relative:c,preventScrollReset:h,viewTransition:u})};return C.createElement("form",{ref:f,method:g,action:m,onSubmit:n?l:v,...d,"data-discover":!y&&t==="render"?"true":void 0})});WO.displayName="Form";function XO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aC(t){let e=C.useContext(Va);return $e(e,XO(t)),e}function YO(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=ws(),l=xn(),c=zc(t,{relative:i});return C.useCallback(h=>{if(SO(h,e)){h.preventDefault();let u=r!==void 0?r:yc(l)===yc(c);a(t,{replace:u,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,r,n,e,t,s,i,o])}function qO(t){Xr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=C.useRef(Qg(t)),r=C.useRef(!1),n=xn(),s=C.useMemo(()=>TO(n.search,r.current?null:e.current),[n.search]),i=ws(),o=C.useCallback((a,l)=>{const c=Qg(typeof a=="function"?a(new URLSearchParams(s)):a);r.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var KO=0,ZO=()=>`__${String(++KO)}__`;function QO(){let{router:t}=aC("useSubmit"),{basename:e}=C.useContext(yn),r=pO();return C.useCallback(async(n,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=RO(n,e);if(s.navigate===!1){let h=s.fetcherKey||ZO();await t.fetch(h,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function JO(t,{relative:e}={}){let{basename:r}=C.useContext(yn),n=C.useContext(Gn);$e(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...zc(t||".",{relative:e})},o=xn();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(u=>u).forEach(u=>a.append("index",u));let h=a.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:ns([r,i.pathname])),yc(i)}function eB(t,{relative:e}={}){let r=C.useContext(QE);$e(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=aC("useViewTransitionState"),s=zc(t,{relative:e});if(!r.isTransitioning)return!1;let i=ps(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=ps(r.nextLocation.pathname,n)||r.nextLocation.pathname;return ad(s.pathname,o)!=null||ad(s.pathname,i)!=null}const Rx=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(t);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rB=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),d1=t=>{const e=rB(t);return e.charAt(0).toUpperCase()+e.slice(1)},lC=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),nB=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>C.createElement("svg",{ref:l,...sB,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:lC("lucide",s),...!i&&!nB(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,h])=>C.createElement(c,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(t,e)=>{const r=C.forwardRef(({className:n,...s},i)=>C.createElement(iB,{ref:i,iconNode:e,className:lC(`lucide-${tB(d1(t))}`,`lucide-${t}`,n),...s}));return r.displayName=d1(t),r};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],aB=ke("check",oB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cB=ke("circle-alert",lB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],cC=ke("circle-check-big",uB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dB=ke("circle-x",hB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pB=ke("clock",fB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],uC=ke("copy",mB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],yB=ke("crown",gB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],f1=ke("download",xB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],hC=ke("eye-off",vB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dC=ke("eye",_B);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],fC=ke("gift",wB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],p1=ke("house",bB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],SB=ke("layout-dashboard",AB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],EB=ke("loader",TB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],RB=ke("lock",CB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],pC=ke("log-in",PB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],IB=ke("log-out",MB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Px=ke("mail",kB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],FB=ke("medal",NB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],m1=ke("menu",LB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],cd=ke("shield",OB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],DB=ke("star",BB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Mx=ke("trophy",UB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],jB=ke("twitter",VB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],GB=ke("user-plus",$B);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ix=ke("users",zB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ud=ke("x",HB);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],XB=ke("zap",WB),YB=t=>{const[e,r]=C.useState(""),[n,s]=C.useState(!1);return C.useEffect(()=>{if(!t){r("00:00:00"),s(!0);return}const i=setInterval(()=>{const o=new Date().getTime(),l=new Date(t).getTime()-o;if(l<=0){r("00:00:00"),s(!0),clearInterval(i);return}const c=Math.floor(l/(1e3*60*60)),h=Math.floor(l%(1e3*60*60)/(1e3*60)),u=Math.floor(l%(1e3*60)/1e3);r(`${c.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`),s(!1)},1e3);return()=>clearInterval(i)},[t]),{timeLeft:e,isExpired:n}},Jg=({targetDate:t,label:e="Next chest in",className:r=""})=>{const{timeLeft:n,isExpired:s}=YB(t);return s?w.jsx("div",{className:`flex items-center justify-center space-x-3 text-green-400 ${r}`,children:w.jsx("span",{className:"font-poppins text-2xl font-bold animate-glow",children:"Ready!"})}):w.jsxs("div",{className:`flex items-center space-x-3 ${r}`,children:[w.jsx("div",{className:"flex items-center space-x-2",children:w.jsx("span",{className:"text-gold font-montserrat text-xs uppercase tracking-wider",children:""})}),w.jsx("div",{className:"bg-gray-800/50 rounded-lg px-3 py-1 border border-gray-700/50",children:w.jsx("div",{className:"font-poppins text-lg font-bold text-white animate-glow",children:n})})]})},qB=(t,e)=>{if(!t)return!0;if(e!==void 0)return e<=0;const r=new Date,n=new Date(t);return(r.getTime()-n.getTime())/(1e3*3600)>=24},mC=(t,e)=>{if(!t)return null;if(e!==void 0&&e>0)return new Date(Date.now()+e*1e3).toISOString();const r=new Date(t);return new Date(r.getTime()+24*60*60*1e3).toISOString()},gC=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),yf=C.createContext({}),xf=C.createContext(null),vf=typeof document<"u",kx=vf?C.useLayoutEffect:C.useEffect,yC=C.createContext({strict:!1}),Nx=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),KB="framerAppearId",xC="data-"+Nx(KB);function ZB(t,e,r,n){const{visualElement:s}=C.useContext(yf),i=C.useContext(yC),o=C.useContext(xf),a=C.useContext(gC).reducedMotion,l=C.useRef();n=n||i.renderer,!l.current&&n&&(l.current=n(t,{visualState:e,parent:s,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;C.useInsertionEffect(()=>{c&&c.update(r,o)});const h=C.useRef(!!(r[xC]&&!window.HandoffComplete));return kx(()=>{c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),C.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),c}function Wo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function QB(t,e,r){return C.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Wo(r)&&(r.current=n))},[e])}function xc(t){return typeof t=="string"||Array.isArray(t)}function _f(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Fx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lx=["initial",...Fx];function wf(t){return _f(t.animate)||Lx.some(e=>xc(t[e]))}function vC(t){return!!(wf(t)||t.variants)}function JB(t,e){if(wf(t)){const{initial:r,animate:n}=t;return{initial:r===!1||xc(r)?r:void 0,animate:xc(n)?n:void 0}}return t.inherit!==!1?e:{}}function eD(t){const{initial:e,animate:r}=JB(t,C.useContext(yf));return C.useMemo(()=>({initial:e,animate:r}),[g1(e),g1(r)])}function g1(t){return Array.isArray(t)?t.join(" "):t}const y1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vc={};for(const t in y1)vc[t]={isEnabled:e=>y1[t].some(r=>!!e[r])};function tD(t){for(const e in t)vc[e]={...vc[e],...t[e]}}const Ox=C.createContext({}),_C=C.createContext({}),rD=Symbol.for("motionComponentSymbol");function nD({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){t&&tD(t);function i(a,l){let c;const h={...C.useContext(gC),...a,layoutId:sD(a)},{isStatic:u}=h,d=eD(a),f=n(a,u);if(!u&&vf){d.visualElement=ZB(s,f,h,e);const p=C.useContext(_C),m=C.useContext(yC).strict;d.visualElement&&(c=d.visualElement.loadFeatures(h,m,t,p))}return C.createElement(yf.Provider,{value:d},c&&d.visualElement?C.createElement(c,{visualElement:d.visualElement,...h}):null,r(s,a,QB(f,d.visualElement,l),f,u,d.visualElement))}const o=C.forwardRef(i);return o[rD]=s,o}function sD({layoutId:t}){const e=C.useContext(Ox).id;return e&&t!==void 0?e+"-"+t:t}function iD(t){function e(n,s={}){return nD(t(n,s))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(n,s)=>(r.has(s)||r.set(s,e(s)),r.get(s))})}const oD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bx(t){return typeof t!="string"||t.includes("-")?!1:!!(oD.indexOf(t)>-1||/[A-Z]/.test(t))}const hd={};function aD(t){Object.assign(hd,t)}const Hc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],uo=new Set(Hc);function wC(t,{layout:e,layoutId:r}){return uo.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!hd[t]||t==="opacity")}const gr=t=>!!(t&&t.getVelocity),lD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cD=Hc.length;function uD(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},n,s){let i="";for(let o=0;o<cD;o++){const a=Hc[o];if(t[a]!==void 0){const l=lD[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,n?"":i):r&&n&&(i="none"),i}const bC=t=>e=>typeof e=="string"&&e.startsWith(t),AC=bC("--"),ey=bC("var(--"),hD=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,dD=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ni=(t,e,r)=>Math.min(Math.max(r,t),e),ho={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ul={...ho,transform:t=>ni(0,1,t)},xu={...ho,default:1},Vl=t=>Math.round(t*1e5)/1e5,bf=/(-)?([\d]*\.?[\d])+/g,SC=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,fD=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Wc(t){return typeof t=="string"}const Xc=t=>({test:e=>Wc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rs=Xc("deg"),Un=Xc("%"),re=Xc("px"),pD=Xc("vh"),mD=Xc("vw"),x1={...Un,parse:t=>Un.parse(t)/100,transform:t=>Un.transform(t*100)},v1={...ho,transform:Math.round},TC={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,size:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,rotate:Rs,rotateX:Rs,rotateY:Rs,rotateZ:Rs,scale:xu,scaleX:xu,scaleY:xu,scaleZ:xu,skew:Rs,skewX:Rs,skewY:Rs,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:Ul,originX:x1,originY:x1,originZ:re,zIndex:v1,fillOpacity:Ul,strokeOpacity:Ul,numOctaves:v1};function Dx(t,e,r,n){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,h=!0;for(const u in e){const d=e[u];if(AC(u)){i[u]=d;continue}const f=TC[u],p=dD(d,f);if(uo.has(u)){if(l=!0,o[u]=p,!h)continue;d!==(f.default||0)&&(h=!1)}else u.startsWith("origin")?(c=!0,a[u]=p):s[u]=p}if(e.transform||(l||n?s.transform=uD(t.transform,r,h,n):s.transform&&(s.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:f=0}=a;s.transformOrigin=`${u} ${d} ${f}`}}const Ux=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function EC(t,e,r){for(const n in e)!gr(e[n])&&!wC(n,r)&&(t[n]=e[n])}function gD({transformTemplate:t},e,r){return C.useMemo(()=>{const n=Ux();return Dx(n,e,{enableHardwareAcceleration:!r},t),Object.assign({},n.vars,n.style)},[e])}function yD(t,e,r){const n=t.style||{},s={};return EC(s,n,t),Object.assign(s,gD(t,e,r)),t.transformValues?t.transformValues(s):s}function xD(t,e,r){const n={},s=yD(t,e,r);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const vD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function dd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||vD.has(t)}let CC=t=>!dd(t);function _D(t){t&&(CC=e=>e.startsWith("on")?!dd(e):t(e))}try{_D(require("@emotion/is-prop-valid").default)}catch{}function wD(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(CC(s)||r===!0&&dd(s)||!e&&!dd(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function _1(t,e,r){return typeof t=="string"?t:re.transform(e+r*t)}function bD(t,e,r){const n=_1(e,t.x,t.width),s=_1(r,t.y,t.height);return`${n} ${s}`}const AD={offset:"stroke-dashoffset",array:"stroke-dasharray"},SD={offset:"strokeDashoffset",array:"strokeDasharray"};function TD(t,e,r=1,n=0,s=!0){t.pathLength=1;const i=s?AD:SD;t[i.offset]=re.transform(-n);const o=re.transform(e),a=re.transform(r);t[i.array]=`${o} ${a}`}function Vx(t,{attrX:e,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,u,d){if(Dx(t,c,h,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:m}=t;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=bD(m,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),o!==void 0&&TD(f,o,a,l,!1)}const RC=()=>({...Ux(),attrs:{}}),jx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ED(t,e,r,n){const s=C.useMemo(()=>{const i=RC();return Vx(i,e,{enableHardwareAcceleration:!1},jx(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};EC(i,t.style,t),s.style={...i,...s.style}}return s}function CD(t=!1){return(r,n,s,{latestValues:i},o)=>{const l=(Bx(r)?ED:xD)(n,i,o,r),h={...wD(n,typeof r=="string",t),...l,ref:s},{children:u}=n,d=C.useMemo(()=>gr(u)?u.get():u,[u]);return C.createElement(r,{...h,children:d})}}function PC(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const MC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IC(t,e,r,n){PC(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(MC.has(s)?s:Nx(s),e.attrs[s])}function $x(t,e){const{style:r}=t,n={};for(const s in r)(gr(r[s])||e.style&&gr(e.style[s])||wC(s,t))&&(n[s]=r[s]);return n}function kC(t,e){const r=$x(t,e);for(const n in t)if(gr(t[n])||gr(e[n])){const s=Hc.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=t[n]}return r}function Gx(t,e,r,n={},s={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,s)),e}function NC(t){const e=C.useRef(null);return e.current===null&&(e.current=t()),e.current}const fd=t=>Array.isArray(t),RD=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),PD=t=>fd(t)?t[t.length-1]||0:t;function xh(t){const e=gr(t)?t.get():t;return RD(e)?e.toValue():e}function MD({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,s,i){const o={latestValues:ID(n,s,i,t),renderState:e()};return r&&(o.mount=a=>r(n,a,o)),o}const FC=t=>(e,r)=>{const n=C.useContext(yf),s=C.useContext(xf),i=()=>MD(t,e,n,s);return r?i():NC(i)};function ID(t,e,r,n){const s={},i=n(t,{});for(const d in i)s[d]=xh(i[d]);let{initial:o,animate:a}=t;const l=wf(t),c=vC(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=r?r.initial===!1:!1;h=h||o===!1;const u=h?a:o;return u&&typeof u!="boolean"&&!_f(u)&&(Array.isArray(u)?u:[u]).forEach(f=>{const p=Gx(t,f);if(!p)return;const{transitionEnd:m,transition:g,...y}=p;for(const v in y){let x=y[v];if(Array.isArray(x)){const _=h?x.length-1:0;x=x[_]}x!==null&&(s[v]=x)}for(const v in m)s[v]=m[v]}),s}const it=t=>t;class w1{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function kD(t){let e=new w1,r=new w1,n=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,h=!1)=>{const u=h&&s,d=u?e:r;return c&&o.add(l),d.add(l)&&u&&s&&(n=e.order.length),l},cancel:l=>{r.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,r]=[r,e],r.clear(),n=e.order.length,n)for(let c=0;c<n;c++){const h=e.order[c];h(l),o.has(h)&&(a.schedule(h),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const vu=["prepare","read","update","preRender","render","postRender"],ND=40;function FD(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=vu.reduce((u,d)=>(u[d]=kD(()=>r=!0),u),{}),o=u=>i[u].process(s),a=()=>{const u=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(u-s.timestamp,ND),1),s.timestamp=u,s.isProcessing=!0,vu.forEach(o),s.isProcessing=!1,r&&e&&(n=!1,t(a))},l=()=>{r=!0,n=!0,s.isProcessing||t(a)};return{schedule:vu.reduce((u,d)=>{const f=i[d];return u[d]=(p,m=!1,g=!1)=>(r||l(),f.schedule(p,m,g)),u},{}),cancel:u=>vu.forEach(d=>i[d].cancel(u)),state:s,steps:i}}const{schedule:Oe,cancel:ms,state:jt,steps:bp}=FD(typeof requestAnimationFrame<"u"?requestAnimationFrame:it,!0),LD={useVisualState:FC({scrapeMotionValuesFromProps:kC,createRenderState:RC,onMount:(t,e,{renderState:r,latestValues:n})=>{Oe.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Oe.render(()=>{Vx(r,n,{enableHardwareAcceleration:!1},jx(e.tagName),t.transformTemplate),IC(e,r)})}})},OD={useVisualState:FC({scrapeMotionValuesFromProps:$x,createRenderState:Ux})};function BD(t,{forwardMotionProps:e=!1},r,n){return{...Bx(t)?LD:OD,preloadedFeatures:r,useRender:CD(e),createVisualElement:n,Component:t}}function ts(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}const LC=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Af(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const DD=t=>e=>LC(e)&&t(e,Af(e));function ss(t,e,r,n){return ts(t,e,DD(r),n)}const UD=(t,e)=>r=>e(t(r)),Zs=(...t)=>t.reduce(UD);function OC(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const b1=OC("dragHorizontal"),A1=OC("dragVertical");function BC(t){let e=!1;if(t==="y")e=A1();else if(t==="x")e=b1();else{const r=b1(),n=A1();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function DC(){const t=BC(!0);return t?(t(),!1):!0}class ci{constructor(e){this.isMounted=!1,this.node=e}update(){}}function S1(t,e){const r="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||DC())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[n]&&Oe.update(()=>a[n](i,o))};return ss(t.current,r,s,{passive:!t.getProps()[n]})}class VD extends ci{mount(){this.unmount=Zs(S1(this.node,!0),S1(this.node,!1))}unmount(){}}class jD extends ci{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zs(ts(this.node.current,"focus",()=>this.onFocus()),ts(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const UC=(t,e)=>e?t===e?!0:UC(t,e.parentElement):!1;function Ap(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,Af(r))}class $D extends ci{constructor(){super(...arguments),this.removeStartListeners=it,this.removeEndListeners=it,this.removeAccessibleListeners=it,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=ss(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:u}=this.node.getProps();Oe.update(()=>{!u&&!UC(this.node.current,a.target)?h&&h(a,l):c&&c(a,l)})},{passive:!(n.onTap||n.onPointerUp)}),o=ss(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Zs(i,o),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Ap("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&Oe.update(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=ts(this.node.current,"keyup",o),Ap("down",(a,l)=>{this.startPress(a,l)})},r=ts(this.node.current,"keydown",e),n=()=>{this.isPressing&&Ap("cancel",(i,o)=>this.cancelPress(i,o))},s=ts(this.node.current,"blur",n);this.removeAccessibleListeners=Zs(r,s)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Oe.update(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!DC()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Oe.update(()=>n(e,r))}mount(){const e=this.node.getProps(),r=ss(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=ts(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Zs(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ty=new WeakMap,Sp=new WeakMap,GD=t=>{const e=ty.get(t.target);e&&e(t)},zD=t=>{t.forEach(GD)};function HD({root:t,...e}){const r=t||document;Sp.has(r)||Sp.set(r,{});const n=Sp.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(zD,{root:t,...e})),n[s]}function WD(t,e,r){const n=HD(e);return ty.set(t,r),n.observe(t),()=>{ty.delete(t),n.unobserve(t)}}const XD={some:0,all:1};class YD extends ci{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:XD[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:u}=this.node.getProps(),d=c?h:u;d&&d(l)};return WD(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(qD(e,r))&&this.startObserver()}unmount(){}}function qD({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const KD={inView:{Feature:YD},tap:{Feature:$D},focus:{Feature:jD},hover:{Feature:VD}};function VC(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ZD(t){const e={};return t.values.forEach((r,n)=>e[n]=r.get()),e}function QD(t){const e={};return t.values.forEach((r,n)=>e[n]=r.getVelocity()),e}function Sf(t,e,r){const n=t.getProps();return Gx(n,e,r!==void 0?r:n.custom,ZD(t),QD(t))}let JD=it,zx=it;const Qs=t=>t*1e3,is=t=>t/1e3,e3={current:!1},jC=t=>Array.isArray(t)&&typeof t[0]=="number";function $C(t){return!!(!t||typeof t=="string"&&GC[t]||jC(t)||Array.isArray(t)&&t.every($C))}const _l=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,GC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_l([0,.65,.55,1]),circOut:_l([.55,0,1,.45]),backIn:_l([.31,.01,.66,-.59]),backOut:_l([.33,1.53,.69,.99])};function zC(t){if(t)return jC(t)?_l(t):Array.isArray(t)?t.map(zC):GC[t]}function t3(t,e,r,{delay:n=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:r};l&&(c.offset=l);const h=zC(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function r3(t,{repeat:e,repeatType:r="loop"}){const n=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[n]}const HC=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,n3=1e-7,s3=12;function i3(t,e,r,n,s){let i,o,a=0;do o=e+(r-e)/2,i=HC(o,n,s)-t,i>0?r=o:e=o;while(Math.abs(i)>n3&&++a<s3);return o}function Yc(t,e,r,n){if(t===e&&r===n)return it;const s=i=>i3(i,0,1,t,r);return i=>i===0||i===1?i:HC(s(i),e,n)}const o3=Yc(.42,0,1,1),a3=Yc(0,0,.58,1),WC=Yc(.42,0,.58,1),l3=t=>Array.isArray(t)&&typeof t[0]!="number",XC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,YC=t=>e=>1-t(1-e),Hx=t=>1-Math.sin(Math.acos(t)),qC=YC(Hx),c3=XC(Hx),KC=Yc(.33,1.53,.69,.99),Wx=YC(KC),u3=XC(Wx),h3=t=>(t*=2)<1?.5*Wx(t):.5*(2-Math.pow(2,-10*(t-1))),d3={linear:it,easeIn:o3,easeInOut:WC,easeOut:a3,circIn:Hx,circInOut:c3,circOut:qC,backIn:Wx,backInOut:u3,backOut:KC,anticipate:h3},T1=t=>{if(Array.isArray(t)){zx(t.length===4);const[e,r,n,s]=t;return Yc(e,r,n,s)}else if(typeof t=="string")return d3[t];return t},Xx=(t,e)=>r=>!!(Wc(r)&&fD.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),ZC=(t,e,r)=>n=>{if(!Wc(n))return n;const[s,i,o,a]=n.match(bf);return{[t]:parseFloat(s),[e]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},f3=t=>ni(0,255,t),Tp={...ho,transform:t=>Math.round(f3(t))},Gi={test:Xx("rgb","red"),parse:ZC("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Tp.transform(t)+", "+Tp.transform(e)+", "+Tp.transform(r)+", "+Vl(Ul.transform(n))+")"};function p3(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const ry={test:Xx("#"),parse:p3,transform:Gi.transform},Xo={test:Xx("hsl","hue"),parse:ZC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Un.transform(Vl(e))+", "+Un.transform(Vl(r))+", "+Vl(Ul.transform(n))+")"},Qt={test:t=>Gi.test(t)||ry.test(t)||Xo.test(t),parse:t=>Gi.test(t)?Gi.parse(t):Xo.test(t)?Xo.parse(t):ry.parse(t),transform:t=>Wc(t)?t:t.hasOwnProperty("red")?Gi.transform(t):Xo.transform(t)},Ye=(t,e,r)=>-r*t+r*e+t;function Ep(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function m3({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,i=0,o=0;if(!e)s=i=o=r;else{const a=r<.5?r*(1+e):r+e-r*e,l=2*r-a;s=Ep(l,a,t+1/3),i=Ep(l,a,t),o=Ep(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const Cp=(t,e,r)=>{const n=t*t;return Math.sqrt(Math.max(0,r*(e*e-n)+n))},g3=[ry,Gi,Xo],y3=t=>g3.find(e=>e.test(t));function E1(t){const e=y3(t);let r=e.parse(t);return e===Xo&&(r=m3(r)),r}const QC=(t,e)=>{const r=E1(t),n=E1(e),s={...r};return i=>(s.red=Cp(r.red,n.red,i),s.green=Cp(r.green,n.green,i),s.blue=Cp(r.blue,n.blue,i),s.alpha=Ye(r.alpha,n.alpha,i),Gi.transform(s))};function x3(t){var e,r;return isNaN(t)&&Wc(t)&&(((e=t.match(bf))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(SC))===null||r===void 0?void 0:r.length)||0)>0}const JC={regex:hD,countKey:"Vars",token:"${v}",parse:it},eR={regex:SC,countKey:"Colors",token:"${c}",parse:Qt.parse},tR={regex:bf,countKey:"Numbers",token:"${n}",parse:ho.parse};function Rp(t,{regex:e,countKey:r,token:n,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+r]=i.length,t.tokenised=t.tokenised.replace(e,n),t.values.push(...i.map(s)))}function pd(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Rp(r,JC),Rp(r,eR),Rp(r,tR),r}function rR(t){return pd(t).values}function nR(t){const{values:e,numColors:r,numVars:n,tokenised:s}=pd(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<n?a=a.replace(JC.token,o[l]):l<n+r?a=a.replace(eR.token,Qt.transform(o[l])):a=a.replace(tR.token,Vl(o[l]));return a}}const v3=t=>typeof t=="number"?0:t;function _3(t){const e=rR(t);return nR(t)(e.map(v3))}const si={test:x3,parse:rR,createTransformer:nR,getAnimatableNone:_3},sR=(t,e)=>r=>`${r>0?e:t}`;function iR(t,e){return typeof t=="number"?r=>Ye(t,e,r):Qt.test(t)?QC(t,e):t.startsWith("var(")?sR(t,e):aR(t,e)}const oR=(t,e)=>{const r=[...t],n=r.length,s=t.map((i,o)=>iR(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}},w3=(t,e)=>{const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=iR(t[s],e[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}},aR=(t,e)=>{const r=si.createTransformer(e),n=pd(t),s=pd(e);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?Zs(oR(n.values,s.values),r):sR(t,e)},_c=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},C1=(t,e)=>r=>Ye(t,e,r);function b3(t){return typeof t=="number"?C1:typeof t=="string"?Qt.test(t)?QC:aR:Array.isArray(t)?oR:typeof t=="object"?w3:C1}function A3(t,e,r){const n=[],s=r||b3(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||it:e;a=Zs(l,a)}n.push(a)}return n}function lR(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const i=t.length;if(zx(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=A3(e,n,s),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const u=_c(t[h],t[h+1],c);return o[h](u)};return r?c=>l(ni(t[0],t[i-1],c)):l}function S3(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=_c(0,e,n);t.push(Ye(r,1,s))}}function T3(t){const e=[0];return S3(e,t.length-1),e}function E3(t,e){return t.map(r=>r*e)}function C3(t,e){return t.map(()=>e||WC).splice(0,t.length-1)}function md({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=l3(n)?n.map(T1):T1(n),i={done:!1,value:e[0]},o=E3(r&&r.length===e.length?r:T3(e),t),a=lR(o,e,{ease:Array.isArray(s)?s:C3(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function cR(t,e){return e?t*(1e3/e):0}const R3=5;function uR(t,e,r){const n=Math.max(e-R3,0);return cR(r-t(n),e-n)}const Pp=.001,P3=.01,R1=10,M3=.05,I3=1;function k3({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let s,i;JD(t<=Qs(R1));let o=1-e;o=ni(M3,I3,o),t=ni(P3,R1,is(t)),o<1?(s=c=>{const h=c*o,u=h*t,d=h-r,f=ny(c,o),p=Math.exp(-u);return Pp-d/f*p},i=c=>{const u=c*o*t,d=u*r+r,f=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-u),m=ny(Math.pow(c,2),o);return(-s(c)+Pp>0?-1:1)*((d-f)*p)/m}):(s=c=>{const h=Math.exp(-c*t),u=(c-r)*t+1;return-Pp+h*u},i=c=>{const h=Math.exp(-c*t),u=(r-c)*(t*t);return h*u});const a=5/t,l=F3(s,i,a);if(t=Qs(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:t}}}const N3=12;function F3(t,e,r){let n=r;for(let s=1;s<N3;s++)n=n-t(n)/e(n);return n}function ny(t,e){return t*Math.sqrt(1-e*e)}const L3=["duration","bounce"],O3=["stiffness","damping","mass"];function P1(t,e){return e.some(r=>t[r]!==void 0)}function B3(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!P1(t,O3)&&P1(t,L3)){const r=k3(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function hR({keyframes:t,restDelta:e,restSpeed:r,...n}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:h,velocity:u,isResolvedFromDuration:d}=B3({...n,velocity:-is(n.velocity||0)}),f=u||0,p=l/(2*Math.sqrt(a*c)),m=i-s,g=is(Math.sqrt(a/c)),y=Math.abs(m)<5;r||(r=y?.01:2),e||(e=y?.005:.5);let v;if(p<1){const x=ny(g,p);v=_=>{const b=Math.exp(-p*g*_);return i-b*((f+p*g*m)/x*Math.sin(x*_)+m*Math.cos(x*_))}}else if(p===1)v=x=>i-Math.exp(-g*x)*(m+(f+g*m)*x);else{const x=g*Math.sqrt(p*p-1);v=_=>{const b=Math.exp(-p*g*_),A=Math.min(x*_,300);return i-b*((f+p*g*m)*Math.sinh(A)+x*m*Math.cosh(A))/x}}return{calculatedDuration:d&&h||null,next:x=>{const _=v(x);if(d)o.done=x>=h;else{let b=f;x!==0&&(p<1?b=uR(v,x,_):b=0);const A=Math.abs(b)<=r,S=Math.abs(i-_)<=e;o.done=A&&S}return o.value=o.done?i:_,o}}}function M1({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const u=t[0],d={done:!1,value:u},f=T=>a!==void 0&&T<a||l!==void 0&&T>l,p=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let m=r*e;const g=u+m,y=o===void 0?g:o(g);y!==g&&(m=y-u);const v=T=>-m*Math.exp(-T/n),x=T=>y+v(T),_=T=>{const E=v(T),R=x(T);d.done=Math.abs(E)<=c,d.value=d.done?y:R};let b,A;const S=T=>{f(d.value)&&(b=T,A=hR({keyframes:[d.value,p(d.value)],velocity:uR(x,T,d.value),damping:s,stiffness:i,restDelta:c,restSpeed:h}))};return S(0),{calculatedDuration:null,next:T=>{let E=!1;return!A&&b===void 0&&(E=!0,_(T),S(T)),b!==void 0&&T>b?A.next(T-b):(!E&&_(T),d)}}}const D3=t=>{const e=({timestamp:r})=>t(r);return{start:()=>Oe.update(e,!0),stop:()=>ms(e),now:()=>jt.isProcessing?jt.timestamp:performance.now()}},I1=2e4;function k1(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<I1;)e+=r,n=t.next(e);return e>=I1?1/0:e}const U3={decay:M1,inertia:M1,tween:md,keyframes:md,spring:hR};function gd({autoplay:t=!0,delay:e=0,driver:r=D3,keyframes:n,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:h,onUpdate:u,...d}){let f=1,p=!1,m,g;const y=()=>{g=new Promise(L=>{m=L})};y();let v;const x=U3[s]||md;let _;x!==md&&typeof n[0]!="number"&&(_=lR([0,100],n,{clamp:!1}),n=[0,100]);const b=x({...d,keyframes:n});let A;a==="mirror"&&(A=x({...d,keyframes:[...n].reverse(),velocity:-(d.velocity||0)}));let S="idle",T=null,E=null,R=null;b.calculatedDuration===null&&i&&(b.calculatedDuration=k1(b));const{calculatedDuration:P}=b;let D=1/0,k=1/0;P!==null&&(D=P+o,k=D*(i+1)-o);let M=0;const G=L=>{if(E===null)return;f>0&&(E=Math.min(E,L)),f<0&&(E=Math.min(L-k/f,E)),T!==null?M=T:M=Math.round(L-E)*f;const z=M-e*(f>=0?1:-1),X=f>=0?z<0:z>k;M=Math.max(z,0),S==="finished"&&T===null&&(M=k);let H=M,oe=b;if(i){const Se=Math.min(M,k)/D;let Te=Math.floor(Se),ue=Se%1;!ue&&Se>=1&&(ue=1),ue===1&&Te--,Te=Math.min(Te,i+1),!!(Te%2)&&(a==="reverse"?(ue=1-ue,o&&(ue-=o/D)):a==="mirror"&&(oe=A)),H=ni(0,1,ue)*D}const te=X?{done:!1,value:n[0]}:oe.next(H);_&&(te.value=_(te.value));let{done:ie}=te;!X&&P!==null&&(ie=f>=0?M>=k:M<=0);const Re=T===null&&(S==="finished"||S==="running"&&ie);return u&&u(te.value),Re&&F(),te},B=()=>{v&&v.stop(),v=void 0},U=()=>{S="idle",B(),m(),y(),E=R=null},F=()=>{S="finished",h&&h(),B(),m()},O=()=>{if(p)return;v||(v=r(G));const L=v.now();l&&l(),T!==null?E=L-T:(!E||S==="finished")&&(E=L),S==="finished"&&y(),R=E,T=null,S="running",v.start()};t&&O();const I={then(L,z){return g.then(L,z)},get time(){return is(M)},set time(L){L=Qs(L),M=L,T!==null||!v||f===0?T=L:E=v.now()-L/f},get duration(){const L=b.calculatedDuration===null?k1(b):b.calculatedDuration;return is(L)},get speed(){return f},set speed(L){L===f||!v||(f=L,I.time=is(M))},get state(){return S},play:O,pause:()=>{S="paused",T=M},stop:()=>{p=!0,S!=="idle"&&(S="idle",c&&c(),U())},cancel:()=>{R!==null&&G(R),U()},complete:()=>{S="finished"},sample:L=>(E=0,G(L))};return I}function V3(t){let e;return()=>(e===void 0&&(e=t()),e)}const j3=V3(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$3=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),_u=10,G3=2e4,z3=(t,e)=>e.type==="spring"||t==="backgroundColor"||!$C(e.ease);function H3(t,e,{onUpdate:r,onComplete:n,...s}){if(!(j3()&&$3.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const h=()=>{l=new Promise(x=>{a=x})};h();let{keyframes:u,duration:d=300,ease:f,times:p}=s;if(z3(e,s)){const x=gd({...s,repeat:0,delay:0});let _={done:!1,value:u[0]};const b=[];let A=0;for(;!_.done&&A<G3;)_=x.sample(A),b.push(_.value),A+=_u;p=void 0,u=b,d=A-_u,f="linear"}const m=t3(t.owner.current,e,u,{...s,duration:d,ease:f,times:p}),g=()=>{c=!1,m.cancel()},y=()=>{c=!0,Oe.update(g),a(),h()};return m.onfinish=()=>{c||(t.set(r3(u,s)),n&&n(),y())},{then(x,_){return l.then(x,_)},attachTimeline(x){return m.timeline=x,m.onfinish=null,it},get time(){return is(m.currentTime||0)},set time(x){m.currentTime=Qs(x)},get speed(){return m.playbackRate},set speed(x){m.playbackRate=x},get duration(){return is(d)},play:()=>{o||(m.play(),ms(g))},pause:()=>m.pause(),stop:()=>{if(o=!0,m.playState==="idle")return;const{currentTime:x}=m;if(x){const _=gd({...s,autoplay:!1});t.setWithVelocity(_.sample(x-_u).value,_.sample(x).value,_u)}y()},complete:()=>{c||m.finish()},cancel:y}}function W3({keyframes:t,delay:e,onUpdate:r,onComplete:n}){const s=()=>(r&&r(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:it,pause:it,stop:it,then:i=>(i(),Promise.resolve()),cancel:it,complete:it});return e?gd({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const X3={type:"spring",stiffness:500,damping:25,restSpeed:10},Y3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),q3={type:"keyframes",duration:.8},K3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Z3=(t,{keyframes:e})=>e.length>2?q3:uo.has(t)?t.startsWith("scale")?Y3(e[1]):X3:K3,sy=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(si.test(e)||e==="0")&&!e.startsWith("url(")),Q3=new Set(["brightness","contrast","saturate","opacity"]);function J3(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(bf)||[];if(!n)return t;const s=r.replace(n,"");let i=Q3.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+s+")"}const e4=/([a-z-]*)\(.*?\)/g,iy={...si,getAnimatableNone:t=>{const e=t.match(e4);return e?e.map(J3).join(" "):t}},t4={...TC,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:iy,WebkitFilter:iy},Yx=t=>t4[t];function dR(t,e){let r=Yx(t);return r!==iy&&(r=si),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const fR=t=>/^0[^.\s]+$/.test(t);function r4(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||fR(t)}function n4(t,e,r,n){const s=sy(e,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=n.from!==void 0?n.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),r4(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const h=l[c];i[h]=dR(e,a)}return i}function s4({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}function qx(t,e){return t[e]||t.default||t}const i4={skipAnimations:!1},Kx=(t,e,r,n={})=>s=>{const i=qx(n,t)||{},o=i.delay||n.delay||0;let{elapsed:a=0}=n;a=a-Qs(o);const l=n4(e,t,r,i),c=l[0],h=l[l.length-1],u=sy(t,c),d=sy(t,h);let f={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:p=>{e.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(s4(i)||(f={...f,...Z3(t,f)}),f.duration&&(f.duration=Qs(f.duration)),f.repeatDelay&&(f.repeatDelay=Qs(f.repeatDelay)),!u||!d||e3.current||i.type===!1||i4.skipAnimations)return W3(f);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=H3(e,t,f);if(p)return p}return gd(f)};function yd(t){return!!(gr(t)&&t.add)}const pR=t=>/^\-?\d*\.?\d+$/.test(t);function Zx(t,e){t.indexOf(e)===-1&&t.push(e)}function Qx(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Jx{constructor(){this.subscriptions=[]}add(e){return Zx(this.subscriptions,e),()=>Qx(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const o4=t=>!isNaN(parseFloat(t));class a4{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=jt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Oe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Oe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=o4(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Jx);const n=this.events[e].add(r);return e==="change"?()=>{n(),Oe.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?cR(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Aa(t,e){return new a4(t,e)}const mR=t=>e=>e.test(t),l4={test:t=>t==="auto",parse:t=>t},gR=[ho,re,Un,Rs,mD,pD,l4],sl=t=>gR.find(mR(t)),c4=[...gR,Qt,si],u4=t=>c4.find(mR(t));function h4(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Aa(r))}function d4(t,e){const r=Sf(t,e);let{transitionEnd:n={},transition:s={},...i}=r?t.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const o in i){const a=PD(i[o]);h4(t,o,a)}}function f4(t,e,r){var n,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(s=(n=r[l])!==null&&n!==void 0?n:t.readValue(l))!==null&&s!==void 0?s:e[l]),h!=null&&(typeof h=="string"&&(pR(h)||fR(h))?h=parseFloat(h):!u4(h)&&si.test(c)&&(h=dR(l,c)),t.addValue(l,Aa(h,{owner:t})),r[l]===void 0&&(r[l]=h),h!==null&&t.setBaseTarget(l,h))}}function p4(t,e){return e?(e[t]||e.default||e).from:void 0}function m4(t,e,r){const n={};for(const s in t){const i=p4(s,e);if(i!==void 0)n[s]=i;else{const o=r.getValue(s);o&&(n[s]=o.get())}}return n}function g4({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function y4(t,e){const r=t.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==r)return!0}else return r!==e}function yR(t,e,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");n&&(i=n);const c=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const u in a){const d=t.getValue(u),f=a[u];if(!d||f===void 0||h&&g4(h,u))continue;const p={delay:r,elapsed:0,...qx(i||{},u)};if(window.HandoffAppearAnimations){const y=t.getProps()[xC];if(y){const v=window.HandoffAppearAnimations(y,u,d,Oe);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let m=!p.isHandoff&&!y4(d,f);if(p.type==="spring"&&(d.getVelocity()||p.velocity)&&(m=!1),d.animation&&(m=!1),m)continue;d.start(Kx(u,d,f,t.shouldReduceMotion&&uo.has(u)?{type:!1}:p));const g=d.animation;yd(l)&&(l.add(u),g.then(()=>l.remove(u))),c.push(g)}return o&&Promise.all(c).then(()=>{o&&d4(t,o)}),c}function oy(t,e,r={}){const n=Sf(t,e,r.custom);let{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(yR(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:u}=s;return x4(t,e,c+l,h,u,r)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(r.delay)])}function x4(t,e,r=0,n=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*n,l=s===1?(c=0)=>c*n:(c=0)=>a-c*n;return Array.from(t.variantChildren).sort(v4).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(oy(c,e,{...i,delay:r+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function v4(t,e){return t.sortNodePosition(e)}function _4(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>oy(t,i,r));n=Promise.all(s)}else if(typeof e=="string")n=oy(t,e,r);else{const s=typeof e=="function"?Sf(t,e,r.custom):e;n=Promise.all(yR(t,s,r))}return n.then(()=>t.notify("AnimationComplete",e))}const w4=[...Fx].reverse(),b4=Fx.length;function A4(t){return e=>Promise.all(e.map(({animation:r,options:n})=>_4(t,r,n)))}function S4(t){let e=A4(t);const r=E4();let n=!0;const s=(l,c)=>{const h=Sf(t,c);if(h){const{transition:u,transitionEnd:d,...f}=h;l={...l,...f,...d}}return l};function i(l){e=l(t)}function o(l,c){const h=t.getProps(),u=t.getVariantContext(!0)||{},d=[],f=new Set;let p={},m=1/0;for(let y=0;y<b4;y++){const v=w4[y],x=r[v],_=h[v]!==void 0?h[v]:u[v],b=xc(_),A=v===c?x.isActive:null;A===!1&&(m=y);let S=_===u[v]&&_!==h[v]&&b;if(S&&n&&t.manuallyAnimateOnMount&&(S=!1),x.protectedKeys={...p},!x.isActive&&A===null||!_&&!x.prevProp||_f(_)||typeof _=="boolean")continue;let E=T4(x.prevProp,_)||v===c&&x.isActive&&!S&&b||y>m&&b,R=!1;const P=Array.isArray(_)?_:[_];let D=P.reduce(s,{});A===!1&&(D={});const{prevResolvedValues:k={}}=x,M={...k,...D},G=B=>{E=!0,f.has(B)&&(R=!0,f.delete(B)),x.needsAnimating[B]=!0};for(const B in M){const U=D[B],F=k[B];if(p.hasOwnProperty(B))continue;let O=!1;fd(U)&&fd(F)?O=!VC(U,F):O=U!==F,O?U!==void 0?G(B):f.add(B):U!==void 0&&f.has(B)?G(B):x.protectedKeys[B]=!0}x.prevProp=_,x.prevResolvedValues=D,x.isActive&&(p={...p,...D}),n&&t.blockInitialAnimation&&(E=!1),E&&(!S||R)&&d.push(...P.map(B=>({animation:B,options:{type:v,...l}})))}if(f.size){const y={};f.forEach(v=>{const x=t.getBaseTarget(v);x!==void 0&&(y[v]=x)}),d.push({animation:y})}let g=!!d.length;return n&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(g=!1),n=!1,g?e(d):Promise.resolve()}function a(l,c,h){var u;if(r[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),r[l].isActive=c;const d=o(h,l);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>r}}function T4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!VC(e,t):!1}function fi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function E4(){return{animate:fi(!0),whileInView:fi(),whileHover:fi(),whileTap:fi(),whileDrag:fi(),whileFocus:fi(),exit:fi()}}class C4 extends ci{constructor(e){super(e),e.animationState||(e.animationState=S4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),_f(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let R4=0;class P4 extends ci{constructor(){super(...arguments),this.id=R4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const M4={animation:{Feature:C4},exit:{Feature:P4}},N1=(t,e)=>Math.abs(t-e);function I4(t,e){const r=N1(t.x,e.x),n=N1(t.y,e.y);return Math.sqrt(r**2+n**2)}class xR{constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Ip(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=I4(u.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:p}=u,{timestamp:m}=jt;this.history.push({...p,timestamp:m});const{onStart:g,onMove:y}=this.handlers;d||(g&&g(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,u)},this.handlePointerMove=(u,d)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=Mp(d,this.transformPagePoint),Oe.update(this.updatePoint,!0)},this.handlePointerUp=(u,d)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Ip(u.type==="pointercancel"?this.lastMoveEventInfo:Mp(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(u,g),p&&p(u,g)},!LC(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const o=Af(e),a=Mp(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=jt;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=r;h&&h(e,Ip(a,this.history)),this.removeListeners=Zs(ss(this.contextWindow,"pointermove",this.handlePointerMove),ss(this.contextWindow,"pointerup",this.handlePointerUp),ss(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ms(this.updatePoint)}}function Mp(t,e){return e?{point:e(t.point)}:t}function F1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ip({point:t},e){return{point:t,delta:F1(t,vR(e)),offset:F1(t,k4(e)),velocity:N4(e,.1)}}function k4(t){return t[0]}function vR(t){return t[t.length-1]}function N4(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=vR(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>Qs(e)));)r--;if(!n)return{x:0,y:0};const i=is(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Mr(t){return t.max-t.min}function ay(t,e=0,r=.01){return Math.abs(t-e)<=r}function L1(t,e,r,n=.5){t.origin=n,t.originPoint=Ye(e.min,e.max,t.origin),t.scale=Mr(r)/Mr(e),(ay(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ye(r.min,r.max,t.origin)-t.originPoint,(ay(t.translate)||isNaN(t.translate))&&(t.translate=0)}function jl(t,e,r,n){L1(t.x,e.x,r.x,n?n.originX:void 0),L1(t.y,e.y,r.y,n?n.originY:void 0)}function O1(t,e,r){t.min=r.min+e.min,t.max=t.min+Mr(e)}function F4(t,e,r){O1(t.x,e.x,r.x),O1(t.y,e.y,r.y)}function B1(t,e,r){t.min=e.min-r.min,t.max=t.min+Mr(e)}function $l(t,e,r){B1(t.x,e.x,r.x),B1(t.y,e.y,r.y)}function L4(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Ye(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Ye(r,t,n.max):Math.min(t,r)),t}function D1(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function O4(t,{top:e,left:r,bottom:n,right:s}){return{x:D1(t.x,r,s),y:D1(t.y,e,n)}}function U1(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function B4(t,e){return{x:U1(t.x,e.x),y:U1(t.y,e.y)}}function D4(t,e){let r=.5;const n=Mr(t),s=Mr(e);return s>n?r=_c(e.min,e.max-n,t.min):n>s&&(r=_c(t.min,t.max-s,e.min)),ni(0,1,r)}function U4(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const ly=.35;function V4(t=ly){return t===!1?t=0:t===!0&&(t=ly),{x:V1(t,"left","right"),y:V1(t,"top","bottom")}}function V1(t,e,r){return{min:j1(t,e),max:j1(t,r)}}function j1(t,e){return typeof t=="number"?t:t[e]||0}const $1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yo=()=>({x:$1(),y:$1()}),G1=()=>({min:0,max:0}),dt=()=>({x:G1(),y:G1()});function Lr(t){return[t("x"),t("y")]}function _R({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function j4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function $4(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function kp(t){return t===void 0||t===1}function cy({scale:t,scaleX:e,scaleY:r}){return!kp(t)||!kp(e)||!kp(r)}function _i(t){return cy(t)||wR(t)||t.z||t.rotate||t.rotateX||t.rotateY}function wR(t){return z1(t.x)||z1(t.y)}function z1(t){return t&&t!=="0%"}function xd(t,e,r){const n=t-r,s=e*n;return r+s}function H1(t,e,r,n,s){return s!==void 0&&(t=xd(t,s,n)),xd(t,r,n)+e}function uy(t,e=0,r=1,n,s){t.min=H1(t.min,e,r,n,s),t.max=H1(t.max,e,r,n,s)}function bR(t,{x:e,y:r}){uy(t.x,e.translate,e.scale,e.originPoint),uy(t.y,r.translate,r.scale,r.originPoint)}function G4(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&qo(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,bR(t,o)),n&&_i(i.latestValues)&&qo(t,i.latestValues))}e.x=W1(e.x),e.y=W1(e.y)}function W1(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ks(t,e){t.min=t.min+e,t.max=t.max+e}function X1(t,e,[r,n,s]){const i=e[s]!==void 0?e[s]:.5,o=Ye(t.min,t.max,i);uy(t,e[r],e[n],o,e.scale)}const z4=["x","scaleX","originX"],H4=["y","scaleY","originY"];function qo(t,e){X1(t.x,e,z4),X1(t.y,e,H4)}function AR(t,e){return _R($4(t.getBoundingClientRect(),e))}function W4(t,e,r){const n=AR(t,r),{scroll:s}=e;return s&&(ks(n.x,s.offset.x),ks(n.y,s.offset.y)),n}const SR=({current:t})=>t?t.ownerDocument.defaultView:null,X4=new WeakMap;class Y4{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Af(h,"page").point)},i=(h,u)=>{const{drag:d,dragPropagation:f,onDragStart:p}=this.getProps();if(d&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=BC(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lr(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Un.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[g];x&&(y=Mr(x)*(parseFloat(y)/100))}}this.originPoint[g]=y}),p&&Oe.update(()=>p(h,u),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(h,u)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:p,onDrag:m}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:g}=u;if(f&&this.currentDirection===null){this.currentDirection=q4(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,g),this.updateAxis("y",u.point,g),this.visualElement.render(),m&&m(h,u)},a=(h,u)=>this.stop(h,u),l=()=>Lr(h=>{var u;return this.getAnimationState(h)==="paused"&&((u=this.getAxisMotionValue(h).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new xR(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:SR(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Oe.update(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!wu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=L4(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&Wo(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=O4(s.layoutBox,r):this.constraints=!1,this.elastic=V4(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Lr(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=U4(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Wo(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=W4(n,s.root,this.visualElement.getTransformPagePoint());let o=B4(s.layout.layoutBox,i);if(r){const a=r(j4(o));this.hasMutatedConstraints=!!a,a&&(o=_R(a))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Lr(h=>{if(!wu(h,r,this.currentDirection))return;let u=l&&l[h]||{};o&&(u={min:0,max:0});const d=s?200:1e6,f=s?40:1e7,p={type:"inertia",velocity:n?e[h]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...u};return this.startAxisValueAnimation(h,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return n.start(Kx(e,n,0,r))}stopAnimation(){Lr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Lr(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Lr(r=>{const{drag:n}=this.getProps();if(!wu(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[r];i.set(e[r]-Ye(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Wo(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Lr(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=D4({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Lr(o=>{if(!wu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ye(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;X4.set(this.visualElement,this);const e=this.visualElement.current,r=ss(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Wo(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const o=ts(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Lr(h=>{const u=this.getAxisMotionValue(h);u&&(this.originPoint[h]+=l[h].translate,u.set(u.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=ly,dragMomentum:a=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function wu(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function q4(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class K4 extends ci{constructor(e){super(e),this.removeGroupControls=it,this.removeListeners=it,this.controls=new Y4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||it}unmount(){this.removeGroupControls(),this.removeListeners()}}const Y1=t=>(e,r)=>{t&&Oe.update(()=>t(e,r))};class Z4 extends ci{constructor(){super(...arguments),this.removePointerDownListener=it}onPointerDown(e){this.session=new xR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:SR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:Y1(e),onStart:Y1(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Oe.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=ss(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Q4(){const t=C.useContext(xf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,s=C.useId();return C.useEffect(()=>n(s),[]),!e&&r?[!1,()=>r&&r(s)]:[!0]}const vh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function q1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const il={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const r=q1(t,e.target.x),n=q1(t,e.target.y);return`${r}% ${n}%`}},J4={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=si.parse(t);if(s.length>5)return n;const i=si.createTransformer(t),o=typeof s[0]!="number"?1:0,a=r.x.scale*e.x,l=r.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Ye(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class eU extends On.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;aD(tU),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),vh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Oe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TR(t){const[e,r]=Q4(),n=C.useContext(Ox);return On.createElement(eU,{...t,layoutGroup:n,switchLayoutGroup:C.useContext(_C),isPresent:e,safeToRemove:r})}const tU={borderRadius:{...il,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:il,borderTopRightRadius:il,borderBottomLeftRadius:il,borderBottomRightRadius:il,boxShadow:J4},ER=["TopLeft","TopRight","BottomLeft","BottomRight"],rU=ER.length,K1=t=>typeof t=="string"?parseFloat(t):t,Z1=t=>typeof t=="number"||re.test(t);function nU(t,e,r,n,s,i){s?(t.opacity=Ye(0,r.opacity!==void 0?r.opacity:1,sU(n)),t.opacityExit=Ye(e.opacity!==void 0?e.opacity:1,0,iU(n))):i&&(t.opacity=Ye(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<rU;o++){const a=`border${ER[o]}Radius`;let l=Q1(e,a),c=Q1(r,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Z1(l)===Z1(c)?(t[a]=Math.max(Ye(K1(l),K1(c),n),0),(Un.test(c)||Un.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||r.rotate)&&(t.rotate=Ye(e.rotate||0,r.rotate||0,n))}function Q1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const sU=CR(0,.5,qC),iU=CR(.5,.95,it);function CR(t,e,r){return n=>n<t?0:n>e?1:r(_c(t,e,n))}function J1(t,e){t.min=e.min,t.max=e.max}function Fr(t,e){J1(t.x,e.x),J1(t.y,e.y)}function ew(t,e,r,n,s){return t-=e,t=xd(t,1/r,n),s!==void 0&&(t=xd(t,1/s,n)),t}function oU(t,e=0,r=1,n=.5,s,i=t,o=t){if(Un.test(e)&&(e=parseFloat(e),e=Ye(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ye(i.min,i.max,n);t===i&&(a-=e),t.min=ew(t.min,e,r,a,s),t.max=ew(t.max,e,r,a,s)}function tw(t,e,[r,n,s],i,o){oU(t,e[r],e[n],e[s],e.scale,i,o)}const aU=["x","scaleX","originX"],lU=["y","scaleY","originY"];function rw(t,e,r,n){tw(t.x,e,aU,r?r.x:void 0,n?n.x:void 0),tw(t.y,e,lU,r?r.y:void 0,n?n.y:void 0)}function nw(t){return t.translate===0&&t.scale===1}function RR(t){return nw(t.x)&&nw(t.y)}function cU(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function PR(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function sw(t){return Mr(t.x)/Mr(t.y)}class uU{constructor(){this.members=[]}add(e){Zx(this.members,e),e.scheduleRender()}remove(e){if(Qx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iw(t,e,r){let n="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(n=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:l,rotateX:c,rotateY:h}=r;l&&(n+=`rotate(${l}deg) `),c&&(n+=`rotateX(${c}deg) `),h&&(n+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(n+=`scale(${o}, ${a})`),n||"none"}const hU=(t,e)=>t.depth-e.depth;class dU{constructor(){this.children=[],this.isDirty=!1}add(e){Zx(this.children,e),this.isDirty=!0}remove(e){Qx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(hU),this.isDirty=!1,this.children.forEach(e)}}function fU(t,e){const r=performance.now(),n=({timestamp:s})=>{const i=s-r;i>=e&&(ms(n),t(i-e))};return Oe.read(n,!0),()=>ms(n)}function pU(t){window.MotionDebug&&window.MotionDebug.record(t)}function mU(t){return t instanceof SVGElement&&t.tagName!=="svg"}function gU(t,e,r){const n=gr(t)?t:Aa(t);return n.start(Kx("",n,e,r)),n.animation}const ow=["","X","Y","Z"],yU={visibility:"hidden"},aw=1e3;let xU=0;const wi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function MR({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=xU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,wi.totalNodes=wi.resolvedTargetDeltas=wi.recalculatedProjection=0,this.nodes.forEach(wU),this.nodes.forEach(EU),this.nodes.forEach(CU),this.nodes.forEach(bU),pU(wi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new dU)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Jx),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mU(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let u;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=fU(d,250),vh.hasAnimatedSinceResize&&(vh.hasAnimatedSinceResize=!1,this.nodes.forEach(cw))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||h.getDefaultTransition()||kU,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=h.getProps(),v=!this.targetLayout||!PR(this.targetLayout,p)||f,x=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,x);const _={...qx(m,"layout"),onPlay:g,onComplete:y};(h.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else d||cw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ms(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const u=this.path[h];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lw);return}this.isUpdating||this.nodes.forEach(SU),this.isUpdating=!1,this.nodes.forEach(TU),this.nodes.forEach(vU),this.nodes.forEach(_U),this.clearAllSnapshots();const a=performance.now();jt.delta=ni(0,1e3/60,a-jt.timestamp),jt.timestamp=a,jt.isProcessing=!0,bp.update.process(jt),bp.preRender.process(jt),bp.render.process(jt),jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(AU),this.sharedNodes.forEach(PU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Oe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Oe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!RR(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||_i(this.latestValues)||h)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),NU(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return dt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(ks(a.x,l.offset.x),ks(a.y,l.offset.y)),a}removeElementScroll(o){const a=dt();Fr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:h,options:u}=c;if(c!==this.root&&h&&u.layoutScroll){if(h.isRoot){Fr(a,o);const{scroll:d}=this.root;d&&(ks(a.x,-d.offset.x),ks(a.y,-d.offset.y))}ks(a.x,h.offset.x),ks(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=dt();Fr(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&qo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),_i(h.latestValues)&&qo(l,h.latestValues)}return _i(this.latestValues)&&qo(l,this.latestValues),l}removeTransform(o){const a=dt();Fr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!_i(c.latestValues))continue;cy(c.latestValues)&&c.updateSnapshot();const h=dt(),u=c.measurePageBox();Fr(h,u),rw(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return _i(this.latestValues)&&rw(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=jt.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),$l(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Fr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),F4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fr(this.target,this.layout.layoutBox),bR(this.target,this.targetDelta)):Fr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),$l(this.relativeTargetOrigin,this.target,f.target),Fr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}wi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||cy(this.parent.latestValues)||wR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===jt.timestamp&&(c=!1),c)return;const{layout:h,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||u))return;Fr(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;G4(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=Yo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Yo(),this.projectionDeltaWithTransform=Yo());const m=this.projectionTransform;jl(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=iw(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==d||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),wi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},u=Yo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=dt(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,g=this.getStack(),y=!g||g.members.length<=1,v=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(IU));this.animationProgress=0;let x;this.mixTargetDelta=_=>{const b=_/1e3;uw(u.x,o.x,b),uw(u.y,o.y,b),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($l(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MU(this.relativeTarget,this.relativeTargetOrigin,d,b),x&&cU(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=dt()),Fr(x,this.relativeTarget)),m&&(this.animationValues=h,nU(h,c,this.latestValues,b,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ms(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Oe.update(()=>{vh.hasAnimatedSinceResize=!0,this.currentAnimation=gU(0,aw,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(aw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&IR(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||dt();const u=Mr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+u;const d=Mr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Fr(a,l),qo(a,h),jl(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new uU),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<ow.length;h++){const u="rotate"+ow[h];l[u]&&(c[u]=l[u],o.setStaticValue(u,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return yU;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=xh(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=xh(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!_i(this.latestValues)&&(m.transform=h?h({},""):"none",this.hasProjected=!1),m}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),c.transform=iw(this.projectionDeltaWithTransform,this.treeScale,d),h&&(c.transform=h(d,c.transform));const{x:f,y:p}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?c.opacity=u===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in hd){if(d[m]===void 0)continue;const{correct:g,applyTo:y}=hd[m],v=c.transform==="none"?d[m]:g(d[m],u);if(y){const x=y.length;for(let _=0;_<x;_++)c[y[_]]=v}else c[m]=v}return this.options.layoutId&&(c.pointerEvents=u===this?xh(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(lw),this.root.sharedNodes.clear()}}}function vU(t){t.updateLayout()}function _U(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,o=r.source!==t.layout.source;i==="size"?Lr(u=>{const d=o?r.measuredBox[u]:r.layoutBox[u],f=Mr(d);d.min=n[u].min,d.max=d.min+f}):IR(i,r.layoutBox,n)&&Lr(u=>{const d=o?r.measuredBox[u]:r.layoutBox[u],f=Mr(n[u]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+f)});const a=Yo();jl(a,n,r.layoutBox);const l=Yo();o?jl(l,t.applyTransform(s,!0),r.measuredBox):jl(l,n,r.layoutBox);const c=!RR(a);let h=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:d,layout:f}=u;if(d&&f){const p=dt();$l(p,r.layoutBox,d.layoutBox);const m=dt();$l(m,n,f.layoutBox),PR(p,m)||(h=!0),u.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function wU(t){wi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function AU(t){t.clearSnapshot()}function lw(t){t.clearMeasurements()}function SU(t){t.isLayoutDirty=!1}function TU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function cw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function EU(t){t.resolveTargetDelta()}function CU(t){t.calcProjection()}function RU(t){t.resetRotation()}function PU(t){t.removeLeadSnapshot()}function uw(t,e,r){t.translate=Ye(e.translate,0,r),t.scale=Ye(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function hw(t,e,r,n){t.min=Ye(e.min,r.min,n),t.max=Ye(e.max,r.max,n)}function MU(t,e,r,n){hw(t.x,e.x,r.x,n),hw(t.y,e.y,r.y,n)}function IU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const kU={duration:.45,ease:[.4,0,.1,1]},dw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),fw=dw("applewebkit/")&&!dw("chrome/")?Math.round:it;function pw(t){t.min=fw(t.min),t.max=fw(t.max)}function NU(t){pw(t.x),pw(t.y)}function IR(t,e,r){return t==="position"||t==="preserve-aspect"&&!ay(sw(e),sw(r),.2)}const FU=MR({attachResizeListener:(t,e)=>ts(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Np={current:void 0},kR=MR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Np.current){const t=new FU({});t.mount(window),t.setOptions({layoutScroll:!0}),Np.current=t}return Np.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),LU={pan:{Feature:Z4},drag:{Feature:K4,ProjectionNode:kR,MeasureLayout:TR}},OU=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function BU(t){const e=OU.exec(t);if(!e)return[,];const[,r,n]=e;return[r,n]}function hy(t,e,r=1){const[n,s]=BU(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return pR(o)?parseFloat(o):o}else return ey(s)?hy(s,e,r+1):s}function DU(t,{...e},r){const n=t.current;if(!(n instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(s=>{const i=s.get();if(!ey(i))return;const o=hy(i,n);o&&s.set(o)});for(const s in e){const i=e[s];if(!ey(i))continue;const o=hy(i,n);o&&(e[s]=o,r||(r={}),r[s]===void 0&&(r[s]=i))}return{target:e,transitionEnd:r}}const UU=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),NR=t=>UU.has(t),VU=t=>Object.keys(t).some(NR),mw=t=>t===ho||t===re,gw=(t,e)=>parseFloat(t.split(", ")[e]),yw=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return gw(s[1],e);{const i=n.match(/^matrix\((.+)\)$/);return i?gw(i[1],t):0}},jU=new Set(["x","y","z"]),$U=Hc.filter(t=>!jU.has(t));function GU(t){const e=[];return $U.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Sa={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:yw(4,13),y:yw(5,14)};Sa.translateX=Sa.x;Sa.translateY=Sa.y;const zU=(t,e,r)=>{const n=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(c=>{a[c]=Sa[c](n,i)}),e.render();const l=e.measureViewportBox();return r.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=Sa[c](l,i)}),t},HU=(t,e,r={},n={})=>{e={...e},n={...n};const s=Object.keys(e).filter(NR);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let h=r[l],u=sl(h);const d=e[l];let f;if(fd(d)){const p=d.length,m=d[0]===null?1:0;h=d[m],u=sl(h);for(let g=m;g<p&&d[g]!==null;g++)f?zx(sl(d[g])===f):f=sl(d[g])}else f=sl(d);if(u!==f)if(mw(u)&&mw(f)){const p=c.get();typeof p=="string"&&c.set(parseFloat(p)),typeof d=="string"?e[l]=parseFloat(d):Array.isArray(d)&&f===re&&(e[l]=d.map(parseFloat))}else u!=null&&u.transform&&(f!=null&&f.transform)&&(h===0||d===0)?h===0?c.set(f.transform(h)):e[l]=u.transform(d):(o||(i=GU(t),o=!0),a.push(l),n[l]=n[l]!==void 0?n[l]:e[l],c.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=zU(e,t,a);return i.length&&i.forEach(([h,u])=>{t.getValue(h).set(u)}),t.render(),vf&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:n}}else return{target:e,transitionEnd:n}};function WU(t,e,r,n){return VU(e)?HU(t,e,r,n):{target:e,transitionEnd:n}}const XU=(t,e,r,n)=>{const s=DU(t,e,n);return e=s.target,n=s.transitionEnd,WU(t,e,r,n)},dy={current:null},FR={current:!1};function YU(){if(FR.current=!0,!!vf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>dy.current=t.matches;t.addListener(e),e()}else dy.current=!1}function qU(t,e,r){const{willChange:n}=e;for(const s in e){const i=e[s],o=r[s];if(gr(i))t.addValue(s,i),yd(n)&&n.add(s);else if(gr(o))t.addValue(s,Aa(i,{owner:t})),yd(n)&&n.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Aa(a!==void 0?a:i,{owner:t}))}}for(const s in r)e[s]===void 0&&t.removeValue(s);return e}const xw=new WeakMap,LR=Object.keys(vc),KU=LR.length,vw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],ZU=Lx.length;class QU{constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Oe.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=r.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=wf(r),this.isVariantNode=vC(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(r,{});for(const u in h){const d=h[u];a[u]!==void 0&&gr(d)&&(d.set(a[u],!1),yd(c)&&c.add(u))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,xw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),FR.current||YU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:dy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){xw.delete(this.current),this.projection&&this.projection.unmount(),ms(this.notifyUpdate),ms(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const n=uo.has(e),s=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Oe.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},n,s,i){let o,a;for(let l=0;l<KU;l++){const c=LR[l],{isEnabled:h,Feature:u,ProjectionNode:d,MeasureLayout:f}=vc[c];d&&(o=d),h(r)&&(!this.features[c]&&u&&(this.features[c]=new u(this)),f&&(a=f))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:h,dragConstraints:u,layoutScroll:d,layoutRoot:f}=r;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!h||u&&Wo(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:d,layoutRoot:f})}return a}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<vw.length;n++){const s=vw[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=qU(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<ZU;n++){const s=Lx[n],i=this.props[s];(xc(i)||i===!1)&&(r[s]=i)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Aa(r,{owner:this}),this.addValue(e,n)),n}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=Gx(this.props,n))===null||r===void 0?void 0:r[e]:void 0;if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!gr(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Jx),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class OR extends QU{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...n},{transformValues:s},i){let o=m4(n,e||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),o&&(o=s(o))),i){f4(this,n,o);const a=XU(this,n,o,r);r=a.transitionEnd,n=a.target}return{transition:e,transitionEnd:r,...n}}}function JU(t){return window.getComputedStyle(t)}class eV extends OR{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(uo.has(r)){const n=Yx(r);return n&&n.default||0}else{const n=JU(e),s=(AC(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return AR(e,r)}build(e,r,n,s){Dx(e,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,r){return $x(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gr(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,n,s){PC(e,r,n,s)}}class tV extends OR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(uo.has(r)){const n=Yx(r);return n&&n.default||0}return r=MC.has(r)?r:Nx(r),e.getAttribute(r)}measureInstanceViewportBox(){return dt()}scrapeMotionValuesFromProps(e,r){return kC(e,r)}build(e,r,n,s){Vx(e,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,r,n,s){IC(e,r,n,s)}mount(e){this.isSVGTag=jx(e.tagName),super.mount(e)}}const rV=(t,e)=>Bx(t)?new tV(e,{enableHardwareAcceleration:!1}):new eV(e,{enableHardwareAcceleration:!0}),nV={layout:{ProjectionNode:kR,MeasureLayout:TR}},sV={...M4,...KD,...LU,...nV},fe=iD((t,e)=>BD(t,e,sV,rV));function BR(){const t=C.useRef(!1);return kx(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function iV(){const t=BR(),[e,r]=C.useState(0),n=C.useCallback(()=>{t.current&&r(e+1)},[e]);return[C.useCallback(()=>Oe.postRender(n),[n]),e]}class oV extends C.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function aV({children:t,isPresent:e}){const r=C.useId(),n=C.useRef(null),s=C.useRef({width:0,height:0,top:0,left:0});return C.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!n.current||!i||!o)return;n.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),C.createElement(oV,{isPresent:e,childRef:n,sizeRef:s},C.cloneElement(t,{ref:n}))}const Fp=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=NC(lV),l=C.useId(),c=C.useMemo(()=>({id:l,initial:e,isPresent:r,custom:s,onExitComplete:h=>{a.set(h,!0);for(const u of a.values())if(!u)return;n&&n()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[r]);return C.useMemo(()=>{a.forEach((h,u)=>a.set(u,!1))},[r]),C.useEffect(()=>{!r&&!a.size&&n&&n()},[r]),o==="popLayout"&&(t=C.createElement(aV,{isPresent:r},t)),C.createElement(xf.Provider,{value:c},t)};function lV(){return new Map}function cV(t){return C.useEffect(()=>()=>t(),[])}const bi=t=>t.key||"";function uV(t,e){t.forEach(r=>{const n=bi(r);e.set(n,r)})}function hV(t){const e=[];return C.Children.forEach(t,r=>{C.isValidElement(r)&&e.push(r)}),e}const cr=({children:t,custom:e,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=C.useContext(Ox).forceRender||iV()[0],l=BR(),c=hV(t);let h=c;const u=C.useRef(new Map).current,d=C.useRef(h),f=C.useRef(new Map).current,p=C.useRef(!0);if(kx(()=>{p.current=!1,uV(c,f),d.current=h}),cV(()=>{p.current=!0,f.clear(),u.clear()}),p.current)return C.createElement(C.Fragment,null,h.map(v=>C.createElement(Fp,{key:bi(v),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},v)));h=[...h];const m=d.current.map(bi),g=c.map(bi),y=m.length;for(let v=0;v<y;v++){const x=m[v];g.indexOf(x)===-1&&!u.has(x)&&u.set(x,void 0)}return o==="wait"&&u.size&&(h=[]),u.forEach((v,x)=>{if(g.indexOf(x)!==-1)return;const _=f.get(x);if(!_)return;const b=m.indexOf(x);let A=v;if(!A){const S=()=>{u.delete(x);const T=Array.from(f.keys()).filter(E=>!g.includes(E));if(T.forEach(E=>f.delete(E)),d.current=c.filter(E=>{const R=bi(E);return R===x||T.includes(R)}),!u.size){if(l.current===!1)return;a(),n&&n()}};A=C.createElement(Fp,{key:bi(_),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:i,mode:o},_),u.set(x,A)}h.splice(b,0,A)}),h=h.map(v=>{const x=v.key;return u.has(x)?v:C.createElement(Fp,{key:bi(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),C.createElement(C.Fragment,null,u.size?h:h.map(v=>C.cloneElement(v)))},Ot=({children:t,variant:e="primary",size:r="md",disabled:n=!1,loading:s=!1,className:i="",...o})=>{const a="font-semibold rounded-lg transition-all duration-300 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed font-poppins transform hover:shadow-2xl active:scale-95",l={primary:"bg-gradient-to-r from-brand to-red-700 hover:from-brand/90 hover:to-red-600 text-white shadow-lg hover:shadow-brand/50 border border-brand/50",secondary:"bg-gradient-to-r from-gold to-yellow-500 hover:from-gold/90 hover:to-yellow-400 text-gray-900 shadow-lg hover:shadow-gold/50 border border-gold/50",outline:"border-2 border-brand text-brand hover:bg-gradient-to-r hover:from-brand hover:to-red-700 hover:text-white hover:border-transparent",ghost:"text-brand hover:bg-brand/10 hover:text-brand/80",sky:"bg-gradient-to-r from-sky-500 to-sky-700 hover:from-sky-400 hover:to-sky-600 text-white shadow-lg hover:shadow-sky-500/50 border border-sky-400/50"},c={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return w.jsx(fe.button,{whileHover:{scale:n?1:1.02},whileTap:{scale:n?1:.98},className:`${a} ${l[e]} ${c[r]} ${i}`,disabled:n||s,...o,children:s?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}),w.jsx("span",{children:"Loading..."})]}):t})},DR=C.createContext(),_w=()=>{const{toasts:t,removeToast:e}=bs();return C.useEffect(()=>{t.forEach(r=>{if(r.duration>0){const n=setTimeout(()=>{e(r.id)},r.duration);return()=>clearTimeout(n)}})},[t,e]),w.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(r=>w.jsx("div",{className:`px-4 py-2 rounded-lg shadow-lg text-white transition-all duration-300 ${r.type==="success"?"bg-green-500":r.type==="error"?"bg-red-500":r.type==="warning"?"bg-yellow-500":"bg-blue-500"}`,children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{children:r.message}),w.jsx("button",{onClick:()=>e(r.id),className:"ml-2 text-white hover:text-gray-200",children:"×"})]})},r.id))})},dV=({children:t})=>{const[e,r]=C.useState([]),n=(i,o="success",a=3e3)=>{const c={id:Date.now(),message:i,type:o,duration:a};r(h=>[...h,c])},s=i=>{r(o=>o.filter(a=>a.id!==i))};return w.jsxs(DR.Provider,{value:{showToast:n,toasts:e,removeToast:s,ToastContainer:_w},children:[t,w.jsx(_w,{})]})},bs=()=>{const t=C.useContext(DR);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},ww=({isOpen:t,onClose:e})=>{const[r,n]=C.useState(""),[s,i]=C.useState(""),[o,a]=C.useState(!1),[l,c]=C.useState(!1),{showToast:h}=bs(),u=ws(),d=async p=>{var m,g;if(p.preventDefault(),!r||!s){h("Please enter both email and password","error");return}c(!0);try{const y=await Co.login(r,s);y.data.token&&(localStorage.setItem("zoggy_admin_token",y.data.token),h("Admin login successful!","success"),e(),u("/admin"))}catch(y){console.error("Admin login failed:",y);const v=((g=(m=y.response)==null?void 0:m.data)==null?void 0:g.error)==="invalid_credentials"?"Invalid email or password":"Login failed. Please try again.";h(v,"error")}finally{c(!1)}},f=()=>{n(""),i(""),a(!1),e()};return t?w.jsx(cr,{children:w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:w.jsxs(fe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gray-800 border border-gray-700 rounded-2xl p-8 max-w-md w-full relative shadow-2xl",children:[w.jsx("button",{onClick:f,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:w.jsx(ud,{className:"w-6 h-6"})}),w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:w.jsx(cd,{className:"w-8 h-8 text-white"})}),w.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Admin Login"}),w.jsx("p",{className:"text-gray-400",children:"Access the admin panel"})]}),w.jsxs("form",{onSubmit:d,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),w.jsx("input",{type:"email",value:r,onChange:p=>n(p.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"admin@zoggy.local",disabled:l})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:o?"text":"password",value:s,onChange:p=>i(p.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent pr-12",placeholder:"Enter admin password",disabled:l}),w.jsx("button",{type:"button",onClick:()=>a(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:o?w.jsx(hC,{className:"w-5 h-5"}):w.jsx(dC,{className:"w-5 h-5"})})]})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx(Ot,{type:"submit",variant:"primary",className:"w-full bg-red-600 hover:bg-red-700",disabled:l,children:l?w.jsxs("div",{className:"flex items-center justify-center",children:[w.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing In..."]}):w.jsxs(w.Fragment,{children:[w.jsx(cd,{className:"w-5 h-5 mr-2"}),"Sign In as Admin"]})}),w.jsx(Ot,{type:"button",variant:"secondary",onClick:f,className:"w-full",disabled:l,children:"Cancel"})]})]}),w.jsx("div",{className:"mt-6 text-center",children:w.jsx("p",{className:"text-xs text-gray-500",children:"Admin access only. Unauthorized access is prohibited."})})]})})}):null},bw="/assets/logo-12bc1334.png",Js=({minimal:t=!1,title:e=null})=>{const{user:r,isAuthenticated:n,logout:s}=co(),[i,o]=C.useState(!1),[a,l]=C.useState(!1),c=xn(),h=ws();C.useEffect(()=>{const m=localStorage.getItem("zoggy_admin_token");(c.pathname==="/admin"||c.search.includes("admin=true"))&&!m&&o(!0)},[c]);const u=()=>n?[{path:"/",label:"Home",icon:p1},{path:"/dashboard",label:"Dashboard",icon:SB},{action:"logout",label:"Logout",icon:IB}]:[{path:"/",label:"Home",icon:p1},{path:"/signin",label:"Sign In",icon:pC}],d=m=>{m.action==="logout"?(s(),h("/")):h(m.path),l(!1)},f=m=>m==="/"?c.pathname==="/"||c.pathname==="/home":c.pathname===m;if(t)return w.jsxs("header",{className:"w-full py-4 px-6 bg-gray-900 border-b border-gray-800",children:[w.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[w.jsx(ld,{to:"/",className:"flex items-center space-x-4 hover:opacity-80 transition-opacity",children:w.jsx("div",{className:"flex flex-col",children:w.jsx("img",{src:bw,alt:"Zoggy Logo",className:"h-8 w-auto"})})}),e&&w.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 hidden md:block",children:w.jsx("span",{className:"text-4xl font-bold text-white font-montserrat uppercase tracking-widest",children:e})}),w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsx("nav",{className:"hidden md:flex items-center space-x-6",children:u().map(m=>w.jsxs("button",{onClick:()=>d(m),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 ${f(m.path)?"bg-gold text-gray-900 font-semibold":"text-gray-300 hover:text-white hover:bg-gray-800"}`,children:[w.jsx(m.icon,{className:"w-4 h-4"}),w.jsx("span",{children:m.label})]},m.path||m.action))}),w.jsx("button",{onClick:()=>l(!a),className:"md:hidden p-2 text-gray-400 hover:text-white transition-colors",children:a?w.jsx(ud,{className:"w-6 h-6"}):w.jsx(m1,{className:"w-6 h-6"})})]})]}),w.jsx(cr,{children:a&&w.jsx(fe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-gray-800 mt-4 pt-4",children:w.jsx("nav",{className:"flex flex-col space-y-2",children:u().map(m=>w.jsxs("button",{onClick:()=>d(m),className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 text-left ${f(m.path)?"bg-gold text-gray-900 font-semibold":"text-gray-300 hover:text-white hover:bg-gray-800"}`,children:[w.jsx(m.icon,{className:"w-5 h-5"}),w.jsx("span",{children:m.label})]},m.path||m.action))})})}),w.jsx(ww,{isOpen:i,onClose:()=>o(!1)})]});if(!n||!r)return w.jsx(Js,{minimal:!0});const p=mC(r.lastChestOpenAt,r.cooldownSeconds);return w.jsxs("header",{className:"w-full py-4 px-6 bg-gray-900 border-b border-gray-800",children:[w.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center relative",children:[w.jsx(ld,{to:"/",className:"flex items-center space-x-4 hover:opacity-80 transition-opacity",children:w.jsx("div",{className:"flex flex-col",children:w.jsx("img",{src:bw,alt:"Zoggy Logo",className:"h-8 w-auto"})})}),e&&w.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 hidden lg:block",children:w.jsx("span",{className:"text-4xl font-bold text-white font-montserrat uppercase tracking-widest",children:e})}),w.jsxs("div",{className:"flex items-center space-x-6",children:[w.jsx("nav",{className:"hidden md:flex items-center space-x-4",children:u().map(m=>w.jsxs("button",{onClick:()=>d(m),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 ${f(m.path)?"bg-gold text-gray-900 font-semibold":"text-gray-300 hover:text-white hover:bg-gray-800"}`,children:[w.jsx(m.icon,{className:"w-4 h-4"}),w.jsx("span",{className:"text-sm",children:m.label})]},m.path||m.action))}),w.jsxs("div",{className:"hidden sm:block text-right",children:[w.jsx("div",{className:"text-sm text-gray-400",children:"Balance"}),w.jsxs("div",{className:"text-xl font-bold text-gold",children:["$",r.totalCredits||"0.00"]})]}),p&&w.jsx("div",{className:"hidden lg:block w-48",children:w.jsx(Jg,{targetDate:p,className:"text-right"})}),w.jsx("button",{onClick:()=>l(!a),className:"md:hidden p-2 text-gray-400 hover:text-white transition-colors",children:a?w.jsx(ud,{className:"w-6 h-6"}):w.jsx(m1,{className:"w-6 h-6"})})]})]}),w.jsx(cr,{children:a&&w.jsxs(fe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-gray-800 mt-4 pt-4",children:[w.jsx("nav",{className:"flex flex-col space-y-2",children:u().map(m=>w.jsxs("button",{onClick:()=>d(m),className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 text-left ${f(m.path)?"bg-gold text-gray-900 font-semibold":"text-gray-300 hover:text-white hover:bg-gray-800"}`,children:[w.jsx(m.icon,{className:"w-5 h-5"}),w.jsx("span",{children:m.label})]},m.path||m.action))}),w.jsx("div",{className:"mt-4 pt-4 border-t border-gray-800",children:w.jsxs("div",{className:"flex justify-between items-center px-4 py-2",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-sm text-gray-400",children:"Balance"}),w.jsxs("div",{className:"text-lg font-bold text-gold",children:["$",r.totalCredits||"0.00"]})]}),p&&w.jsx("div",{className:"text-right",children:w.jsx(Jg,{targetDate:p,className:"text-sm"})})]})})]})}),w.jsx(ww,{isOpen:i,onClose:()=>o(!1)})]})},fV="/assets/0-4fbe3577.png",pV="/assets/1-99731f09.png",UR=({className:t=""})=>{const e={hidden:{opacity:0,scale:1.01,filter:"blur(2px)"},show:{opacity:1,scale:1,filter:"blur(0px)",transition:{duration:.4}}};return w.jsxs("div",{className:`relative w-full overflow-hidden ${t}`,children:[w.jsxs("div",{className:"sm:hidden w-full",children:[w.jsx(fe.img,{initial:"hidden",animate:"show",variants:e,src:pV,alt:"Mobile banner",className:"w-full h-auto object-contain",loading:"eager",decoding:"async"}),w.jsx("div",{className:"absolute inset-0 border-2 border-gold/30 pointer-events-none"})]}),w.jsxs("div",{className:"relative hidden sm:block aspect-[32/10]",children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950"}),w.jsx(fe.img,{initial:"hidden",animate:"show",variants:e,src:fV,alt:"Desktop banner",className:"absolute inset-0 w-full h-full object-cover object-center",loading:"eager",decoding:"async"}),w.jsx("div",{className:"absolute inset-0 border-2 border-gold/30 pointer-events-none"})]})]})},mV=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,gV=["10minutemail.com","20minutemail.com","33mail.com","guerrillamail.com","guerrillamailblock.com","guerrillamail.net","guerrillamail.biz","guerrillamail.org","guerrillamail.de","mailinator.com","mailinator.net","mailinator.org","mailinator2.com","tempmail.org","temp-mail.org","tempmail.net","temp-mail.io","throwaway.email","yopmail.com","yopmail.fr","yopmail.net","cool.fr.nf","jetable.fr.nf","nospam.ze.tc","nomail.xl.cx","mega.zik.dj","speed.1s.fr","courriel.fr.nf","moncourrier.fr.nf","monemail.fr.nf","monmail.fr.nf","maildrop.cc","sharklasers.com","grr.la","armyspy.com","cuvox.de","dayrep.com","fleckens.hu","gustr.com","jourrapide.com","rhyta.com","superrito.com","teleworm.us","einrot.com","getnada.com","trashmail.com","trashmail.org","trashmail.net","trashmail.ws","trashmail.de","spamgourmet.com","spamgourmet.net","spamgourmet.org","spamhole.com","spamex.com","spamfree24.org","spamfree24.de","spamfree24.eu","spamfree24.net","spamfree24.com","emailondeck.com","fakeinbox.com","fakemailgenerator.com","fakemail.net","dispostable.com","disposableemailaddresses.com","disposable-email.ml","disposable.ml","anonbox.net","anonymbox.com","antispam.de","bccto.me","beefmilk.com","binkmail.com","bio-muesli.net","bobmail.info","bodhi.lawlita.com","bofthew.com","brefmail.com","broadbandninja.com","bsnow.net","bugmenot.com","bumpymail.com","burnthisemailaddress.com","buyusedlibrarybooks.org","byom.de","c2.hu","card.zp.ua","casualdx.com","cek.pm","centermail.com","centermail.net","chammy.info","childsavetrust.org","chogmail.com","choicemail1.com","clixser.com","cmail.net","cmail.org","cmail.com","coldemail.info","cool.fr.nf","correo.blogos.net","cosmorph.com","courriel.fr.nf","courrieltemporaire.com","curryworld.de","cust.in","cuvox.de","dacoolest.com","dandikmail.com","dayrep.com","dcemail.com","deadaddress.com","deadspam.com","delikkt.de","despam.it","despammed.com","devnullmail.com","dfgh.net","digitalsanctuary.com","dingbone.com","discard.email","discardmail.com","discardmail.de","disposableaddress.com","disposableemailaddresses.com","disposableinbox.com","dispose.it","dispostable.com","dm.w3internet.co.uk","dodgeit.com","dodgit.com","dodgit.org","donemail.ru","dontreg.com","dontsendmespam.de","drdrb.net","dump-email.info","dumpandjunk.com","dumpmail.de","dumpyemail.com","e-mail.com","e-mail.org","e4ward.com","easytrashmail.com","einmalmail.de","einrot.com","einrot.de","email60.com","emaildienst.de","emailias.com","emailinfive.com","emailmiser.com","emailsensei.com","emailtemporanea.com","emailtemporanea.net","emailtemporario.com.br","emailthe.net","emailtmp.com","emailto.de","emailwarden.com","emailx.at.hm","emailxfer.com","emeil.in","emeil.ir","emz.net","enterto.com","ephemail.net","etranquil.com","etranquil.net","etranquil.org","evopo.com","explodemail.com","express.net.ua","eyepaste.com","fakeinbox.com","fakemailgenerator.com","fammix.com","fansworldwide.de","fantasymail.de","fightallspam.com","filzmail.com","fivemail.de","fleckens.hu","fly-ts.de","flyspam.com","footard.com","forgetmail.com","fr33mail.info","frapmail.com","freemails.cf","freemails.ga","freemails.ml","freundin.ru","friendlymail.co.uk","front14.org","fuckingduh.com","fudgerub.com","fux0ringduh.com","garliclife.com","get-mail.cf","get-mail.ga","get-mail.ml","get-mail.tk","get1mail.com","get2mail.fr","getairmail.cf","getairmail.com","getairmail.ga","getairmail.gq","getairmail.ml","getairmail.tk","getmails.eu","getnada.com","getonemail.com","getonemail.net","ghosttexter.de","girlsundertheinfluence.com","gishpuppy.com","gmial.com","goemailgo.com","gotmail.com","gotmail.net","gotmail.org","gotti.otherinbox.com","great-host.in","greensloth.com","grr.la","gsrv.co.uk","guerillamail.biz","guerillamail.com","guerillamail.de","guerillamail.net","guerillamail.org","guerrillamail.biz","guerrillamail.com","guerrillamail.de","guerrillamail.info","guerrillamail.net","guerrillamail.org","guerrillamailblock.com","gustr.com","harakirimail.com","hat-geld.de","hatespam.org","herp.in","hidemail.de","hidzz.com","hmamail.com","hopemail.biz","hotpop.com","hulapla.de","ieatspam.eu","ieatspam.info","ieh-mail.de","ikbenspamvrij.nl","imails.info","inbax.tk","inbox.si","inboxalias.com","inboxclean.com","inboxclean.org","inboxproxy.com","incognitomail.com","incognitomail.net","incognitomail.org","insorg-mail.info","instant-mail.de","instantemailaddress.com","instantlyemail.com","iozak.com","irish2me.com","iwi.net","jetable.com","jetable.fr.nf","jetable.net","jetable.org","jnxjn.com","jourrapide.com","jsrsolutions.com","junk1e.com","junkmail.ga","junkmail.gq","kasmail.com","kaspop.com","keepmymail.com","killmail.com","killmail.net","klassmaster.com","klzlk.com","koszmail.pl","kurzepost.de","lawlita.com","letthemeatspam.com","lhsdv.com","lifebyfood.com","link2mail.net","litedrop.com","lol.ovpn.to","lolfreak.net","lookugly.com","lopl.co.cc","lortemail.dk","lovemeleaveme.com","lr78.com","lroid.com","lukop.dk","m21.cc","mail-filter.com","mail-temporaire.fr","mail.by","mail.mezimages.net","mail.zp.ua","mail1a.de","mail21.cc","mail2rss.org","mail333.com","mail4trash.com","mailbidon.com","mailbiz.biz","mailblocks.com","mailbucket.org","mailcat.biz","mailcatch.com","mailde.de","mailde.info","maildrop.cc","maildrop.cf","maildrop.ga","maildrop.gq","maildrop.ml","maildx.com","maileater.com","mailed.ro","mailexpire.com","mailfa.tk","mailforspam.com","mailfreeonline.com","mailguard.me","mailimate.com","mailin8r.com","mailinater.com","mailinator.com","mailinator.gq","mailinator.net","mailinator.org","mailinator2.com","mailincubator.com","mailismagic.com","mailme.gq","mailme.ir","mailme.lv","mailmetrash.com","mailmoat.com","mailms.com","mailnator.com","mailnesia.com","mailnull.com","mailorg.org","mailpick.biz","mailproxsy.com","mailquack.com","mailrock.biz","mailscrap.com","mailshell.com","mailsiphon.com","mailtemp.info","mailtome.de","mailtothis.com","mailtrash.net","mailtv.net","mailtv.tv","mailzilla.com","mailzilla.org","makemetheking.com","manybrain.com","mbx.cc","mega.zik.dj","meinspamschutz.de","meltmail.com","messagebeamer.de","mierdamail.com","mintemail.com","mjukglass.nu","mobi.web.id","mobileninja.co.uk","moburl.com","moncourrier.fr.nf","monemail.fr.nf","monmail.fr.nf","monumentmail.com","mt2009.com","mt2014.com","mycard.net.ua","mycleaninbox.net","myemailboxy.com","mymail-in.net","mymailoasis.com","mynetstore.de","mypacks.net","mypartyclip.de","myphantomemail.com","mysamp.de","mytempemail.com","mytempmail.com","mytrashmail.com","nabuma.com","neomailbox.com","nepwk.com","nervmich.net","nervtmich.net","netmails.com","netmails.net","netzidiot.de","neverbox.com","nice-4u.com","nincsmail.com","nincsmail.hu","nnh.com","no-spam.ws","noblepioneer.com","nobugmail.com","nobulk.com","noclickemail.com","nogmailspam.info","nomail.xl.cx","nomail2me.com","nomorespamemails.com","nonspam.eu","nonspammer.de","noref.in","nospam.ze.tc","nospam4.us","nospamfor.us","nospammail.net","nospamthanks.info","notmailinator.com","notsharingmy.info","nowhere.org","nowmymail.com","nurfuerspam.de","nus.edu.sg","nwldx.com","objectmail.com","obobbo.com","odaymail.com","one-time.email","oneoffemail.com","oneoffmail.com","onewaymail.com","online.ms","oopi.org","opayq.com","ordinaryamerican.net","otherinbox.com","ovpn.to","owlpic.com","pancakemail.com","paplease.com","pcusers.otherinbox.com","pjkly.com","plexolan.de","poczta.onet.pl","politikerclub.de","pooae.com","pookmail.com","privacy.net","privatdemail.net","proxymail.eu","prtnx.com","punkass.com","putthisinyourspamdatabase.com","pwrby.com","qq.com","quickinbox.com","rcpt.at","reallymymail.com","realtyalerts.ca","receiveee.com","recode.me","recursor.net","regbypass.com","regbypass.comsafe-mail.net","rejectmail.com","rhyta.com","rklips.com","rmqkr.net","royal.net","rppkn.com","rtrtr.com","s0ny.net","safe-mail.net","safersignup.de","safetymail.info","safetypost.de","sandelf.de","saynotospams.com","schafmail.de","schrott-email.de","secretemail.de","secure-mail.biz","selfdestructingmail.com","selfdestructingmail.org","sendspamhere.de","sharklasers.com","shieldedmail.com","shitmail.me","shitmail.org","shitware.nl","shmeriously.com","shortmail.net","sibmail.com","sinnlos-mail.de","siteposter.net","skeefmail.com","slaskpost.se","slopsbox.com","smashmail.de","smellfear.com","snakemail.com","sneakemail.com","snkmail.com","sofimail.com","sofort-mail.de","sogetthis.com","soodonims.com","spam.la","spam.su","spam4.me","spamail.de","spambob.com","spambob.net","spambob.org","spambog.com","spambog.de","spambog.ru","spambox.info","spambox.irishspringtours.com","spambox.us","spamcannon.com","spamcannon.net","spamcon.org","spamcorptastic.com","spamcowboy.com","spamcowboy.net","spamcowboy.org","spamday.com","spamex.com","spamfree24.com","spamfree24.de","spamfree24.eu","spamfree24.net","spamfree24.org","spamgoes.com","spamgourmet.com","spamgourmet.net","spamgourmet.org","spamherelots.com","spamhereplease.com","spamhole.com","spami.spam.co.za","spaminator.de","spamkill.info","spaml.com","spaml.de","spammotel.com","spamobox.com","spamoff.de","spamslicer.com","spamspot.com","spamstack.net","spamthis.co.uk","spamthisplease.com","spamtrail.com","spamtroll.net","speed.1s.fr","spoofmail.de","stuffmail.de","super-auswahl.de","supergreatmail.com","supermailer.jp","superrito.com","superstachel.de","suremail.info","talkinator.com","tapchicuoihoi.com","teewars.org","teleworm.com","teleworm.us","temp-mail.org","temp-mail.ru","tempalias.com","tempe-mail.com","tempemail.biz","tempemail.com","tempemail.net","tempinbox.co.uk","tempinbox.com","tempmail.eu","tempmail.it","tempmail2.com","tempmaildemo.com","tempmailer.com","tempmailer.de","tempmailaddress.com","tempthe.net","tempymail.com","thanksnospam.info","thankyou2010.com","thc.st","thelimestones.com","thisisnotmyrealemail.com","thismail.net","throwawayemailaddresses.com","tilien.com","tittbit.in","tizi.com","tmailinator.com","toiea.com","toomail.biz","topranklist.de","tradermail.info","trash-amil.com","trash-mail.at","trash-mail.com","trash-mail.de","trash2009.com","trashdevil.com","trashdevil.de","trashemail.de","trashmail.at","trashmail.com","trashmail.de","trashmail.me","trashmail.net","trashmail.org","trashmail.ws","trashmailer.com","trashymail.com","trashymail.net","trbvm.com","trialmail.de","trickmail.net","trillianpro.com","tryalert.com","turual.com","twinmail.de","tyldd.com","uggsrock.com","umail.net","upliftnow.com","uplipht.com","uroid.com","us.af","venompen.com","veryrealemail.com","viditag.com","viewcastmedia.com","viewcastmedia.net","viewcastmedia.org","vomoto.com","vpn.st","vsimcard.com","vubby.com","walala.org","walkmail.net","webemail.me","webm4il.info","weg-werf-email.de","wegwerf-emails.de","wegwerfadresse.de","wegwerfemail.com","wegwerfemail.de","wegwerfmail.de","wegwerfmail.info","wegwerfmail.net","wegwerfmail.org","wetrainbayarea.com","wetrainbayarea.org","wh4f.org","whatiaas.com","whatpaas.com","whatsaas.com","whopy.com","willhackforfood.biz","willselfdestruct.com","winemaven.info","wronghead.com","wuzup.net","wuzupmail.net","www.e4ward.com","www.gishpuppy.com","www.mailinator.com","wwwnew.eu","x.ip6.li","xagloo.com","xemaps.com","xents.com","xmaily.com","xoxy.net","yapped.net","yeah.net","yep.it","yogamaven.com","yopmail.com","yopmail.fr","yopmail.net","yourdomain.com","ypmail.webredirect.org","yuurok.com","zehnminuten.de","zehnminutenmail.de","zetmail.com","zippymail.info","zoaxe.com","zoemail.net","zoemail.org","zomg.info"],yV=t=>!t||typeof t!="string"?!1:mV.test(t.trim().toLowerCase()),xV=t=>{if(!t||typeof t!="string")return!1;const e=t.trim().toLowerCase().split("@")[1];return e?gV.includes(e):!1},vV=t=>{const e=[];if(!t||typeof t!="string"||t.trim().length===0)return e.push("Email is required"),{isValid:!1,errors:e};const r=t.trim().toLowerCase();return yV(r)||e.push("Please enter a valid email address"),xV(r)&&e.push("Temporary email addresses are not allowed"),r.length>254&&e.push("Email address is too long"),r.includes("..")&&e.push("Email address contains consecutive dots"),(r.startsWith(".")||r.endsWith("."))&&e.push("Email address cannot start or end with a dot"),{isValid:e.length===0,errors:e,email:r}},_V=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");e.textBaseline="top",e.font="14px Arial",e.fillText("Device fingerprint",2,2);const r={userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screen:{width:screen.width,height:screen.height,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth},canvas:t.toDataURL(),webgl:wV(),plugins:Array.from(navigator.plugins).map(n=>n.name).sort(),localStorage:!!window.localStorage,sessionStorage:!!window.sessionStorage,indexedDB:!!window.indexedDB,cpuClass:navigator.cpuClass,hardwareConcurrency:navigator.hardwareConcurrency};return bV(JSON.stringify(r))},wV=()=>{try{const t=document.createElement("canvas"),e=t.getContext("webgl")||t.getContext("experimental-webgl");return e?{vendor:e.getParameter(e.VENDOR),renderer:e.getParameter(e.RENDERER),version:e.getParameter(e.VERSION),shadingLanguageVersion:e.getParameter(e.SHADING_LANGUAGE_VERSION)}:null}catch{return null}},bV=t=>{let e=0;if(t.length===0)return e;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);e=(e<<5)-e+n,e=e&e}return e.toString()},AV=()=>{try{return localStorage.getItem("zoggy_signup_completed")==="true"}catch{return!1}},SV=()=>{try{localStorage.setItem("zoggy_signup_completed","true"),localStorage.setItem("zoggy_signup_timestamp",Date.now().toString())}catch(t){console.warn("Failed to mark device as signed up:",t)}},fy="zoggy_signup_attempts",VR="zoggy_ip_attempts",Qn=3,TV=5,vd=60*60*1e3,ev=24*60*60*1e3,jR=async()=>{try{const t=await fetch("/api/ip",{credentials:"include"}),{ip:e}=await t.json();return e}catch(t){return console.warn("Failed to get IP address:",t),null}},EV=async()=>{try{const t=await jR();if(!t)return{allowed:!0,remaining:Qn};const e=`${VR}_${t}`,r=localStorage.getItem(e);if(!r)return{allowed:!0,remaining:Qn};const n=JSON.parse(r),s=Date.now();if(n.attempts=n.attempts.filter(o=>s-o<vd),n.attempts.length>=Qn){const o=Math.min(...n.attempts),a=vd-(s-o);return{allowed:!1,remaining:0,resetTime:new Date(s+a),message:`Too many signup attempts from this IP. Please try again in ${Math.ceil(a/(60*1e3))} minutes.`}}return n.attempts.filter(o=>s-o<ev).length>=TV?{allowed:!1,remaining:0,message:"Daily signup limit exceeded. Please try again tomorrow."}:{allowed:!0,remaining:Qn-n.attempts.length}}catch(t){return console.warn("Rate limit check failed:",t),{allowed:!0,remaining:Qn}}},CV=async()=>{try{const t=await jR();if(!t)return;const e=`${VR}_${t}`,r=localStorage.getItem(e),n=Date.now();let s={attempts:[]};r&&(s=JSON.parse(r),s.attempts=s.attempts.filter(i=>n-i<ev)),s.attempts.push(n),localStorage.setItem(e,JSON.stringify(s))}catch(t){console.warn("Failed to record signup attempt:",t)}},RV=()=>{try{const t=localStorage.getItem(fy);if(!t)return{allowed:!0,remaining:Qn};const e=JSON.parse(t),r=Date.now();if(e.attempts=e.attempts.filter(n=>r-n<vd),e.attempts.length>=Qn){const n=Math.min(...e.attempts),s=vd-(r-n);return{allowed:!1,remaining:0,resetTime:new Date(r+s),message:`Too many signup attempts. Please try again in ${Math.ceil(s/(60*1e3))} minutes.`}}return{allowed:!0,remaining:Qn-e.attempts.length}}catch(t){return console.warn("Device rate limit check failed:",t),{allowed:!0,remaining:Qn}}},PV=()=>{try{const t=localStorage.getItem(fy),e=Date.now();let r={attempts:[]};t&&(r=JSON.parse(t),r.attempts=r.attempts.filter(n=>e-n<ev)),r.attempts.push(e),localStorage.setItem(fy,JSON.stringify(r))}catch(t){console.warn("Failed to record device attempt:",t)}},MV=({onSuccess:t,forceEnable:e=!1})=>{const[r,n]=C.useState(""),[s,i]=C.useState(!1),[o,a]=C.useState(!1),[l,c]=C.useState({isValid:!1,errors:[],isChecking:!1,emailExists:!1}),[h,u]=C.useState({allowed:!0,message:"",resetTime:null}),[d,f]=C.useState(null),[p,m]=C.useState(!1),[g,y]=C.useState(""),{setToken:v,setUser:x}=co(),_=ws(),{showToast:b}=bs();C.useEffect(()=>{(async()=>{const D=_V();f(D);const M=new URLSearchParams(window.location.search).get("ref");if(M&&y(M),AV()){u({allowed:!1,message:"This device has already been used to join the waitlist.",resetTime:null});return}const[G,B]=await Promise.all([EV(),RV()]);G.allowed?B.allowed||u({allowed:!1,message:B.message,resetTime:B.resetTime}):u({allowed:!1,message:G.message,resetTime:G.resetTime})})()},[]);const A=C.useCallback(async P=>{var D,k;if(P){a(!0),c(M=>({...M,isChecking:!0}));try{const M=vV(P);if(!M.isValid){c({isValid:!1,errors:M.errors,isChecking:!1,emailExists:!1}),a(!1);return}try{const G=await ba.signin(P);c({isValid:!1,errors:["This email is already registered. You're already on the waitlist!"],isChecking:!1,emailExists:!0})}catch(G){((D=G.response)==null?void 0:D.status)===404?c({isValid:!0,errors:[],isChecking:!1,emailExists:!1}):((k=G.response)==null?void 0:k.status)===403?c({isValid:!1,errors:["This email is already registered but not verified. Please check your email."],isChecking:!1,emailExists:!0}):c({isValid:!0,errors:["Unable to verify email availability. You can still proceed."],isChecking:!1,emailExists:!1})}}catch(M){console.error("Email validation error:",M),c({isValid:!1,errors:["Unable to validate email. Please try again."],isChecking:!1,emailExists:!1})}finally{a(!1)}}},[]);C.useEffect(()=>{if(!r.trim()){c({isValid:!1,errors:[],isChecking:!1,emailExists:!1});return}A(r.trim().toLowerCase())},[r,A]);const S=P=>{const D=P.target.value;n(D),(l.emailExists||l.errors.length>0)&&c(k=>({...k,errors:[],emailExists:!1}))},T=async P=>{var D,k,M,G;if(P.preventDefault(),p){b("Please wait, your previous submission is being processed.","warning");return}if(!h.allowed&&!e){b(h.message,"error");return}if(!r.trim()){b("Please enter your email address","error");return}if(!l.isValid||l.emailExists){b("Please fix the email issues before submitting","error");return}i(!0),m(!0);try{await Promise.all([CV(),PV()]);const B=await ba.signup(r.trim().toLowerCase(),g,d);B.data.token?(v(B.data.token),x(B.data.user),SV(),b("🎉 Welcome! You're now signed in and ready to start earning!","success"),_("/dashboard"),t&&t(B.data)):(b("Please check your email to verify your account","info"),_("/verify-email",{state:{email:signupData.email}}))}catch(B){if(console.error("Signup failed:",B),((D=B.response)==null?void 0:D.status)===409)b("This email is already registered. Redirecting to sign in...","info"),setTimeout(()=>{_("/signin",{state:{email:r.trim().toLowerCase()}})},2e3);else if(((k=B.response)==null?void 0:k.status)===429)b("Too many signup attempts. Please try again later.","error"),u({allowed:!1,message:"Rate limit exceeded. Please try again later.",resetTime:new Date(Date.now()+60*60*1e3)});else if(((M=B.response)==null?void 0:M.status)===400){const U=((G=B.response.data)==null?void 0:G.message)||"Invalid email format";b(U,"error")}else b("Something went wrong. Please try again.","error")}finally{i(!1),setTimeout(()=>m(!1),3e3)}},E=()=>o||l.isChecking?w.jsx(EB,{className:"w-5 h-5 text-gold animate-spin"}):l.errors.length>0?w.jsx(cB,{className:"w-5 h-5 text-red-400"}):l.isValid&&r.trim()?w.jsx(cC,{className:"w-5 h-5 text-green-400"}):null,R=!h.allowed||!l.isValid||l.emailExists||s||p||o||l.isChecking;return w.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md mx-auto",children:[w.jsx(cr,{children:!h.allowed&&w.jsxs(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-4 p-4 bg-red-500/10 border border-red-500/30 rounded-xl",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(cd,{className:"w-5 h-5 text-red-400"}),w.jsx("p",{className:"text-red-400 text-sm font-montserrat",children:h.message})]}),h.resetTime&&w.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[w.jsx(pB,{className:"w-4 h-4 text-red-400"}),w.jsxs("p",{className:"text-red-300 text-xs",children:["Try again after ",h.resetTime.toLocaleTimeString()]})]})]})}),w.jsxs("form",{onSubmit:T,className:"space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsxs("div",{className:"relative",children:[w.jsx(Px,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 z-10"}),w.jsx("input",{type:"email",placeholder:"Enter your email to join waitlist",value:r,onChange:S,className:`w-full pl-12 pr-12 py-4 bg-gray-800/50 backdrop-blur-sm border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none transition-all duration-300 text-lg ${s||!h.allowed?"border-red-500 bg-red-500/5 cursor-not-allowed":e?"border-gray-500 bg-gray-500/5 cursor-text":l.errors.length>0?"border-red-500 focus:border-red-400 focus:ring-2 focus:ring-red-400/20 cursor-text":l.isValid&&r.trim()?"border-green-500 focus:border-green-400 focus:ring-2 focus:ring-green-400/20 cursor-text":"border-gray-600 focus:border-gold focus:ring-2 focus:ring-gold/20 cursor-text"}`,disabled:s||!h.allowed&&!e,autoComplete:"email",spellCheck:"false"}),w.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:w.jsx(cr,{mode:"wait",children:E()&&w.jsx(fe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:E()},o?"loading":l.errors.length>0?"error":"valid")})})]}),w.jsx(cr,{children:l.errors.length>0&&w.jsx(fe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-2 space-y-1",children:l.errors.map((P,D)=>w.jsx("p",{className:"text-red-400 text-sm ml-1 font-montserrat",children:P},D))})}),w.jsx(cr,{children:g&&w.jsx(fe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-3 p-3 bg-gold/10 border border-gold/30 rounded-lg",children:w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(fC,{className:"w-4 h-4 text-gold"}),w.jsxs("p",{className:"text-gold text-sm font-semibold",children:["You were referred! Referral Code: ",w.jsx("span",{className:"font-mono",children:g})]})]})})}),w.jsx(cr,{children:(o||l.isChecking)&&w.jsx(fe.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-gold text-sm mt-2 ml-1 font-montserrat",children:"Checking email availability..."})})]}),w.jsx(Ot,{type:"submit",variant:"primary",size:"lg",loading:s,disabled:R&&!e,className:"w-full text-xl py-4 bg-gradient-to-r from-brand to-red-700 hover:from-red-600 hover:to-red-800 transform hover:scale-105 transition-all duration-300 shadow-2xl hover:shadow-brand/50",children:s?"Joining...":"JOIN THE WAITLIST"}),w.jsx("div",{className:"text-center",children:l.isValid&&r.trim()&&!l.emailExists&&w.jsx(fe.p,{initial:{opacity:0},animate:{opacity:1},className:"text-green-400 text-xs mt-2 font-montserrat",children:"✓ Email is available and ready to join!"})})]}),w.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-6 p-3 bg-gray-800/30 rounded-lg border border-gray-700/50",children:w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(cd,{className:"w-4 h-4 text-gray-400"}),w.jsx("p",{className:"text-gray-400 text-xs font-montserrat",children:"Protected against spam and multiple signups. One email per person."})]})})]})},IV=({onJoinWaitlist:t})=>{const{user:e}=co(),[r,n]=C.useState(!1);return C.useEffect(()=>{const i=new URLSearchParams(window.location.search).get("ref");n(!!i)},[]),w.jsxs("section",{className:"min-h-fit bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950",children:[w.jsx("div",{className:"relative overflow-hidden",children:w.jsx(UR,{autoSlide:!0,slideInterval:6e3,className:""})}),(!e||r)&&w.jsx("div",{className:"flex items-center justify-center px-6 py-6",children:w.jsx("div",{className:"max-w-5xl mx-auto text-center relative",children:w.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},children:w.jsx(MV,{onSuccess:s=>{},forceEnable:r})})})})]})},Gl=(t,e=[])=>{const[r,n]=C.useState(null),[s,i]=C.useState(!0),[o,a]=C.useState(null),l=async(...c)=>{try{i(!0),a(null);const h=await t(...c);return n(h.data),h.data}catch(h){throw a(h),h}finally{i(!1)}};return C.useEffect(()=>{l()},e),{data:r,loading:s,error:o,execute:l}},Fn=({children:t,className:e="",hover:r=!0,...n})=>{const s="bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700/50 rounded-2xl p-8 shadow-2xl backdrop-blur-sm",i=r?"hover:shadow-2xl hover:shadow-gray-900/50 hover:border-gray-600/70 hover:scale-[1.02] transition-all duration-500":"";return w.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${s} ${i} ${e}`,...n,children:t})},kV=["pepe247","satoshiX","bitcoinBull","ethMiner","cryptoKing","hodlMaster","moonLambo","degenApe","diamondHands","cryptoWhale","btcMaxi","altcoinHero","nftFliper","web3Warrior","blockchainBro","coinCollector","tokenTitan","cryptoNinja","satoshiSon","vitalikFan","defiDegen","yieldFarmer","liquidityLord","stakingKing","cryptoPunk","boredApe","metaverseMike","daoMember","rugPuller","moonBoy","bearMarket","bullRun","pumpAndDump","hodlGang","cryptoMoon","lamboSoon","toTheMoon","whenLambo","cryptoGod","blockchainBeast","coinMaster","tokenKing","cryptoLord","bitcoinBoss","ethGiant","altKing","defiLord","nftKing","web3God","metaLord","cryptoSage","blockWizard","coinSorcerer","tokenMage"],NV=["plinkoPro","slotMaster","casinoKing","luckyStrike","jackpotJoe","bigWinner","spinDoctor","reelKing","cardShark","pokerFace","blackjackBoss","roulettePro","diceRoller","betMaster","gambleGod","luckLord","fortuneSeeker","winStreak","megaWin","bonusHunter","freeSpins","wildSymbol","scatterWin","multiplierX","progressiveWin","maxBet","allIn","doubleDown","hitMe","standPat","royalFlush","fullHouse","straightFlush","fourOfKind","aceHigh","kingPair","luckyNumber7","triple777","cherryBomb","goldenBell","diamondMine","treasureChest","goldRush","silverStrike","bronzeMedal","platinumPlay","eliteGamer","proPlayer","masterGamer","legendaryWin","epicVictory","ultimateWin","supremePlayer","alphaGamer"],FV=["marta_lee","john_smith","sarah_jones","mike_wilson","anna_brown","david_clark","lisa_taylor","chris_white","emma_davis","ryan_miller","sofia_garcia","alex_johnson","maya_rodriguez","tyler_anderson","zoe_martinez","noah_thompson","ava_lopez","ethan_lee","mia_gonzalez","lucas_harris","chloe_clark","mason_lewis","grace_walker","logan_hall","lily_allen","jacob_young","ella_king","owen_wright","aria_scott","carter_green","luna_adams","wyatt_baker","nova_nelson","eli_hill","ivy_carter","liam_mitchell","ruby_perez","nolan_roberts","sage_turner","kai_phillips","aurora_campbell","felix_parker","iris_evans","oscar_edwards","violet_collins","theo_stewart","rose_sanchez","leo_morris","hazel_rogers","max_reed","willow_cook","sam_morgan","poppy_bailey","finn_cooper","daisy_richardson"],tv=(t,e)=>{const r=[];return t.forEach(n=>{r.push(n),e.forEach(s=>{r.push(`${n}${s}`)})}),r},LV=["2024","X","100x","Moon","Gem","Pro","Elite","Max","Prime","Alpha"],OV=["Winner","Lucky","Pro","Master","King","Lord","Boss","God","Legend","Epic"],BV=["123","2024","_pro","_win","_lucky","_max","_elite","_prime","_alpha","_beta"],DV=tv(kV,LV),UV=tv(NV,OV),VV=tv(FV,BV),Lp=[...DV,...UV,...VV];let ol=new Map;const jV=()=>{const t=Date.now(),e=90*60*1e3;for(const[s,i]of ol.entries())t-i>e&&ol.delete(s);const r=Lp.filter(s=>!ol.has(s));if(r.length===0)return ol.clear(),Lp[Math.floor(Math.random()*Lp.length)];const n=r[Math.floor(Math.random()*r.length)];return ol.set(n,t),n},Aw=["gmail.com","outlook.com","hotmail.com","yahoo.com","icloud.com","proton.me","yandex.com","gmx.com","mail.com"],$V=()=>{const t=Math.floor(Math.random()*Aw.length);return Aw[t]},GV=t=>t&&t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,".").replace(/[^a-z0-9._+-]/g,"")||"user",zV=t=>{const e=String(t||"");return e.includes("@")?e:`${GV(e)}@${$V()}`},_d=({data:t=[],columns:e=[],loading:r=!1,animated:n=!1,emptyMessage:s="No data available",loadingRows:i=5,className:o="",mobileCardClassName:a="",desktopTableClassName:l="",...c})=>{const h=()=>w.jsx("div",{className:"space-y-4",children:Array.from({length:i},(p,m)=>w.jsxs("div",{className:"animate-pulse",children:[w.jsx("div",{className:"hidden md:block h-16 bg-gray-700 rounded"}),w.jsxs("div",{className:"md:hidden bg-gray-800 rounded-lg p-4 space-y-3",children:[w.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4"}),w.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/2"}),w.jsx("div",{className:"h-3 bg-gray-700 rounded w-2/3"})]})]},m))}),u=()=>w.jsx("div",{className:"text-center py-8 text-gray-400",children:s}),d=({item:p,index:m})=>{const g=typeof a=="function"?a(p,m):a||"";return w.jsx(fe.div,{initial:n?{opacity:0,y:20}:{},animate:n?{opacity:1,y:0}:{},exit:n?{opacity:0,y:-20}:{},transition:n?{duration:.3,delay:m*.05}:{},className:`bg-gray-800 rounded-lg p-4 border border-gray-700 hover:border-gray-600 transition-all duration-200 ${g}`,children:w.jsx("div",{className:"space-y-3",children:e.map((y,v)=>{const x=y.accessor?p[y.accessor]:p,_=y.render?y.render(x,p,m):x;return w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:y.header}),w.jsx("div",{className:"text-right",children:_})]},v)})})},p.id||`mobile-${m}`)},f=()=>w.jsx("div",{className:"overflow-x-hidden",children:w.jsxs("table",{className:`w-full ${l}`,children:[w.jsx("thead",{children:w.jsx("tr",{className:"border-b border-gray-700",children:e.map((p,m)=>w.jsx("th",{className:`text-left py-4 px-4 text-sm font-bold text-gold uppercase tracking-wider ${p.headerClassName||""}`,children:p.header},m))})}),w.jsx("tbody",{children:n?w.jsx(cr,{children:t.map((p,m)=>w.jsx(fe.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:m*.02},className:"border-b border-gray-800 hover:bg-gray-800/50 transition-colors",children:e.map((g,y)=>{const v=g.accessor?p[g.accessor]:p,x=g.render?g.render(v,p,m):v;return w.jsx("td",{className:`py-4 px-4 ${g.cellClassName||""}`,children:x},y)})},p.id||`desktop-${m}`))}):t.map((p,m)=>w.jsx("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50 transition-colors",children:e.map((g,y)=>{const v=g.accessor?p[g.accessor]:p,x=g.render?g.render(v,p,m):v;return w.jsx("td",{className:`py-4 px-4 ${g.cellClassName||""}`,children:x},y)})},p.id||`desktop-${m}`))})]})});return r?w.jsx(h,{}):!t||t.length===0?w.jsx(u,{}):w.jsxs("div",{className:o,...c,children:[w.jsx("div",{className:"md:hidden",children:w.jsx("div",{className:"space-y-4",children:n?w.jsx(cr,{children:t.map((p,m)=>w.jsx(d,{item:p,index:m},p.id||`mobile-${m}`))}):t.map((p,m)=>w.jsx(d,{item:p,index:m},p.id||`mobile-${m}`))})}),w.jsx("div",{className:"hidden md:block",children:w.jsx(f,{})})]})};let Sw=0,Tw=0,bu=[],Ts=0;const Op=()=>{const t=jV()||"Anonymous",e=zV(t),r=Date.now();let n;const s=r-60*60*1e3,i=r-3*60*60*1e3;bu=bu.filter(a=>a>i);const o=Math.random();return Ts>0&&Ts<10?(n=Math.floor(Math.random()*45)+5,Ts++):o>.9995&&bu.length===0?(n=Math.floor(Math.random()*15e3)+1e4,bu.push(r),Ts=1):o>.995&&r-Tw>s&&Ts===0?(n=Math.floor(Math.random()*8e3)+2e3,Tw=r,Ts=1):(o<.7?n=Math.floor(Math.random()*50)+10:o<.9?n=Math.floor(Math.random()*200)+60:o<.98?n=Math.floor(Math.random()*1e3)+260:n=Math.floor(Math.random()*1740)+1260,Ts>=10&&(Ts=0)),Sw++,{id:`win-${Sw}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,username:e,amount:n,timestamp:new Date}},HV=t=>{const[e,r]=t.split("@");return`${e.substring(0,2)}***@${r}`},WV=t=>{const e=[...t];for(let r=e.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[e[r],e[n]]=[e[n],e[r]]}return e},$R=()=>{const[t,e]=C.useState([]),{data:r}=Gl(WE.getLatestWins,[4]);return C.useEffect(()=>{let n=r||Array.from({length:4},Op);for(n=n.filter(c=>c&&c.username&&typeof c.amount=="number").map((c,h)=>({...c,id:c.id||`${Date.now()}-${h}-${Math.random().toString(36).substr(2,9)}`,username:c.username||"Anonymous",amount:typeof c.amount=="number"?c.amount:0}));n.length<24;)n.push(Op());n=WV(n),e(n.slice(0,4));let s,i=!1,o=0,a=!1;const l=()=>{let c;a?(c=(4+Math.random())*60*1e3,a=!1):i&&o<5?(c=(2+Math.random()*4)*1e3,o++):(c=(60+Math.random()*60)*1e3,Math.random()<.08&&(i=!0,o=0),Math.random()<.04&&(a=!0)),o>=3+Math.floor(Math.random()*3)&&(i=!1,o=0),s=setTimeout(()=>{const h=Op();e(u=>[h,...u.slice(0,4)]),l()},c)};return l(),()=>{s&&clearTimeout(s)}},[r]),w.jsx("section",{className:"py-10 px-4 sm:px-6 lg:px-8 bg-gray-900",children:w.jsxs("div",{className:"max-w-6xl mx-auto",children:[w.jsxs("div",{className:"text-center mb-4 animate-fade-in-up",children:[w.jsx("h2",{className:`
            font-poppins font-bold
            max-[320px]:text-base
            text-lg
            min-[380px]:text-xl
            sm:text-4xl
            md:text-5xl
            lg:text-6xl
            leading-[1.1] tracking-tight [text-wrap:balance]
          `,children:"LATEST CHEST WINS"}),w.jsx("div",{className:"mt-8 flex justify-center",children:w.jsx("div",{className:"w-96 h-1 bg-gradient-to-r from-transparent via-gold to-transparent rounded-full"})})]}),w.jsx("div",{className:"w-full max-w-4xl mx-auto shadow-2xl rounded-2xl",children:w.jsx(_d,{data:t.slice(0,4).filter(n=>n&&n.username&&typeof n.amount=="number"),animated:!0,columns:[{header:"Player",accessor:"username",render:(n,s)=>w.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[w.jsx("div",{className:"relative",children:w.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-full border-2 shadow-lg transition-transform hover:scale-110 flex items-center justify-center ${s.amount>5e3?"bg-purple-500/20 border-purple-400":s.amount>1e3?"bg-gold/20 border-gold":s.amount>500?"bg-green-500/20 border-green-400":"bg-gray-600/20 border-gray-600"}`,children:w.jsx(Mx,{className:`w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 ${s.amount>5e3?"text-purple-400":s.amount>1e3?"text-gold":s.amount>500?"text-green-400":"text-gray-400"}`})})}),w.jsx("div",{className:"min-w-0 flex-1",children:w.jsx("p",{className:"font-semibold text-white text-sm sm:text-base font-poppins truncate",children:HV(n)})})]})},{header:"Action",accessor:"action",render:()=>w.jsx("span",{className:"text-sm sm:text-base text-gray-200 font-montserrat",children:"Just hit"})},{header:"Amount",accessor:"amount",render:n=>w.jsx("span",{className:`font-bold font-poppins ${n>5e3?"text-purple-400 text-lg sm:text-xl animate-glow":n>1e3?"text-gold text-lg sm:text-xl animate-glow":n>500?"text-green-400 text-base sm:text-lg":"text-green-400 text-sm sm:text-base"}`,children:Rx(n)}),headerClassName:"text-right",cellClassName:"text-right"}],desktopTableClassName:"w-full min-w-[600px] bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl overflow-hidden border border-gray-700/50",mobileCardClassName:(n,s)=>{const i="transition-all duration-300",o=s===0?"bg-gradient-to-r from-gold/20 to-transparent border-l-4 border-gold animate-pulse":"",a=n.amount>5e3?"bg-gradient-to-r from-purple-500/20 via-purple-400/10 to-transparent border-l-2 border-purple-400":n.amount>1e3?"bg-gradient-to-r from-gold/20 via-gold/10 to-transparent border-l-2 border-gold":n.amount>500?"bg-gradient-to-r from-green-500/20 via-green-400/10 to-transparent border-l-2 border-green-400":"";return`${i} ${o} ${a}`},emptyMessage:"No recent wins"})})]})})},GR=()=>{const{data:t,loading:e}=Gl(WE.getLeaderboard),r=[{id:"user-1",email:"ch***@gmail.com",referrals:178},{id:"user-2",email:"al***@yahoo.com",referrals:153},{id:"user-3",email:"mi***@hotmail.com",referrals:112},{id:"user-4",email:"sa***@gmail.com",referrals:78},{id:"user-5",email:"da***@outlook.com",referrals:73},{id:"user-6",email:"ja***@gmail.com",referrals:65},{id:"user-7",email:"em***@yahoo.com",referrals:45},{id:"user-8",email:"ro***@gmail.com",referrals:29},{id:"user-9",email:"li***@hotmail.com",referrals:19},{id:"user-10",email:"br***@gmail.com",referrals:14}],n=()=>{const o=t||[];return[...r,...o].sort((l,c)=>c.referrals-l.referrals).slice(0,10)},s=o=>{switch(o){case 1:return w.jsx(yB,{className:"w-6 h-6 text-gold"});case 2:return w.jsx(Mx,{className:"w-6 h-6 text-gray-400"});case 3:return w.jsx(FB,{className:"w-6 h-6 text-yellow-600"});default:return w.jsx("span",{className:"w-6 h-6 flex items-center justify-center text-gray-400 font-bold"})}},i=o=>({1:5e3,2:2500,3:1e3,4:500,5:250,6:100,7:75,8:50,9:25,10:10})[o]||0;return e?w.jsx("section",{className:"py-20 px-6 bg-gray-950",children:w.jsxs("div",{className:"max-w-4xl mx-auto",children:[w.jsx("div",{className:"text-center mb-12",children:w.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Referral Leaderboard"})}),w.jsx(Fn,{className:"animate-pulse",children:w.jsx("div",{className:"space-y-4",children:[...Array(10)].map((o,a)=>w.jsx("div",{className:"h-16 bg-gray-700 rounded"},a))})})]})}):w.jsx("section",{className:"py-10 px-6 bg-gray-950",children:w.jsxs("div",{className:"max-w-4xl mx-auto",children:[w.jsxs("div",{className:"text-center mb-4",children:[w.jsx("h2",{className:`
              font-poppins font-bold
              max-[320px]:text-base
              text-lg
              min-[380px]:text-xl
              sm:text-4xl
              md:text-5xl
              lg:text-6xl
              leading-[1.1] tracking-tight [text-wrap:balance]
              
            `,children:"REFERRAL LEADERBOARD"}),w.jsx("p",{className:`
            text-gray-400 
            sm:text-1xl
            md:text-2xl
            lg:text-4xl
            py-4
            `,children:"Top 10 referrers win cash prizes!"})]}),w.jsx("div",{className:"w-full max-w-4xl mx-auto shadow-2xl rounded-2xl",children:w.jsx(_d,{data:n(),loading:e,columns:[{header:"Rank",accessor:"rank",render:(o,a,l)=>{const c=l+1;return w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx("span",{className:"text-2xl font-bold text-gray-400 min-w-[2rem] text-center",children:c}),s(c)]})}},{header:"Player",accessor:"email",render:(o,a,l)=>{const c=a.referrals>=1;return w.jsxs("div",{children:[w.jsx("p",{className:"font-semibold text-white break-all",children:o.replace(/(.{2}).*(@.*)/,"$1***$2")}),!c&&w.jsxs("p",{className:"text-xs text-yellow-500",children:["(Need ",10-a.referrals," more to qualify)"]})]})}},{header:"Referrals",accessor:"referrals",render:o=>w.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[w.jsx(Ix,{className:"w-5 h-5 text-blue-400"}),w.jsx("span",{className:"text-lg font-semibold text-white",children:o})]}),headerClassName:"text-center",cellClassName:"text-center"},{header:"Prize",accessor:"prize",render:(o,a,l)=>{const c=l+1,h=a.referrals>=1;return w.jsx("div",{children:w.jsx("p",{className:`text-lg font-bold ${h?"text-gold":"text-gray-500"}`,children:Rx(i(c))})})},headerClassName:"text-right",cellClassName:"text-right"}],desktopTableClassName:(o,a)=>{const l=a+1,c=o.referrals>=1;return`w-full min-w-[600px] bg-gradient-to-br from-gray-900 to-gray-950 rounded-2xl overflow-hidden border border-gray-700/50${l<=3,""} ${c?"":"opacity-60"}`},mobileCardClassName:(o,a)=>{const l=a+1,c=o.referrals>=1;return`w-full bg-gradient-to-br from-gray-900 to-gray-950 rounded-2xl overflow-hidden border border-gray-700/50${l<=3,""} ${c?"":"opacity-60"}`},emptyMessage:"No leaderboard data available"})})]})})},XV=()=>w.jsx("footer",{className:"bg-gray-900 text-white py-12 px-6",children:w.jsx("div",{className:"max-w-4xl mx-auto",children:w.jsx("div",{className:"text-center mb-8",children:w.jsx("p",{className:"text-gray-400 text-lg",children:"Get early access and unlock daily rewards"})})})});var ee=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(ee||{});const py=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Au=(t,e)=>py(t).priority??e,Bt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(py).forEach(e=>{e.type.forEach(r=>{var n,s;return(s=(n=this._removeHandlers)[r])==null?void 0:s.call(n,e)})}),this},add(...t){return t.map(py).forEach(e=>{e.type.forEach(r=>{var i,o;const n=this._addHandlers,s=this._queue;n[r]?(o=n[r])==null||o.call(n,e):(s[r]=s[r]||[],(i=s[r])==null||i.push(e))})}),this},handle(t,e,r){var o;const n=this._addHandlers,s=this._removeHandlers;if(n[t]||s[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,s[t]=r;const i=this._queue;return i[t]&&((o=i[t])==null||o.forEach(a=>e(a)),delete i[t]),this},handleByMap(t,e){return this.handle(t,r=>{r.name&&(e[r.name]=r.ref)},r=>{r.name&&delete e[r.name]})},handleByNamedList(t,e,r=-1){return this.handle(t,n=>{e.findIndex(i=>i.name===n.name)>=0||(e.push({name:n.name,value:n.ref}),e.sort((i,o)=>Au(o.value,r)-Au(i.value,r)))},n=>{const s=e.findIndex(i=>i.name===n.name);s!==-1&&e.splice(s,1)})},handleByList(t,e,r=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((s,i)=>Au(i,r)-Au(s,r)))},n=>{const s=e.indexOf(n.ref);s!==-1&&e.splice(s,1)})},mixin(t,...e){for(const r of e)Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(r))}},YV={extension:{type:ee.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await gc(()=>import("./browserAll-11c4ce41.js"),["assets/browserAll-11c4ce41.js","assets/init-7c1e1123.js","assets/colorToUniform-21d3a5e1.js"])}},qV={extension:{type:ee.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await gc(()=>import("./webworkerAll-491fa7a9.js"),["assets/webworkerAll-491fa7a9.js","assets/init-7c1e1123.js","assets/colorToUniform-21d3a5e1.js"])}};let sr=class zR{constructor(e,r,n){this._x=r||0,this._y=n||0,this._observer=e}clone(e){return new zR(e??this._observer,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}};var HR={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function i(l,c,h,u,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new s(h,u||l,d),p=r?r+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],h,u;if(this._eventsCount===0)return c;for(u in h=this._events)e.call(h,u)&&c.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},a.prototype.listeners=function(c){var h=r?r+c:c,u=this._events[h];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},a.prototype.listenerCount=function(c){var h=r?r+c:c,u=this._events[h];return u?u.fn?1:u.length:0},a.prototype.emit=function(c,h,u,d,f,p){var m=r?r+c:c;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,x;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,h),!0;case 3:return g.fn.call(g.context,h,u),!0;case 4:return g.fn.call(g.context,h,u,d),!0;case 5:return g.fn.call(g.context,h,u,d,f),!0;case 6:return g.fn.call(g.context,h,u,d,f,p),!0}for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];g.fn.apply(g.context,v)}else{var _=g.length,b;for(x=0;x<_;x++)switch(g[x].once&&this.removeListener(c,g[x].fn,void 0,!0),y){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,h);break;case 3:g[x].fn.call(g[x].context,h,u);break;case 4:g[x].fn.call(g[x].context,h,u,d);break;default:if(!v)for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];g[x].fn.apply(g[x].context,v)}}return!0},a.prototype.on=function(c,h,u){return i(this,c,h,u,!1)},a.prototype.once=function(c,h,u){return i(this,c,h,u,!0)},a.prototype.removeListener=function(c,h,u,d){var f=r?r+c:c;if(!this._events[f])return this;if(!h)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===h&&(!d||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==h||d&&!p[m].once||u&&p[m].context!==u)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var h;return c?(h=r?r+c:c,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(HR);var KV=HR.exports;const vn=Fc(KV),ZV=Math.PI*2,QV=180/Math.PI,JV=Math.PI/180;let hr=class WR{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new WR(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Bp.x=0,Bp.y=0,Bp}};const Bp=new hr;let _e=class XR{constructor(e=1,r=0,n=0,s=1,i=0,o=0){this.array=null,this.a=e,this.b=r,this.c=n,this.d=s,this.tx=i,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,n,s,i,o){return this.a=e,this.b=r,this.c=n,this.d=s,this.tx=i,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,r){r=r||new hr;const n=e.x,s=e.y;return r.x=this.a*n+this.c*s+this.tx,r.y=this.b*n+this.d*s+this.ty,r}applyInverse(e,r){r=r||new hr;const n=this.a,s=this.b,i=this.c,o=this.d,a=this.tx,l=this.ty,c=1/(n*o+i*-s),h=e.x,u=e.y;return r.x=o*c*h+-i*c*u+(l*i-a*o)*c,r.y=n*c*u+-s*c*h+(-l*n+a*s)*c,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),s=this.a,i=this.c,o=this.tx;return this.a=s*r-this.b*n,this.b=s*n+this.b*r,this.c=i*r-this.d*n,this.d=i*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(e){const r=this.a,n=this.b,s=this.c,i=this.d;return this.a=e.a*r+e.b*s,this.b=e.a*n+e.b*i,this.c=e.c*r+e.d*s,this.d=e.c*n+e.d*i,this.tx=e.tx*r+e.ty*s+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this}appendFrom(e,r){const n=e.a,s=e.b,i=e.c,o=e.d,a=e.tx,l=e.ty,c=r.a,h=r.b,u=r.c,d=r.d;return this.a=n*c+s*u,this.b=n*h+s*d,this.c=i*c+o*u,this.d=i*h+o*d,this.tx=a*c+l*u+r.tx,this.ty=a*h+l*d+r.ty,this}setTransform(e,r,n,s,i,o,a,l,c){return this.a=Math.cos(a+c)*i,this.b=Math.sin(a+c)*i,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(n*this.a+s*this.c),this.ty=r-(n*this.b+s*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,s=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,n=this.b,s=this.c,i=this.d,o=e.pivot,a=-Math.atan2(-s,i),l=Math.atan2(n,r),c=Math.abs(a+l);return c<1e-5||Math.abs(ZV-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(s*s+i*i),e.position.x=this.tx+(o.x*r+o.y*s),e.position.y=this.ty+(o.x*n+o.y*i),e}invert(){const e=this.a,r=this.b,n=this.c,s=this.d,i=this.tx,o=e*s-r*n;return this.a=s/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-s*i)/o,this.ty=-(e*this.ty-r*i)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new XR;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return tj.identity()}static get shared(){return ej.identity()}};const ej=new _e,tj=new _e,Ai=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Si=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ti=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ei=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],my=[],YR=[],Su=Math.sign;function rj(){for(let t=0;t<16;t++){const e=[];my.push(e);for(let r=0;r<16;r++){const n=Su(Ai[t]*Ai[r]+Ti[t]*Si[r]),s=Su(Si[t]*Ai[r]+Ei[t]*Si[r]),i=Su(Ai[t]*Ti[r]+Ti[t]*Ei[r]),o=Su(Si[t]*Ti[r]+Ei[t]*Ei[r]);for(let a=0;a<16;a++)if(Ai[a]===n&&Si[a]===s&&Ti[a]===i&&Ei[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new _e;e.set(Ai[t],Si[t],Ti[t],Ei[t],0,0),YR.push(e)}}rj();const Me={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Ai[t],uY:t=>Si[t],vX:t=>Ti[t],vY:t=>Ei[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>my[t][e],sub:(t,e)=>my[t][Me.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Me.S:Me.N:Math.abs(e)*2<=Math.abs(t)?t>0?Me.E:Me.W:e>0?t>0?Me.SE:Me.SW:t>0?Me.NE:Me.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const s=YR[Me.inv(e)];s.tx=r,s.ty=n,t.append(s)},transformRectCoords:(t,e,r,n)=>{const{x:s,y:i,width:o,height:a}=t,{x:l,y:c,width:h,height:u}=e;return r===Me.E?(n.set(s+l,i+c,o,a),n):r===Me.S?n.set(h-i-a+l,s+c,a,o):r===Me.W?n.set(h-s-o+l,u-i-a+c,o,a):r===Me.N?n.set(i+l,u-s-o+c,a,o):n.set(s+l,i+c,o,a)}},Tu=[new hr,new hr,new hr,new hr];let Ft=class _h{constructor(e=0,r=0,n=0,s=0){this.type="rectangle",this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new _h(0,0,0,0)}clone(){return new _h(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}strokeContains(e,r,n,s=.5){const{width:i,height:o}=this;if(i<=0||o<=0)return!1;const a=this.x,l=this.y,c=n*(1-s),h=n-c,u=a-c,d=a+i+c,f=l-c,p=l+o+c,m=a+h,g=a+i-h,y=l+h,v=l+o-h;return e>=u&&e<=d&&r>=f&&r<=p&&!(e>m&&e<g&&r>y&&r<v)}intersects(e,r){if(!r){const T=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=T)return!1;const R=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>R}const n=this.left,s=this.right,i=this.top,o=this.bottom;if(s<=n||o<=i)return!1;const a=Tu[0].set(e.left,e.top),l=Tu[1].set(e.left,e.bottom),c=Tu[2].set(e.right,e.top),h=Tu[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(r.a*r.d-r.b*r.c);if(u===0||(r.apply(a,a),r.apply(l,l),r.apply(c,c),r.apply(h,h),Math.max(a.x,l.x,c.x,h.x)<=n||Math.min(a.x,l.x,c.x,h.x)>=s||Math.max(a.y,l.y,c.y,h.y)<=i||Math.min(a.y,l.y,c.y,h.y)>=o))return!1;const d=u*(l.y-a.y),f=u*(a.x-l.x),p=d*n+f*i,m=d*s+f*i,g=d*n+f*o,y=d*s+f*o;if(Math.max(p,m,g,y)<=d*a.x+f*a.y||Math.min(p,m,g,y)>=d*h.x+f*h.y)return!1;const v=u*(a.y-c.y),x=u*(c.x-a.x),_=v*n+x*i,b=v*s+x*i,A=v*n+x*o,S=v*s+x*o;return!(Math.max(_,b,A,S)<=v*a.x+x*a.y||Math.min(_,b,A,S)>=v*h.x+x*h.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=s,this.height=Math.max(i-s,0),this}ceil(e=1,r=.001){const n=Math.ceil((this.x+this.width-r)*e)/e,s=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=s-this.y,this}scale(e,r=e){return this.x*=e,this.y*=r,this.width*=e,this.height*=r,this}enlarge(e){const r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=s,this.height=i-s,this}getBounds(e){return e||(e=new _h),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const r=e.x,n=e.y,s=e.x+e.width,i=e.y+e.height;return r>=this.x&&r<this.x+this.width&&n>=this.y&&n<this.y+this.height&&s>=this.x&&s<this.x+this.width&&i>=this.y&&i<this.y+this.height}set(e,r,n,s){return this.x=e,this.y=r,this.width=n,this.height=s,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};const Dp={default:-1};function ut(t="default"){return Dp[t]===void 0&&(Dp[t]=-1),++Dp[t]}const Ew={},St="8.0.0",nj="8.3.4";function Ne(t,e,r=3){if(Ew[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(n))),Ew[e]=!0}const qR=()=>{};function wd(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function Cw(t){return!(t&t-1)&&!!t}function KR(t){const e={};for(const r in t)t[r]!==void 0&&(e[r]=t[r]);return e}const Rw=Object.create(null);function sj(t){const e=Rw[t];return e===void 0&&(Rw[t]=ut("resource")),e}const ZR=class QR extends vn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...QR.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Ne(St,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=sj(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};ZR.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let bd=ZR;const JR=class eP extends vn{constructor(e={}){super(),this.options=e,this.uid=ut("textureSource"),this._resourceType="textureSource",this._resourceId=ut("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...eP.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new bd(KR(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var r,n;this.style!==e&&((r=this._style)==null||r.off("change",this._onStyleChange,this),this._style=e,(n=this._style)==null||n.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ut("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,r,n){n||(n=this._resolution),e||(e=this.width),r||(r=this.height);const s=Math.round(e*n),i=Math.round(r*n);return this.width=s/n,this.height=i/n,this._resolution=n,this.pixelWidth===s&&this.pixelHeight===i?!1:(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=i,this.emit("resize",this),this._resourceId=ut("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Cw(this.pixelWidth)&&Cw(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};JR.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let _n=JR;class rv extends _n{constructor(e){const r=e.resource||new Float32Array(e.width*e.height*4);let n=e.format;n||(r instanceof Float32Array?n="rgba32float":r instanceof Int32Array||r instanceof Uint32Array?n="rgba32uint":r instanceof Int16Array||r instanceof Uint16Array?n="rgba16uint":(r instanceof Int8Array,n="bgra8unorm")),super({...e,resource:r,format:n}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}rv.extension=ee.TextureSource;const Pw=new _e;let ij=class{constructor(e,r){this.mapCoord=new _e,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof r>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=r,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var r;this.texture!==e&&((r=this._texture)==null||r.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,r){r===void 0&&(r=e);const n=this.mapCoord;for(let s=0;s<e.length;s+=2){const i=e[s],o=e[s+1];r[s]=i*n.a+o*n.c+n.tx,r[s+1]=i*n.b+o*n.d+n.ty}return r}update(){const e=this._texture;this._updateID++;const r=e.uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=e.orig,s=e.trim;s&&(Pw.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Pw));const i=e.source,o=this.uClampFrame,a=this.clampMargin/i._resolution,l=this.clampOffset/i._resolution;return o[0]=(e.frame.x+a+l)/i.width,o[1]=(e.frame.y+a+l)/i.height,o[2]=(e.frame.x+e.frame.width-a+l)/i.width,o[3]=(e.frame.y+e.frame.height-a+l)/i.height,this.uClampOffset[0]=this.clampOffset/i.pixelWidth,this.uClampOffset[1]=this.clampOffset/i.pixelHeight,this.isSimple=e.frame.width===i.width&&e.frame.height===i.height&&e.rotate===0,!0}},ve=class extends vn{constructor({source:e,label:r,frame:n,orig:s,trim:i,defaultAnchor:o,defaultBorders:a,rotate:l,dynamic:c}={}){if(super(),this.uid=ut("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Ft,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=r,this.source=(e==null?void 0:e.source)??new _n,this.noFrame=!n,n)this.frame.copyFrom(n);else{const{width:h,height:u}=this._source;this.frame.width=h,this.frame.height=u}this.orig=s||this.frame,this.trim=i,this.rotate=l??0,this.defaultAnchor=o,this.defaultBorders=a,this.destroyed=!1,this.dynamic=c||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new ij(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:r}=this,{width:n,height:s}=this._source,i=r.x/n,o=r.y/s,a=r.width/n,l=r.height/s;let c=this.rotate;if(c){const h=a/2,u=l/2,d=i+h,f=o+u;c=Me.add(c,Me.NW),e.x0=d+h*Me.uX(c),e.y0=f+u*Me.uY(c),c=Me.add(c,2),e.x1=d+h*Me.uX(c),e.y1=f+u*Me.uY(c),c=Me.add(c,2),e.x2=d+h*Me.uX(c),e.y2=f+u*Me.uY(c),c=Me.add(c,2),e.x3=d+h*Me.uX(c),e.y3=f+u*Me.uY(c)}else e.x0=i,e.y0=o,e.x1=i+a,e.y1=o,e.x2=i+a,e.y2=o+l,e.x3=i,e.y3=o+l}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Ne(St,"Texture.baseTexture is now Texture.source"),this._source}};ve.EMPTY=new ve({label:"EMPTY",source:new _n({label:"EMPTY"})});ve.EMPTY.destroy=qR;ve.WHITE=new ve({source:new rv({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});ve.WHITE.destroy=qR;function oj(t,e,r){const{width:n,height:s}=r.orig,i=r.trim;if(i){const o=i.width,a=i.height;t.minX=i.x-e._x*n,t.maxX=t.minX+o,t.minY=i.y-e._y*s,t.maxY=t.minY+a}else t.minX=-e._x*n,t.maxX=t.minX+n,t.minY=-e._y*s,t.maxY=t.minY+s}const Mw=new _e;let gs=class tP{constructor(e=1/0,r=1/0,n=-1/0,s=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Mw,this.minX=e,this.minY=r,this.maxX=n,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Ft);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Mw,this}set(e,r,n,s){this.minX=e,this.minY=r,this.maxX=n,this.maxY=s}addFrame(e,r,n,s,i){i||(i=this.matrix);const o=i.a,a=i.b,l=i.c,c=i.d,h=i.tx,u=i.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=o*e+l*r+h,y=a*e+c*r+u;g<d&&(d=g),y<f&&(f=y),g>p&&(p=g),y>m&&(m=y),g=o*n+l*r+h,y=a*n+c*r+u,g<d&&(d=g),y<f&&(f=y),g>p&&(p=g),y>m&&(m=y),g=o*e+l*s+h,y=a*e+c*s+u,g<d&&(d=g),y<f&&(f=y),g>p&&(p=g),y>m&&(m=y),g=o*n+l*s+h,y=a*n+c*s+u,g<d&&(d=g),y<f&&(f=y),g>p&&(p=g),y>m&&(m=y),this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addRect(e,r){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,r)}addBounds(e,r){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,r)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const r=this.minX,n=this.minY,s=this.maxX,i=this.maxY,{a:o,b:a,c:l,d:c,tx:h,ty:u}=e;let d=o*r+l*n+h,f=a*r+c*n+u;this.minX=d,this.minY=f,this.maxX=d,this.maxY=f,d=o*s+l*n+h,f=a*s+c*n+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=o*r+l*i+h,f=a*r+c*i+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=o*s+l*i+h,f=a*s+c*i+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,r,n,s){return this.minX<e&&(this.minX=e),this.maxX>r&&(this.maxX=r),this.minY<n&&(this.minY=n),this.maxY>s&&(this.maxY=s),this}pad(e,r=e){return this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new tP(this.minX,this.minY,this.maxX,this.maxY)}scale(e,r=e){return this.minX*=e,this.minY*=r,this.maxX*=e,this.maxY*=r,this}get x(){return this.minX}set x(e){const r=this.maxX-this.minX;this.minX=e,this.maxX=e+r}get y(){return this.minY}set y(e){const r=this.maxY-this.minY;this.minY=e,this.maxY=e+r}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,r,n,s){let i=this.minX,o=this.minY,a=this.maxX,l=this.maxY;s||(s=this.matrix);const c=s.a,h=s.b,u=s.c,d=s.d,f=s.tx,p=s.ty;for(let m=r;m<n;m+=2){const g=e[m],y=e[m+1],v=c*g+u*y+f,x=h*g+d*y+p;i=v<i?v:i,o=x<o?x:o,a=v>a?v:a,l=x>l?x:l}this.minX=i,this.minY=o,this.maxX=a,this.maxY=l}containsPoint(e,r){return this.minX<=e&&this.minY<=r&&this.maxX>=e&&this.maxY>=r}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}};var aj={grad:.9,turn:360,rad:360/(2*Math.PI)},Wn=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Pt=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},Vr=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},rP=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Iw=function(t){return{r:Vr(t.r,0,255),g:Vr(t.g,0,255),b:Vr(t.b,0,255),a:Vr(t.a)}},Up=function(t){return{r:Pt(t.r),g:Pt(t.g),b:Pt(t.b),a:Pt(t.a,3)}},lj=/^#([0-9a-f]{3,8})$/i,Eu=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},nP=function(t){var e=t.r,r=t.g,n=t.b,s=t.a,i=Math.max(e,r,n),o=i-Math.min(e,r,n),a=o?i===e?(r-n)/o:i===r?2+(n-e)/o:4+(e-r)/o:0;return{h:60*(a<0?a+6:a),s:i?o/i*100:0,v:i/255*100,a:s}},sP=function(t){var e=t.h,r=t.s,n=t.v,s=t.a;e=e/360*6,r/=100,n/=100;var i=Math.floor(e),o=n*(1-r),a=n*(1-(e-i)*r),l=n*(1-(1-e+i)*r),c=i%6;return{r:255*[n,a,o,o,l,n][c],g:255*[l,n,n,a,o,o][c],b:255*[o,o,l,n,n,a][c],a:s}},kw=function(t){return{h:rP(t.h),s:Vr(t.s,0,100),l:Vr(t.l,0,100),a:Vr(t.a)}},Nw=function(t){return{h:Pt(t.h),s:Pt(t.s),l:Pt(t.l),a:Pt(t.a,3)}},Fw=function(t){return sP((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},zl=function(t){return{h:(e=nP(t)).h,s:(s=(200-(r=e.s))*(n=e.v)/100)>0&&s<200?r*n/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,r,n,s},cj=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uj=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,hj=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dj=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gy={string:[[function(t){var e=lj.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Pt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Pt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=hj.exec(t)||dj.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Iw({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=cj.exec(t)||uj.exec(t);if(!e)return null;var r,n,s=kw({h:(r=e[1],n=e[2],n===void 0&&(n="deg"),Number(r)*(aj[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Fw(s)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,s=t.a,i=s===void 0?1:s;return Wn(e)&&Wn(r)&&Wn(n)?Iw({r:Number(e),g:Number(r),b:Number(n),a:Number(i)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,s=t.a,i=s===void 0?1:s;if(!Wn(e)||!Wn(r)||!Wn(n))return null;var o=kw({h:Number(e),s:Number(r),l:Number(n),a:Number(i)});return Fw(o)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,s=t.a,i=s===void 0?1:s;if(!Wn(e)||!Wn(r)||!Wn(n))return null;var o=function(a){return{h:rP(a.h),s:Vr(a.s,0,100),v:Vr(a.v,0,100),a:Vr(a.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(i)});return sP(o)},"hsv"]]},Lw=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},fj=function(t){return typeof t=="string"?Lw(t.trim(),gy.string):typeof t=="object"&&t!==null?Lw(t,gy.object):[null,void 0]},Vp=function(t,e){var r=zl(t);return{h:r.h,s:Vr(r.s+100*e,0,100),l:r.l,a:r.a}},jp=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Ow=function(t,e){var r=zl(t);return{h:r.h,s:r.s,l:Vr(r.l+100*e,0,100),a:r.a}},yy=function(){function t(e){this.parsed=fj(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Pt(jp(this.rgba),2)},t.prototype.isDark=function(){return jp(this.rgba)<.5},t.prototype.isLight=function(){return jp(this.rgba)>=.5},t.prototype.toHex=function(){return e=Up(this.rgba),r=e.r,n=e.g,s=e.b,o=(i=e.a)<1?Eu(Pt(255*i)):"","#"+Eu(r)+Eu(n)+Eu(s)+o;var e,r,n,s,i,o},t.prototype.toRgb=function(){return Up(this.rgba)},t.prototype.toRgbString=function(){return e=Up(this.rgba),r=e.r,n=e.g,s=e.b,(i=e.a)<1?"rgba("+r+", "+n+", "+s+", "+i+")":"rgb("+r+", "+n+", "+s+")";var e,r,n,s,i},t.prototype.toHsl=function(){return Nw(zl(this.rgba))},t.prototype.toHslString=function(){return e=Nw(zl(this.rgba)),r=e.h,n=e.s,s=e.l,(i=e.a)<1?"hsla("+r+", "+n+"%, "+s+"%, "+i+")":"hsl("+r+", "+n+"%, "+s+"%)";var e,r,n,s,i},t.prototype.toHsv=function(){return e=nP(this.rgba),{h:Pt(e.h),s:Pt(e.s),v:Pt(e.v),a:Pt(e.a,3)};var e},t.prototype.invert=function(){return tn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),tn(Vp(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),tn(Vp(this.rgba,-e))},t.prototype.grayscale=function(){return tn(Vp(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),tn(Ow(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),tn(Ow(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?tn({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):Pt(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=zl(this.rgba);return typeof e=="number"?tn({h:e,s:r.s,l:r.l,a:r.a}):Pt(r.h)},t.prototype.isEqual=function(e){return this.toHex()===tn(e).toHex()},t}(),tn=function(t){return t instanceof yy?t:new yy(t)},Bw=[],iP=function(t){t.forEach(function(e){Bw.indexOf(e)<0&&(e(yy,gy),Bw.push(e))})};function oP(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var s in r)n[r[s]]=s;var i={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=n[this.toHex()];if(c)return c;if(o!=null&&o.closest){var h=this.toRgb(),u=1/0,d="black";if(!i.length)for(var f in r)i[f]=new t(r[f]).toRgb();for(var p in r){var m=(a=h,l=i[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<u&&(u=m,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":r[a];return l?new t(l).toRgb():null},"name"])}iP([oP]);const Ta=class wl{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof wl)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,r){const n=typeof e;if(n!==typeof r)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every((i,o)=>i===r[o]);if(e!==null&&r!==null){const i=Object.keys(e),o=Object.keys(r);return i.length!==o.length?!1:i.every(a=>e[a]===r[a])}return e===r}toRgba(){const[e,r,n,s]=this._components;return{r:e,g:r,b:n,a:s}}toRgb(){const[e,r,n]=this._components;return{r:e,g:r,b:n}}toRgbaString(){const[e,r,n]=this.toUint8RgbArray();return`rgba(${e},${r},${n},${this.alpha})`}toUint8RgbArray(e){const[r,n,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(r*255),e[1]=Math.round(n*255),e[2]=Math.round(s*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[r,n,s,i]=this._components;return e[0]=r,e[1]=n,e[2]=s,e[3]=i,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[r,n,s]=this._components;return e[0]=r,e[1]=n,e[2]=s,e}toNumber(){return this._int}toBgrNumber(){const[e,r,n]=this.toUint8RgbArray();return(n<<16)+(r<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[r,n,s,i]=wl._temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=s,this._components[3]*=i,this._refreshInt(),this._value=null,this}premultiply(e,r=!0){return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,r=!0){if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;let n=this._int>>16&255,s=this._int>>8&255,i=this._int&255;return r&&(n=n*e+.5|0,s=s*e+.5|0,i=i*e+.5|0),(e*255<<24)+(n<<16)+(s<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const r=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-r.length)+r}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let r,n,s,i;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;r=(o>>16&255)/255,n=(o>>8&255)/255,s=(o&255)/255,i=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,n,s,i=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,n,s,i=255]=e,r/=255,n/=255,s/=255,i/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=wl.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=tn(e);o.isValid()&&({r,g:n,b:s,a:i}=o.rgba,r/=255,n/=255,s/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=n,this._components[2]=s,this._components[3]=i,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,r,n]=this._components;this._int=(e*255<<16)+(r*255<<8)+(n*255|0)}_clamp(e,r=0,n=1){return typeof e=="number"?Math.min(Math.max(e,r),n):(e.forEach((s,i)=>{e[i]=Math.min(Math.max(s,r),n)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof wl||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Ta.shared=new Ta;Ta._temp=new Ta;Ta.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let gt=Ta;const pj={cullArea:null,cullable:!1,cullableChildren:!0};let $p=0;const Dw=500;function Le(...t){$p!==Dw&&($p++,$p===Dw?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...t))}let nv=class{constructor(e,r){this._pool=[],this._count=0,this._index=0,this._classType=e,r&&this.prepopulate(r)}prepopulate(e){for(let r=0;r<e;r++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var n;let r;return this._index>0?r=this._pool[--this._index]:r=new this._classType,(n=r.init)==null||n.call(r,e),r}return(e){var r;(r=e.reset)==null||r.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}};class mj{constructor(){this._poolsByClass=new Map}prepopulate(e,r){this.getPool(e).prepopulate(r)}get(e,r){return this.getPool(e).get(r)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new nv(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(r=>{const n=e[r._classType.name]?r._classType.name+r._classType.ID:r._classType.name;e[n]={free:r.totalFree,used:r.totalUsed,size:r.totalSize}}),e}}const os=new mj,gj={get isCachedAsTexture(){var t;return!!((t=this.renderGroup)!=null&&t.isCachedAsTexture)},cacheAsTexture(t){typeof t=="boolean"&&t===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(t===!0?{}:t))},updateCacheTexture(){var t;(t=this.renderGroup)==null||t.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){Ne("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}};function yj(t,e,r){const n=t.length;let s;if(e>=n||r===0)return;r=e+r>n?n-e:r;const i=n-r;for(s=e;s<i;++s)t[s]=t[s+r];t.length=i}const xj={allowChildren:!0,removeChildren(t=0,e){var i;const r=e??this.children.length,n=r-t,s=[];if(n>0&&n<=r){for(let a=r-1;a>=t;a--){const l=this.children[a];l&&(s.push(l),l.parent=null)}yj(this.children,t,r);const o=this.renderGroup||this.parentRenderGroup;o&&o.removeChildren(s);for(let a=0;a<s.length;++a){const l=s[a];(i=l.parentRenderLayer)==null||i.detach(l),this.emit("childRemoved",l,this,a),s[a].emit("removed",this)}return s.length>0&&this._didViewChangeTick++,s}else if(n===0&&this.children.length===0)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||Ne(St,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:r}=this;if(e<0||e>r.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${r.length}`);if(t.parent){const s=t.parent.children.indexOf(t);if(t.parent===this&&s===e)return t;s!==-1&&t.parent.children.splice(s,1)}e===r.length?r.push(t):r.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;const n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)},reparentChild(...t){return t.length===1?this.reparentChildAt(t[0],this.children.length):(t.forEach(e=>this.reparentChildAt(e,this.children.length)),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;const r=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);const n=this.worldTransform.clone();return n.invert(),r.prepend(n),t.setFromMatrix(r),t},replaceChild(t,e){t.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(t)),e.setFromMatrix(t.localTransform),e.updateLocalTransform(),this.removeChild(t)}},vj={collectRenderables(t,e,r){this.parentRenderLayer&&this.parentRenderLayer!==r||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,r):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,r))},collectRenderablesSimple(t,e,r){const n=this.children,s=n.length;for(let i=0;i<s;i++)n[i].collectRenderables(t,e,r)},collectRenderablesWithEffects(t,e,r){const{renderPipes:n}=e;for(let s=0;s<this.effects.length;s++){const i=this.effects[s];n[i.pipe].push(i,this,t)}this.collectRenderablesSimple(t,e,r);for(let s=this.effects.length-1;s>=0;s--){const i=this.effects[s];n[i.pipe].pop(i,this,t)}}};class Uw{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class _j{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let r=0;r<this._tests.length;r++){const n=this._tests[r];if(n.test(e))return os.get(n.maskClass,e)}return e}returnMaskEffect(e){os.return(e)}}const xy=new _j;Bt.handleByList(ee.MaskEffect,xy._effectClasses);const wj={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){this.effects.indexOf(t)===-1&&(this.effects.push(t),this.effects.sort((r,n)=>r.priority-n.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){const e=this.effects.indexOf(t);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){const e=this._maskEffect;(e==null?void 0:e.mask)!==t&&(e&&(this.removeEffect(e),xy.returnMaskEffect(e),this._maskEffect=null),t!=null&&(this._maskEffect=xy.getMaskEffect(t),this.addEffect(this._maskEffect)))},get mask(){var t;return(t=this._maskEffect)==null?void 0:t.mask},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},set filters(t){var i;!Array.isArray(t)&&t&&(t=[t]);const e=this._filterEffect||(this._filterEffect=new Uw);t=t;const r=(t==null?void 0:t.length)>0,n=((i=e.filters)==null?void 0:i.length)>0,s=r!==n;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),s&&(r?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){var t;return(t=this._filterEffect)==null?void 0:t.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new Uw),this._filterEffect.filterArea=t},get filterArea(){var t;return(t=this._filterEffect)==null?void 0:t.filterArea}},bj={label:null,get name(){return Ne(St,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){Ne(St,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){const r=this.children;for(let n=0;n<r.length;n++){const s=r[n];if(s.label===t||t instanceof RegExp&&t.test(s.label))return s}if(e)for(let n=0;n<r.length;n++){const i=r[n].getChildByLabel(t,!0);if(i)return i}return null},getChildrenByLabel(t,e=!1,r=[]){const n=this.children;for(let s=0;s<n.length;s++){const i=n[s];(i.label===t||t instanceof RegExp&&t.test(i.label))&&r.push(i)}if(e)for(let s=0;s<n.length;s++)n[s].getChildrenByLabel(t,!0,r);return r}},er=new nv(_e),as=new nv(gs),Aj=new _e,Sj={getFastGlobalBounds(t,e){e||(e=new gs),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const r=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(r.worldTransform),e},_getGlobalBoundsRecursive(t,e,r){let n=e;if(t&&this.parentRenderLayer&&this.parentRenderLayer!==r||this.localDisplayStatus!==7||!this.measurable)return;const s=!!this.effects.length;if((this.renderGroup||s)&&(n=as.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const o=this.bounds;n.addFrame(o.minX,o.minY,o.maxX,o.maxY,this.groupTransform)}const i=this.children;for(let o=0;o<i.length;o++)i[o]._getGlobalBoundsRecursive(t,n,r)}if(s){let i=!1;const o=this.renderGroup||this.parentRenderGroup;for(let a=0;a<this.effects.length;a++)this.effects[a].addBounds&&(i||(i=!0,n.applyMatrix(o.worldTransform)),this.effects[a].addBounds(n,!0));i&&n.applyMatrix(o.worldTransform.copyTo(Aj).invert()),e.addBounds(n),as.return(n)}else this.renderGroup&&(e.addBounds(n,this.relativeGroupTransform),as.return(n))}};function aP(t,e,r){r.clear();let n,s;return t.parent?e?n=t.parent.worldTransform:(s=er.get().identity(),n=sv(t,s)):n=_e.IDENTITY,lP(t,r,n,e),s&&er.return(s),r.isValid||r.set(0,0,0,0),r}function lP(t,e,r,n){var a,l;if(!t.visible||!t.measurable)return;let s;n?s=t.worldTransform:(t.updateLocalTransform(),s=er.get(),s.appendFrom(t.localTransform,r));const i=e,o=!!t.effects.length;if(o&&(e=as.get().clear()),t.boundsArea)e.addRect(t.boundsArea,s);else{t.bounds&&(e.matrix=s,e.addBounds(t.bounds));for(let c=0;c<t.children.length;c++)lP(t.children[c],e,s,n)}if(o){for(let c=0;c<t.effects.length;c++)(l=(a=t.effects[c]).addBounds)==null||l.call(a,e);i.addBounds(e,_e.IDENTITY),as.return(e)}n||er.return(s)}function sv(t,e){const r=t.parent;return r&&(sv(r,e),r.updateLocalTransform(),e.append(r.localTransform)),e}function cP(t,e){if(t===16777215||!e)return e;if(e===16777215||!t)return t;const r=t>>16&255,n=t>>8&255,s=t&255,i=e>>16&255,o=e>>8&255,a=e&255,l=r*i/255|0,c=n*o/255|0,h=s*a/255|0;return(l<<16)+(c<<8)+h}const Vw=16777215;function jw(t,e){return t===Vw?e:e===Vw?t:cP(t,e)}function wh(t){return((t&255)<<16)+(t&65280)+(t>>16&255)}const Tj={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,r=this.parent;for(;r;)e*=r.alpha,r=r.parent;return e},getGlobalTransform(t=new _e,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();const r=sv(this,er.get().identity());return t.appendFrom(this.localTransform,r),er.return(r),t},getGlobalTint(t){if(t)return this.renderGroup?wh(this.renderGroup.worldColor):this.parentRenderGroup?wh(jw(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,r=this.parent;for(;r;)e=jw(e,r.localColor),r=r.parent;return wh(e)}};function uP(t,e,r){return e.clear(),r||(r=_e.IDENTITY),hP(t,e,r,t,!0),e.isValid||e.set(0,0,0,0),e}function hP(t,e,r,n,s){var l,c;let i;if(s)i=er.get(),i=r.copyTo(i);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const h=t.localTransform;i=er.get(),i.appendFrom(h,r)}const o=e,a=!!t.effects.length;if(a&&(e=as.get().clear()),t.boundsArea)e.addRect(t.boundsArea,i);else{t.renderPipeId&&(e.matrix=i,e.addBounds(t.bounds));const h=t.children;for(let u=0;u<h.length;u++)hP(h[u],e,i,n,!1)}if(a){for(let h=0;h<t.effects.length;h++)(c=(l=t.effects[h]).addLocalBounds)==null||c.call(l,e,n);o.addBounds(e,_e.IDENTITY),as.return(e)}er.return(i)}function dP(t,e){const r=t.children;for(let n=0;n<r.length;n++){const s=r[n],i=s.uid,o=(s._didViewChangeTick&65535)<<16|s._didContainerChangeTick&65535,a=e.index;(e.data[a]!==i||e.data[a+1]!==o)&&(e.data[e.index]=i,e.data[e.index+1]=o,e.didChange=!0),e.index=a+2,s.children.length&&dP(s,e)}return e.didChange}const Ej=new _e,Cj={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const r=Math.sign(this.scale.x)||1;e!==0?this.scale.x=t/e*r:this.scale.x=r},_setHeight(t,e){const r=Math.sign(this.scale.y)||1;e!==0?this.scale.y=t/e*r:this.scale.y=r},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new gs});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),dP(this,t),t.didChange&&uP(this,t.localBounds,Ej),t.localBounds},getBounds(t,e){return aP(this,t,e||new gs)}},Rj={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}},Pj={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Mj))}};function Mj(t,e){return t._zIndex-e._zIndex}const Ij={getGlobalPosition(t=new hr,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,r=!1){const n=this.getGlobalTransform(er.get(),r);return e=n.apply(t,e),er.return(n),e},toLocal(t,e,r,n){e&&(t=e.toGlobal(t,r,n));const s=this.getGlobalTransform(er.get(),n);return r=s.applyInverse(t,r),er.return(s),r}};class fP{constructor(){this.uid=ut("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let kj=0;class Nj{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new bd(this.textureOptions)}createTexture(e,r,n){const s=new _n({...this.textureOptions,width:e,height:r,resolution:1,antialias:n,autoGarbageCollect:!1});return new ve({source:s,label:`texturePool_${kj++}`})}getOptimalTexture(e,r,n=1,s){let i=Math.ceil(e*n-1e-6),o=Math.ceil(r*n-1e-6);i=wd(i),o=wd(o);const a=(i<<17)+(o<<1)+(s?1:0);this._texturePool[a]||(this._texturePool[a]=[]);let l=this._texturePool[a].pop();return l||(l=this.createTexture(i,o,s)),l.source._resolution=n,l.source.width=i/n,l.source.height=o/n,l.source.pixelWidth=i,l.source.pixelHeight=o,l.frame.x=0,l.frame.y=0,l.frame.width=e,l.frame.height=r,l.updateUvs(),this._poolKeyHash[l.uid]=a,l}getSameSizeTexture(e,r=!1){const n=e.source;return this.getOptimalTexture(e.width,e.height,n._resolution,r)}returnTexture(e,r=!1){const n=this._poolKeyHash[e.uid];r&&(e.source.style=this.textureStyle),this._texturePool[n].push(e)}clear(e){if(e=e!==!1,e)for(const r in this._texturePool){const n=this._texturePool[r];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0)}this._texturePool={}}}const Fj=new Nj;class Lj{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new _e,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new fP,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const r=e.children;for(let n=0;n<r.length;n++){const s=r[n];s._updateFlags=15,this.addChild(s)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Fj.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const r=this.childrenToUpdate[e];r.list.fill(null),r.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const r=this.renderGroupChildren.indexOf(e);r>-1&&this.renderGroupChildren.splice(r,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const r=e.children;for(let n=0;n<r.length;n++)this.addChild(r[n])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const r=e.children;for(let n=0;n<r.length;n++)this.removeChild(r[n])}removeChildren(e){for(let r=0;r<e.length;r++)this.removeChild(e[r])}onChildUpdate(e){let r=this.childrenToUpdate[e.relativeRenderGroupDepth];r||(r=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),r.list[r.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let r=0;r<this._onRenderContainers.length;r++)this._onRenderContainers[r]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const r=this.root.children;for(let n=0;n<r.length;n++)this._getChildren(r[n],e);return e}_getChildren(e,r=[]){if(r.push(e),e.renderGroup)return r;const n=e.children;for(let s=0;s<n.length;s++)this._getChildren(n[s],r);return r}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new _e),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new _e),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new _e),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function Oj(t,e,r={}){for(const n in e)!r[n]&&e[n]!==void 0&&(t[n]=e[n])}const Gp=new sr(null),Cu=new sr(null),zp=new sr(null,1,1),Ru=new sr(null),$w=1,Bj=2,Hp=4;let qc=class pP extends vn{constructor(e={}){var r,n;super(),this.uid=ut("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new _e,this.relativeGroupTransform=new _e,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new sr(this,0,0),this._scale=zp,this._pivot=Cu,this._origin=Ru,this._skew=Gp,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Oj(this,e,{children:!0,parent:!0,effects:!0}),(r=e.children)==null||r.forEach(s=>this.addChild(s)),(n=e.parent)==null||n.addChild(this)}static mixin(e){Ne("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Bt.mixin(pP,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Ne(St,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let s=0;s<e.length;s++)this.addChild(e[s]);return e[0]}const r=e[0],n=this.renderGroup||this.parentRenderGroup;return r.parent===this?(this.children.splice(this.children.indexOf(r),1),this.children.push(r),n&&(n.structureDidChange=!0),r):(r.parent&&r.parent.removeChild(r),this.children.push(r),this.sortableChildren&&(this.sortDirty=!0),r.parent=this,r.didChange=!0,r._updateFlags=15,n&&n.addChild(r),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this),this._didViewChangeTick++,r._zIndex!==0&&r.depthOfChildModified(),r)}removeChild(...e){if(e.length>1){for(let s=0;s<e.length;s++)this.removeChild(e[s]);return e[0]}const r=e[0],n=this.children.indexOf(r);return n>-1&&(this._didViewChangeTick++,this.children.splice(n,1),this.renderGroup?this.renderGroup.removeChild(r):this.parentRenderGroup&&this.parentRenderGroup.removeChild(r),r.parentRenderLayer&&r.parentRenderLayer.detach(r),r.parent=null,this.emit("childRemoved",r,this,n),r.emit("removed",this)),r}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=os.get(Lj,this),this.groupTransform=_e.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),os.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new _e),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*QV}set angle(e){this.rotation=e*JV}get pivot(){return this._pivot===Cu&&(this._pivot=new sr(this,0,0)),this._pivot}set pivot(e){this._pivot===Cu&&(this._pivot=new sr(this,0,0),this._origin!==Ru&&Le("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Gp&&(this._skew=new sr(this,0,0)),this._skew}set skew(e){this._skew===Gp&&(this._skew=new sr(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===zp&&(this._scale=new sr(this,1,1)),this._scale}set scale(e){this._scale===zp&&(this._scale=new sr(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Ru&&(this._origin=new sr(this,0,0)),this._origin}set origin(e){this._origin===Ru&&(this._origin=new sr(this,0,0),this._pivot!==Cu&&Le("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const r=this.getLocalBounds().width;this._setWidth(e,r)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const r=this.getLocalBounds().height;this._setHeight(e,r)}getSize(e){e||(e={});const r=this.getLocalBounds();return e.width=Math.abs(this.scale.x*r.width),e.height=Math.abs(this.scale.y*r.height),e}setSize(e,r){const n=this.getLocalBounds();typeof e=="object"?(r=e.height??e.width,e=e.width):r??(r=e),e!==void 0&&this._setWidth(e,n.width),r!==void 0&&this._setHeight(r,n.height)}_updateSkew(){const e=this._rotation,r=this._skew;this._cx=Math.cos(e+r._y),this._sx=Math.sin(e+r._y),this._cy=-Math.sin(e-r._x),this._sy=Math.cos(e-r._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const r=this.localTransform,n=this._scale,s=this._pivot,i=this._origin,o=this._position,a=n._x,l=n._y,c=s._x,h=s._y,u=-i._x,d=-i._y;r.a=this._cx*a,r.b=this._sx*a,r.c=this._cy*l,r.d=this._sy*l,r.tx=o._x-(c*r.a+h*r.c)+(u*r.a+d*r.c)-u,r.ty=o._y-(c*r.b+h*r.d)+(u*r.b+d*r.d)-d}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=$w,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const n=gt.shared.setValue(e??16777215).toBgrNumber();n!==this.localColor&&(this.localColor=n,this._updateFlags|=$w,this._onUpdate())}get tint(){return wh(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Bj,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const r=e?2:0;(this.localDisplayStatus&2)!==r&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Hp,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const r=e?0:4;(this.localDisplayStatus&4)!==r&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Hp,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const r=e?1:0;(this.localDisplayStatus&1)!==r&&(this._updateFlags|=Hp,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var s;if(this.destroyed)return;this.destroyed=!0;let r;if(this.children.length&&(r=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&r)for(let i=0;i<r.length;++i)r[i].destroy(e);(s=this.renderGroup)==null||s.destroy(),this.renderGroup=null}};Bt.mixin(qc,xj,Sj,Ij,Rj,Cj,wj,bj,Pj,pj,gj,Tj,vj);class Dj extends qc{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new gs(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const r=this.bounds,{x:n,y:s}=e;return n>=r.minX&&n<=r.maxX&&s>=r.minY&&s<=r.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var r,n;super.destroy(e),this._bounds=null;for(const s in this._gpuData)(n=(r=this._gpuData[s]).destroy)==null||n.call(r);this._gpuData=null}collectRenderablesSimple(e,r,n){const{renderPipes:s}=r;s.blendMode.setBlendMode(this,this.groupBlendMode,e),s[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const o=this.children,a=o.length;for(let l=0;l<a;l++)o[l].collectRenderables(e,r,n)}}let Gw=class vy extends Dj{constructor(e=ve.EMPTY){e instanceof ve&&(e={texture:e});const{texture:r=ve.EMPTY,anchor:n,roundPixels:s,width:i,height:o,...a}=e;super({label:"Sprite",...a}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new sr({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:r.defaultAnchor&&(this.anchor=r.defaultAnchor),this.texture=r,this.allowChildren=!1,this.roundPixels=s??!1,i!==void 0&&(this.width=i),o!==void 0&&(this.height=o)}static from(e,r=!1){return e instanceof ve?new vy(e):new vy(ve.from(e,r))}set texture(e){e||(e=ve.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return oj(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Ne("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,r=this._texture,n=this._bounds,{width:s,height:i}=r.orig;n.minX=-e._x*s,n.maxX=n.minX+s,n.minY=-e._y*i,n.maxY=n.minY+i}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(n)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,r){typeof e=="object"?(r=e.height??e.width,e=e.width):r??(r=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),r!==void 0&&this._setHeight(r,this._texture.orig.height)}};const Uj=new gs;function mP(t,e,r){const n=Uj;t.measurable=!0,aP(t,r,n),e.addBoundsMask(n),t.measurable=!1}function gP(t,e,r){const n=as.get();t.measurable=!0;const s=er.get().identity(),i=yP(t,r,s);uP(t,n,i),t.measurable=!1,e.addBoundsMask(n),er.return(s),as.return(n)}function yP(t,e,r){return t?(t!==e&&(yP(t.parent,e,r),t.updateLocalTransform(),r.append(t.localTransform)),r):(Le("Mask bounds, renderable is not inside the root container"),r)}class xP{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Gw),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,r){this.inverse||mP(this.mask,e,r)}addLocalBounds(e,r){gP(this.mask,e,r)}containsPoint(e,r){const n=this.mask;return r(n,e)}destroy(){this.reset()}static test(e){return e instanceof Gw}}xP.extension=ee.MaskEffect;class vP{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}vP.extension=ee.MaskEffect;class _P{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,r){mP(this.mask,e,r)}addLocalBounds(e,r){gP(this.mask,e,r)}containsPoint(e,r){const n=this.mask;return r(n,e)}destroy(){this.reset()}static test(e){return e instanceof qc}}_P.extension=ee.MaskEffect;const Vj={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")};let zw=Vj;const Ve={get(){return zw},set(t){zw=t}};class wP extends _n{constructor(e){e.resource||(e.resource=Ve.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,r=this.height,n=this._resolution){const s=super.resize(e,r,n);return s&&this.resizeCanvas(),s}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}wP.extension=ee.TextureSource;class ro extends _n{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}ro.extension=ee.TextureSource;var _y=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(_y||{});let Wp=class{constructor(e,r=null,n=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=r,this.priority=n,this._once=s}match(e,r=null){return this._fn===e&&this._context===r}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const r=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}};const bP=class vr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Wp(null,null,1/0),this.deltaMS=1/vr.targetFPMS,this.elapsedMS=1/vr.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,n=_y.NORMAL){return this._addListener(new Wp(e,r,n))}addOnce(e,r,n=_y.NORMAL){return this._addListener(new Wp(e,r,n,!0))}_addListener(e){let r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,r){let n=this._head.next;for(;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*vr.targetFPMS;const n=this._head;let s=n.next;for(;s;)s=s.emit(this);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,vr.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!vr._shared){const e=vr._shared=new vr;e.autoStart=!0,e._protected=!0}return vr._shared}static get system(){if(!vr._system){const e=vr._system=new vr;e.autoStart=!0,e._protected=!0}return vr._system}};bP.targetFPMS=.06;let Pu=bP,Xp;async function AP(){return Xp??(Xp=(async()=>{var o;const e=Ve.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const r=await new Promise(a=>{const l=document.createElement("video");l.onloadeddata=()=>a(l),l.onerror=()=>a(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!r)return"premultiply-alpha-on-upload";const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r);const i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteFramebuffer(s),e.deleteTexture(n),(o=e.getExtension("WEBGL_lose_context"))==null||o.loseContext(),i[0]<=i[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Xp}const Tf=class SP extends _n{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...SP.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=Pu.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,r=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(r.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await AP(),this._load=new Promise((n,s)=>{this.isValid?n(this):(this._resolve=n,this._reject=s,r.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${r.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Pu.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Pu.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Pu.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Tf.extension=ee.TextureSource;Tf.defaultOptions={..._n.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Tf.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Hl=Tf;const on=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||r?e(n):n):t);let jj=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||Le(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const n=on(e);let s;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.test(r)){s=c.getCacheableAssets(n,r);break}}const i=new Map(Object.entries(s||{}));s||n.forEach(l=>{i.set(l,r)});const o=[...i.keys()],a={cacheKeys:o,keys:n};n.forEach(l=>{this._cacheMap.set(l,a)}),o.forEach(l=>{const c=s?s[l]:r;this._cache.has(l)&&this._cache.get(l)!==c&&Le("[Cache] already has key:",l),this._cache.set(l,i.get(l))})}remove(e){if(!this._cacheMap.has(e)){Le(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(s=>{this._cache.delete(s)}),r.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}};const De=new jj,wy=[];Bt.handleByList(ee.TextureSource,wy);function TP(t={}){const e=t&&t.resource,r=e?t.resource:t,n=e?t:{resource:t};for(let s=0;s<wy.length;s++){const i=wy[s];if(i.test(r))return new i(n)}throw new Error(`Could not find a source type for resource: ${n.resource}`)}function $j(t={},e=!1){const r=t&&t.resource,n=r?t.resource:t,s=r?t:{resource:t};if(!e&&De.has(n))return De.get(n);const i=new ve({source:TP(s)});return i.on("destroy",()=>{De.has(n)&&De.remove(n)}),e||De.set(n,i),i}function Gj(t,e=!1){return typeof t=="string"?De.get(t):t instanceof _n?new ve({source:t}):$j(t,e)}ve.from=Gj;_n.from=TP;Bt.add(xP,vP,_P,Hl,ro,wP,rv);var ui=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(ui||{});function Zr(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function al(t){return t.split("?")[0].split("#")[0]}function zj(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Hj(t,e,r){return t.replace(new RegExp(zj(e),"g"),r)}function Wj(t,e){let r="",n=0,s=-1,i=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),s=a,i=0;continue}}else if(r.length===2||r.length===1){r="",n=0,s=a,i=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${t.slice(s+1,a)}`:r=t.slice(s+1,a),n=a-s-1;s=a,i=0}else o===46&&i!==-1?++i:i=-1}return r}const Rr={toPosix(t){return Hj(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){Zr(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if(Zr(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const n=al(this.toPosix(e??Ve.get().getBaseUrl())),s=al(this.toPosix(r??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?Rr.join(s,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(Zr(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=Wj(t,!1),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return Zr(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(Zr(n),n.length>0)if(e===void 0)e=n;else{const s=t[r-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(Zr(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let n=-1,s=!0;const i=this.getProtocol(t),o=t;t=t.slice(i.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!s){n=a;break}}else s=!1;return n===-1?r?"/":this.isUrl(o)?i+t:i:r&&n===1?"//":i+t.slice(0,n)},rootname(t){Zr(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){Zr(t),e&&Zr(e),t=al(this.toPosix(t));let r=0,n=-1,s=!0,i;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(i=t.length-1;i>=0;--i){const l=t.charCodeAt(i);if(l===47){if(!s){r=i+1;break}}else a===-1&&(s=!1,a=i+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=i):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(i=t.length-1;i>=0;--i)if(t.charCodeAt(i)===47){if(!s){r=i+1;break}}else n===-1&&(s=!1,n=i+1);return n===-1?"":t.slice(r,n)},extname(t){Zr(t),t=al(this.toPosix(t));let e=-1,r=0,n=-1,s=!0,i=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!s){r=o+1;break}continue}n===-1&&(s=!1,n=o+1),a===46?e===-1?e=o:i!==1&&(i=1):e!==-1&&(i=-1)}return e===-1||n===-1||i===0||i===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){Zr(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=al(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let s;e.root=this.rootname(t),n||this.hasProtocol(t)?s=1:s=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,h=0;for(;c>=s;--c){if(r=t.charCodeAt(c),r===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),r===46?i===-1?i=c:h!==1&&(h=1):i!==-1&&(h=-1)}return i===-1||a===-1||h===0||h===1&&i===a-1&&i===o+1?a!==-1&&(o===0&&n?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&n?(e.name=t.slice(1,i),e.base=t.slice(1,a)):(e.name=t.slice(o,i),e.base=t.slice(o,a)),e.ext=t.slice(i,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function EP(t,e,r,n,s){const i=e[r];for(let o=0;o<i.length;o++){const a=i[o];r<e.length-1?EP(t.replace(n[r],a),e,r+1,n,s):s.push(t.replace(n[r],a))}}function Xj(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const s=[];r.forEach(i=>{const o=i.substring(1,i.length-1).split(",");s.push(o)}),EP(t,s,0,r,n)}else n.push(t);return n}const Ad=t=>!Array.isArray(t);let $a=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}getAlias(e){const{alias:r,src:n}=e;return on(r||n,i=>typeof i=="string"?i:Array.isArray(i)?i.map(o=>(o==null?void 0:o.src)??o):i!=null&&i.src?i.src:i,!0)}addManifest(e){this._manifest&&Le("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const n=[];let s=r;Array.isArray(r)||(s=Object.entries(r).map(([i,o])=>typeof o=="string"||Array.isArray(o)?{alias:i,src:o}:{alias:i,...o})),s.forEach(i=>{const o=i.src,a=i.alias;let l;if(typeof a=="string"){const c=this._createBundleAssetId(e,a);n.push(c),l=[a,c]}else{const c=a.map(h=>this._createBundleAssetId(e,h));n.push(...c),l=[...a,...c]}this.add({...i,alias:l,src:o})}),this._bundles[e]=n}add(e){const r=[];Array.isArray(e)?r.push(...e):r.push(e);let n;n=i=>{this.hasKey(i)&&Le(`[Resolver] already has key: ${i} overwriting`)},on(r).forEach(i=>{const{src:o}=i;let{data:a,format:l,loadParser:c,parser:h}=i;const u=on(o).map(p=>typeof p=="string"?Xj(p):Array.isArray(p)?p:[p]),d=this.getAlias(i);Array.isArray(d)?d.forEach(n):n(d);const f=[];u.forEach(p=>{p.forEach(m=>{let g={};if(typeof m!="object"){g.src=m;for(let y=0;y<this._parsers.length;y++){const v=this._parsers[y];if(v.test(m)){g=v.parse(m);break}}}else a=m.data??a,l=m.format??l,(m.loadParser||m.parser)&&(c=m.loadParser??c,h=m.parser??h),g={...g,...m};if(!d)throw new Error(`[Resolver] alias is undefined for this asset: ${g.src}`);g=this._buildResolvedAsset(g,{aliases:d,data:a,format:l,loadParser:c,parser:h}),f.push(g)})}),d.forEach(p=>{this._assetMap[p]=f})})}resolveBundle(e){const r=Ad(e);e=on(e);const n={};return e.forEach(s=>{const i=this._bundles[s];if(i){const o=this.resolve(i),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(s,l)]=c}n[s]=a}}),r?n[e[0]]:n}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const n={};for(const s in r)n[s]=r[s].src;return n}return r.src}resolve(e){const r=Ad(e);e=on(e);const n={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let i=this._assetMap[s];const o=this._getPreferredOrder(i);o==null||o.priority.forEach(a=>{o.params[a].forEach(l=>{const c=i.filter(h=>h[a]?h[a]===l:!1);c.length&&(i=c)})}),this._resolverHash[s]=i[0]}else this._resolverHash[s]=this._buildResolvedAsset({alias:[s],src:s},{});n[s]=this._resolverHash[s]}),r?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const n=e[r],s=this._preferredOrder.find(i=>i.params.format.includes(n.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}_buildResolvedAsset(e,r){const{aliases:n,data:s,loadParser:i,parser:o,format:a}=r;return(this._basePath||this._rootPath)&&(e.src=Rr.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=i??e.loadParser,e.parser=o??e.parser,e.format=a??e.format??Yj(e.src),e}};$a.RETINA_PREFIX=/@([0-9\.]+)x/;function Yj(t){return t.split(".").pop().split("?").shift().split("#").shift()}const by=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t},CP=class bl{constructor(e,r){this.linkedSheets=[];let n=e;(e==null?void 0:e.source)instanceof _n&&(n={texture:e,data:r});const{texture:s,data:i,cachePrefix:o=""}=n;this.cachePrefix=o,this._texture=s instanceof ve?s:null,this.textureSource=s.source,this.textures={},this.animations={},this.data=i;const a=parseFloat(i.meta.scale);a?(this.resolution=a,s.source.resolution=this.resolution):this.resolution=s.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=bl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let r=e;const n=bl.BATCH_SIZE;for(;r-e<n&&r<this._frameKeys.length;){const s=this._frameKeys[r],i=this._frames[s],o=i.frame;if(o){let a=null,l=null;const c=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,h=new Ft(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);i.rotated?a=new Ft(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Ft(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(l=new Ft(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[s]=new ve({source:this.textureSource,frame:a,orig:h,trim:l,rotate:i.rotated?2:0,defaultAnchor:i.anchor,defaultBorders:i.borders,label:s.toString()})}r++}}_processAnimations(){const e=this.data.animations||{};for(const r in e){this.animations[r]=[];for(let n=0;n<e[r].length;n++){const s=e[r][n];this.animations[r].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*bl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*bl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var r;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)==null||r.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};CP.BATCH_SIZE=1e3;let Hw=CP;const qj=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function RP(t,e,r){const n={};if(t.forEach(s=>{n[s]=e}),Object.keys(e.textures).forEach(s=>{n[`${e.cachePrefix}${s}`]=e.textures[s]}),!r){const s=Rr.dirname(t[0]);e.linkedSheets.forEach((i,o)=>{const a=RP([`${s}/${e.data.meta.related_multi_packs[o]}`],i,!0);Object.assign(n,a)})}return n}const Kj={extension:ee.Asset,cache:{test:t=>t instanceof Hw,getCacheableAssets:(t,e)=>RP(t,e,!1)},resolver:{extension:{type:ee.ResolveParser,name:"resolveSpritesheet"},test:t=>{const r=t.split("?")[0].split("."),n=r.pop(),s=r.pop();return n==="json"&&qj.includes(s)},parse:t=>{var r;const e=t.split(".");return{resolution:parseFloat(((r=$a.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:ee.LoadParser,priority:ui.Normal,name:"spritesheetLoader"},async testParse(t,e){return Rr.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){var u,d;const{texture:n,imageFilename:s,textureOptions:i,cachePrefix:o}=(e==null?void 0:e.data)??{};let a=Rr.dirname(e.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");let l;if(n instanceof ve)l=n;else{const f=by(a+(s??t.meta.image),e.src);l=(await r.load([{src:f,data:i}]))[f]}const c=new Hw({texture:l.source,data:t,cachePrefix:o});await c.parse();const h=(u=t==null?void 0:t.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(h)){const f=[];for(const m of h){if(typeof m!="string")continue;let g=a+m;(d=e.data)!=null&&d.ignoreMultiPack||(g=by(g,e.src),f.push(r.load({src:g,data:{textureOptions:i,ignoreMultiPack:!0}})))}const p=await Promise.all(f);c.linkedSheets=p,p.forEach(m=>{m.linkedSheets=[c].concat(c.linkedSheets.filter(g=>g!==m))})}return c},async unload(t,e,r){await r.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};Bt.add(Kj);var Yp=/iPhone/i,Ww=/iPod/i,Xw=/iPad/i,Yw=/\biOS-universal(?:.+)Mac\b/i,qp=/\bAndroid(?:.+)Mobile\b/i,qw=/Android/i,_o=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Mu=/Silk/i,Xn=/Windows Phone/i,Kw=/\bWindows(?:.+)ARM\b/i,Zw=/BlackBerry/i,Qw=/BB10/i,Jw=/Opera Mini/i,eb=/\b(CriOS|Chrome)(?:.+)Mobile/i,tb=/Mobile(?:.+)Firefox\b/i,rb=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function Zj(t){return function(e){return e.test(t)}}function nb(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var s=Zj(r),i={apple:{phone:s(Yp)&&!s(Xn),ipod:s(Ww),tablet:!s(Yp)&&(s(Xw)||rb(e))&&!s(Xn),universal:s(Yw),device:(s(Yp)||s(Ww)||s(Xw)||s(Yw)||rb(e))&&!s(Xn)},amazon:{phone:s(_o),tablet:!s(_o)&&s(Mu),device:s(_o)||s(Mu)},android:{phone:!s(Xn)&&s(_o)||!s(Xn)&&s(qp),tablet:!s(Xn)&&!s(_o)&&!s(qp)&&(s(Mu)||s(qw)),device:!s(Xn)&&(s(_o)||s(Mu)||s(qp)||s(qw))||s(/\bokhttp\b/i)},windows:{phone:s(Xn),tablet:s(Kw),device:s(Xn)||s(Kw)},other:{blackberry:s(Zw),blackberry10:s(Qw),opera:s(Jw),firefox:s(tb),chrome:s(eb),device:s(Zw)||s(Qw)||s(Jw)||s(tb)||s(eb)},any:!1,phone:!1,tablet:!1};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}const Kp=Object.create(null),sb=Object.create(null);function iv(t,e){let r=sb[t];return r===void 0&&(Kp[e]===void 0&&(Kp[e]=1),sb[t]=r=Kp[e]++),r}let wo;function PP(){return(!wo||wo!=null&&wo.isContextLost())&&(wo=Ve.get().createCanvas().getContext("webgl",{})),wo}let Iu;function Qj(){if(!Iu){Iu="mediump";const t=PP();t&&t.getShaderPrecisionFormat&&(Iu=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?"highp":"mediump")}return Iu}function Jj(t,e,r){return e?t:r?(t=t.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${t}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${t}
        `}function e5(t,e,r){const n=r?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(t.substring(0,9)!=="precision"){let s=r?e.requestedFragmentPrecision:e.requestedVertexPrecision;return s==="highp"&&n!=="highp"&&(s="mediump"),`precision ${s} float;
${t}`}else if(n!=="highp"&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}function t5(t,e){return e?`#version 300 es
${t}`:t}const r5={},n5={};function s5(t,{name:e="pixi-program"},r=!0){e=e.replace(/\s+/g,"-"),e+=r?"-fragment":"-vertex";const n=r?r5:n5;return n[e]?(n[e]++,e+=`-${n[e]}`):n[e]=1,t.indexOf("#define SHADER_NAME")!==-1?t:`${`#define SHADER_NAME ${e}`}
${t}`}function i5(t,e){return e?t.replace("#version 300 es",""):t}const Zp={stripVersion:i5,ensurePrecision:e5,addProgramDefines:Jj,setProgramName:s5,insertVersion:t5},Qp=Object.create(null),MP=class Ay{constructor(e){e={...Ay.defaultOptions,...e};const r=e.fragment.indexOf("#version 300 es")!==-1,n={stripVersion:r,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:Qj()},setProgramName:{name:e.name},addProgramDefines:r,insertVersion:r};let s=e.fragment,i=e.vertex;Object.keys(Zp).forEach(o=>{const a=n[o];s=Zp[o](s,a,!0),i=Zp[o](i,a,!1)}),this.fragment=s,this.vertex=i,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=iv(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){const r=`${e.vertex}:${e.fragment}`;return Qp[r]||(Qp[r]=new Ay(e)),Qp[r]}};MP.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let IP=MP;const ib={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function o5(t){return ib[t]??ib.float32}const a5={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function l5({source:t,entryPoint:e}){const r={},n=t.indexOf(`fn ${e}`);if(n!==-1){const s=t.indexOf("->",n);if(s!==-1){const i=t.substring(n,s),o=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let a;for(;(a=o.exec(i))!==null;){const l=a5[a[3]]??"float32";r[a[2]]={location:parseInt(a[1],10),format:l,stride:o5(l).stride,offset:0,instance:!1,start:0}}}}return r}function Jp(t){var u,d;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,r=/@group\((\d+)\)/,n=/@binding\((\d+)\)/,s=/var(<[^>]+>)? (\w+)/,i=/:\s*(\w+)/,o=/struct\s+(\w+)\s*{([^}]+)}/g,a=/(\w+)\s*:\s*([\w\<\>]+)/g,l=/struct\s+(\w+)/,c=(u=t.match(e))==null?void 0:u.map(f=>({group:parseInt(f.match(r)[1],10),binding:parseInt(f.match(n)[1],10),name:f.match(s)[2],isUniform:f.match(s)[1]==="<uniform>",type:f.match(i)[1]}));if(!c)return{groups:[],structs:[]};const h=((d=t.match(o))==null?void 0:d.map(f=>{const p=f.match(l)[1],m=f.match(a).reduce((g,y)=>{const[v,x]=y.split(":");return g[v.trim()]=x.trim(),g},{});return m?{name:p,members:m}:null}).filter(({name:f})=>c.some(p=>p.type===f)))??[];return{groups:c,structs:h}}var Al=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(Al||{});function c5({groups:t}){const e=[];for(let r=0;r<t.length;r++){const n=t[r];e[n.group]||(e[n.group]=[]),n.isUniform?e[n.group].push({binding:n.binding,visibility:Al.VERTEX|Al.FRAGMENT,buffer:{type:"uniform"}}):n.type==="sampler"?e[n.group].push({binding:n.binding,visibility:Al.FRAGMENT,sampler:{type:"filtering"}}):n.type==="texture_2d"&&e[n.group].push({binding:n.binding,visibility:Al.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function u5({groups:t}){const e=[];for(let r=0;r<t.length;r++){const n=t[r];e[n.group]||(e[n.group]={}),e[n.group][n.name]=n.binding}return e}function h5(t,e){const r=new Set,n=new Set,s=[...t.structs,...e.structs].filter(o=>r.has(o.name)?!1:(r.add(o.name),!0)),i=[...t.groups,...e.groups].filter(o=>{const a=`${o.name}-${o.binding}`;return n.has(a)?!1:(n.add(a),!0)});return{structs:s,groups:i}}const em=Object.create(null);class Ef{constructor(e){var a,l;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:r,vertex:n,layout:s,gpuLayout:i,name:o}=e;if(this.name=o,this.fragment=r,this.vertex=n,r.source===n.source){const c=Jp(r.source);this.structsAndGroups=c}else{const c=Jp(n.source),h=Jp(r.source);this.structsAndGroups=h5(c,h)}this.layout=s??u5(this.structsAndGroups),this.gpuLayout=i??c5(this.structsAndGroups),this.autoAssignGlobalUniforms=((a=this.layout[0])==null?void 0:a.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((l=this.layout[1])==null?void 0:l.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:r}=this,n=e.source+r.source+e.entryPoint+r.entryPoint;this._layoutKey=iv(n,"program")}get attributeData(){return this._attributeData??(this._attributeData=l5(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){const r=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return em[r]||(em[r]=new Ef(e)),em[r]}}const kP=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],d5=kP.reduce((t,e)=>(t[e]=!0,t),{});function f5(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const NP=class FP{constructor(e,r){this._touched=0,this.uid=ut("uniform"),this._resourceType="uniformGroup",this._resourceId=ut("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,r={...FP.defaultOptions,...r},this.uniformStructures=e;const n={};for(const s in e){const i=e[s];if(i.name=s,i.size=i.size??1,!d5[i.type])throw new Error(`Uniform type ${i.type} is not supported. Supported uniform types are: ${kP.join(", ")}`);i.value??(i.value=f5(i.type,i.size)),n[s]=i.value}this.uniforms=n,this._dirtyId=1,this.ubo=r.ubo,this.isStatic=r.isStatic,this._signature=iv(Object.keys(n).map(s=>`${s}-${e[s].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};NP.defaultOptions={ubo:!1,isStatic:!1};let LP=NP;class bh{constructor(e){this.resources=Object.create(null),this._dirty=!0;let r=0;for(const n in e){const s=e[n];this.setResource(s,r++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let r=0;for(const n in this.resources)e[r++]=this.resources[n]._resourceId;this._key=e.join("|")}setResource(e,r){var s,i;const n=this.resources[r];e!==n&&(n&&((s=e.off)==null||s.call(e,"change",this.onResourceChange,this)),(i=e.on)==null||i.call(e,"change",this.onResourceChange,this),this.resources[r]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const r=this.resources;for(const n in r)r[n]._touched=e}destroy(){var r;const e=this.resources;for(const n in e){const s=e[n];(r=s.off)==null||r.call(s,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const r=this.resources;for(const n in r)r[n]===e&&(r[n]=null)}else this._updateKey()}}var Sy=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(Sy||{});let p5=class OP extends vn{constructor(e){super(),this.uid=ut("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:r,glProgram:n,groups:s,resources:i,compatibleRenderers:o,groupMap:a}=e;this.gpuProgram=r,this.glProgram=n,o===void 0&&(o=0,r&&(o|=Sy.WEBGPU),n&&(o|=Sy.WEBGL)),this.compatibleRenderers=o;const l={};if(!i&&!s&&(i={}),i&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!r&&s&&!a)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!r&&s&&a)for(const c in a)for(const h in a[c]){const u=a[c][h];l[u]={group:c,binding:h,name:u}}else if(r&&s&&!a){const c=r.structsAndGroups.groups;a={},c.forEach(h=>{a[h.group]=a[h.group]||{},a[h.group][h.binding]=h.name,l[h.name]=h})}else if(i){s={},a={},r&&r.structsAndGroups.groups.forEach(u=>{a[u.group]=a[u.group]||{},a[u.group][u.binding]=u.name,l[u.name]=u});let c=0;for(const h in i)l[h]||(s[99]||(s[99]=new bh,this._ownedBindGroups.push(s[99])),l[h]={group:99,binding:c,name:h},a[99]=a[99]||{},a[99][c]=h,c++);for(const h in i){const u=h;let d=i[h];!d.source&&!d._resourceType&&(d=new LP(d));const f=l[u];f&&(s[f.group]||(s[f.group]=new bh,this._ownedBindGroups.push(s[f.group])),s[f.group].setResource(d,f.binding))}}this.groups=s,this._uniformBindMap=a,this.resources=this._buildResourceAccessor(s,l)}addResource(e,r,n){var s,i;(s=this._uniformBindMap)[r]||(s[r]={}),(i=this._uniformBindMap[r])[n]||(i[n]=e),this.groups[r]||(this.groups[r]=new bh,this._ownedBindGroups.push(this.groups[r]))}_buildResourceAccessor(e,r){const n={};for(const s in r){const i=r[s];Object.defineProperty(n,i.name,{get(){return e[i.group].getResource(i.binding)},set(o){e[i.group].setResource(o,i.binding)}})}return n}destroy(e=!1){var r,n;this.emit("destroy",this),e&&((r=this.gpuProgram)==null||r.destroy(),(n=this.glProgram)==null||n.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(s=>{s.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){const{gpu:r,gl:n,...s}=e;let i,o;return r&&(i=Ef.from(r)),n&&(o=IP.from(n)),new OP({gpuProgram:i,glProgram:o,...s})}};const Ty=[];Bt.handleByNamedList(ee.Environment,Ty);async function m5(t){if(!t)for(let e=0;e<Ty.length;e++){const r=Ty[e];if(r.value.test()){await r.value.load();return}}}let ll;function g5(){if(typeof ll=="boolean")return ll;try{ll=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ll=!1}return ll}function ob(t,e,r=2){const n=e&&e.length,s=n?e[0]*r:t.length;let i=BP(t,0,s,r,!0);const o=[];if(!i||i.next===i.prev)return o;let a,l,c;if(n&&(i=w5(t,e,i,r)),t.length>80*r){a=t[0],l=t[1];let h=a,u=l;for(let d=r;d<s;d+=r){const f=t[d],p=t[d+1];f<a&&(a=f),p<l&&(l=p),f>h&&(h=f),p>u&&(u=p)}c=Math.max(h-a,u-l),c=c!==0?32767/c:0}return wc(i,o,r,a,l,c,0),o}function BP(t,e,r,n,s){let i;if(s===k5(t,e,r,n)>0)for(let o=e;o<r;o+=n)i=ab(o/n|0,t[o],t[o+1],i);else for(let o=r-n;o>=e;o-=n)i=ab(o/n|0,t[o],t[o+1],i);return i&&Ea(i,i.next)&&(Ac(i),i=i.next),i}function no(t,e){if(!t)return t;e||(e=t);let r=t,n;do if(n=!1,!r.steiner&&(Ea(r,r.next)||qe(r.prev,r,r.next)===0)){if(Ac(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function wc(t,e,r,n,s,i,o){if(!t)return;!o&&i&&E5(t,n,s,i);let a=t;for(;t.prev!==t.next;){const l=t.prev,c=t.next;if(i?x5(t,n,s,i):y5(t)){e.push(l.i,t.i,c.i),Ac(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=v5(no(t),e),wc(t,e,r,n,s,i,2)):o===2&&_5(t,e,r,n,s,i):wc(no(t),e,r,n,s,i,1);break}}}function y5(t){const e=t.prev,r=t,n=t.next;if(qe(e,r,n)>=0)return!1;const s=e.x,i=r.x,o=n.x,a=e.y,l=r.y,c=n.y,h=Math.min(s,i,o),u=Math.min(a,l,c),d=Math.max(s,i,o),f=Math.max(a,l,c);let p=n.next;for(;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=u&&p.y<=f&&Sl(s,a,i,l,o,c,p.x,p.y)&&qe(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function x5(t,e,r,n){const s=t.prev,i=t,o=t.next;if(qe(s,i,o)>=0)return!1;const a=s.x,l=i.x,c=o.x,h=s.y,u=i.y,d=o.y,f=Math.min(a,l,c),p=Math.min(h,u,d),m=Math.max(a,l,c),g=Math.max(h,u,d),y=Ey(f,p,e,r,n),v=Ey(m,g,e,r,n);let x=t.prevZ,_=t.nextZ;for(;x&&x.z>=y&&_&&_.z<=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==s&&x!==o&&Sl(a,h,l,u,c,d,x.x,x.y)&&qe(x.prev,x,x.next)>=0||(x=x.prevZ,_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==s&&_!==o&&Sl(a,h,l,u,c,d,_.x,_.y)&&qe(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;x&&x.z>=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==s&&x!==o&&Sl(a,h,l,u,c,d,x.x,x.y)&&qe(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;_&&_.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==s&&_!==o&&Sl(a,h,l,u,c,d,_.x,_.y)&&qe(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function v5(t,e){let r=t;do{const n=r.prev,s=r.next.next;!Ea(n,s)&&UP(n,r,r.next,s)&&bc(n,s)&&bc(s,n)&&(e.push(n.i,r.i,s.i),Ac(r),Ac(r.next),r=t=s),r=r.next}while(r!==t);return no(r)}function _5(t,e,r,n,s,i){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&P5(o,a)){let l=VP(o,a);o=no(o,o.next),l=no(l,l.next),wc(o,e,r,n,s,i,0),wc(l,e,r,n,s,i,0);return}a=a.next}o=o.next}while(o!==t)}function w5(t,e,r,n){const s=[];for(let i=0,o=e.length;i<o;i++){const a=e[i]*n,l=i<o-1?e[i+1]*n:t.length,c=BP(t,a,l,n,!1);c===c.next&&(c.steiner=!0),s.push(R5(c))}s.sort(b5);for(let i=0;i<s.length;i++)r=A5(s[i],r);return r}function b5(t,e){let r=t.x-e.x;if(r===0&&(r=t.y-e.y,r===0)){const n=(t.next.y-t.y)/(t.next.x-t.x),s=(e.next.y-e.y)/(e.next.x-e.x);r=n-s}return r}function A5(t,e){const r=S5(t,e);if(!r)return e;const n=VP(r,t);return no(n,n.next),no(r,r.next)}function S5(t,e){let r=e;const n=t.x,s=t.y;let i=-1/0,o;if(Ea(t,r))return r;do{if(Ea(t,r.next))return r.next;if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){const u=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=n&&u>i&&(i=u,o=r.x<r.next.x?r:r.next,u===n))return o}r=r.next}while(r!==e);if(!o)return null;const a=o,l=o.x,c=o.y;let h=1/0;r=o;do{if(n>=r.x&&r.x>=l&&n!==r.x&&DP(s<c?n:i,s,l,c,s<c?i:n,s,r.x,r.y)){const u=Math.abs(s-r.y)/(n-r.x);bc(r,t)&&(u<h||u===h&&(r.x>o.x||r.x===o.x&&T5(o,r)))&&(o=r,h=u)}r=r.next}while(r!==a);return o}function T5(t,e){return qe(t.prev,t,e.prev)<0&&qe(e.next,t,t.next)<0}function E5(t,e,r,n){let s=t;do s.z===0&&(s.z=Ey(s.x,s.y,e,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,C5(s)}function C5(t){let e,r=1;do{let n=t,s;t=null;let i=null;for(e=0;n;){e++;let o=n,a=0;for(let c=0;c<r&&(a++,o=o.nextZ,!!o);c++);let l=r;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||n.z<=o.z)?(s=n,n=n.nextZ,a--):(s=o,o=o.nextZ,l--),i?i.nextZ=s:t=s,s.prevZ=i,i=s;n=o}i.nextZ=null,r*=2}while(e>1);return t}function Ey(t,e,r,n,s){return t=(t-r)*s|0,e=(e-n)*s|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function R5(t){let e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function DP(t,e,r,n,s,i,o,a){return(s-o)*(e-a)>=(t-o)*(i-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(i-a)>=(s-o)*(n-a)}function Sl(t,e,r,n,s,i,o,a){return!(t===o&&e===a)&&DP(t,e,r,n,s,i,o,a)}function P5(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!M5(t,e)&&(bc(t,e)&&bc(e,t)&&I5(t,e)&&(qe(t.prev,t,e.prev)||qe(t,e.prev,e))||Ea(t,e)&&qe(t.prev,t,t.next)>0&&qe(e.prev,e,e.next)>0)}function qe(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Ea(t,e){return t.x===e.x&&t.y===e.y}function UP(t,e,r,n){const s=Nu(qe(t,e,r)),i=Nu(qe(t,e,n)),o=Nu(qe(r,n,t)),a=Nu(qe(r,n,e));return!!(s!==i&&o!==a||s===0&&ku(t,r,e)||i===0&&ku(t,n,e)||o===0&&ku(r,t,n)||a===0&&ku(r,e,n))}function ku(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Nu(t){return t>0?1:t<0?-1:0}function M5(t,e){let r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&UP(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function bc(t,e){return qe(t.prev,t,t.next)<0?qe(t,e,t.next)>=0&&qe(t,t.prev,e)>=0:qe(t,e,t.prev)<0||qe(t,t.next,e)<0}function I5(t,e){let r=t,n=!1;const s=(t.x+e.x)/2,i=(t.y+e.y)/2;do r.y>i!=r.next.y>i&&r.next.y!==r.y&&s<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function VP(t,e){const r=Cy(t.i,t.x,t.y),n=Cy(e.i,e.x,e.y),s=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=s,s.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function ab(t,e,r,n){const s=Cy(t,e,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Ac(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Cy(t,e,r){return{i:t,x:e,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function k5(t,e,r,n){let s=0;for(let i=e,o=r-n;i<r;i+=n)s+=(t[o]-t[i])*(t[i+1]+t[o+1]),o=i;return s}const N5=ob.default||ob;var jP=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(jP||{});class F5{constructor(e){this.items=[],this._name=e}emit(e,r,n,s,i,o,a,l){const{name:c,items:h}=this;for(let u=0,d=h.length;u<d;u++)h[u][c](e,r,n,s,i,o,a,l);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&this.items.splice(r,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const L5=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],$P=class GP extends vn{constructor(e){super(),this.uid=ut("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const r=[...L5,...this.config.runners??[]];this._addRunners(...r),this._unsafeEvalCheck()}async init(e={}){const r=e.skipExtensionImports===!0?!0:e.manageImports===!1;await m5(r),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const n in this._systemsHash)e={...this._systemsHash[n].constructor.defaultOptions,...e};e={...GP.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let n=0;n<this.runners.init.items.length;n++)await this.runners.init.items[n].init(e);this._initOptions=e}render(e,r){let n=e;if(n instanceof qc&&(n={container:n},r&&(Ne(St,"passing a second argument is deprecated, please use render options instead"),n.target=r.renderTexture)),n.target||(n.target=this.view.renderTarget),n.target===this.view.renderTarget&&(this._lastObjectRendered=n.container,n.clearColor??(n.clearColor=this.background.colorRgba),n.clear??(n.clear=this.background.clearBeforeRender)),n.clearColor){const s=Array.isArray(n.clearColor)&&n.clearColor.length===4;n.clearColor=s?n.clearColor:gt.shared.setValue(n.clearColor).toArray()}n.transform||(n.container.updateLocalTransform(),n.transform=n.container.localTransform),n.container.enableRenderGroup(),this.runners.prerender.emit(n),this.runners.renderStart.emit(n),this.runners.render.emit(n),this.runners.renderEnd.emit(n),this.runners.postrender.emit(n)}resize(e,r,n){const s=this.view.resolution;this.view.resize(e,r,n),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),n!==void 0&&n!==s&&this.runners.resolutionChange.emit(n)}clear(e={}){const r=this;e.target||(e.target=r.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=jP.ALL);const{clear:n,clearColor:s,target:i}=e;gt.shared.setValue(s??this.background.colorRgba),r.renderTarget.clear(i,n,gt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(r=>{this.runners[r]=new F5(r)})}_addSystems(e){let r;for(r in e){const n=e[r];this._addSystem(n.value,n.name)}}_addSystem(e,r){const n=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const s in this.runners)this.runners[s].add(n);return this}_addPipes(e,r){const n=r.reduce((s,i)=>(s[i.name]=i.value,s),{});e.forEach(s=>{const i=s.value,o=s.name,a=n[o];this.renderPipes[o]=new i(this,a?new a:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(r=>{r.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!g5())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};$P.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let zP=$P,Fu;function O5(t){return Fu!==void 0||(Fu=(()=>{var r;const e={stencil:!0,failIfMajorPerformanceCaveat:t??zP.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ve.get().getWebGLRenderingContext())return!1;let s=Ve.get().createCanvas().getContext("webgl",e);const i=!!((r=s==null?void 0:s.getContextAttributes())!=null&&r.stencil);if(s){const o=s.getExtension("WEBGL_lose_context");o&&o.loseContext()}return s=null,i}catch{return!1}})()),Fu}let Lu;async function B5(t={}){return Lu!==void 0||(Lu=await(async()=>{const e=Ve.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(t)).requestDevice(),!0}catch{return!1}})()),Lu}const lb=["webgl","webgpu","canvas"];async function D5(t){let e=[];t.preference?(e.push(t.preference),lb.forEach(i=>{i!==t.preference&&e.push(i)})):e=lb.slice();let r,n={};for(let i=0;i<e.length;i++){const o=e[i];if(o==="webgpu"&&await B5()){const{WebGPURenderer:a}=await gc(()=>import("./WebGPURenderer-1dc45c0d.js"),["assets/WebGPURenderer-1dc45c0d.js","assets/colorToUniform-21d3a5e1.js","assets/SharedSystems-09c9c5b2.js"]);r=a,n={...t,...t.webgpu};break}else if(o==="webgl"&&O5(t.failIfMajorPerformanceCaveat??zP.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:a}=await gc(()=>import("./WebGLRenderer-6c53dc7b.js"),["assets/WebGLRenderer-6c53dc7b.js","assets/colorToUniform-21d3a5e1.js","assets/SharedSystems-09c9c5b2.js"]);r=a,n={...t,...t.webgl};break}else if(o==="canvas")throw n={...t},new Error("CanvasRenderer is not yet implemented")}if(delete n.webgpu,delete n.webgl,!r)throw new Error("No available renderer for the current environment");const s=new r;return await s.init(n),s}const HP="8.12.0";class WP{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,HP)}static destroy(){}}WP.extension=ee.Application;class U5{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,HP)}destroy(){this._renderer=null}}U5.extension={type:[ee.WebGLSystem,ee.WebGPUSystem],name:"initHook",priority:-10};const XP=class Ry{constructor(...e){this.stage=new qc,e[0]!==void 0&&Ne(St,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await D5(e),Ry._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Ne(St,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,r=!1){const n=Ry._plugins.slice(0);n.reverse(),n.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};XP._plugins=[];let YP=XP;Bt.handleByList(ee.Application,YP._plugins);Bt.add(WP);class qP extends vn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Ne(St,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Ne(St,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Ne(St,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Ne(St,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Ne(St,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var r;this.emit("destroy",this),this.removeAllListeners();for(const n in this.chars)(r=this.chars[n].texture)==null||r.destroy();this.chars=null,e&&(this.pages.forEach(n=>n.texture.destroy(!0)),this.pages=null)}}const V5=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Py(t){const e=typeof t.fontSize=="number"?`${t.fontSize}px`:t.fontSize;let r=t.fontFamily;Array.isArray(t.fontFamily)||(r=t.fontFamily.split(","));for(let n=r.length-1;n>=0;n--){let s=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!V5.includes(s)&&(s=`"${s}"`),r[n]=s}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${r.join(",")}`}const tm={willReadFrequently:!0},zn=class Q{static get experimentalLetterSpacingSupported(){let e=Q._experimentalLetterSpacingSupported;if(e===void 0){const r=Ve.get().getCanvasRenderingContext2D().prototype;e=Q._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}constructor(e,r,n,s,i,o,a,l,c){this.text=e,this.style=r,this.width=n,this.height=s,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e=" ",r,n=Q._canvas,s=r.wordWrap){var y;const i=Py(r),o=Q.measureFont(i);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);const a=Q.__context;a.font=i;const c=(s?Q._wordWrap(e,r,n):e).split(/(?:\r\n|\r|\n)/),h=new Array(c.length);let u=0;for(let v=0;v<c.length;v++){const x=Q._measureText(c[v],r.letterSpacing,a);h[v]=x,u=Math.max(u,x)}const d=((y=r._stroke)==null?void 0:y.width)||0;let f=u+d;r.dropShadow&&(f+=r.dropShadow.distance);const p=r.lineHeight||o.fontSize;let m=Math.max(p,o.fontSize+d)+(c.length-1)*(p+r.leading);return r.dropShadow&&(m+=r.dropShadow.distance),new Q(e,r,f,m,c,h,p+r.leading,u,o)}static _measureText(e,r,n){let s=!1;Q.experimentalLetterSpacingSupported&&(Q.experimentalLetterSpacing?(n.letterSpacing=`${r}px`,n.textLetterSpacing=`${r}px`,s=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));const i=n.measureText(e);let o=i.width;const a=-i.actualBoundingBoxLeft;let c=i.actualBoundingBoxRight-a;if(o>0)if(s)o-=r,c-=r;else{const h=(Q.graphemeSegmenter(e).length-1)*r;o+=h,c+=h}return Math.max(o,c)}static _wordWrap(e,r,n=Q._canvas){const s=n.getContext("2d",tm);let i=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:h}=r,u=Q._collapseSpaces(h),d=Q._collapseNewlines(h);let f=!u;const p=r.wordWrapWidth+c,m=Q._tokenize(e);for(let g=0;g<m.length;g++){let y=m[g];if(Q._isNewline(y)){if(!d){a+=Q._addLine(o),f=!u,o="",i=0;continue}y=" "}if(u){const x=Q.isBreakingSpace(y),_=Q.isBreakingSpace(o[o.length-1]);if(x&&_)continue}const v=Q._getFromCache(y,c,l,s);if(v>p)if(o!==""&&(a+=Q._addLine(o),o="",i=0),Q.canBreakWords(y,r.breakWords)){const x=Q.wordWrapSplit(y);for(let _=0;_<x.length;_++){let b=x[_],A=b,S=1;for(;x[_+S];){const E=x[_+S];if(!Q.canBreakChars(A,E,y,_,r.breakWords))b+=E;else break;A=E,S++}_+=S-1;const T=Q._getFromCache(b,c,l,s);T+i>p&&(a+=Q._addLine(o),f=!1,o="",i=0),o+=b,i+=T}}else{o.length>0&&(a+=Q._addLine(o),o="",i=0);const x=g===m.length-1;a+=Q._addLine(y,!x),f=!1,o="",i=0}else v+i>p&&(f=!1,a+=Q._addLine(o),o="",i=0),(o.length>0||!Q.isBreakingSpace(y)||f)&&(o+=y,i+=v)}return a+=Q._addLine(o,!1),a}static _addLine(e,r=!0){return e=Q._trimRight(e),e=r?`${e}
`:e,e}static _getFromCache(e,r,n,s){let i=n[e];return typeof i!="number"&&(i=Q._measureText(e,r,s)+r,n[e]=i),i}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let r=e.length-1;r>=0;r--){const n=e[r];if(!Q.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:Q._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return typeof e!="string"?!1:Q._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const r=[];let n="";if(typeof e!="string")return r;for(let s=0;s<e.length;s++){const i=e[s],o=e[s+1];if(Q.isBreakingSpace(i,o)||Q._isNewline(i)){n!==""&&(r.push(n),n=""),i==="\r"&&o===`
`?(r.push(`\r
`),s++):r.push(i);continue}n+=i}return n!==""&&r.push(n),r}static canBreakWords(e,r){return r}static canBreakChars(e,r,n,s,i){return!0}static wordWrapSplit(e){return Q.graphemeSegmenter(e)}static measureFont(e){if(Q._fonts[e])return Q._fonts[e];const r=Q._context;r.font=e;const n=r.measureText(Q.METRICS_STRING+Q.BASELINE_SYMBOL),s={ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,fontSize:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};return Q._fonts[e]=s,s}static clearMetrics(e=""){e?delete Q._fonts[e]:Q._fonts={}}static get _canvas(){if(!Q.__canvas){let e;try{const r=new OffscreenCanvas(0,0),n=r.getContext("2d",tm);if(n!=null&&n.measureText)return Q.__canvas=r,r;e=Ve.get().createCanvas()}catch{e=Ve.get().createCanvas()}e.width=e.height=10,Q.__canvas=e}return Q.__canvas}static get _context(){return Q.__context||(Q.__context=Q._canvas.getContext("2d",tm)),Q.__context}};zn.METRICS_STRING="|ÉqÅ";zn.BASELINE_SYMBOL="M";zn.BASELINE_MULTIPLIER=1.4;zn.HEIGHT_MULTIPLIER=2;zn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>{const r=t.segment(e),n=[];let s=0;for(const i of r)n[s++]=i.segment;return n}}return t=>[...t]})();zn.experimentalLetterSpacing=!1;zn._fonts={};zn._newlines=[10,13];zn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Ah=zn;const cb=[{offset:0,color:"white"},{offset:1,color:"black"}],ov=class My{constructor(...e){this.uid=ut("fillGradient"),this.type="linear",this.colorStops=[];let r=j5(e);r={...r.type==="radial"?My.defaultRadialOptions:My.defaultLinearOptions,...KR(r)},this._textureSize=r.textureSize,this._wrapMode=r.wrapMode,r.type==="radial"?(this.center=r.center,this.outerCenter=r.outerCenter??this.center,this.innerRadius=r.innerRadius,this.outerRadius=r.outerRadius,this.scale=r.scale,this.rotation=r.rotation):(this.start=r.start,this.end=r.end),this.textureSpace=r.textureSpace,this.type=r.type,r.colorStops.forEach(s=>{this.addColorStop(s.offset,s.color)})}addColorStop(e,r){return this.colorStops.push({offset:e,color:gt.shared.setValue(r).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:r}=this.start,{x:n,y:s}=this.end,i=n-e,o=s-r;const a=i<0||o<0;if(this._wrapMode==="clamp-to-edge"){if(i<0){const g=e;e=n,n=g,i*=-1}if(o<0){const g=r;r=s,s=g,o*=-1}}const l=this.colorStops.length?this.colorStops:cb,c=this._textureSize,{canvas:h,context:u}=hb(c,1),d=a?u.createLinearGradient(this._textureSize,0,0,0):u.createLinearGradient(0,0,this._textureSize,0);ub(d,l),u.fillStyle=d,u.fillRect(0,0,c,1),this.texture=new ve({source:new ro({resource:h,addressMode:this._wrapMode})});const f=Math.sqrt(i*i+o*o),p=Math.atan2(o,i),m=new _e;m.scale(f/c,1),m.rotate(p),m.translate(e,r),this.textureSpace==="local"&&m.scale(c,c),this.transform=m}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:cb,r=this._textureSize,{canvas:n,context:s}=hb(r,r),{x:i,y:o}=this.center,{x:a,y:l}=this.outerCenter,c=this.innerRadius,h=this.outerRadius,u=a-h,d=l-h,f=r/(h*2),p=(i-u)*f,m=(o-d)*f,g=s.createRadialGradient(p,m,c*f,(a-u)*f,(l-d)*f,h*f);ub(g,e),s.fillStyle=e[e.length-1].color,s.fillRect(0,0,r,r),s.fillStyle=g,s.translate(p,m),s.rotate(this.rotation),s.scale(1,this.scale),s.translate(-p,-m),s.fillRect(0,0,r,r),this.texture=new ve({source:new ro({resource:n,addressMode:this._wrapMode})});const y=new _e;y.scale(1/f,1/f),y.translate(u,d),this.textureSpace==="local"&&y.scale(r,r),this.transform=y}get styleKey(){return this.uid}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}};ov.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};ov.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let ys=ov;function ub(t,e){for(let r=0;r<e.length;r++){const n=e[r];t.addColorStop(n.offset,n.color)}}function hb(t,e){const r=Ve.get().createCanvas(t,e),n=r.getContext("2d");return{canvas:r,context:n}}function j5(t){let e=t[0]??{};return(typeof e=="number"||t[1])&&(Ne("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??ys.defaultLinearOptions.textureSize}),e}const db={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Cf{constructor(e,r){this.uid=ut("fillPattern"),this.transform=new _e,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),r&&(e.source.style.addressModeU=db[r].addressModeU,e.source.style.addressModeV=db[r].addressModeV)}setTransform(e){const r=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/r.frame.width,1/r.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}destroy(){this.texture.destroy(!0),this.texture=null,this._styleKey=null}}var $5=z5,rm={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},G5=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function z5(t){var e=[];return t.replace(G5,function(r,n,s){var i=n.toLowerCase();for(s=W5(s),i=="m"&&s.length>2&&(e.push([n].concat(s.splice(0,2))),i="l",n=n=="m"?"l":"L");;){if(s.length==rm[i])return s.unshift(n),e.push(s);if(s.length<rm[i])throw new Error("malformed path data");e.push([n].concat(s.splice(0,rm[i])))}}),e}var H5=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function W5(t){var e=t.match(H5);return e?e.map(Number):[]}const X5=Fc($5);function Y5(t,e){const r=X5(t),n=[];let s=null,i=0,o=0;for(let a=0;a<r.length;a++){const l=r[a],c=l[0],h=l;switch(c){case"M":i=h[1],o=h[2],e.moveTo(i,o);break;case"m":i+=h[1],o+=h[2],e.moveTo(i,o);break;case"H":i=h[1],e.lineTo(i,o);break;case"h":i+=h[1],e.lineTo(i,o);break;case"V":o=h[1],e.lineTo(i,o);break;case"v":o+=h[1],e.lineTo(i,o);break;case"L":i=h[1],o=h[2],e.lineTo(i,o);break;case"l":i+=h[1],o+=h[2],e.lineTo(i,o);break;case"C":i=h[5],o=h[6],e.bezierCurveTo(h[1],h[2],h[3],h[4],i,o);break;case"c":e.bezierCurveTo(i+h[1],o+h[2],i+h[3],o+h[4],i+h[5],o+h[6]),i+=h[5],o+=h[6];break;case"S":i=h[3],o=h[4],e.bezierCurveToShort(h[1],h[2],i,o);break;case"s":e.bezierCurveToShort(i+h[1],o+h[2],i+h[3],o+h[4]),i+=h[3],o+=h[4];break;case"Q":i=h[3],o=h[4],e.quadraticCurveTo(h[1],h[2],i,o);break;case"q":e.quadraticCurveTo(i+h[1],o+h[2],i+h[3],o+h[4]),i+=h[3],o+=h[4];break;case"T":i=h[1],o=h[2],e.quadraticCurveToShort(i,o);break;case"t":i+=h[1],o+=h[2],e.quadraticCurveToShort(i,o);break;case"A":i=h[6],o=h[7],e.arcToSvg(h[1],h[2],h[3],h[4],h[5],i,o);break;case"a":i+=h[6],o+=h[7],e.arcToSvg(h[1],h[2],h[3],h[4],h[5],i,o);break;case"Z":case"z":e.closePath(),n.length>0&&(s=n.pop(),s?(i=s.startX,o=s.startY):(i=0,o=0)),s=null;break;default:Le(`Unknown SVG path command: ${c}`)}c!=="Z"&&c!=="z"&&s===null&&(s={startX:i,startY:o},n.push(s))}return e}let q5=class KP{constructor(e=0,r=0,n=0){this.type="circle",this.x=e,this.y=r,this.radius=n}clone(){return new KP(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let s=this.x-e,i=this.y-r;return s*=s,i*=i,s+i<=n}strokeContains(e,r,n,s=.5){if(this.radius===0)return!1;const i=this.x-e,o=this.y-r,a=this.radius,l=(1-s)*n,c=Math.sqrt(i*i+o*o);return c<=a+l&&c>a-(n-l)}getBounds(e){return e||(e=new Ft),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}},K5=class ZP{constructor(e=0,r=0,n=0,s=0){this.type="ellipse",this.x=e,this.y=r,this.halfWidth=n,this.halfHeight=s}clone(){return new ZP(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,r){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let n=(e-this.x)/this.halfWidth,s=(r-this.y)/this.halfHeight;return n*=n,s*=s,n+s<=1}strokeContains(e,r,n,s=.5){const{halfWidth:i,halfHeight:o}=this;if(i<=0||o<=0)return!1;const a=n*(1-s),l=n-a,c=i-l,h=o-l,u=i+a,d=o+a,f=e-this.x,p=r-this.y,m=f*f/(c*c)+p*p/(h*h),g=f*f/(u*u)+p*p/(d*d);return m>1&&g<=1}getBounds(e){return e||(e=new Ft),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}};function Z5(t,e,r,n,s,i){const o=t-r,a=e-n,l=s-r,c=i-n,h=o*l+a*c,u=l*l+c*c;let d=-1;u!==0&&(d=h/u);let f,p;d<0?(f=r,p=n):d>1?(f=s,p=i):(f=r+d*l,p=n+d*c);const m=t-f,g=e-p;return m*m+g*g}let Q5,J5,nm=class QP{constructor(...e){this.type="polygon";let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const n=[];for(let s=0,i=r.length;s<i;s++)n.push(r[s].x,r[s].y);r=n}this.points=r,this.closePath=!0}isClockwise(){let e=0;const r=this.points,n=r.length;for(let s=0;s<n;s+=2){const i=r[s],o=r[s+1],a=r[(s+2)%n],l=r[(s+3)%n];e+=(a-i)*(l+o)}return e<0}containsPolygon(e){const r=this.getBounds(Q5),n=e.getBounds(J5);if(!r.containsRect(n))return!1;const s=e.points;for(let i=0;i<s.length;i+=2){const o=s[i],a=s[i+1];if(!this.contains(o,a))return!1}return!0}clone(){const e=this.points.slice(),r=new QP(e);return r.closePath=this.closePath,r}contains(e,r){let n=!1;const s=this.points.length/2;for(let i=0,o=s-1;i<s;o=i++){const a=this.points[i*2],l=this.points[i*2+1],c=this.points[o*2],h=this.points[o*2+1];l>r!=h>r&&e<(c-a)*((r-l)/(h-l))+a&&(n=!n)}return n}strokeContains(e,r,n,s=.5){const i=n*n,o=i*(1-s),a=i-o,{points:l}=this,c=l.length-(this.closePath?0:2);for(let h=0;h<c;h+=2){const u=l[h],d=l[h+1],f=l[(h+2)%l.length],p=l[(h+3)%l.length],m=Z5(e,r,u,d,f,p),g=Math.sign((f-u)*(r-d)-(p-d)*(e-u));if(m<=(g<0?a:o))return!0}return!1}getBounds(e){e||(e=new Ft);const r=this.points;let n=1/0,s=-1/0,i=1/0,o=-1/0;for(let a=0,l=r.length;a<l;a+=2){const c=r[a],h=r[a+1];n=c<n?c:n,s=c>s?c:s,i=h<i?h:i,o=h>o?h:o}return e.x=n,e.width=s-n,e.y=i,e.height=o-i,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,r)=>`${e}, ${r}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Ne("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Ne("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}};const Ou=(t,e,r,n,s,i,o)=>{const a=t-r,l=e-n,c=Math.sqrt(a*a+l*l);return c>=s-i&&c<=s+o};let e$=class JP{constructor(e=0,r=0,n=0,s=0,i=20){this.type="roundedRectangle",this.x=e,this.y=r,this.width=n,this.height=s,this.radius=i}getBounds(e){return e||(e=new Ft),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new JP(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let s=e-(this.x+n),i=r-(this.y+n);const o=n*n;if(s*s+i*i<=o||(s=e-(this.x+this.width-n),s*s+i*i<=o)||(i=r-(this.y+this.height-n),s*s+i*i<=o)||(s=e-(this.x+n),s*s+i*i<=o))return!0}return!1}strokeContains(e,r,n,s=.5){const{x:i,y:o,width:a,height:l,radius:c}=this,h=n*(1-s),u=n-h,d=i+c,f=o+c,p=a-c*2,m=l-c*2,g=i+a,y=o+l;return(e>=i-h&&e<=i+u||e>=g-u&&e<=g+h)&&r>=f&&r<=f+m||(r>=o-h&&r<=o+u||r>=y-u&&r<=y+h)&&e>=d&&e<=d+p?!0:e<d&&r<f&&Ou(e,r,d,f,c,u,h)||e>g-c&&r<f&&Ou(e,r,g-c,f,c,u,h)||e>g-c&&r>y-c&&Ou(e,r,g-c,y-c,c,u,h)||e<d&&r>y-c&&Ou(e,r,d,y-c,c,u,h)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}};const eM={};function t$(t,e,r){let n=2166136261;for(let s=0;s<e;s++)n^=t[s].uid,n=Math.imul(n,16777619),n>>>=0;return eM[n]||r$(t,e,n,r)}function r$(t,e,r,n){const s={};let i=0;for(let a=0;a<n;a++){const l=a<e?t[a]:ve.EMPTY.source;s[i++]=l.source,s[i++]=l.style}const o=new bh(s);return eM[r]=o,o}let fb=class{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}};function pb(t,e){const r=t.byteLength/8|0,n=new Float64Array(t,0,r);new Float64Array(e,0,r).set(n);const i=t.byteLength-r*8;if(i>0){const o=new Uint8Array(t,r*8,i);new Uint8Array(e,r*8,i).set(o)}}const n$={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var s$=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(s$||{});function mb(t,e){return e.alphaMode==="no-premultiply-alpha"&&n$[t]||t}const i$=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function o$(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function a$(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const n=i$.replace(/%forloop%/gi,o$(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}}finally{e.deleteShader(r)}return t}let bo=null;function l$(){var e;if(bo)return bo;const t=PP();return bo=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),bo=a$(bo,t),(e=t.getExtension("WEBGL_lose_context"))==null||e.loseContext(),bo}let c$=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const r=this.textures[e];this.textures[e]=null,this.ids[r.uid]=null}this.count=0}};class u${constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new c$,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const tM=[];let Iy=0;function gb(){return Iy>0?tM[--Iy]:new u$}function yb(t){tM[Iy++]=t}let cl=0;const rM=class nM{constructor(e){this.uid=ut("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...nM.defaultOptions,...e},e.maxTextures||(Ne("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=l$());const{maxTextures:r,attributesInitialSize:n,indicesInitialSize:s}=e;this.attributeBuffer=new fb(n*4),this.indexBuffer=new Uint16Array(s),this.maxTextures=r}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)yb(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,r){const n=e._batch.textures.ids[r._source.uid];return!n&&n!==0?!1:(e._textureId=n,e.texture=r,!0)}updateElement(e){this.dirty=!0;const r=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,r.float32View,r.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,r.float32View,r.uint32View,e._attributeStart,e._textureId)}break(e){const r=this._elements;if(!r[this.elementStart])return;let n=gb(),s=n.textures;s.clear();const i=r[this.elementStart];let o=mb(i.blendMode,i.texture._source),a=i.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const l=this.attributeBuffer.float32View,c=this.attributeBuffer.uint32View,h=this.indexBuffer;let u=this._batchIndexSize,d=this._batchIndexStart,f="startBatch";const p=this.maxTextures;for(let m=this.elementStart;m<this.elementSize;++m){const g=r[m];r[m]=null;const v=g.texture._source,x=mb(g.blendMode,v),_=o!==x||a!==g.topology;if(v._batchTick===cl&&!_){g._textureId=v._textureBindLocation,u+=g.indexSize,g.packAsQuad?(this.packQuadAttributes(g,l,c,g._attributeStart,g._textureId),this.packQuadIndex(h,g._indexStart,g._attributeStart/this.vertexSize)):(this.packAttributes(g,l,c,g._attributeStart,g._textureId),this.packIndex(g,h,g._indexStart,g._attributeStart/this.vertexSize)),g._batch=n;continue}v._batchTick=cl,(s.count>=p||_)&&(this._finishBatch(n,d,u-d,s,o,a,e,f),f="renderBatch",d=u,o=x,a=g.topology,n=gb(),s=n.textures,s.clear(),++cl),g._textureId=v._textureBindLocation=s.count,s.ids[v.uid]=s.count,s.textures[s.count++]=v,g._batch=n,u+=g.indexSize,g.packAsQuad?(this.packQuadAttributes(g,l,c,g._attributeStart,g._textureId),this.packQuadIndex(h,g._indexStart,g._attributeStart/this.vertexSize)):(this.packAttributes(g,l,c,g._attributeStart,g._textureId),this.packIndex(g,h,g._indexStart,g._attributeStart/this.vertexSize))}s.count>0&&(this._finishBatch(n,d,u-d,s,o,a,e,f),d=u,++cl),this.elementStart=this.elementSize,this._batchIndexStart=d,this._batchIndexSize=u}_finishBatch(e,r,n,s,i,o,a,l){e.gpuBindGroup=null,e.bindGroup=null,e.action=l,e.batcher=this,e.textures=s,e.blendMode=i,e.topology=o,e.start=r,e.size=n,++cl,this.batches[this.batchIndex++]=e,a.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const r=Math.max(e,this.attributeBuffer.size*2),n=new fb(r);pb(this.attributeBuffer.rawBinaryData,n.rawBinaryData),this.attributeBuffer=n}_resizeIndexBuffer(e){const r=this.indexBuffer;let n=Math.max(e,r.length*1.5);n+=n%2;const s=n>65535?new Uint32Array(n):new Uint16Array(n);if(s.BYTES_PER_ELEMENT!==r.BYTES_PER_ELEMENT)for(let i=0;i<r.length;i++)s[i]=r[i];else pb(r.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(e,r,n){e[r]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3}packIndex(e,r,n,s){const i=e.indices,o=e.indexSize,a=e.indexOffset,l=e.attributeOffset;for(let c=0;c<o;c++)r[n++]=s+i[c+a]-l}destroy(){for(let e=0;e<this.batches.length;e++)yb(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};rM.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let h$=rM;var ar=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(ar||{});let Sc=class extends vn{constructor(e){let{data:r,size:n}=e;const{usage:s,label:i,shrinkToFit:o}=e;super(),this.uid=ut("buffer"),this._resourceType="buffer",this._resourceId=ut("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,r instanceof Array&&(r=new Float32Array(r)),this._data=r,n??(n=r==null?void 0:r.byteLength);const a=!!r;this.descriptor={size:n,usage:s,mappedAtCreation:a,label:i},this.shrinkToFit=o??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&ar.STATIC)}set static(e){e?this.descriptor.usage|=ar.STATIC:this.descriptor.usage&=~ar.STATIC}setDataWithSize(e,r,n){if(this._updateID++,this._updateSize=r*e.BYTES_PER_ELEMENT,this._data===e){n&&this.emit("update",this);return}const s=this._data;if(this._data=e,this._dataInt32=null,!s||s.length!==e.length){!this.shrinkToFit&&s&&e.byteLength<s.byteLength?n&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=ut("resource"),this.emit("change",this));return}n&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function sM(t,e){if(!(t instanceof Sc)){let r=e?ar.INDEX:ar.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),r=ar.INDEX|ar.COPY_DST):(t=new Float32Array(t),r=ar.VERTEX|ar.COPY_DST)),t=new Sc({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:r})}return t}function d$(t,e,r){const n=t.getAttribute(e);if(!n)return r.minX=0,r.minY=0,r.maxX=0,r.maxY=0,r;const s=n.buffer.data;let i=1/0,o=1/0,a=-1/0,l=-1/0;const c=s.BYTES_PER_ELEMENT,h=(n.offset||0)/c,u=(n.stride||2*4)/c;for(let d=h;d<s.length;d+=u){const f=s[d],p=s[d+1];f>a&&(a=f),p>l&&(l=p),f<i&&(i=f),p<o&&(o=p)}return r.minX=i,r.minY=o,r.maxX=a,r.maxY=l,r}function f$(t){return(t instanceof Sc||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=sM(t.buffer,!1),t}let p$=class extends vn{constructor(e={}){super(),this.uid=ut("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new gs,this._boundsDirty=!0;const{attributes:r,indexBuffer:n,topology:s}=e;if(this.buffers=[],this.attributes={},r)for(const i in r)this.addAttribute(i,r[i]);this.instanceCount=e.instanceCount??1,n&&this.addIndex(n),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const r=this.attributes[e];return r.buffer.data.length/(r.stride/4||r.size)}return 0}addAttribute(e,r){const n=f$(r);this.buffers.indexOf(n.buffer)===-1&&(this.buffers.push(n.buffer),n.buffer.on("update",this.onBufferUpdate,this),n.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=n}addIndex(e){this.indexBuffer=sM(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,d$(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(r=>r.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}};const m$=new Float32Array(1),g$=new Uint32Array(1);let y$=class extends p${constructor(){const r=new Sc({data:m$,label:"attribute-batch-buffer",usage:ar.VERTEX|ar.COPY_DST,shrinkToFit:!1}),n=new Sc({data:g$,label:"index-batch-buffer",usage:ar.INDEX|ar.COPY_DST,shrinkToFit:!1}),s=6*4;super({attributes:{aPosition:{buffer:r,format:"float32x2",stride:s,offset:0},aUV:{buffer:r,format:"float32x2",stride:s,offset:2*4},aColor:{buffer:r,format:"unorm8x4",stride:s,offset:4*4},aTextureIdAndRound:{buffer:r,format:"uint16x2",stride:s,offset:5*4}},indexBuffer:n})}};function xb(t,e,r){if(t)for(const n in t){const s=n.toLocaleLowerCase(),i=e[s];if(i){let o=t[n];n==="header"&&(o=o.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),r&&i.push(`//----${r}----//`),i.push(o)}else Le(`${n} placement hook does not exist in shader`)}}const x$=/\{\{(.*?)\}\}/g;function vb(t){var n;const e={};return(((n=t.match(x$))==null?void 0:n.map(s=>s.replace(/[{()}]/g,"")))??[]).forEach(s=>{e[s]=[]}),e}function _b(t,e){let r;const n=/@in\s+([^;]+);/g;for(;(r=n.exec(t))!==null;)e.push(r[1])}function wb(t,e,r=!1){const n=[];_b(e,n),t.forEach(a=>{a.header&&_b(a.header,n)});const s=n;r&&s.sort();const i=s.map((a,l)=>`       @location(${l}) ${a},`).join(`
`);let o=e.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`
${i}
`),o}function bb(t,e){let r;const n=/@out\s+([^;]+);/g;for(;(r=n.exec(t))!==null;)e.push(r[1])}function v$(t){const r=/\b(\w+)\s*:/g.exec(t);return r?r[1]:""}function _$(t){const e=/@.*?\s+/g;return t.replace(e,"")}function w$(t,e){const r=[];bb(e,r),t.forEach(l=>{l.header&&bb(l.header,r)});let n=0;const s=r.sort().map(l=>l.indexOf("builtin")>-1?l:`@location(${n++}) ${l}`).join(`,
`),i=r.sort().map(l=>`       var ${_$(l)};`).join(`
`),o=`return VSOutput(
            ${r.sort().map(l=>` ${v$(l)}`).join(`,
`)});`;let a=e.replace(/@out\s+[^;]+;\s*/g,"");return a=a.replace("{{struct}}",`
${s}
`),a=a.replace("{{start}}",`
${i}
`),a=a.replace("{{return}}",`
${o}
`),a}function Ab(t,e){let r=t;for(const n in e){const s=e[n];s.join(`
`).length?r=r.replace(`{{${n}}}`,`//-----${n} START-----//
${s.join(`
`)}
//----${n} FINISH----//`):r=r.replace(`{{${n}}}`,"")}return r}const Bs=Object.create(null),sm=new Map;let b$=0;function A$({template:t,bits:e}){const r=iM(t,e);if(Bs[r])return Bs[r];const{vertex:n,fragment:s}=T$(t,e);return Bs[r]=oM(n,s,e),Bs[r]}function S$({template:t,bits:e}){const r=iM(t,e);return Bs[r]||(Bs[r]=oM(t.vertex,t.fragment,e)),Bs[r]}function T$(t,e){const r=e.map(o=>o.vertex).filter(o=>!!o),n=e.map(o=>o.fragment).filter(o=>!!o);let s=wb(r,t.vertex,!0);s=w$(r,s);const i=wb(n,t.fragment,!0);return{vertex:s,fragment:i}}function iM(t,e){return e.map(r=>(sm.has(r)||sm.set(r,b$++),sm.get(r))).sort((r,n)=>r-n).join("-")+t.vertex+t.fragment}function oM(t,e,r){const n=vb(t),s=vb(e);return r.forEach(i=>{xb(i.vertex,n,i.name),xb(i.fragment,s,i.name)}),{vertex:Ab(t,n),fragment:Ab(e,s)}}const E$=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,C$=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,R$=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,P$=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,M$={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},I$={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function k$({bits:t,name:e}){const r=A$({template:{fragment:C$,vertex:E$},bits:[M$,...t]});return Ef.from({name:e,vertex:{source:r.vertex,entryPoint:"main"},fragment:{source:r.fragment,entryPoint:"main"}})}function N$({bits:t,name:e}){return new IP({name:e,...S$({template:{vertex:R$,fragment:P$},bits:[I$,...t]})})}const F$={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},L$={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},im={};function O$(t){const e=[];if(t===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let r=0;for(let n=0;n<t;n++)e.push(`@group(1) @binding(${r++}) var textureSource${n+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${r++}) var textureSampler${n+1}: sampler;`)}return e.join(`
`)}function B$(t){const e=[];if(t===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let r=0;r<t;r++)r===t-1?e.push("  default:{"):e.push(`  case ${r}:{`),e.push(`      outColor = textureSampleGrad(textureSource${r+1}, textureSampler${r+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function D$(t){return im[t]||(im[t]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${O$(t)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${B$(t)}
            `}}),im[t]}const om={};function U$(t){const e=[];for(let r=0;r<t;r++)r>0&&e.push("else"),r<t-1&&e.push(`if(vTextureId < ${r}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${r}], vUV);`),e.push("}");return e.join(`
`)}function V$(t){return om[t]||(om[t]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${t}];

            `,main:`

                ${U$(t)}
            `}}),om[t]}const j$={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},$$={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Sb={};function G$(t){let e=Sb[t];if(e)return e;const r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=n;return e=Sb[t]=new LP({uTextures:{value:r,type:"i32",size:t}},{isStatic:!0}),e}class z$ extends p5{constructor(e){const r=N$({name:"batch",bits:[L$,V$(e),$$]}),n=k$({name:"batch",bits:[F$,D$(e),j$]});super({glProgram:r,gpuProgram:n,resources:{batchSamplers:G$(e)}})}}let am=null;const aM=class lM extends h${constructor(e){super(e),this.geometry=new y$,this.name=lM.extension.name,this.vertexSize=6,am??(am=new z$(e.maxTextures)),this.shader=am}packAttributes(e,r,n,s,i){const o=i<<16|e.roundPixels&65535,a=e.transform,l=a.a,c=a.b,h=a.c,u=a.d,d=a.tx,f=a.ty,{positions:p,uvs:m}=e,g=e.color,y=e.attributeOffset,v=y+e.attributeSize;for(let x=y;x<v;x++){const _=x*2,b=p[_],A=p[_+1];r[s++]=l*b+h*A+d,r[s++]=u*A+c*b+f,r[s++]=m[_],r[s++]=m[_+1],n[s++]=g,n[s++]=o}}packQuadAttributes(e,r,n,s,i){const o=e.texture,a=e.transform,l=a.a,c=a.b,h=a.c,u=a.d,d=a.tx,f=a.ty,p=e.bounds,m=p.maxX,g=p.minX,y=p.maxY,v=p.minY,x=o.uvs,_=e.color,b=i<<16|e.roundPixels&65535;r[s+0]=l*g+h*v+d,r[s+1]=u*v+c*g+f,r[s+2]=x.x0,r[s+3]=x.y0,n[s+4]=_,n[s+5]=b,r[s+6]=l*m+h*v+d,r[s+7]=u*v+c*m+f,r[s+8]=x.x1,r[s+9]=x.y1,n[s+10]=_,n[s+11]=b,r[s+12]=l*m+h*y+d,r[s+13]=u*y+c*m+f,r[s+14]=x.x2,r[s+15]=x.y2,n[s+16]=_,n[s+17]=b,r[s+18]=l*g+h*y+d,r[s+19]=u*y+c*g+f,r[s+20]=x.x3,r[s+21]=x.y3,n[s+22]=_,n[s+23]=b}};aM.extension={type:[ee.Batcher],name:"default"};let H$=aM;function W$(t,e,r,n,s,i,o,a=null){let l=0;r*=e,s*=i;const c=a.a,h=a.b,u=a.c,d=a.d,f=a.tx,p=a.ty;for(;l<o;){const m=t[r],g=t[r+1];n[s]=c*m+u*g+f,n[s+1]=h*m+d*g+p,s+=i,r+=e,l++}}function X$(t,e,r,n){let s=0;for(e*=r;s<n;)t[e]=0,t[e+1]=0,e+=r,s++}function cM(t,e,r,n,s){const i=e.a,o=e.b,a=e.c,l=e.d,c=e.tx,h=e.ty;r||(r=0),n||(n=2),s||(s=t.length/n-r);let u=r*n;for(let d=0;d<s;d++){const f=t[u],p=t[u+1];t[u]=i*f+a*p+c,t[u+1]=o*f+l*p+h,u+=n}}const Y$=new _e;class uM{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,r=e>>16|e&65280|(e&255)<<16,n=this.renderable;return n?cP(r,n.groupColor)+(this.alpha*n.groupAlpha*255<<24):r+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||Y$}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Tc={extension:{type:ee.ShapeBuilder,name:"circle"},build(t,e){let r,n,s,i,o,a;if(t.type==="circle"){const _=t;if(o=a=_.radius,o<=0)return!1;r=_.x,n=_.y,s=i=0}else if(t.type==="ellipse"){const _=t;if(o=_.halfWidth,a=_.halfHeight,o<=0||a<=0)return!1;r=_.x,n=_.y,s=i=0}else{const _=t,b=_.width/2,A=_.height/2;r=_.x+b,n=_.y+A,o=a=Math.max(0,Math.min(_.radius,Math.min(b,A))),s=b-o,i=A-a}if(s<0||i<0)return!1;const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(s?4:0)+(i?4:0);if(c===0)return!1;if(l===0)return e[0]=e[6]=r+s,e[1]=e[3]=n+i,e[2]=e[4]=r-s,e[5]=e[7]=n-i,!0;let h=0,u=l*4+(s?2:0)+2,d=u,f=c,p=s+o,m=i,g=r+p,y=r-p,v=n+m;if(e[h++]=g,e[h++]=v,e[--u]=v,e[--u]=y,i){const _=n-m;e[d++]=y,e[d++]=_,e[--f]=_,e[--f]=g}for(let _=1;_<l;_++){const b=Math.PI/2*(_/l),A=s+Math.cos(b)*o,S=i+Math.sin(b)*a,T=r+A,E=r-A,R=n+S,P=n-S;e[h++]=T,e[h++]=R,e[--u]=R,e[--u]=E,e[d++]=E,e[d++]=P,e[--f]=P,e[--f]=T}p=s,m=i+a,g=r+p,y=r-p,v=n+m;const x=n-m;return e[h++]=g,e[h++]=v,e[--f]=x,e[--f]=g,s&&(e[h++]=y,e[h++]=v,e[--f]=x,e[--f]=y),!0},triangulate(t,e,r,n,s,i){if(t.length===0)return;let o=0,a=0;for(let h=0;h<t.length;h+=2)o+=t[h],a+=t[h+1];o/=t.length/2,a/=t.length/2;let l=n;e[l*r]=o,e[l*r+1]=a;const c=l++;for(let h=0;h<t.length;h+=2)e[l*r]=t[h],e[l*r+1]=t[h+1],h>0&&(s[i++]=l,s[i++]=c,s[i++]=l-1),l++;s[i++]=c+1,s[i++]=c,s[i++]=l-1}},q$={...Tc,extension:{...Tc.extension,name:"ellipse"}},K$={...Tc,extension:{...Tc.extension,name:"roundedRectangle"}},hM=1e-4,Tb=1e-4;function Z$(t){const e=t.length;if(e<6)return 1;let r=0;for(let n=0,s=t[e-2],i=t[e-1];n<e;n+=2){const o=t[n],a=t[n+1];r+=(o-s)*(a+i),s=o,i=a}return r<0?-1:1}function Eb(t,e,r,n,s,i,o,a){const l=t-r*s,c=e-n*s,h=t+r*i,u=e+n*i;let d,f;o?(d=n,f=-r):(d=-n,f=r);const p=l+d,m=c+f,g=h+d,y=u+f;return a.push(p,m),a.push(g,y),2}function pi(t,e,r,n,s,i,o,a){const l=r-t,c=n-e;let h=Math.atan2(l,c),u=Math.atan2(s-t,i-e);a&&h<u?h+=Math.PI*2:!a&&h>u&&(u+=Math.PI*2);let d=h;const f=u-h,p=Math.abs(f),m=Math.sqrt(l*l+c*c),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,y=f/g;if(d+=y,a){o.push(t,e),o.push(r,n);for(let v=1,x=d;v<g;v++,x+=y)o.push(t,e),o.push(t+Math.sin(x)*m,e+Math.cos(x)*m);o.push(t,e),o.push(s,i)}else{o.push(r,n),o.push(t,e);for(let v=1,x=d;v<g;v++,x+=y)o.push(t+Math.sin(x)*m,e+Math.cos(x)*m),o.push(t,e);o.push(s,i),o.push(t,e)}return g*2}function Q$(t,e,r,n,s,i){const o=hM;if(t.length===0)return;const a=e;let l=a.alignment;if(e.alignment!==.5){let O=Z$(t);r&&(O*=-1),l=(l-.5)*O+.5}const c=new hr(t[0],t[1]),h=new hr(t[t.length-2],t[t.length-1]),u=n,d=Math.abs(c.x-h.x)<o&&Math.abs(c.y-h.y)<o;if(u){t=t.slice(),d&&(t.pop(),t.pop(),h.set(t[t.length-2],t[t.length-1]));const O=(c.x+h.x)*.5,I=(h.y+c.y)*.5;t.unshift(O,I),t.push(O,I)}const f=s,p=t.length/2;let m=t.length;const g=f.length/2,y=a.width/2,v=y*y,x=a.miterLimit*a.miterLimit;let _=t[0],b=t[1],A=t[2],S=t[3],T=0,E=0,R=-(b-S),P=_-A,D=0,k=0,M=Math.sqrt(R*R+P*P);R/=M,P/=M,R*=y,P*=y;const G=l,B=(1-G)*2,U=G*2;u||(a.cap==="round"?m+=pi(_-R*(B-U)*.5,b-P*(B-U)*.5,_-R*B,b-P*B,_+R*U,b+P*U,f,!0)+2:a.cap==="square"&&(m+=Eb(_,b,R,P,B,U,!0,f))),f.push(_-R*B,b-P*B),f.push(_+R*U,b+P*U);for(let O=1;O<p-1;++O){_=t[(O-1)*2],b=t[(O-1)*2+1],A=t[O*2],S=t[O*2+1],T=t[(O+1)*2],E=t[(O+1)*2+1],R=-(b-S),P=_-A,M=Math.sqrt(R*R+P*P),R/=M,P/=M,R*=y,P*=y,D=-(S-E),k=A-T,M=Math.sqrt(D*D+k*k),D/=M,k/=M,D*=y,k*=y;const I=A-_,L=b-S,z=A-T,X=E-S,H=I*z+L*X,oe=L*z-X*I,te=oe<0;if(Math.abs(oe)<.001*Math.abs(H)){f.push(A-R*B,S-P*B),f.push(A+R*U,S+P*U),H>=0&&(a.join==="round"?m+=pi(A,S,A-R*B,S-P*B,A-D*B,S-k*B,f,!1)+4:m+=2,f.push(A-D*U,S-k*U),f.push(A+D*B,S+k*B));continue}const ie=(-R+_)*(-P+S)-(-R+A)*(-P+b),Re=(-D+T)*(-k+S)-(-D+A)*(-k+E),Se=(I*Re-z*ie)/oe,Te=(X*ie-L*Re)/oe,ue=(Se-A)*(Se-A)+(Te-S)*(Te-S),Ee=A+(Se-A)*B,Ce=S+(Te-S)*B,Je=A-(Se-A)*U,at=S-(Te-S)*U,wn=Math.min(I*I+L*L,z*z+X*X),Hn=te?B:U,bn=wn+Hn*Hn*v;ue<=bn?a.join==="bevel"||ue/v>x?(te?(f.push(Ee,Ce),f.push(A+R*U,S+P*U),f.push(Ee,Ce),f.push(A+D*U,S+k*U)):(f.push(A-R*B,S-P*B),f.push(Je,at),f.push(A-D*B,S-k*B),f.push(Je,at)),m+=2):a.join==="round"?te?(f.push(Ee,Ce),f.push(A+R*U,S+P*U),m+=pi(A,S,A+R*U,S+P*U,A+D*U,S+k*U,f,!0)+4,f.push(Ee,Ce),f.push(A+D*U,S+k*U)):(f.push(A-R*B,S-P*B),f.push(Je,at),m+=pi(A,S,A-R*B,S-P*B,A-D*B,S-k*B,f,!1)+4,f.push(A-D*B,S-k*B),f.push(Je,at)):(f.push(Ee,Ce),f.push(Je,at)):(f.push(A-R*B,S-P*B),f.push(A+R*U,S+P*U),a.join==="round"?te?m+=pi(A,S,A+R*U,S+P*U,A+D*U,S+k*U,f,!0)+2:m+=pi(A,S,A-R*B,S-P*B,A-D*B,S-k*B,f,!1)+2:a.join==="miter"&&ue/v<=x&&(te?(f.push(Je,at),f.push(Je,at)):(f.push(Ee,Ce),f.push(Ee,Ce)),m+=2),f.push(A-D*B,S-k*B),f.push(A+D*U,S+k*U),m+=2)}_=t[(p-2)*2],b=t[(p-2)*2+1],A=t[(p-1)*2],S=t[(p-1)*2+1],R=-(b-S),P=_-A,M=Math.sqrt(R*R+P*P),R/=M,P/=M,R*=y,P*=y,f.push(A-R*B,S-P*B),f.push(A+R*U,S+P*U),u||(a.cap==="round"?m+=pi(A-R*(B-U)*.5,S-P*(B-U)*.5,A-R*B,S-P*B,A+R*U,S+P*U,f,!1)+2:a.cap==="square"&&(m+=Eb(A,S,R,P,B,U,!1,f)));const F=Tb*Tb;for(let O=g;O<m+g-2;++O)_=f[O*2],b=f[O*2+1],A=f[(O+1)*2],S=f[(O+1)*2+1],T=f[(O+2)*2],E=f[(O+2)*2+1],!(Math.abs(_*(S-E)+A*(E-b)+T*(b-S))<F)&&i.push(O,O+1,O+2)}function J$(t,e,r,n){const s=hM;if(t.length===0)return;const i=t[0],o=t[1],a=t[t.length-2],l=t[t.length-1],c=e||Math.abs(i-a)<s&&Math.abs(o-l)<s,h=r,u=t.length/2,d=h.length/2;for(let f=0;f<u;f++)h.push(t[f*2]),h.push(t[f*2+1]);for(let f=0;f<u-1;f++)n.push(d+f,d+f+1);c&&n.push(d+u-1,d)}function dM(t,e,r,n,s,i,o){const a=N5(t,e,2);if(!a)return;for(let c=0;c<a.length;c+=3)i[o++]=a[c]+s,i[o++]=a[c+1]+s,i[o++]=a[c+2]+s;let l=s*n;for(let c=0;c<t.length;c+=2)r[l]=t[c],r[l+1]=t[c+1],l+=n}const e6=[],t6={extension:{type:ee.ShapeBuilder,name:"polygon"},build(t,e){for(let r=0;r<t.points.length;r++)e[r]=t.points[r];return!0},triangulate(t,e,r,n,s,i){dM(t,e6,e,r,n,s,i)}},r6={extension:{type:ee.ShapeBuilder,name:"rectangle"},build(t,e){const r=t,n=r.x,s=r.y,i=r.width,o=r.height;return i>0&&o>0?(e[0]=n,e[1]=s,e[2]=n+i,e[3]=s,e[4]=n+i,e[5]=s+o,e[6]=n,e[7]=s+o,!0):!1},triangulate(t,e,r,n,s,i){let o=0;n*=r,e[n+o]=t[0],e[n+o+1]=t[1],o+=r,e[n+o]=t[2],e[n+o+1]=t[3],o+=r,e[n+o]=t[6],e[n+o+1]=t[7],o+=r,e[n+o]=t[4],e[n+o+1]=t[5],o+=r;const a=n/r;s[i++]=a,s[i++]=a+1,s[i++]=a+2,s[i++]=a+1,s[i++]=a+3,s[i++]=a+2}},n6={extension:{type:ee.ShapeBuilder,name:"triangle"},build(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,!0},triangulate(t,e,r,n,s,i){let o=0;n*=r,e[n+o]=t[0],e[n+o+1]=t[1],o+=r,e[n+o]=t[2],e[n+o+1]=t[3],o+=r,e[n+o]=t[4],e[n+o+1]=t[5];const a=n/r;s[i++]=a,s[i++]=a+1,s[i++]=a+2}},s6=new _e,i6=new Ft;function o6(t,e,r,n){const s=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if(e.textureSpace==="local"){const o=r.getBounds(i6);e.width&&o.pad(e.width);const{x:a,y:l}=o,c=1/o.width,h=1/o.height,u=-a*c,d=-l*h,f=s.a,p=s.b,m=s.c,g=s.d;s.a*=c,s.b*=c,s.c*=h,s.d*=h,s.tx=u*f+d*m+s.tx,s.ty=u*p+d*g+s.ty}else s.translate(e.texture.frame.x,e.texture.frame.y),s.scale(1/e.texture.source.width,1/e.texture.source.height);const i=e.texture.source.style;return!(e.fill instanceof ys)&&i.addressMode==="clamp-to-edge"&&(i.addressMode="repeat",i.update()),n&&s.append(s6.copyFrom(n).invert()),s}const Rf={};Bt.handleByMap(ee.ShapeBuilder,Rf);Bt.add(r6,t6,n6,Tc,q$,K$);const a6=new Ft,l6=new _e;function c6(t,e){const{geometryData:r,batches:n}=e;n.length=0,r.indices.length=0,r.vertices.length=0,r.uvs.length=0;for(let s=0;s<t.instructions.length;s++){const i=t.instructions[s];if(i.action==="texture")u6(i.data,n,r);else if(i.action==="fill"||i.action==="stroke"){const o=i.action==="stroke",a=i.data.path.shapePath,l=i.data.style,c=i.data.hole;o&&c&&Cb(c.shapePath,l,!0,n,r),c&&(a.shapePrimitives[a.shapePrimitives.length-1].holes=c.shapePath.shapePrimitives),Cb(a,l,o,n,r)}}}function u6(t,e,r){const n=[],s=Rf.rectangle,i=a6;i.x=t.dx,i.y=t.dy,i.width=t.dw,i.height=t.dh;const o=t.transform;if(!s.build(i,n))return;const{vertices:a,uvs:l,indices:c}=r,h=c.length,u=a.length/2;o&&cM(n,o),s.triangulate(n,a,2,u,c,h);const d=t.image,f=d.uvs;l.push(f.x0,f.y0,f.x1,f.y1,f.x3,f.y3,f.x2,f.y2);const p=os.get(uM);p.indexOffset=h,p.indexSize=c.length-h,p.attributeOffset=u,p.attributeSize=a.length/2-u,p.baseColor=t.style,p.alpha=t.alpha,p.texture=d,p.geometryData=r,e.push(p)}function Cb(t,e,r,n,s){const{vertices:i,uvs:o,indices:a}=s;t.shapePrimitives.forEach(({shape:l,transform:c,holes:h})=>{const u=[],d=Rf[l.type];if(!d.build(l,u))return;const f=a.length,p=i.length/2;let m="triangle-list";if(c&&cM(u,c),r){const x=l.closePath??!0,_=e;_.pixelLine?(J$(u,x,i,a),m="line-list"):Q$(u,_,!1,x,i,a)}else if(h){const x=[],_=u.slice();h6(h).forEach(A=>{x.push(_.length/2),_.push(...A)}),dM(_,x,i,2,p,a,f)}else d.triangulate(u,i,2,p,a,f);const g=o.length/2,y=e.texture;if(y!==ve.WHITE){const x=o6(l6,e,l,c);W$(i,2,p,o,g,2,i.length/2-p,x)}else X$(o,g,2,i.length/2-p);const v=os.get(uM);v.indexOffset=f,v.indexSize=a.length-f,v.attributeOffset=p,v.attributeSize=i.length/2-p,v.baseColor=e.color,v.alpha=e.alpha,v.texture=y,v.geometryData=s,v.topology=m,n.push(v)})}function h6(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r].shape,s=[];Rf[n.type].build(n,s)&&e.push(s)}return e}class d6{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class f6{constructor(){this.instructions=new fP}init(e){this.batcher=new H$({maxTextures:e}),this.instructions.reset()}get geometry(){return Ne(nj,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const av=class ky{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){ky.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??ky.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let r=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){r?this._cleanGraphicsContextData(e):r=this._initContext(e),c6(e,r);const n=e.batchMode;e.customShader||n==="no-batch"?r.isBatchable=!1:n==="auto"?r.isBatchable=r.geometryData.vertices.length<400:r.isBatchable=!0,e.dirty=!1}return r}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const r=os.get(f6,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:n,geometryData:s}=this._gpuContextHash[e.uid],i=s.vertices.length,o=s.indices.length;for(let h=0;h<n.length;h++)n[h].applyTransform=!1;const a=r.batcher;a.ensureAttributeBuffer(i),a.ensureIndexBuffer(o),a.begin();for(let h=0;h<n.length;h++){const u=n[h];a.add(u)}a.finish(r.instructions);const l=a.geometry;l.indexBuffer.setDataWithSize(a.indexBuffer,a.indexSize,!0),l.buffers[0].setDataWithSize(a.attributeBuffer.float32View,a.attributeSize,!0);const c=a.batches;for(let h=0;h<c.length;h++){const u=c[h];u.bindGroup=t$(u.textures.textures,u.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=r,r}_initContext(e){const r=new d6;return r.context=e,this._gpuContextHash[e.uid]=r,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const r=this._gpuContextHash[e.uid];r.isBatchable||this._graphicsDataContextHash[e.uid]&&(os.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),r.batches&&r.batches.forEach(n=>{os.return(n)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};av.extension={type:[ee.WebGLSystem,ee.WebGPUSystem,ee.CanvasSystem],name:"graphicsContext"};av.defaultOptions={bezierSmoothness:.5};let fM=av;const p6=8,Bu=11920929e-14,m6=1;function pM(t,e,r,n,s,i,o,a,l,c){const u=Math.min(.99,Math.max(0,c??fM.defaultOptions.bezierSmoothness));let d=(m6-u)/1;return d*=d,g6(e,r,n,s,i,o,a,l,t,d),t}function g6(t,e,r,n,s,i,o,a,l,c){Ny(t,e,r,n,s,i,o,a,l,c,0),l.push(o,a)}function Ny(t,e,r,n,s,i,o,a,l,c,h){if(h>p6)return;const u=(t+r)/2,d=(e+n)/2,f=(r+s)/2,p=(n+i)/2,m=(s+o)/2,g=(i+a)/2,y=(u+f)/2,v=(d+p)/2,x=(f+m)/2,_=(p+g)/2,b=(y+x)/2,A=(v+_)/2;if(h>0){let S=o-t,T=a-e;const E=Math.abs((r-o)*T-(n-a)*S),R=Math.abs((s-o)*T-(i-a)*S);if(E>Bu&&R>Bu){if((E+R)*(E+R)<=c*(S*S+T*T)){l.push(b,A);return}}else if(E>Bu){if(E*E<=c*(S*S+T*T)){l.push(b,A);return}}else if(R>Bu){if(R*R<=c*(S*S+T*T)){l.push(b,A);return}}else if(S=b-(t+o)/2,T=A-(e+a)/2,S*S+T*T<=c){l.push(b,A);return}}Ny(t,e,u,d,y,v,b,A,l,c,h+1),Ny(b,A,x,_,m,g,o,a,l,c,h+1)}const y6=8,x6=11920929e-14,v6=1;function _6(t,e,r,n,s,i,o,a){const c=Math.min(.99,Math.max(0,a??fM.defaultOptions.bezierSmoothness));let h=(v6-c)/1;return h*=h,w6(e,r,n,s,i,o,t,h),t}function w6(t,e,r,n,s,i,o,a){Fy(o,t,e,r,n,s,i,a,0),o.push(s,i)}function Fy(t,e,r,n,s,i,o,a,l){if(l>y6)return;const c=(e+n)/2,h=(r+s)/2,u=(n+i)/2,d=(s+o)/2,f=(c+u)/2,p=(h+d)/2;let m=i-e,g=o-r;const y=Math.abs((n-i)*g-(s-o)*m);if(y>x6){if(y*y<=a*(m*m+g*g)){t.push(f,p);return}}else if(m=f-(e+i)/2,g=p-(r+o)/2,m*m+g*g<=a){t.push(f,p);return}Fy(t,e,r,c,h,f,p,a,l+1),Fy(t,f,p,u,d,i,o,a,l+1)}function mM(t,e,r,n,s,i,o,a){let l=Math.abs(s-i);(!o&&s>i||o&&i>s)&&(l=2*Math.PI-l),a||(a=Math.max(6,Math.floor(6*Math.pow(n,1/3)*(l/Math.PI)))),a=Math.max(a,3);let c=l/a,h=s;c*=o?-1:1;for(let u=0;u<a+1;u++){const d=Math.cos(h),f=Math.sin(h),p=e+d*n,m=r+f*n;t.push(p,m),h+=c}}function b6(t,e,r,n,s,i){const o=t[t.length-2],l=t[t.length-1]-r,c=o-e,h=s-r,u=n-e,d=Math.abs(l*u-c*h);if(d<1e-8||i===0){(t[t.length-2]!==e||t[t.length-1]!==r)&&t.push(e,r);return}const f=l*l+c*c,p=h*h+u*u,m=l*h+c*u,g=i*Math.sqrt(f)/d,y=i*Math.sqrt(p)/d,v=g*m/f,x=y*m/p,_=g*u+y*c,b=g*h+y*l,A=c*(y+v),S=l*(y+v),T=u*(g+x),E=h*(g+x),R=Math.atan2(S-b,A-_),P=Math.atan2(E-b,T-_);mM(t,_+e,b+r,i,R,P,c*h>u*l)}const Wl=Math.PI*2,lm={centerX:0,centerY:0,ang1:0,ang2:0},cm=({x:t,y:e},r,n,s,i,o,a,l)=>{t*=r,e*=n;const c=s*t-i*e,h=i*t+s*e;return l.x=c+o,l.y=h+a,l};function A6(t,e){const r=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=e===1.5707963267948966?.551915024494:r,s=Math.cos(t),i=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[{x:s-i*n,y:i+s*n},{x:o+a*n,y:a-o*n},{x:o,y:a}]}const Rb=(t,e,r,n)=>{const s=t*n-e*r<0?-1:1;let i=t*r+e*n;return i>1&&(i=1),i<-1&&(i=-1),s*Math.acos(i)},S6=(t,e,r,n,s,i,o,a,l,c,h,u,d)=>{const f=Math.pow(s,2),p=Math.pow(i,2),m=Math.pow(h,2),g=Math.pow(u,2);let y=f*p-f*g-p*m;y<0&&(y=0),y/=f*g+p*m,y=Math.sqrt(y)*(o===a?-1:1);const v=y*s/i*u,x=y*-i/s*h,_=c*v-l*x+(t+r)/2,b=l*v+c*x+(e+n)/2,A=(h-v)/s,S=(u-x)/i,T=(-h-v)/s,E=(-u-x)/i,R=Rb(1,0,A,S);let P=Rb(A,S,T,E);a===0&&P>0&&(P-=Wl),a===1&&P<0&&(P+=Wl),d.centerX=_,d.centerY=b,d.ang1=R,d.ang2=P};function T6(t,e,r,n,s,i,o,a=0,l=0,c=0){if(i===0||o===0)return;const h=Math.sin(a*Wl/360),u=Math.cos(a*Wl/360),d=u*(e-n)/2+h*(r-s)/2,f=-h*(e-n)/2+u*(r-s)/2;if(d===0&&f===0)return;i=Math.abs(i),o=Math.abs(o);const p=Math.pow(d,2)/Math.pow(i,2)+Math.pow(f,2)/Math.pow(o,2);p>1&&(i*=Math.sqrt(p),o*=Math.sqrt(p)),S6(e,r,n,s,i,o,l,c,h,u,d,f,lm);let{ang1:m,ang2:g}=lm;const{centerX:y,centerY:v}=lm;let x=Math.abs(g)/(Wl/4);Math.abs(1-x)<1e-7&&(x=1);const _=Math.max(Math.ceil(x),1);g/=_;let b=t[t.length-2],A=t[t.length-1];const S={x:0,y:0};for(let T=0;T<_;T++){const E=A6(m,g),{x:R,y:P}=cm(E[0],i,o,u,h,y,v,S),{x:D,y:k}=cm(E[1],i,o,u,h,y,v,S),{x:M,y:G}=cm(E[2],i,o,u,h,y,v,S);pM(t,b,A,R,P,D,k,M,G),b=M,A=G,m+=g}}function E6(t,e,r){const n=(o,a)=>{const l=a.x-o.x,c=a.y-o.y,h=Math.sqrt(l*l+c*c),u=l/h,d=c/h;return{len:h,nx:u,ny:d}},s=(o,a)=>{o===0?t.moveTo(a.x,a.y):t.lineTo(a.x,a.y)};let i=e[e.length-1];for(let o=0;o<e.length;o++){const a=e[o%e.length],l=a.radius??r;if(l<=0){s(o,a),i=a;continue}const c=e[(o+1)%e.length],h=n(a,i),u=n(a,c);if(h.len<1e-4||u.len<1e-4){s(o,a),i=a;continue}let d=Math.asin(h.nx*u.ny-h.ny*u.nx),f=1,p=!1;h.nx*u.nx-h.ny*-u.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,f=-1,p=!0):d>0&&(f=-1,p=!0);const m=d/2;let g,y=Math.abs(Math.cos(m)*l/Math.sin(m));y>Math.min(h.len/2,u.len/2)?(y=Math.min(h.len/2,u.len/2),g=Math.abs(y*Math.sin(m)/Math.cos(m))):g=l;const v=a.x+u.nx*y+-u.ny*g*f,x=a.y+u.ny*y+u.nx*g*f,_=Math.atan2(h.ny,h.nx)+Math.PI/2*f,b=Math.atan2(u.ny,u.nx)-Math.PI/2*f;o===0&&t.moveTo(v+Math.cos(_)*g,x+Math.sin(_)*g),t.arc(v,x,g,_,b,p),i=a}}function C6(t,e,r,n){const s=(a,l)=>Math.sqrt((a.x-l.x)**2+(a.y-l.y)**2),i=(a,l,c)=>({x:a.x+(l.x-a.x)*c,y:a.y+(l.y-a.y)*c}),o=e.length;for(let a=0;a<o;a++){const l=e[(a+1)%o],c=l.radius??r;if(c<=0){a===0?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y);continue}const h=e[a],u=e[(a+2)%o],d=s(h,l);let f;if(d<1e-4)f=l;else{const g=Math.min(d/2,c);f=i(l,h,g/d)}const p=s(u,l);let m;if(p<1e-4)m=l;else{const g=Math.min(p/2,c);m=i(l,u,g/p)}a===0?t.moveTo(f.x,f.y):t.lineTo(f.x,f.y),t.quadraticCurveTo(l.x,l.y,m.x,m.y,n)}}const R6=new Ft;class P6{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new gs,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,r){return this.startPoly(e,r),this}lineTo(e,r){this._ensurePoly();const n=this._currentPoly.points,s=n[n.length-2],i=n[n.length-1];return(s!==e||i!==r)&&n.push(e,r),this}arc(e,r,n,s,i,o){this._ensurePoly(!1);const a=this._currentPoly.points;return mM(a,e,r,n,s,i,o),this}arcTo(e,r,n,s,i){this._ensurePoly();const o=this._currentPoly.points;return b6(o,e,r,n,s,i),this}arcToSvg(e,r,n,s,i,o,a){const l=this._currentPoly.points;return T6(l,this._currentPoly.lastX,this._currentPoly.lastY,o,a,e,r,n,s,i),this}bezierCurveTo(e,r,n,s,i,o,a){this._ensurePoly();const l=this._currentPoly;return pM(this._currentPoly.points,l.lastX,l.lastY,e,r,n,s,i,o,a),this}quadraticCurveTo(e,r,n,s,i){this._ensurePoly();const o=this._currentPoly;return _6(this._currentPoly.points,o.lastX,o.lastY,e,r,n,s,i),this}closePath(){return this.endPoly(!0),this}addPath(e,r){this.endPoly(),r&&!r.isIdentity()&&(e=e.clone(!0),e.transform(r));const n=this.shapePrimitives,s=n.length;for(let i=0;i<e.instructions.length;i++){const o=e.instructions[i];this[o.action](...o.data)}if(e.checkForHoles&&n.length-s>1){let i=null;for(let o=s;o<n.length;o++){const a=n[o];if(a.shape.type==="polygon"){const l=a.shape,c=i==null?void 0:i.shape;c&&c.containsPolygon(l)?(i.holes||(i.holes=[]),i.holes.push(a),n.copyWithin(o,o+1),n.length--,o--):i=a}}}return this}finish(e=!1){this.endPoly(e)}rect(e,r,n,s,i){return this.drawShape(new Ft(e,r,n,s),i),this}circle(e,r,n,s){return this.drawShape(new q5(e,r,n),s),this}poly(e,r,n){const s=new nm(e);return s.closePath=r,this.drawShape(s,n),this}regularPoly(e,r,n,s,i=0,o){s=Math.max(s|0,3);const a=-1*Math.PI/2+i,l=Math.PI*2/s,c=[];for(let h=0;h<s;h++){const u=a-h*l;c.push(e+n*Math.cos(u),r+n*Math.sin(u))}return this.poly(c,!0,o),this}roundPoly(e,r,n,s,i,o=0,a){if(s=Math.max(s|0,3),i<=0)return this.regularPoly(e,r,n,s,o);const l=n*Math.sin(Math.PI/s)-.001;i=Math.min(i,l);const c=-1*Math.PI/2+o,h=Math.PI*2/s,u=(s-2)*Math.PI/s/2;for(let d=0;d<s;d++){const f=d*h+c,p=e+n*Math.cos(f),m=r+n*Math.sin(f),g=f+Math.PI+u,y=f-Math.PI-u,v=p+i*Math.cos(g),x=m+i*Math.sin(g),_=p+i*Math.cos(y),b=m+i*Math.sin(y);d===0?this.moveTo(v,x):this.lineTo(v,x),this.quadraticCurveTo(p,m,_,b,a)}return this.closePath()}roundShape(e,r,n=!1,s){return e.length<3?this:(n?C6(this,e,r,s):E6(this,e,r),this.closePath())}filletRect(e,r,n,s,i){if(i===0)return this.rect(e,r,n,s);const o=Math.min(n,s)/2,a=Math.min(o,Math.max(-o,i)),l=e+n,c=r+s,h=a<0?-a:0,u=Math.abs(a);return this.moveTo(e,r+u).arcTo(e+h,r+h,e+u,r,u).lineTo(l-u,r).arcTo(l-h,r+h,l,r+u,u).lineTo(l,c-u).arcTo(l-h,c-h,e+n-u,c,u).lineTo(e+u,c).arcTo(e+h,c-h,e,c-u,u).closePath()}chamferRect(e,r,n,s,i,o){if(i<=0)return this.rect(e,r,n,s);const a=Math.min(i,Math.min(n,s)/2),l=e+n,c=r+s,h=[e+a,r,l-a,r,l,r+a,l,c-a,l-a,c,e+a,c,e,c-a,e,r+a];for(let u=h.length-1;u>=2;u-=2)h[u]===h[u-2]&&h[u-1]===h[u-3]&&h.splice(u-1,2);return this.poly(h,!0,o)}ellipse(e,r,n,s,i){return this.drawShape(new K5(e,r,n,s),i),this}roundRect(e,r,n,s,i,o){return this.drawShape(new e$(e,r,n,s,i),o),this}drawShape(e,r){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:r}),this}startPoly(e,r){let n=this._currentPoly;return n&&this.endPoly(),n=new nm,n.points.push(e,r),this._currentPoly=n,this}endPoly(e=!1){const r=this._currentPoly;return r&&r.points.length>2&&(r.closePath=e,this.shapePrimitives.push({shape:r})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new nm,e)){const r=this.shapePrimitives[this.shapePrimitives.length-1];if(r){let n=r.shape.x,s=r.shape.y;if(r.transform&&!r.transform.isIdentity()){const i=r.transform,o=n;n=i.a*n+i.c*s+i.tx,s=i.b*o+i.d*s+i.ty}this._currentPoly.points.push(n,s)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let r=0;r<e.instructions.length;r++){const n=e.instructions[r];this[n.action](...n.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const r=this.shapePrimitives;for(let n=0;n<r.length;n++){const s=r[n],i=s.shape.getBounds(R6);s.transform?e.addRect(i,s.transform):e.addRect(i)}return e}}class Ca{constructor(e,r=!1){this.instructions=[],this.uid=ut("graphicsPath"),this._dirty=!0,this.checkForHoles=r,typeof e=="string"?Y5(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new P6(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,r){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,r]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,r,n,s,i){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(hr.shared);let l=0,c=0;if(!o||o.action!=="bezierCurveTo")l=a.x,c=a.y;else{l=o.data[2],c=o.data[3];const h=a.x,u=a.y;l=h+(h-l),c=u+(u-c)}return this.instructions.push({action:"bezierCurveTo",data:[l,c,e,r,n,s,i]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,r,n){const s=this.instructions[this.instructions.length-1],i=this.getLastPoint(hr.shared);let o=0,a=0;if(!s||s.action!=="quadraticCurveTo")o=i.x,a=i.y;else{o=s.data[0],a=s.data[1];const l=i.x,c=i.y;o=l+(l-o),a=c+(c-a)}return this.instructions.push({action:"quadraticCurveTo",data:[o,a,e,r,n]}),this._dirty=!0,this}rect(e,r,n,s,i){return this.instructions.push({action:"rect",data:[e,r,n,s,i]}),this._dirty=!0,this}circle(e,r,n,s){return this.instructions.push({action:"circle",data:[e,r,n,s]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,r,n,s,i,o,a){i||(i=s/2);const l=-1*Math.PI/2+o,c=n*2,h=Math.PI*2/c,u=[];for(let d=0;d<c;d++){const f=d%2?i:s,p=d*h+l;u.push(e+f*Math.cos(p),r+f*Math.sin(p))}return this.poly(u,!0,a),this}clone(e=!1){const r=new Ca;if(r.checkForHoles=this.checkForHoles,!e)r.instructions=this.instructions.slice();else for(let n=0;n<this.instructions.length;n++){const s=this.instructions[n];r.instructions.push({action:s.action,data:s.data.slice()})}return r}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const r=e.a,n=e.b,s=e.c,i=e.d,o=e.tx,a=e.ty;let l=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0;for(let g=0;g<this.instructions.length;g++){const y=this.instructions[g],v=y.data;switch(y.action){case"moveTo":case"lineTo":l=v[0],c=v[1],v[0]=r*l+s*c+o,v[1]=n*l+i*c+a;break;case"bezierCurveTo":h=v[0],u=v[1],d=v[2],f=v[3],l=v[4],c=v[5],v[0]=r*h+s*u+o,v[1]=n*h+i*u+a,v[2]=r*d+s*f+o,v[3]=n*d+i*f+a,v[4]=r*l+s*c+o,v[5]=n*l+i*c+a;break;case"quadraticCurveTo":h=v[0],u=v[1],l=v[2],c=v[3],v[0]=r*h+s*u+o,v[1]=n*h+i*u+a,v[2]=r*l+s*c+o,v[3]=n*l+i*c+a;break;case"arcToSvg":l=v[5],c=v[6],p=v[0],m=v[1],v[0]=r*p+s*m,v[1]=n*p+i*m,v[5]=r*l+s*c+o,v[6]=n*l+i*c+a;break;case"circle":v[4]=ul(v[3],e);break;case"rect":v[4]=ul(v[4],e);break;case"ellipse":v[8]=ul(v[8],e);break;case"roundRect":v[5]=ul(v[5],e);break;case"addPath":v[0].transform(e);break;case"poly":v[2]=ul(v[2],e);break;default:Le("unknown transform action",y.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let r=this.instructions.length-1,n=this.instructions[r];if(!n)return e.x=0,e.y=0,e;for(;n.action==="closePath";){if(r--,r<0)return e.x=0,e.y=0,e;n=this.instructions[r]}switch(n.action){case"moveTo":case"lineTo":e.x=n.data[0],e.y=n.data[1];break;case"quadraticCurveTo":e.x=n.data[2],e.y=n.data[3];break;case"bezierCurveTo":e.x=n.data[4],e.y=n.data[5];break;case"arc":case"arcToSvg":e.x=n.data[5],e.y=n.data[6];break;case"addPath":n.data[0].getLastPoint(e);break}return e}}function ul(t,e){return t?t.prepend(e):e.clone()}function rt(t,e,r){const n=t.getAttribute(e);return n?Number(n):r}function M6(t,e){const r=t.querySelectorAll("defs");for(let n=0;n<r.length;n++){const s=r[n];for(let i=0;i<s.children.length;i++){const o=s.children[i];switch(o.nodeName.toLowerCase()){case"lineargradient":e.defs[o.id]=I6(o);break;case"radialgradient":e.defs[o.id]=k6();break}}}}function I6(t){const e=rt(t,"x1",0),r=rt(t,"y1",0),n=rt(t,"x2",1),s=rt(t,"y2",0),i=t.getAttribute("gradientUnits")||"objectBoundingBox",o=new ys(e,r,n,s,i==="objectBoundingBox"?"local":"global");for(let a=0;a<t.children.length;a++){const l=t.children[a],c=rt(l,"offset",0),h=gt.shared.setValue(l.getAttribute("stop-color")).toNumber();o.addColorStop(c,h)}return o}function k6(t){return Le("[SVG Parser] Radial gradients are not yet supported"),new ys(0,0,1,0)}function Pb(t){const e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const Mb={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function gM(t,e){const r=t.getAttribute("style"),n={},s={},i={strokeStyle:n,fillStyle:s,useFill:!1,useStroke:!1};for(const o in Mb){const a=t.getAttribute(o);a&&Ib(e,i,o,a.trim())}if(r){const o=r.split(";");for(let a=0;a<o.length;a++){const l=o[a].trim(),[c,h]=l.split(":");Mb[c]&&Ib(e,i,c,h.trim())}}return{strokeStyle:i.useStroke?n:null,fillStyle:i.useFill?s:null,useFill:i.useFill,useStroke:i.useStroke}}function Ib(t,e,r,n){switch(r){case"stroke":if(n!=="none"){if(n.startsWith("url(")){const s=Pb(n);e.strokeStyle.fill=t.defs[s]}else e.strokeStyle.color=gt.shared.setValue(n).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(n);break;case"fill":if(n!=="none"){if(n.startsWith("url(")){const s=Pb(n);e.fillStyle.fill=t.defs[s]}else e.fillStyle.color=gt.shared.setValue(n).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(n);break;case"stroke-opacity":e.strokeStyle.alpha=Number(n);break;case"opacity":e.fillStyle.alpha=Number(n),e.strokeStyle.alpha=Number(n);break}}function N6(t,e){if(typeof t=="string"){const o=document.createElement("div");o.innerHTML=t.trim(),t=o.querySelector("svg")}const r={context:e,defs:{},path:new Ca};M6(t,r);const n=t.children,{fillStyle:s,strokeStyle:i}=gM(t,r);for(let o=0;o<n.length;o++){const a=n[o];a.nodeName.toLowerCase()!=="defs"&&yM(a,r,s,i)}return e}function yM(t,e,r,n){const s=t.children,{fillStyle:i,strokeStyle:o}=gM(t,e);i&&r?r={...r,...i}:i&&(r=i),o&&n?n={...n,...o}:o&&(n=o);const a=!r&&!n;a&&(r={color:0});let l,c,h,u,d,f,p,m,g,y,v,x,_,b,A,S,T;switch(t.nodeName.toLowerCase()){case"path":b=t.getAttribute("d"),t.getAttribute("fill-rule")==="evenodd"&&Le("SVG Evenodd fill rule not supported, your svg may render incorrectly"),A=new Ca(b,!0),e.context.path(A),r&&e.context.fill(r),n&&e.context.stroke(n);break;case"circle":p=rt(t,"cx",0),m=rt(t,"cy",0),g=rt(t,"r",0),e.context.ellipse(p,m,g,g),r&&e.context.fill(r),n&&e.context.stroke(n);break;case"rect":l=rt(t,"x",0),c=rt(t,"y",0),S=rt(t,"width",0),T=rt(t,"height",0),y=rt(t,"rx",0),v=rt(t,"ry",0),y||v?e.context.roundRect(l,c,S,T,y||v):e.context.rect(l,c,S,T),r&&e.context.fill(r),n&&e.context.stroke(n);break;case"ellipse":p=rt(t,"cx",0),m=rt(t,"cy",0),y=rt(t,"rx",0),v=rt(t,"ry",0),e.context.beginPath(),e.context.ellipse(p,m,y,v),r&&e.context.fill(r),n&&e.context.stroke(n);break;case"line":h=rt(t,"x1",0),u=rt(t,"y1",0),d=rt(t,"x2",0),f=rt(t,"y2",0),e.context.beginPath(),e.context.moveTo(h,u),e.context.lineTo(d,f),n&&e.context.stroke(n);break;case"polygon":_=t.getAttribute("points"),x=_.match(/\d+/g).map(E=>parseInt(E,10)),e.context.poly(x,!0),r&&e.context.fill(r),n&&e.context.stroke(n);break;case"polyline":_=t.getAttribute("points"),x=_.match(/\d+/g).map(E=>parseInt(E,10)),e.context.poly(x,!1),n&&e.context.stroke(n);break;case"g":case"svg":break;default:{Le(`[SVG parser] <${t.nodeName}> elements unsupported`);break}}a&&(r=null);for(let E=0;E<s.length;E++)yM(s[E],e,r,n)}function F6(t){return gt.isColorLike(t)}function kb(t){return t instanceof Cf}function Nb(t){return t instanceof ys}function L6(t){return t instanceof ve}function O6(t,e,r){const n=gt.shared.setValue(e??0);return t.color=n.toNumber(),t.alpha=n.alpha===1?r.alpha:n.alpha,t.texture=ve.WHITE,{...r,...t}}function B6(t,e,r){return t.texture=e,{...r,...t}}function Fb(t,e,r){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...r,...t}}function Lb(t,e,r){return e.buildGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...r,...t}}function D6(t,e){const r={...e,...t},n=gt.shared.setValue(r.color);return r.alpha*=n.alpha,r.color=n.toNumber(),r}function zi(t,e){if(t==null)return null;const r={},n=t;return F6(t)?O6(r,t,e):L6(t)?B6(r,t,e):kb(t)?Fb(r,t,e):Nb(t)?Lb(r,t,e):n.fill&&kb(n.fill)?Fb(n,n.fill,e):n.fill&&Nb(n.fill)?Lb(n,n.fill,e):D6(n,e)}function Sd(t,e){const{width:r,alignment:n,miterLimit:s,cap:i,join:o,pixelLine:a,...l}=e,c=zi(t,l);return c?{width:r,alignment:n,miterLimit:s,cap:i,join:o,pixelLine:a,...c}:null}const U6=new hr,Ob=new _e,lv=class En extends vn{constructor(){super(...arguments),this.uid=ut("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Ca,this._transform=new _e,this._fillStyle={...En.defaultFillStyle},this._strokeStyle={...En.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new gs,this._boundsDirty=!0}clone(){const e=new En;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=zi(e,En.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Sd(e,En.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=zi(e,En.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=zi(e,En.defaultStrokeStyle),this}texture(e,r,n,s,i,o){return this.instructions.push({action:"texture",data:{image:e,dx:n||0,dy:s||0,dw:i||e.frame.width,dh:o||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:r?gt.shared.setValue(r).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Ca,this}fill(e,r){let n;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?n=s.data.path:n=this._activePath.clone(),n?(e!=null&&(r!==void 0&&typeof e=="number"&&(Ne(St,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:r}),this._fillStyle=zi(e,En.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:r}=this._activePath.getLastPoint(hr.shared);this._activePath.clear(),this._activePath.moveTo(e,r)}stroke(e){let r;const n=this.instructions[this.instructions.length-1];return this._tick===0&&n&&n.action==="fill"?r=n.data.path:r=this._activePath.clone(),r?(e!=null&&(this._strokeStyle=Sd(e,En.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const r=this.instructions[this.instructions.length-1-e],n=this._activePath.clone();if(r&&(r.action==="stroke"||r.action==="fill"))if(r.data.hole)r.data.hole.addPath(n);else{r.data.hole=n;break}}return this._initNextPathLocation(),this}arc(e,r,n,s,i,o){this._tick++;const a=this._transform;return this._activePath.arc(a.a*e+a.c*r+a.tx,a.b*e+a.d*r+a.ty,n,s,i,o),this}arcTo(e,r,n,s,i){this._tick++;const o=this._transform;return this._activePath.arcTo(o.a*e+o.c*r+o.tx,o.b*e+o.d*r+o.ty,o.a*n+o.c*s+o.tx,o.b*n+o.d*s+o.ty,i),this}arcToSvg(e,r,n,s,i,o,a){this._tick++;const l=this._transform;return this._activePath.arcToSvg(e,r,n,s,i,l.a*o+l.c*a+l.tx,l.b*o+l.d*a+l.ty),this}bezierCurveTo(e,r,n,s,i,o,a){this._tick++;const l=this._transform;return this._activePath.bezierCurveTo(l.a*e+l.c*r+l.tx,l.b*e+l.d*r+l.ty,l.a*n+l.c*s+l.tx,l.b*n+l.d*s+l.ty,l.a*i+l.c*o+l.tx,l.b*i+l.d*o+l.ty,a),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,r,n,s){return this._tick++,this._activePath.ellipse(e,r,n,s,this._transform.clone()),this}circle(e,r,n){return this._tick++,this._activePath.circle(e,r,n,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,r){this._tick++;const n=this._transform;return this._activePath.lineTo(n.a*e+n.c*r+n.tx,n.b*e+n.d*r+n.ty),this}moveTo(e,r){this._tick++;const n=this._transform,s=this._activePath.instructions,i=n.a*e+n.c*r+n.tx,o=n.b*e+n.d*r+n.ty;return s.length===1&&s[0].action==="moveTo"?(s[0].data[0]=i,s[0].data[1]=o,this):(this._activePath.moveTo(i,o),this)}quadraticCurveTo(e,r,n,s,i){this._tick++;const o=this._transform;return this._activePath.quadraticCurveTo(o.a*e+o.c*r+o.tx,o.b*e+o.d*r+o.ty,o.a*n+o.c*s+o.tx,o.b*n+o.d*s+o.ty,i),this}rect(e,r,n,s){return this._tick++,this._activePath.rect(e,r,n,s,this._transform.clone()),this}roundRect(e,r,n,s,i){return this._tick++,this._activePath.roundRect(e,r,n,s,i,this._transform.clone()),this}poly(e,r){return this._tick++,this._activePath.poly(e,r,this._transform.clone()),this}regularPoly(e,r,n,s,i=0,o){return this._tick++,this._activePath.regularPoly(e,r,n,s,i,o),this}roundPoly(e,r,n,s,i,o){return this._tick++,this._activePath.roundPoly(e,r,n,s,i,o),this}roundShape(e,r,n,s){return this._tick++,this._activePath.roundShape(e,r,n,s),this}filletRect(e,r,n,s,i){return this._tick++,this._activePath.filletRect(e,r,n,s,i),this}chamferRect(e,r,n,s,i,o){return this._tick++,this._activePath.chamferRect(e,r,n,s,i,o),this}star(e,r,n,s,i=0,o=0){return this._tick++,this._activePath.star(e,r,n,s,i,o,this._transform.clone()),this}svg(e){return this._tick++,N6(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,r=e){return this._transform.scale(e,r),this}setTransform(e,r,n,s,i,o){return e instanceof _e?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,r,n,s,i,o),this)}transform(e,r,n,s,i,o){return e instanceof _e?(this._transform.append(e),this):(Ob.set(e,r,n,s,i,o),this._transform.append(Ob),this)}translate(e,r=e){return this._transform.translate(e,r),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const e=this._bounds;e.clear();for(let r=0;r<this.instructions.length;r++){const n=this.instructions[r],s=n.action;if(s==="fill"){const i=n.data;e.addBounds(i.path.bounds)}else if(s==="texture"){const i=n.data;e.addFrame(i.dx,i.dy,i.dx+i.dw,i.dy+i.dh,i.transform)}if(s==="stroke"){const i=n.data,o=i.style.alignment,a=i.style.width*(1-o),l=i.path.bounds;e.addFrame(l.minX-a,l.minY-a,l.maxX+a,l.maxY+a)}}return e}containsPoint(e){var s;if(!this.bounds.containsPoint(e.x,e.y))return!1;const r=this.instructions;let n=!1;for(let i=0;i<r.length;i++){const o=r[i],a=o.data,l=a.path;if(!o.action||!l)continue;const c=a.style,h=l.shapePath.shapePrimitives;for(let u=0;u<h.length;u++){const d=h[u].shape;if(!c||!d)continue;const f=h[u].transform,p=f?f.applyInverse(e,U6):e;if(o.action==="fill")n=d.contains(p.x,p.y);else{const g=c;n=d.strokeContains(p.x,p.y,g.width,g.alignment)}const m=a.hole;if(m){const g=(s=m.shapePath)==null?void 0:s.shapePrimitives;if(g)for(let y=0;y<g.length;y++)g[y].shape.contains(p.x,p.y)&&(n=!1)}if(n)return!0}}return n}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(n)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(n))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};lv.defaultFillStyle={color:16777215,alpha:1,texture:ve.WHITE,matrix:null,fill:null,textureSpace:"local"};lv.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:ve.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Ci=lv;const Bb=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function V6(t){const e=[];let r=0;for(let n=0;n<Bb.length;n++){const s=`_${Bb[n]}`;e[r++]=t[s]}return r=xM(t._fill,e,r),r=$6(t._stroke,e,r),r=G6(t.dropShadow,e,r),r=j6(t.filters,e,r),e.join("-")}function j6(t,e,r){if(!t)return r;for(const n of t)e[r++]=n.uid;return r}function xM(t,e,r){var n;return t&&(e[r++]=t.color,e[r++]=t.alpha,e[r++]=(n=t.fill)==null?void 0:n.styleKey),r}function $6(t,e,r){return t&&(r=xM(t,e,r),e[r++]=t.width,e[r++]=t.alignment,e[r++]=t.cap,e[r++]=t.join,e[r++]=t.miterLimit),r}function G6(t,e,r){return t&&(e[r++]=t.alpha,e[r++]=t.angle,e[r++]=t.blur,e[r++]=t.distance,e[r++]=gt.shared.setValue(t.color).toNumber()),r}const cv=class Ro extends vn{constructor(e={}){super(),z6(e);const r={...Ro.defaultTextStyle,...e};for(const n in r){const s=n;this[s]=r[n]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Ro.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Ro.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get filters(){return this._filters}set filters(e){this._filters=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Ci.defaultFillStyle,...e},()=>{this._fill=zi({...this._originalFill},Ci.defaultFillStyle)})),this._fill=zi(e===0?"black":e,Ci.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Ci.defaultStrokeStyle,...e},()=>{this._stroke=Sd({...this._originalStroke},Ci.defaultStrokeStyle)})),this._stroke=Sd(e,Ci.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=V6(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=Ro.defaultTextStyle;for(const r in e)this[r]=e[r]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Ro({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let r=0;r<this._filters.length;r++)e+=this._filters[r].padding;return Math.max(this._padding,e)}destroy(e=!1){var n,s,i,o;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const a=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(n=this._fill)!=null&&n.texture&&this._fill.texture.destroy(a),(s=this._originalFill)!=null&&s.texture&&this._originalFill.texture.destroy(a),(i=this._stroke)!=null&&i.texture&&this._stroke.texture.destroy(a),(o=this._originalStroke)!=null&&o.texture&&this._originalStroke.texture.destroy(a)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,r){return new Proxy(e,{set:(n,s,i)=>(n[s]=i,r==null||r(s,i),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(gt.isColorLike(e)||e instanceof ys||e instanceof Cf)}};cv.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};cv.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Td=cv;function z6(t){const e=t;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const r=Td.defaultDropShadow;t.dropShadow={alpha:e.dropShadowAlpha??r.alpha,angle:e.dropShadowAngle??r.angle,blur:e.dropShadowBlur??r.blur,color:e.dropShadowColor??r.color,distance:e.dropShadowDistance??r.distance}}if(e.strokeThickness!==void 0){Ne(St,"strokeThickness is now a part of stroke");const r=e.stroke;let n={};if(gt.isColorLike(r))n.color=r;else if(r instanceof ys||r instanceof Cf)n.fill=r;else if(Object.hasOwnProperty.call(r,"color")||Object.hasOwnProperty.call(r,"fill"))n=r;else throw new Error("Invalid stroke value.");t.stroke={...n,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Ne(St,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Le("The number of fill colors must match the number of fill gradient stops.");const r=new ys({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),n=e.fillGradientStops.slice(),s=e.fill.map(i=>gt.shared.setValue(i).toNumber());n.forEach((i,o)=>{r.addColorStop(i,s[o])}),t.fill={fill:r}}}class H6{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,r){const n=Ve.get().createCanvas();n.width=e,n.height=r;const s=n.getContext("2d");return{canvas:n,context:s}}getOptimalCanvasAndContext(e,r,n=1){e=Math.ceil(e*n-1e-6),r=Math.ceil(r*n-1e-6),e=wd(e),r=wd(r);const s=(e<<17)+(r<<1);this._canvasPool[s]||(this._canvasPool[s]=[]);let i=this._canvasPool[s].pop();return i||(i=this._createCanvasAndContext(e,r)),i}returnCanvasAndContext(e){const r=e.canvas,{width:n,height:s}=r,i=(n<<17)+(s<<1);e.context.resetTransform(),e.context.clearRect(0,0,n,s),this._canvasPool[i].push(e)}clear(){this._canvasPool={}}}const Db=new H6,Ub=1e5;function Vb(t,e,r,n=0){if(t.texture===ve.WHITE&&!t.fill)return gt.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(t.fill){if(t.fill instanceof Cf){const s=t.fill,i=e.createPattern(s.texture.source.resource,"repeat"),o=s.transform.copyTo(_e.shared);return o.scale(s.texture.frame.width,s.texture.frame.height),i.setTransform(o),i}else if(t.fill instanceof ys){const s=t.fill,i=s.type==="linear",o=s.textureSpace==="local";let a=1,l=1;o&&r&&(a=r.width+n,l=r.height+n);let c,h=!1;if(i){const{start:u,end:d}=s;c=e.createLinearGradient(u.x*a,u.y*l,d.x*a,d.y*l),h=Math.abs(d.x-u.x)<Math.abs((d.y-u.y)*.1)}else{const{center:u,innerRadius:d,outerCenter:f,outerRadius:p}=s;c=e.createRadialGradient(u.x*a,u.y*l,d*a,f.x*a,f.y*l,p*a)}if(h&&o&&r){const u=r.lineHeight/l;for(let d=0;d<r.lines.length;d++){const f=(d*r.lineHeight+n/2)/l;s.colorStops.forEach(p=>{const m=f+p.offset*u;c.addColorStop(Math.floor(m*Ub)/Ub,gt.shared.setValue(p.color).toHex())})}}else s.colorStops.forEach(u=>{c.addColorStop(u.offset,gt.shared.setValue(u.color).toHex())});return c}}else{const s=e.createPattern(t.texture.source.resource,"repeat"),i=t.matrix.copyTo(_e.shared);return i.scale(t.texture.frame.width,t.texture.frame.height),s.setTransform(i),s}return Le("FillStyle not recognised",t),"red"}const vM=class _M extends qP{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const r={..._M.defaultOptions,...e};this._textureSize=r.textureSize,this._mipmap=r.mipmap;const n=r.style.clone();r.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=ve.WHITE,n._fill.fill=null),this.applyFillAsTint=r.overrideFill;const s=n.fontSize;n.fontSize=this.baseMeasurementFontSize;const i=Py(n);r.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/s):n.fontSize=this.baseRenderedFontSize=s,this._style=n,this._skipKerning=r.skipKerning??!1,this.resolution=r.resolution??1,this._padding=r.padding??4,r.textureStyle&&(this._textureStyle=r.textureStyle instanceof bd?r.textureStyle:new bd(r.textureStyle)),this.fontMetrics=Ah.measureFont(i),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(e){var g,y;const r=Ah.graphemeSegmenter(e).filter(v=>!this._currentChars.includes(v)).filter((v,x,_)=>_.indexOf(v)===x);if(!r.length)return;this._currentChars=[...this._currentChars,...r];let n;this._currentPageIndex===-1?n=this._nextPage():n=this.pages[this._currentPageIndex];let{canvas:s,context:i}=n.canvasAndContext,o=n.texture.source;const a=this._style;let l=this._currentX,c=this._currentY,h=this._currentMaxCharHeight;const u=this.baseRenderedFontSize/this.baseMeasurementFontSize,d=this._padding*u;let f=!1;const p=s.width/this.resolution,m=s.height/this.resolution;for(let v=0;v<r.length;v++){const x=r[v],_=Ah.measureText(x,a,s,!1);_.lineHeight=_.height;const b=_.width*u,A=Math.ceil((a.fontStyle==="italic"?2:1)*b),S=_.height*u,T=A+d*2,E=S+d*2;if(f=!1,x!==`
`&&x!=="\r"&&x!=="	"&&x!==" "&&(f=!0,h=Math.ceil(Math.max(E,h))),l+T>p&&(c+=h,h=E,l=0,c+h>m)){o.update();const P=this._nextPage();s=P.canvasAndContext.canvas,i=P.canvasAndContext.context,o=P.texture.source,l=0,c=0,h=0}const R=b/u-(((g=a.dropShadow)==null?void 0:g.distance)??0)-(((y=a._stroke)==null?void 0:y.width)??0);if(this.chars[x]={id:x.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:R,kerning:{}},f){this._drawGlyph(i,_,l+d,c+d,u,a);const P=o.width*u,D=o.height*u,k=new Ft(l/P*o.width,c/D*o.height,T/P*o.width,E/D*o.height);this.chars[x].texture=new ve({source:o,frame:k}),l+=Math.ceil(T)}}o.update(),this._currentX=l,this._currentY=c,this._currentMaxCharHeight=h,this._skipKerning&&this._applyKerning(r,i)}get pageTextures(){return Ne(St,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,r){const n=this._measureCache;for(let s=0;s<e.length;s++){const i=e[s];for(let o=0;o<this._currentChars.length;o++){const a=this._currentChars[o];let l=n[i];l||(l=n[i]=r.measureText(i).width);let c=n[a];c||(c=n[a]=r.measureText(a).width);let h=r.measureText(i+a).width,u=h-(l+c);u&&(this.chars[i].kerning[a]=u),h=r.measureText(i+a).width,u=h-(l+c),u&&(this.chars[a].kerning[i]=u)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,r=Db.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(r.context,this._style,e);const n=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s=new ve({source:new ro({resource:r.canvas,resolution:n,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(s.source.style=this._textureStyle);const i={canvasAndContext:r,texture:s};return this.pages[this._currentPageIndex]=i,i}_setupContext(e,r,n){r.fontSize=this.baseRenderedFontSize,e.scale(n,n),e.font=Py(r),r.fontSize=this.baseMeasurementFontSize,e.textBaseline=r.textBaseline;const s=r._stroke,i=(s==null?void 0:s.width)??0;if(s&&(e.lineWidth=i,e.lineJoin=s.join,e.miterLimit=s.miterLimit,e.strokeStyle=Vb(s,e)),r._fill&&(e.fillStyle=Vb(r._fill,e)),r.dropShadow){const o=r.dropShadow,a=gt.shared.setValue(o.color).toArray(),l=o.blur*n,c=o.distance*n;e.shadowColor=`rgba(${a[0]*255},${a[1]*255},${a[2]*255},${o.alpha})`,e.shadowBlur=l,e.shadowOffsetX=Math.cos(o.angle)*c,e.shadowOffsetY=Math.sin(o.angle)*c}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,r,n,s,i,o){const a=r.text,l=r.fontProperties,c=o._stroke,h=((c==null?void 0:c.width)??0)*i,u=n+h/2,d=s-h/2,f=l.descent*i,p=r.lineHeight*i;let m=!1;o.stroke&&h&&(m=!0,e.strokeText(a,u,d+p-f));const{shadowBlur:g,shadowOffsetX:y,shadowOffsetY:v}=e;o._fill&&(m&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(a,u,d+p-f)),m&&(e.shadowBlur=g,e.shadowOffsetX=y,e.shadowOffsetY=v)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:r,texture:n}=this.pages[e];Db.returnCanvasAndContext(r),n.destroy(!0)}this.pages=null}};vM.defaultOptions={textureSize:512,style:new Td,mipmap:!0};let jb=vM;function W6(t,e,r,n){const s={width:0,height:0,offsetY:0,scale:e.fontSize/r.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=r.baseLineOffset;let i=s.lines[0],o=null,a=!0;const l={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},c=r.baseMeasurementFontSize/e.fontSize,h=e.letterSpacing*c,u=e.wordWrapWidth*c,d=e.lineHeight?e.lineHeight*c:r.lineHeight,f=e.wordWrap&&e.breakWords,p=y=>{const v=i.width;for(let x=0;x<l.index;x++){const _=y.positions[x];i.chars.push(y.chars[x]),i.charPositions.push(_+v)}i.width+=y.width,a=!1,l.width=0,l.index=0,l.chars.length=0},m=()=>{let y=i.chars.length-1;if(n){let v=i.chars[y];for(;v===" ";)i.width-=r.chars[v].xAdvance,v=i.chars[--y]}s.width=Math.max(s.width,i.width),i={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},a=!0,s.lines.push(i),s.height+=d},g=y=>y-h>u;for(let y=0;y<t.length+1;y++){let v;const x=y===t.length;x||(v=t[y]);const _=r.chars[v]||r.chars[" "];if(/(?:\s)/.test(v)||v==="\r"||v===`
`||x){if(!a&&e.wordWrap&&g(i.width+l.width)?(m(),p(l),x||i.charPositions.push(0)):(l.start=i.width,p(l),x||i.charPositions.push(0)),v==="\r"||v===`
`)i.width!==0&&m();else if(!x){const T=_.xAdvance+(_.kerning[o]||0)+h;i.width+=T,i.spaceWidth=T,i.spacesIndex.push(i.charPositions.length),i.chars.push(v)}}else{const S=_.kerning[o]||0,T=_.xAdvance+S+h;f&&g(i.width+l.width+T)&&(p(l),m()),l.positions[l.index++]=l.width+S,l.chars.push(v),l.width+=T}o=v}return m(),e.align==="center"?X6(s):e.align==="right"?Y6(s):e.align==="justify"&&q6(s),s}function X6(t){for(let e=0;e<t.lines.length;e++){const r=t.lines[e],n=t.width/2-r.width/2;for(let s=0;s<r.charPositions.length;s++)r.charPositions[s]+=n}}function Y6(t){for(let e=0;e<t.lines.length;e++){const r=t.lines[e],n=t.width-r.width;for(let s=0;s<r.charPositions.length;s++)r.charPositions[s]+=n}}function q6(t){const e=t.width;for(let r=0;r<t.lines.length;r++){const n=t.lines[r];let s=0,i=n.spacesIndex[s++],o=0;const a=n.spacesIndex.length,c=(e-n.width)/a;for(let h=0;h<n.charPositions.length;h++)h===i&&(i=n.spacesIndex[s++],o+=c),n.charPositions[h]+=o}}function K6(t){if(t==="")return[];typeof t=="string"&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const s=t[r];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);if(s[0].length===0||s[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const i=s[0].charCodeAt(0),o=s[1].charCodeAt(0);if(o<i)throw new Error("[BitmapFont]: Invalid character range.");for(let a=i,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...Array.from(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let Du=0;class Z6{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null}}getFont(e,r){var o;let n=`${r.fontFamily}-bitmap`,s=!0;if(r._fill.fill&&!r._stroke)n+=r._fill.fill.styleKey,s=!1;else if(r._stroke||r.dropShadow){let a=r.styleKey;a=a.substring(0,a.lastIndexOf("-")),n=`${a}-bitmap`,s=!1}if(!De.has(n)){const a=Object.create(r);a.lineHeight=0;const l=new jb({style:a,overrideFill:s,overrideSize:!0,...this.defaultOptions});Du++,Du>50&&Le("BitmapText",`You have dynamically created ${Du} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),l.once("destroy",()=>{Du--,De.remove(n)}),De.set(n,l)}const i=De.get(n);return(o=i.ensureCharacters)==null||o.call(i,e),i}getLayout(e,r,n=!0){const s=this.getFont(e,r),i=Ah.graphemeSegmenter(e);return W6(i,r,s,n)}measureText(e,r,n=!0){return this.getLayout(e,r,n)}install(...e){var c,h,u,d;let r=e[0];typeof r=="string"&&(r={name:r,style:e[1],chars:(c=e[2])==null?void 0:c.chars,resolution:(h=e[2])==null?void 0:h.resolution,padding:(u=e[2])==null?void 0:u.padding,skipKerning:(d=e[2])==null?void 0:d.skipKerning},Ne(St,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const n=r==null?void 0:r.name;if(!n)throw new Error("[BitmapFontManager] Property `name` is required.");r={...this.defaultOptions,...r};const s=r.style,i=s instanceof Td?s:new Td(s),o=r.dynamicFill??this._canUseTintForStyle(i),a=new jb({style:i,overrideFill:o,skipKerning:r.skipKerning,padding:r.padding,resolution:r.resolution,overrideSize:!1,textureStyle:r.textureStyle}),l=K6(r.chars);return a.ensureCharacters(l.join("")),De.set(`${n}-bitmap`,a),a.once("destroy",()=>De.remove(`${n}-bitmap`)),a}uninstall(e){const r=`${e}-bitmap`,n=De.get(r);n&&n.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const $b=new Z6;class wM extends qP{constructor(e,r){super();const{textures:n,data:s}=e;Object.keys(s.pages).forEach(i=>{const o=s.pages[parseInt(i,10)],a=n[o.id];this.pages.push({texture:a})}),Object.keys(s.chars).forEach(i=>{const o=s.chars[i],{frame:a,source:l,rotate:c}=n[o.page],h=Me.transformRectCoords(o,a,c,new Ft),u=new ve({frame:h,orig:new Ft(0,0,o.width,o.height),source:l,rotate:c});this.chars[i]={id:i.codePointAt(0),xOffset:o.xOffset,yOffset:o.yOffset,xAdvance:o.xAdvance,kerning:o.kerning??{},texture:u}}),this.baseRenderedFontSize=s.fontSize,this.baseMeasurementFontSize=s.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:s.fontSize},this.baseLineOffset=s.baseLineOffset,this.lineHeight=s.lineHeight,this.fontFamily=s.fontFamily,this.distanceField=s.distanceField??{type:"none",range:0},this.url=r}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:r}=this.pages[e];r.destroy(!0)}this.pages=null}static install(e){$b.install(e)}static uninstall(e){$b.uninstall(e)}}const um={test(t){return typeof t=="string"&&t.startsWith("info face=")},parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const u in e){const d=e[u].match(/^[a-z]+/gm)[0],f=e[u].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),p={};for(const m in f){const g=f[m].split("="),y=g[0],v=g[1].replace(/"/gm,""),x=parseFloat(v),_=isNaN(x)?v:x;p[y]=_}r[d].push(p)}const n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[s]=r.info,[i]=r.common,[o]=r.distanceField??[];o&&(n.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),n.fontSize=parseInt(s.size,10),n.fontFamily=s.face,n.lineHeight=parseInt(i.lineHeight,10);const a=r.page;for(let u=0;u<a.length;u++)n.pages.push({id:parseInt(a[u].id,10)||0,file:a[u].file});const l={};n.baseLineOffset=n.lineHeight-parseInt(i.base,10);const c=r.char;for(let u=0;u<c.length;u++){const d=c[u],f=parseInt(d.id,10);let p=d.letter??d.char??String.fromCharCode(f);p==="space"&&(p=" "),l[f]=p,n.chars[p]={id:f,page:parseInt(d.page,10)||0,x:parseInt(d.x,10),y:parseInt(d.y,10),width:parseInt(d.width,10),height:parseInt(d.height,10),xOffset:parseInt(d.xoffset,10),yOffset:parseInt(d.yoffset,10),xAdvance:parseInt(d.xadvance,10),kerning:{}}}const h=r.kerning||[];for(let u=0;u<h.length;u++){const d=parseInt(h[u].first,10),f=parseInt(h[u].second,10),p=parseInt(h[u].amount,10);n.chars[l[f]].kerning[l[d]]=p}return n}},Gb={test(t){const e=t;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(t){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},r=t.getElementsByTagName("info")[0],n=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("distanceField")[0];s&&(e.distanceField={type:s.getAttribute("fieldType"),range:parseInt(s.getAttribute("distanceRange"),10)});const i=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning");e.fontSize=parseInt(r.getAttribute("size"),10),e.fontFamily=r.getAttribute("face"),e.lineHeight=parseInt(n.getAttribute("lineHeight"),10);for(let c=0;c<i.length;c++)e.pages.push({id:parseInt(i[c].getAttribute("id"),10)||0,file:i[c].getAttribute("file")});const l={};e.baseLineOffset=e.lineHeight-parseInt(n.getAttribute("base"),10);for(let c=0;c<o.length;c++){const h=o[c],u=parseInt(h.getAttribute("id"),10);let d=h.getAttribute("letter")??h.getAttribute("char")??String.fromCharCode(u);d==="space"&&(d=" "),l[u]=d,e.chars[d]={id:u,page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xOffset:parseInt(h.getAttribute("xoffset"),10),yOffset:parseInt(h.getAttribute("yoffset"),10),xAdvance:parseInt(h.getAttribute("xadvance"),10),kerning:{}}}for(let c=0;c<a.length;c++){const h=parseInt(a[c].getAttribute("first"),10),u=parseInt(a[c].getAttribute("second"),10),d=parseInt(a[c].getAttribute("amount"),10);e.chars[l[u]].kerning[l[h]]=d}return e}},zb={test(t){return typeof t=="string"&&t.includes("<font>")?Gb.test(Ve.get().parseXML(t)):!1},parse(t){return Gb.parse(Ve.get().parseXML(t))}},Q6=[".xml",".fnt"],J6={extension:{type:ee.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof wM,getCacheableAssets(t,e){const r={};return t.forEach(n=>{r[n]=e,r[`${n}-bitmap`]=e}),r[`${e.fontFamily}-bitmap`]=e,r}},eG={extension:{type:ee.LoadParser,priority:ui.Normal},name:"loadBitmapFont",id:"bitmap-font",test(t){return Q6.includes(Rr.extname(t).toLowerCase())},async testParse(t){return um.test(t)||zb.test(t)},async parse(t,e,r){const n=um.test(t)?um.parse(t):zb.parse(t),{src:s}=e,{pages:i}=n,o=[],a=n.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let u=0;u<i.length;++u){const d=i[u].file;let f=Rr.join(Rr.dirname(s),d);f=by(f,s),o.push({src:f,data:a})}const l=await r.load(o),c=o.map(u=>l[u.src]);return new wM({data:n,textures:c},s)},async load(t,e){return await(await Ve.get().fetch(t)).text()},async unload(t,e,r){await Promise.all(t.pages.map(n=>r.unload(n.texture.source._sourceOrigin))),t.destroy()}};let tG=class{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}};const rG={extension:{type:ee.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(e=>e instanceof ve),getCacheableAssets:(t,e)=>{const r={};return t.forEach(n=>{e.forEach((s,i)=>{r[n+(i===0?"":i+1)]=s})}),r}};async function bM(t){if("Image"in globalThis)return new Promise(e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const nG={extension:{type:ee.DetectionParser,priority:1},test:async()=>bM("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")},Hb=["png","jpg","jpeg"],sG={extension:{type:ee.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...Hb],remove:async t=>t.filter(e=>!Hb.includes(e))},iG="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Pf(t){return iG?!1:document.createElement("video").canPlayType(t)!==""}const oG={extension:{type:ee.DetectionParser,priority:0},test:async()=>Pf("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")},aG={extension:{type:ee.DetectionParser,priority:0},test:async()=>Pf("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")},lG={extension:{type:ee.DetectionParser,priority:0},test:async()=>Pf("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")},cG={extension:{type:ee.DetectionParser,priority:0},test:async()=>bM("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};let uG=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,n)=>(this._parsersValidated=!1,e[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let s=null,i=null;if((r.parser||r.loadParser)&&(i=this._parserHash[r.parser||r.loadParser],r.loadParser&&Le(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),i||Le(`[Assets] specified load parser "${r.parser||r.loadParser}" not found while loading ${e}`)),!i){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((o=c.test)!=null&&o.call(c,e,r,this))){i=c;break}}if(!i)return Le(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await i.load(e,r,this),n.parser=i;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((a=c.testParse)==null?void 0:a.call(c,s,r,this))&&(s=await c.parse(s,r,this)||s,n.parser=c)}return s})(),n}async load(e,r){this._parsersValidated||this._validateParsers();let n=0;const s={},i=Ad(e),o=on(e,c=>({alias:[c],src:c,data:{}})),a=o.length,l=o.map(async c=>{const h=Rr.toAbsolute(c.src);if(!s[c.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,c)),s[c.src]=await this.promiseCache[h].promise,r&&r(++n/a)}catch(u){throw delete this.promiseCache[h],delete s[c.src],new Error(`[Loader.load] Failed to load ${h}.
${u}`)}});return await Promise.all(l),i?s[o[0].src]:s}async unload(e){const n=on(e,s=>({alias:[s],src:s})).map(async s=>{var a,l;const i=Rr.toAbsolute(s.src),o=this.promiseCache[i];if(o){const c=await o.promise;delete this.promiseCache[i],await((l=(a=o.parser)==null?void 0:a.unload)==null?void 0:l.call(a,c,s,this))}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,r)=>(!r.name&&!r.id?Le("[Assets] parser should have an id"):(e[r.name]||e[r.id])&&Le(`[Assets] parser id conflict "${r.id}"`),e[r.name]=r,r.id&&(e[r.id]=r),e),{})}};function Ga(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function za(t,e){const r=t.split("?")[0],n=Rr.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const hG=".json",dG="application/json",fG={extension:{type:ee.LoadParser,priority:ui.Low},name:"loadJson",id:"json",test(t){return Ga(t,dG)||za(t,hG)},async load(t){return await(await Ve.get().fetch(t)).json()}},pG=".txt",mG="text/plain",gG={name:"loadTxt",id:"text",extension:{type:ee.LoadParser,priority:ui.Low,name:"loadTxt"},test(t){return Ga(t,mG)||za(t,pG)},async load(t){return await(await Ve.get().fetch(t)).text()}},yG=["normal","bold","100","200","300","400","500","600","700","800","900"],xG=[".ttf",".otf",".woff",".woff2"],vG=["font/ttf","font/otf","font/woff","font/woff2"],_G=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function wG(t){const e=Rr.extname(t),s=Rr.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let i=s.length>0;for(const a of s)if(!a.match(_G)){i=!1;break}let o=s.join(" ");return i||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const bG=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function AG(t){return bG.test(t)?t:encodeURI(t)}const SG={extension:{type:ee.LoadParser,priority:ui.Low},name:"loadWebFont",id:"web-font",test(t){return Ga(t,vG)||za(t,xG)},async load(t,e){var n,s,i;const r=Ve.get().getFontFaceSet();if(r){const o=[],a=((n=e.data)==null?void 0:n.family)??wG(t),l=((i=(s=e.data)==null?void 0:s.weights)==null?void 0:i.filter(h=>yG.includes(h)))??["normal"],c=e.data??{};for(let h=0;h<l.length;h++){const u=l[h],d=new FontFace(a,`url(${AG(t)})`,{...c,weight:u});await d.load(),r.add(d),o.push(d)}return De.has(`${a}-and-url`)?De.get(`${a}-and-url`).entries.push({url:t,faces:o}):De.set(`${a}-and-url`,{entries:[{url:t,faces:o}]}),o.length===1?o[0]:o}return Le("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){const e=Array.isArray(t)?t:[t],r=e[0].family,n=De.get(`${r}-and-url`),s=n.entries.find(i=>i.faces.some(o=>e.indexOf(o)!==-1));s.faces=s.faces.filter(i=>e.indexOf(i)===-1),s.faces.length===0&&(n.entries=n.entries.filter(i=>i!==s)),e.forEach(i=>{Ve.get().getFontFaceSet().delete(i)}),n.entries.length===0&&De.remove(`${r}-and-url`)}};function uv(t,e=1){var n;const r=(n=$a.RETINA_PREFIX)==null?void 0:n.exec(t);return r?parseFloat(r[1]):e}function hv(t,e,r){t.label=r,t._sourceOrigin=r;const n=new ve({source:t,label:r}),s=()=>{delete e.promiseCache[r],De.has(r)&&De.remove(r)};return n.source.once("destroy",()=>{e.promiseCache[r]&&(Le("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),s())}),n.once("destroy",()=>{t.destroyed||(Le("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),n}const TG=".svg",EG="image/svg+xml",CG={extension:{type:ee.LoadParser,priority:ui.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return Ga(t,EG)||za(t,TG)},async load(t,e,r){var n;return((n=e.data)==null?void 0:n.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?PG(t):RG(t,e,r,this.config.crossOrigin)},unload(t){t.destroy(!0)}};async function RG(t,e,r,n){var g,y,v;const i=await(await Ve.get().fetch(t)).blob(),o=URL.createObjectURL(i),a=Ve.get().createImage();a.src=o,a.crossOrigin=n,await a.decode(),URL.revokeObjectURL(o);const l=((g=e.data)==null?void 0:g.width)??a.width,c=((y=e.data)==null?void 0:y.height)??a.height,h=((v=e.data)==null?void 0:v.resolution)||uv(t),u=Ve.get().createCanvas(l*h,c*h);u.getContext("2d").drawImage(a,0,0,l*h,c*h);const{parseAsGraphicsContext:f,...p}=e.data??{},m=new ro({resource:u,alphaMode:"premultiply-alpha-on-upload",resolution:h,...p});return hv(m,r,t)}async function PG(t){const r=await(await Ve.get().fetch(t)).text(),n=new Ci;return n.svg(r),n}const MG=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let aa=null,Ly=class{constructor(){aa||(aa=URL.createObjectURL(new Blob([MG],{type:"application/javascript"}))),this.worker=new Worker(aa)}};Ly.revokeObjectURL=function(){aa&&(URL.revokeObjectURL(aa),aa=null)};const IG=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let la=null,AM=class{constructor(){la||(la=URL.createObjectURL(new Blob([IG],{type:"application/javascript"}))),this.worker=new Worker(la)}};AM.revokeObjectURL=function(){la&&(URL.revokeObjectURL(la),la=null)};let Wb=0,hm,kG=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:r}=new Ly;r.addEventListener("message",n=>{r.terminate(),Ly.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,r){var n;return this._run("loadImageBitmap",[e,(n=r==null?void 0:r.data)==null?void 0:n.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){hm===void 0&&(hm=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<hm&&(this._createdWorkers++,e=new AM().worker,e.addEventListener("message",r=>{this._complete(r.data),this._returnWorker(r.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const n=new Promise((s,i)=>{this._queue.push({id:e,arguments:r,resolve:s,reject:i})});return this._next(),n}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const r=this._queue.pop(),n=r.id;this._resolveHash[Wb]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:Wb++,id:n})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager destroyed"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}};const Xb=new kG,NG=[".jpeg",".jpg",".png",".webp",".avif"],FG=["image/jpeg","image/png","image/webp","image/avif"];async function LG(t,e){var s;const r=await Ve.get().fetch(t);if(!r.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${r.status} ${r.statusText}`);const n=await r.blob();return((s=e==null?void 0:e.data)==null?void 0:s.alphaMode)==="premultiplied-alpha"?createImageBitmap(n,{premultiplyAlpha:"none"}):createImageBitmap(n)}const SM={name:"loadTextures",id:"texture",extension:{type:ee.LoadParser,priority:ui.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Ga(t,FG)||za(t,NG)},async load(t,e,r){var i;let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Xb.isImageBitmapSupported()?n=await Xb.loadImageBitmap(t,e):n=await LG(t,e):n=await new Promise((o,a)=>{n=Ve.get().createImage(),n.crossOrigin=this.config.crossOrigin,n.src=t,n.complete?o(n):(n.onload=()=>{o(n)},n.onerror=a)});const s=new ro({resource:n,alphaMode:"premultiply-alpha-on-upload",resolution:((i=e.data)==null?void 0:i.resolution)||uv(t),...e.data});return hv(s,r,t)},unload(t){t.destroy(!0)}},OG=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let dm,fm;function BG(t,e,r){r===void 0&&!e.startsWith("data:")?t.crossOrigin=UG(e):r!==!1&&(t.crossOrigin=typeof r=="string"?r:"anonymous")}function DG(t){return new Promise((e,r)=>{t.addEventListener("canplaythrough",n),t.addEventListener("error",s),t.load();function n(){i(),e()}function s(o){i(),r(o)}function i(){t.removeEventListener("canplaythrough",n),t.removeEventListener("error",s)}})}function UG(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}function VG(){const t=[],e=[];for(const r of OG){const n=Hl.MIME_TYPES[r.substring(1)]||`video/${r.substring(1)}`;Pf(n)&&(t.push(r),e.includes(n)||e.push(n))}return{validVideoExtensions:t,validVideoMime:e}}const jG={name:"loadVideo",id:"video",extension:{type:ee.LoadParser,name:"loadVideo"},test(t){if(!dm||!fm){const{validVideoExtensions:n,validVideoMime:s}=VG();dm=n,fm=s}const e=Ga(t,fm),r=za(t,dm);return e||r},async load(t,e,r){var l,c;const n={...Hl.defaultOptions,resolution:((l=e.data)==null?void 0:l.resolution)||uv(t),alphaMode:((c=e.data)==null?void 0:c.alphaMode)||await AP(),...e.data},s=document.createElement("video"),i={preload:n.autoLoad!==!1?"auto":void 0,"webkit-playsinline":n.playsinline!==!1?"":void 0,playsinline:n.playsinline!==!1?"":void 0,muted:n.muted===!0?"":void 0,loop:n.loop===!0?"":void 0,autoplay:n.autoPlay!==!1?"":void 0};Object.keys(i).forEach(h=>{const u=i[h];u!==void 0&&s.setAttribute(h,u)}),n.muted===!0&&(s.muted=!0),BG(s,t,n.crossorigin);const o=document.createElement("source");let a;if(n.mime)a=n.mime;else if(t.startsWith("data:"))a=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){const h=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();a=Hl.MIME_TYPES[h]||`video/${h}`}return o.src=t,a&&(o.type=a),new Promise(h=>{const u=async()=>{const d=new Hl({...n,resource:s});s.removeEventListener("canplay",u),e.data.preload&&await DG(s),h(hv(d,r,t))};n.preload&&!n.autoPlay&&s.load(),s.addEventListener("canplay",u),s.appendChild(o)})},unload(t){t.destroy(!0)}},TM={extension:{type:ee.ResolveParser,name:"resolveTexture"},test:SM.test,parse:t=>{var e;return{resolution:parseFloat(((e=$a.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}},$G={extension:{type:ee.ResolveParser,priority:-2,name:"resolveJson"},test:t=>$a.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:TM.parse};let GG=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new $a,this.loader=new uG,this.cache=De,this._backgroundLoader=new tG(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var i,o;if(this._initialized){Le("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const r=((i=e.texturePreference)==null?void 0:i.resolution)??1,n=typeof r=="number"?[r]:r,s=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,r){this._initialized||await this.init();const n=Ad(e),s=on(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),i=this.resolver.resolve(s),o=await this._mapLoadToResolve(i,r);return n?o[s[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const s=this.resolver.resolveBundle(e),i={},o=Object.keys(s);let a=0,l=0;const c=()=>{r==null||r(++a/l)},h=o.map(u=>{const d=s[u],f=Object.values(d),p=[...new Set(f.flat())];return l+=p.length,this._mapLoadToResolve(d,c).then(m=>{i[u]=m})});return await Promise.all(h),n?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return De.get(e);const r={};for(let n=0;n<e.length;n++)r[n]=De.get(e[n]);return r}async _mapLoadToResolve(e,r){const n=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const s=await this.loader.load(n,r);this._backgroundLoader.active=!0;const i={};return n.forEach(o=>{const a=s[o.src],l=[o.src];o.alias&&l.push(...o.alias),l.forEach(c=>{i[c]=a}),De.set(l,a)}),i}async unload(e){this._initialized||await this.init();const r=on(e).map(s=>typeof s!="string"?s.src:s),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=on(e);const r=this.resolver.resolveBundle(e),n=Object.keys(r).map(s=>this._unloadFromResolved(r[s]));await Promise.all(n)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(n=>{De.remove(n.src)}),await this.loader.unload(r)}async _detectFormats(e){let r=[];e.preferredFormats&&(r=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?r=await n.add(r):e.skipDetections||(r=await n.remove(r));return r=r.filter((n,s)=>r.indexOf(n)===s),r}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in e).forEach(n=>{r.config[n]=e[n]})})}};const Hi=new GG;Bt.handleByList(ee.LoadParser,Hi.loader.parsers).handleByList(ee.ResolveParser,Hi.resolver.parsers).handleByList(ee.CacheParser,Hi.cache.parsers).handleByList(ee.DetectionParser,Hi.detections);Bt.add(rG,sG,nG,cG,oG,aG,lG,fG,gG,SG,CG,SM,jG,eG,J6,TM,$G);const Yb={loader:ee.LoadParser,resolver:ee.ResolveParser,cache:ee.CacheParser,detection:ee.DetectionParser};Bt.handle(ee.Asset,t=>{const e=t.ref;Object.entries(Yb).filter(([r])=>!!e[r]).forEach(([r,n])=>Bt.add(Object.assign(e[r],{extension:e[r].extension??n})))},t=>{const e=t.ref;Object.keys(Yb).filter(r=>!!e[r]).forEach(r=>Bt.remove(e[r]))});Bt.add(YV,qV);var ft=(t=>(t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping",t))(ft||{});class zG{constructor(e,r=new Array,n=0,s=new DataView(e.buffer)){this.strings=r,this.index=n,this.buffer=s}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){const e=this.buffer.getInt16(this.index);return this.index+=2,e}readInt32(){const e=this.buffer.getInt32(this.index);return this.index+=4,e}readInt(e){let r=this.readByte(),n=r&127;return r&128&&(r=this.readByte(),n|=(r&127)<<7,r&128&&(r=this.readByte(),n|=(r&127)<<14,r&128&&(r=this.readByte(),n|=(r&127)<<21,r&128&&(r=this.readByte(),n|=(r&127)<<28)))),e?n:n>>>1^-(n&1)}readStringRef(){const e=this.readInt(!0);return e==0?null:this.strings[e-1]}readString(){let e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;let r="";for(let n=0;n<e;){const s=this.readUnsignedByte();switch(s>>4){case 12:case 13:r+=String.fromCharCode((s&31)<<6|this.readByte()&63),n+=2;break;case 14:r+=String.fromCharCode((s&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),n+=3;break;default:r+=String.fromCharCode(s),n++}}return r}readFloat(){const e=this.buffer.getFloat32(this.index);return this.index+=4,e}readBoolean(){return this.readByte()!=0}}var j=(t=>(t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add",t))(j||{}),lr=(t=>(t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut",t))(lr||{}),Ln=(t=>(t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent",t))(Ln||{}),Vn=(t=>(t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale",t))(Vn||{}),st=(t=>(t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection",t))(st||{}),fo=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(fo||{}),EM=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(EM||{}),Oy=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Oy||{}),J=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(J||{}),ln=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(ln||{}),W=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(W||{}),ca=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(ca||{}),he=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(he||{}),Y=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(Y||{}),Er=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(Er||{}),Ec=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Ec||{}),ii=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(ii||{}),jr=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(jr||{}),Ri=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Ri||{}),dv=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(dv||{}),$r=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))($r||{}),bt=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(bt||{}),pt=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(pt||{}),jn=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(jn||{});const HG={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},se={ADAPTER:HG,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},WG=nb.default??nb,Ko=WG(globalThis.navigator);se.RETINA_PREFIX=/@([0-9\.]+)x/;se.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var CM={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function i(l,c,h,u,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new s(h,u||l,d),p=r?r+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],h,u;if(this._eventsCount===0)return c;for(u in h=this._events)e.call(h,u)&&c.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},a.prototype.listeners=function(c){var h=r?r+c:c,u=this._events[h];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},a.prototype.listenerCount=function(c){var h=r?r+c:c,u=this._events[h];return u?u.fn?1:u.length:0},a.prototype.emit=function(c,h,u,d,f,p){var m=r?r+c:c;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,x;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,h),!0;case 3:return g.fn.call(g.context,h,u),!0;case 4:return g.fn.call(g.context,h,u,d),!0;case 5:return g.fn.call(g.context,h,u,d,f),!0;case 6:return g.fn.call(g.context,h,u,d,f,p),!0}for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];g.fn.apply(g.context,v)}else{var _=g.length,b;for(x=0;x<_;x++)switch(g[x].once&&this.removeListener(c,g[x].fn,void 0,!0),y){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,h);break;case 3:g[x].fn.call(g[x].context,h,u);break;case 4:g[x].fn.call(g[x].context,h,u,d);break;default:if(!v)for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];g[x].fn.apply(g[x].context,v)}}return!0},a.prototype.on=function(c,h,u){return i(this,c,h,u,!1)},a.prototype.once=function(c,h,u){return i(this,c,h,u,!0)},a.prototype.removeListener=function(c,h,u,d){var f=r?r+c:c;if(!this._events[f])return this;if(!h)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===h&&(!d||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==h||d&&!p[m].once||u&&p[m].context!==u)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var h;return c?(h=r?r+c:c,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(CM);var XG=CM.exports;const Mf=Fc(XG);var fv={exports:{}};fv.exports=If;fv.exports.default=If;function If(t,e,r){r=r||2;var n=e&&e.length,s=n?e[0]*r:t.length,i=RM(t,0,s,r,!0),o=[];if(!i||i.next===i.prev)return o;var a,l,c,h,u,d,f;if(n&&(i=QG(t,e,i,r)),t.length>80*r){a=c=t[0],l=h=t[1];for(var p=r;p<s;p+=r)u=t[p],d=t[p+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?32767/f:0}return Cc(i,o,r,a,l,f,0),o}function RM(t,e,r,n,s){var i,o;if(s===Uy(t,e,r,n)>0)for(i=e;i<r;i+=n)o=qb(i,t[i],t[i+1],o);else for(i=r-n;i>=e;i-=n)o=qb(i,t[i],t[i+1],o);return o&&kf(o,o.next)&&(Pc(o),o=o.next),o}function so(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(kf(r,r.next)||Ke(r.prev,r,r.next)===0)){if(Pc(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function Cc(t,e,r,n,s,i,o){if(t){!o&&i&&n8(t,n,s,i);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,i?qG(t,n,s,i):YG(t)){e.push(l.i/r|0),e.push(t.i/r|0),e.push(c.i/r|0),Pc(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=KG(so(t),e,r),Cc(t,e,r,n,s,i,2)):o===2&&ZG(t,e,r,n,s,i):Cc(so(t),e,r,n,s,i,1);break}}}}function YG(t){var e=t.prev,r=t,n=t.next;if(Ke(e,r,n)>=0)return!1;for(var s=e.x,i=r.x,o=n.x,a=e.y,l=r.y,c=n.y,h=s<i?s<o?s:o:i<o?i:o,u=a<l?a<c?a:c:l<c?l:c,d=s>i?s>o?s:o:i>o?i:o,f=a>l?a>c?a:c:l>c?l:c,p=n.next;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=u&&p.y<=f&&Zo(s,a,i,l,o,c,p.x,p.y)&&Ke(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function qG(t,e,r,n){var s=t.prev,i=t,o=t.next;if(Ke(s,i,o)>=0)return!1;for(var a=s.x,l=i.x,c=o.x,h=s.y,u=i.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=h<u?h<d?h:d:u<d?u:d,m=a>l?a>c?a:c:l>c?l:c,g=h>u?h>d?h:d:u>d?u:d,y=By(f,p,e,r,n),v=By(m,g,e,r,n),x=t.prevZ,_=t.nextZ;x&&x.z>=y&&_&&_.z<=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==s&&x!==o&&Zo(a,h,l,u,c,d,x.x,x.y)&&Ke(x.prev,x,x.next)>=0||(x=x.prevZ,_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==s&&_!==o&&Zo(a,h,l,u,c,d,_.x,_.y)&&Ke(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;x&&x.z>=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==s&&x!==o&&Zo(a,h,l,u,c,d,x.x,x.y)&&Ke(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;_&&_.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==s&&_!==o&&Zo(a,h,l,u,c,d,_.x,_.y)&&Ke(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function KG(t,e,r){var n=t;do{var s=n.prev,i=n.next.next;!kf(s,i)&&PM(s,n,n.next,i)&&Rc(s,i)&&Rc(i,s)&&(e.push(s.i/r|0),e.push(n.i/r|0),e.push(i.i/r|0),Pc(n),Pc(n.next),n=t=i),n=n.next}while(n!==t);return so(n)}function ZG(t,e,r,n,s,i){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&o8(o,a)){var l=MM(o,a);o=so(o,o.next),l=so(l,l.next),Cc(o,e,r,n,s,i,0),Cc(l,e,r,n,s,i,0);return}a=a.next}o=o.next}while(o!==t)}function QG(t,e,r,n){var s=[],i,o,a,l,c;for(i=0,o=e.length;i<o;i++)a=e[i]*n,l=i<o-1?e[i+1]*n:t.length,c=RM(t,a,l,n,!1),c===c.next&&(c.steiner=!0),s.push(i8(c));for(s.sort(JG),i=0;i<s.length;i++)r=e8(s[i],r);return r}function JG(t,e){return t.x-e.x}function e8(t,e){var r=t8(t,e);if(!r)return e;var n=MM(r,t);return so(n,n.next),so(r,r.next)}function t8(t,e){var r=e,n=t.x,s=t.y,i=-1/0,o;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>i&&(i=a,o=r.x<r.next.x?r:r.next,a===n))return o}r=r.next}while(r!==e);if(!o)return null;var l=o,c=o.x,h=o.y,u=1/0,d;r=o;do n>=r.x&&r.x>=c&&n!==r.x&&Zo(s<h?n:i,s,c,h,s<h?i:n,s,r.x,r.y)&&(d=Math.abs(s-r.y)/(n-r.x),Rc(r,t)&&(d<u||d===u&&(r.x>o.x||r.x===o.x&&r8(o,r)))&&(o=r,u=d)),r=r.next;while(r!==l);return o}function r8(t,e){return Ke(t.prev,t,e.prev)<0&&Ke(e.next,t,t.next)<0}function n8(t,e,r,n){var s=t;do s.z===0&&(s.z=By(s.x,s.y,e,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,s8(s)}function s8(t){var e,r,n,s,i,o,a,l,c=1;do{for(r=t,t=null,i=null,o=0;r;){for(o++,n=r,a=0,e=0;e<c&&(a++,n=n.nextZ,!!n);e++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||r.z<=n.z)?(s=r,r=r.nextZ,a--):(s=n,n=n.nextZ,l--),i?i.nextZ=s:t=s,s.prevZ=i,i=s;r=n}i.nextZ=null,c*=2}while(o>1);return t}function By(t,e,r,n,s){return t=(t-r)*s|0,e=(e-n)*s|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function i8(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Zo(t,e,r,n,s,i,o,a){return(s-o)*(e-a)>=(t-o)*(i-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(i-a)>=(s-o)*(n-a)}function o8(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!a8(t,e)&&(Rc(t,e)&&Rc(e,t)&&l8(t,e)&&(Ke(t.prev,t,e.prev)||Ke(t,e.prev,e))||kf(t,e)&&Ke(t.prev,t,t.next)>0&&Ke(e.prev,e,e.next)>0)}function Ke(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function kf(t,e){return t.x===e.x&&t.y===e.y}function PM(t,e,r,n){var s=Vu(Ke(t,e,r)),i=Vu(Ke(t,e,n)),o=Vu(Ke(r,n,t)),a=Vu(Ke(r,n,e));return!!(s!==i&&o!==a||s===0&&Uu(t,r,e)||i===0&&Uu(t,n,e)||o===0&&Uu(r,t,n)||a===0&&Uu(r,e,n))}function Uu(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Vu(t){return t>0?1:t<0?-1:0}function a8(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&PM(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Rc(t,e){return Ke(t.prev,t,t.next)<0?Ke(t,e,t.next)>=0&&Ke(t,t.prev,e)>=0:Ke(t,e,t.prev)<0||Ke(t,t.next,e)<0}function l8(t,e){var r=t,n=!1,s=(t.x+e.x)/2,i=(t.y+e.y)/2;do r.y>i!=r.next.y>i&&r.next.y!==r.y&&s<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function MM(t,e){var r=new Dy(t.i,t.x,t.y),n=new Dy(e.i,e.x,e.y),s=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=s,s.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function qb(t,e,r,n){var s=new Dy(t,e,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Pc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Dy(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}If.deviation=function(t,e,r,n){var s=e&&e.length,i=s?e[0]*r:t.length,o=Math.abs(Uy(t,0,i,r));if(s)for(var a=0,l=e.length;a<l;a++){var c=e[a]*r,h=a<l-1?e[a+1]*r:t.length;o-=Math.abs(Uy(t,c,h,r))}var u=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;u+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function Uy(t,e,r,n){for(var s=0,i=e,o=r-n;i<r;i+=n)s+=(t[o]-t[i])*(t[i+1]+t[o+1]),o=i;return s}If.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,s=0;s<t.length;s++){for(var i=0;i<t[s].length;i++)for(var o=0;o<e;o++)r.vertices.push(t[s][i][o]);s>0&&(n+=t[s-1].length,r.holes.push(n))}return r};var c8=fv.exports;const u8=Fc(c8);var Ed={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Ed.exports;(function(t,e){(function(r){var n=e&&!e.nodeType&&e,s=t&&!t.nodeType&&t,i=typeof kn=="object"&&kn;(i.global===i||i.window===i||i.self===i)&&(r=i);var o,a=2147483647,l=36,c=1,h=26,u=38,d=700,f=72,p=128,m="-",g=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-c,b=Math.floor,A=String.fromCharCode,S;function T(I){throw new RangeError(x[I])}function E(I,L){for(var z=I.length,X=[];z--;)X[z]=L(I[z]);return X}function R(I,L){var z=I.split("@"),X="";z.length>1&&(X=z[0]+"@",I=z[1]),I=I.replace(v,".");var H=I.split("."),oe=E(H,L).join(".");return X+oe}function P(I){for(var L=[],z=0,X=I.length,H,oe;z<X;)H=I.charCodeAt(z++),H>=55296&&H<=56319&&z<X?(oe=I.charCodeAt(z++),(oe&64512)==56320?L.push(((H&1023)<<10)+(oe&1023)+65536):(L.push(H),z--)):L.push(H);return L}function D(I){return E(I,function(L){var z="";return L>65535&&(L-=65536,z+=A(L>>>10&1023|55296),L=56320|L&1023),z+=A(L),z}).join("")}function k(I){return I-48<10?I-22:I-65<26?I-65:I-97<26?I-97:l}function M(I,L){return I+22+75*(I<26)-((L!=0)<<5)}function G(I,L,z){var X=0;for(I=z?b(I/d):I>>1,I+=b(I/L);I>_*h>>1;X+=l)I=b(I/_);return b(X+(_+1)*I/(I+u))}function B(I){var L=[],z=I.length,X,H=0,oe=p,te=f,ie,Re,Se,Te,ue,Ee,Ce,Je,at;for(ie=I.lastIndexOf(m),ie<0&&(ie=0),Re=0;Re<ie;++Re)I.charCodeAt(Re)>=128&&T("not-basic"),L.push(I.charCodeAt(Re));for(Se=ie>0?ie+1:0;Se<z;){for(Te=H,ue=1,Ee=l;Se>=z&&T("invalid-input"),Ce=k(I.charCodeAt(Se++)),(Ce>=l||Ce>b((a-H)/ue))&&T("overflow"),H+=Ce*ue,Je=Ee<=te?c:Ee>=te+h?h:Ee-te,!(Ce<Je);Ee+=l)at=l-Je,ue>b(a/at)&&T("overflow"),ue*=at;X=L.length+1,te=G(H-Te,X,Te==0),b(H/X)>a-oe&&T("overflow"),oe+=b(H/X),H%=X,L.splice(H++,0,oe)}return D(L)}function U(I){var L,z,X,H,oe,te,ie,Re,Se,Te,ue,Ee=[],Ce,Je,at,wn;for(I=P(I),Ce=I.length,L=p,z=0,oe=f,te=0;te<Ce;++te)ue=I[te],ue<128&&Ee.push(A(ue));for(X=H=Ee.length,H&&Ee.push(m);X<Ce;){for(ie=a,te=0;te<Ce;++te)ue=I[te],ue>=L&&ue<ie&&(ie=ue);for(Je=X+1,ie-L>b((a-z)/Je)&&T("overflow"),z+=(ie-L)*Je,L=ie,te=0;te<Ce;++te)if(ue=I[te],ue<L&&++z>a&&T("overflow"),ue==L){for(Re=z,Se=l;Te=Se<=oe?c:Se>=oe+h?h:Se-oe,!(Re<Te);Se+=l)wn=Re-Te,at=l-Te,Ee.push(A(M(Te+wn%at,0))),Re=b(wn/at);Ee.push(A(M(Re,0))),oe=G(z,Je,X==H),z=0,++X}++z,++L}return Ee.join("")}function F(I){return R(I,function(L){return g.test(L)?B(L.slice(4).toLowerCase()):L})}function O(I){return R(I,function(L){return y.test(L)?"xn--"+U(L):L})}if(o={version:"1.4.1",ucs2:{decode:P,encode:D},decode:B,encode:U,toASCII:O,toUnicode:F},n&&s)if(t.exports==n)s.exports=o;else for(S in o)o.hasOwnProperty(S)&&(n[S]=o[S]);else r.punycode=o})(kn)})(Ed,Ed.exports);var h8=Ed.exports,Ha=TypeError;const d8={},f8=Object.freeze(Object.defineProperty({__proto__:null,default:d8},Symbol.toStringTag,{value:"Module"})),p8=yk(f8);var pv=typeof Map=="function"&&Map.prototype,pm=Object.getOwnPropertyDescriptor&&pv?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Cd=pv&&pm&&typeof pm.get=="function"?pm.get:null,Kb=pv&&Map.prototype.forEach,mv=typeof Set=="function"&&Set.prototype,mm=Object.getOwnPropertyDescriptor&&mv?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Rd=mv&&mm&&typeof mm.get=="function"?mm.get:null,Zb=mv&&Set.prototype.forEach,m8=typeof WeakMap=="function"&&WeakMap.prototype,Xl=m8?WeakMap.prototype.has:null,g8=typeof WeakSet=="function"&&WeakSet.prototype,Yl=g8?WeakSet.prototype.has:null,y8=typeof WeakRef=="function"&&WeakRef.prototype,Qb=y8?WeakRef.prototype.deref:null,x8=Boolean.prototype.valueOf,v8=Object.prototype.toString,_8=Function.prototype.toString,w8=String.prototype.match,gv=String.prototype.slice,Ds=String.prototype.replace,b8=String.prototype.toUpperCase,Jb=String.prototype.toLowerCase,IM=RegExp.prototype.test,eA=Array.prototype.concat,In=Array.prototype.join,A8=Array.prototype.slice,tA=Math.floor,Vy=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gm=Object.getOwnPropertySymbols,jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ra=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ql=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ra||"symbol")?Symbol.toStringTag:null,kM=Object.prototype.propertyIsEnumerable,rA=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function nA(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||IM.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-tA(-t):tA(t);if(n!==t){var s=String(n),i=gv.call(e,s.length+1);return Ds.call(s,r,"$&_")+"."+Ds.call(Ds.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ds.call(e,r,"$&_")}var $y=p8,sA=$y.custom,iA=LM(sA)?sA:null,NM={__proto__:null,double:'"',single:"'"},S8={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Nf=function t(e,r,n,s){var i=r||{};if(Kn(i,"quoteStyle")&&!Kn(NM,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Kn(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Kn(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Kn(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Kn(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return BM(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?nA(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?nA(e,c):c}var h=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=h&&h>0&&typeof e=="object")return Gy(e)?"[Array]":"[Object]";var u=$8(i,n);if(typeof s>"u")s=[];else if(OM(s,e)>=0)return"[Circular]";function d(k,M,G){if(M&&(s=A8.call(s),s.push(M)),G){var B={depth:i.depth};return Kn(i,"quoteStyle")&&(B.quoteStyle=i.quoteStyle),t(k,B,n+1,s)}return t(k,i,n+1,s)}if(typeof e=="function"&&!oA(e)){var f=N8(e),p=ju(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+In.call(p,", ")+" }":"")}if(LM(e)){var m=Ra?Ds.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):jy.call(e);return typeof e=="object"&&!Ra?hl(m):m}if(U8(e)){for(var g="<"+Jb.call(String(e.nodeName)),y=e.attributes||[],v=0;v<y.length;v++)g+=" "+y[v].name+"="+FM(T8(y[v].value),"double",i);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+Jb.call(String(e.nodeName))+">",g}if(Gy(e)){if(e.length===0)return"[]";var x=ju(e,d);return u&&!j8(x)?"["+zy(x,u)+"]":"[ "+In.call(x,", ")+" ]"}if(C8(e)){var _=ju(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!kM.call(e,"cause")?"{ ["+String(e)+"] "+In.call(eA.call("[cause]: "+d(e.cause),_),", ")+" }":_.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+In.call(_,", ")+" }"}if(typeof e=="object"&&o){if(iA&&typeof e[iA]=="function"&&$y)return $y(e,{depth:h-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(F8(e)){var b=[];return Kb&&Kb.call(e,function(k,M){b.push(d(M,e,!0)+" => "+d(k,e))}),aA("Map",Cd.call(e),b,u)}if(B8(e)){var A=[];return Zb&&Zb.call(e,function(k){A.push(d(k,e))}),aA("Set",Rd.call(e),A,u)}if(L8(e))return ym("WeakMap");if(D8(e))return ym("WeakSet");if(O8(e))return ym("WeakRef");if(P8(e))return hl(d(Number(e)));if(I8(e))return hl(d(Vy.call(e)));if(M8(e))return hl(x8.call(e));if(R8(e))return hl(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof kn<"u"&&e===kn)return"{ [object globalThis] }";if(!E8(e)&&!oA(e)){var S=ju(e,d),T=rA?rA(e)===Object.prototype:e instanceof Object||e.constructor===Object,E=e instanceof Object?"":"null prototype",R=!T&&ql&&Object(e)===e&&ql in e?gv.call(hi(e),8,-1):E?"Object":"",P=T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",D=P+(R||E?"["+In.call(eA.call([],R||[],E||[]),": ")+"] ":"");return S.length===0?D+"{}":u?D+"{"+zy(S,u)+"}":D+"{ "+In.call(S,", ")+" }"}return String(e)};function FM(t,e,r){var n=r.quoteStyle||e,s=NM[n];return s+t+s}function T8(t){return Ds.call(String(t),/"/g,"&quot;")}function po(t){return!ql||!(typeof t=="object"&&(ql in t||typeof t[ql]<"u"))}function Gy(t){return hi(t)==="[object Array]"&&po(t)}function E8(t){return hi(t)==="[object Date]"&&po(t)}function oA(t){return hi(t)==="[object RegExp]"&&po(t)}function C8(t){return hi(t)==="[object Error]"&&po(t)}function R8(t){return hi(t)==="[object String]"&&po(t)}function P8(t){return hi(t)==="[object Number]"&&po(t)}function M8(t){return hi(t)==="[object Boolean]"&&po(t)}function LM(t){if(Ra)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!jy)return!1;try{return jy.call(t),!0}catch{}return!1}function I8(t){if(!t||typeof t!="object"||!Vy)return!1;try{return Vy.call(t),!0}catch{}return!1}var k8=Object.prototype.hasOwnProperty||function(t){return t in this};function Kn(t,e){return k8.call(t,e)}function hi(t){return v8.call(t)}function N8(t){if(t.name)return t.name;var e=w8.call(_8.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function OM(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function F8(t){if(!Cd||!t||typeof t!="object")return!1;try{Cd.call(t);try{Rd.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function L8(t){if(!Xl||!t||typeof t!="object")return!1;try{Xl.call(t,Xl);try{Yl.call(t,Yl)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function O8(t){if(!Qb||!t||typeof t!="object")return!1;try{return Qb.call(t),!0}catch{}return!1}function B8(t){if(!Rd||!t||typeof t!="object")return!1;try{Rd.call(t);try{Cd.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function D8(t){if(!Yl||!t||typeof t!="object")return!1;try{Yl.call(t,Yl);try{Xl.call(t,Xl)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function U8(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function BM(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return BM(gv.call(t,0,e.maxStringLength),e)+n}var s=S8[e.quoteStyle||"single"];s.lastIndex=0;var i=Ds.call(Ds.call(t,s,"\\$1"),/[\x00-\x1f]/g,V8);return FM(i,"single",e)}function V8(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+b8.call(e.toString(16))}function hl(t){return"Object("+t+")"}function ym(t){return t+" { ? }"}function aA(t,e,r,n){var s=n?zy(r,n):In.call(r,", ");return t+" ("+e+") {"+s+"}"}function j8(t){for(var e=0;e<t.length;e++)if(OM(t[e],`
`)>=0)return!1;return!0}function $8(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=In.call(Array(t.indent+1)," ");else return null;return{base:r,prev:In.call(Array(e+1),r)}}function zy(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+In.call(t,","+r)+`
`+e.prev}function ju(t,e){var r=Gy(t),n=[];if(r){n.length=t.length;for(var s=0;s<t.length;s++)n[s]=Kn(t,s)?e(t[s],t):""}var i=typeof gm=="function"?gm(t):[],o;if(Ra){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var l in t)Kn(t,l)&&(r&&String(Number(l))===l&&l<t.length||Ra&&o["$"+l]instanceof Symbol||(IM.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof gm=="function")for(var c=0;c<i.length;c++)kM.call(t,i[c])&&n.push("["+e(i[c])+"]: "+e(t[i[c]],t));return n}var G8=Nf,z8=Ha,Ff=function(t,e,r){for(var n=t,s;(s=n.next)!=null;n=s)if(s.key===e)return n.next=s.next,r||(s.next=t.next,t.next=s),s},H8=function(t,e){if(t){var r=Ff(t,e);return r&&r.value}},W8=function(t,e,r){var n=Ff(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},X8=function(t,e){return t?!!Ff(t,e):!1},Y8=function(t,e){if(t)return Ff(t,e,!0)},q8=function(){var e,r={assert:function(n){if(!r.has(n))throw new z8("Side channel does not contain "+G8(n))},delete:function(n){var s=e&&e.next,i=Y8(e,n);return i&&s&&s===i&&(e=void 0),!!i},get:function(n){return H8(e,n)},has:function(n){return X8(e,n)},set:function(n,s){e||(e={next:void 0}),W8(e,n,s)}};return r},DM=Object,K8=Error,Z8=EvalError,Q8=RangeError,J8=ReferenceError,ez=SyntaxError,tz=URIError,rz=Math.abs,nz=Math.floor,sz=Math.max,iz=Math.min,oz=Math.pow,az=Math.round,lz=Number.isNaN||function(e){return e!==e},cz=lz,uz=function(e){return cz(e)||e===0?e:e<0?-1:1},hz=Object.getOwnPropertyDescriptor,Sh=hz;if(Sh)try{Sh([],"length")}catch{Sh=null}var UM=Sh,Th=Object.defineProperty||!1;if(Th)try{Th({},"a",{value:1})}catch{Th=!1}var dz=Th,xm,lA;function fz(){return lA||(lA=1,xm=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==s||a.enumerable!==!0)return!1}return!0}),xm}var vm,cA;function pz(){if(cA)return vm;cA=1;var t=typeof Symbol<"u"&&Symbol,e=fz();return vm=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},vm}var _m,uA;function VM(){return uA||(uA=1,_m=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),_m}var wm,hA;function jM(){if(hA)return wm;hA=1;var t=DM;return wm=t.getPrototypeOf||null,wm}var mz="Function.prototype.bind called on incompatible ",gz=Object.prototype.toString,yz=Math.max,xz="[object Function]",dA=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},vz=function(e,r){for(var n=[],s=r||0,i=0;s<e.length;s+=1,i+=1)n[i]=e[s];return n},_z=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},wz=function(e){var r=this;if(typeof r!="function"||gz.apply(r)!==xz)throw new TypeError(mz+r);for(var n=vz(arguments,1),s,i=function(){if(this instanceof s){var h=r.apply(this,dA(n,arguments));return Object(h)===h?h:this}return r.apply(e,dA(n,arguments))},o=yz(0,r.length-n.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(s=Function("binder","return function ("+_z(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,s.prototype=new c,c.prototype=null}return s},bz=wz,Lf=Function.prototype.bind||bz,bm,fA;function yv(){return fA||(fA=1,bm=Function.prototype.call),bm}var Am,pA;function $M(){return pA||(pA=1,Am=Function.prototype.apply),Am}var Az=typeof Reflect<"u"&&Reflect&&Reflect.apply,Sz=Lf,Tz=$M(),Ez=yv(),Cz=Az,Rz=Cz||Sz.call(Ez,Tz),Pz=Lf,Mz=Ha,Iz=yv(),kz=Rz,GM=function(e){if(e.length<1||typeof e[0]!="function")throw new Mz("a function is required");return kz(Pz,Iz,e)},Sm,mA;function Nz(){if(mA)return Sm;mA=1;var t=GM,e=UM,r;try{r=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var n=!!r&&e&&e(Object.prototype,"__proto__"),s=Object,i=s.getPrototypeOf;return Sm=n&&typeof n.get=="function"?t([n.get]):typeof i=="function"?function(a){return i(a==null?a:s(a))}:!1,Sm}var Tm,gA;function Fz(){if(gA)return Tm;gA=1;var t=VM(),e=jM(),r=Nz();return Tm=t?function(s){return t(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:r?function(s){return r(s)}:null,Tm}var Em,yA;function Lz(){if(yA)return Em;yA=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=Lf;return Em=r.call(t,e),Em}var pe,Oz=DM,Bz=K8,Dz=Z8,Uz=Q8,Vz=J8,Pa=ez,ua=Ha,jz=tz,$z=rz,Gz=nz,zz=sz,Hz=iz,Wz=oz,Xz=az,Yz=uz,zM=Function,Cm=function(t){try{return zM('"use strict"; return ('+t+").constructor;")()}catch{}},Mc=UM,qz=dz,Rm=function(){throw new ua},Kz=Mc?function(){try{return arguments.callee,Rm}catch{try{return Mc(arguments,"callee").get}catch{return Rm}}}():Rm,Ao=pz()(),Ct=Fz(),Zz=jM(),Qz=VM(),HM=$M(),Kc=yv(),Po={},Jz=typeof Uint8Array>"u"||!Ct?pe:Ct(Uint8Array),qi={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?pe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?pe:ArrayBuffer,"%ArrayIteratorPrototype%":Ao&&Ct?Ct([][Symbol.iterator]()):pe,"%AsyncFromSyncIteratorPrototype%":pe,"%AsyncFunction%":Po,"%AsyncGenerator%":Po,"%AsyncGeneratorFunction%":Po,"%AsyncIteratorPrototype%":Po,"%Atomics%":typeof Atomics>"u"?pe:Atomics,"%BigInt%":typeof BigInt>"u"?pe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?pe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?pe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?pe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Bz,"%eval%":eval,"%EvalError%":Dz,"%Float16Array%":typeof Float16Array>"u"?pe:Float16Array,"%Float32Array%":typeof Float32Array>"u"?pe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?pe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?pe:FinalizationRegistry,"%Function%":zM,"%GeneratorFunction%":Po,"%Int8Array%":typeof Int8Array>"u"?pe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?pe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?pe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ao&&Ct?Ct(Ct([][Symbol.iterator]())):pe,"%JSON%":typeof JSON=="object"?JSON:pe,"%Map%":typeof Map>"u"?pe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ao||!Ct?pe:Ct(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Oz,"%Object.getOwnPropertyDescriptor%":Mc,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?pe:Promise,"%Proxy%":typeof Proxy>"u"?pe:Proxy,"%RangeError%":Uz,"%ReferenceError%":Vz,"%Reflect%":typeof Reflect>"u"?pe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?pe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ao||!Ct?pe:Ct(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?pe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ao&&Ct?Ct(""[Symbol.iterator]()):pe,"%Symbol%":Ao?Symbol:pe,"%SyntaxError%":Pa,"%ThrowTypeError%":Kz,"%TypedArray%":Jz,"%TypeError%":ua,"%Uint8Array%":typeof Uint8Array>"u"?pe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?pe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?pe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?pe:Uint32Array,"%URIError%":jz,"%WeakMap%":typeof WeakMap>"u"?pe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?pe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?pe:WeakSet,"%Function.prototype.call%":Kc,"%Function.prototype.apply%":HM,"%Object.defineProperty%":qz,"%Object.getPrototypeOf%":Zz,"%Math.abs%":$z,"%Math.floor%":Gz,"%Math.max%":zz,"%Math.min%":Hz,"%Math.pow%":Wz,"%Math.round%":Xz,"%Math.sign%":Yz,"%Reflect.getPrototypeOf%":Qz};if(Ct)try{null.error}catch(t){var eH=Ct(Ct(t));qi["%Error.prototype%"]=eH}var tH=function t(e){var r;if(e==="%AsyncFunction%")r=Cm("async function () {}");else if(e==="%GeneratorFunction%")r=Cm("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Cm("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&Ct&&(r=Ct(s.prototype))}return qi[e]=r,r},xA={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Zc=Lf,Pd=Lz(),rH=Zc.call(Kc,Array.prototype.concat),nH=Zc.call(HM,Array.prototype.splice),vA=Zc.call(Kc,String.prototype.replace),Md=Zc.call(Kc,String.prototype.slice),sH=Zc.call(Kc,RegExp.prototype.exec),iH=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,oH=/\\(\\)?/g,aH=function(e){var r=Md(e,0,1),n=Md(e,-1);if(r==="%"&&n!=="%")throw new Pa("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Pa("invalid intrinsic syntax, expected opening `%`");var s=[];return vA(e,iH,function(i,o,a,l){s[s.length]=a?vA(l,oH,"$1"):o||i}),s},lH=function(e,r){var n=e,s;if(Pd(xA,n)&&(s=xA[n],n="%"+s[0]+"%"),Pd(qi,n)){var i=qi[n];if(i===Po&&(i=tH(n)),typeof i>"u"&&!r)throw new ua("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new Pa("intrinsic "+e+" does not exist!")},xv=function(e,r){if(typeof e!="string"||e.length===0)throw new ua("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ua('"allowMissing" argument must be a boolean');if(sH(/^%?[^%]*%?$/,e)===null)throw new Pa("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=aH(e),s=n.length>0?n[0]:"",i=lH("%"+s+"%",r),o=i.name,a=i.value,l=!1,c=i.alias;c&&(s=c[0],nH(n,rH([0,1],c)));for(var h=1,u=!0;h<n.length;h+=1){var d=n[h],f=Md(d,0,1),p=Md(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Pa("property names with quotes must have matching quotes");if((d==="constructor"||!u)&&(l=!0),s+="."+d,o="%"+s+"%",Pd(qi,o))a=qi[o];else if(a!=null){if(!(d in a)){if(!r)throw new ua("base intrinsic for "+e+" exists, but the property is not available.");return}if(Mc&&h+1>=n.length){var m=Mc(a,d);u=!!m,u&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[d]}else u=Pd(a,d),a=a[d];u&&!l&&(qi[o]=a)}}return a},WM=xv,XM=GM,cH=XM([WM("%String.prototype.indexOf%")]),YM=function(e,r){var n=WM(e,!!r);return typeof n=="function"&&cH(e,".prototype.")>-1?XM([n]):n},uH=xv,Qc=YM,hH=Nf,dH=Ha,_A=uH("%Map%",!0),fH=Qc("Map.prototype.get",!0),pH=Qc("Map.prototype.set",!0),mH=Qc("Map.prototype.has",!0),gH=Qc("Map.prototype.delete",!0),yH=Qc("Map.prototype.size",!0),qM=!!_A&&function(){var e,r={assert:function(n){if(!r.has(n))throw new dH("Side channel does not contain "+hH(n))},delete:function(n){if(e){var s=gH(e,n);return yH(e)===0&&(e=void 0),s}return!1},get:function(n){if(e)return fH(e,n)},has:function(n){return e?mH(e,n):!1},set:function(n,s){e||(e=new _A),pH(e,n,s)}};return r},xH=xv,Of=YM,vH=Nf,$u=qM,_H=Ha,So=xH("%WeakMap%",!0),wH=Of("WeakMap.prototype.get",!0),bH=Of("WeakMap.prototype.set",!0),AH=Of("WeakMap.prototype.has",!0),SH=Of("WeakMap.prototype.delete",!0),TH=So?function(){var e,r,n={assert:function(s){if(!n.has(s))throw new _H("Side channel does not contain "+vH(s))},delete:function(s){if(So&&s&&(typeof s=="object"||typeof s=="function")){if(e)return SH(e,s)}else if($u&&r)return r.delete(s);return!1},get:function(s){return So&&s&&(typeof s=="object"||typeof s=="function")&&e?wH(e,s):r&&r.get(s)},has:function(s){return So&&s&&(typeof s=="object"||typeof s=="function")&&e?AH(e,s):!!r&&r.has(s)},set:function(s,i){So&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new So),bH(e,s,i)):$u&&(r||(r=$u()),r.set(s,i))}};return n}:$u,EH=Ha,CH=Nf,RH=q8,PH=qM,MH=TH,IH=MH||PH||RH,kH=function(){var e,r={assert:function(n){if(!r.has(n))throw new EH("Side channel does not contain "+CH(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,s){e||(e=IH()),e.set(n,s)}};return r},NH=String.prototype.replace,FH=/%20/g,Pm={RFC1738:"RFC1738",RFC3986:"RFC3986"},vv={default:Pm.RFC3986,formatters:{RFC1738:function(t){return NH.call(t,FH,"+")},RFC3986:function(t){return String(t)}},RFC1738:Pm.RFC1738,RFC3986:Pm.RFC3986},LH=vv,Mm=Object.prototype.hasOwnProperty,Oi=Array.isArray,Tn=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),OH=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Oi(n)){for(var s=[],i=0;i<n.length;++i)typeof n[i]<"u"&&s.push(n[i]);r.obj[r.prop]=s}}},KM=function(e,r){for(var n=r&&r.plainObjects?{__proto__:null}:{},s=0;s<e.length;++s)typeof e[s]<"u"&&(n[s]=e[s]);return n},BH=function t(e,r,n){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(Oi(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Mm.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var s=e;return Oi(e)&&!Oi(r)&&(s=KM(e,n)),Oi(e)&&Oi(r)?(r.forEach(function(i,o){if(Mm.call(e,o)){var a=e[o];a&&typeof a=="object"&&i&&typeof i=="object"?e[o]=t(a,i,n):e.push(i)}else e[o]=i}),e):Object.keys(r).reduce(function(i,o){var a=r[o];return Mm.call(i,o)?i[o]=t(i[o],a,n):i[o]=a,i},s)},DH=function(e,r){return Object.keys(r).reduce(function(n,s){return n[s]=r[s],n},e)},UH=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Im=1024,VH=function(e,r,n,s,i){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=Im){for(var c=o.length>=Im?o.slice(l,l+Im):o,h=[],u=0;u<c.length;++u){var d=c.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===LH.RFC1738&&(d===40||d===41)){h[h.length]=c.charAt(u);continue}if(d<128){h[h.length]=Tn[d];continue}if(d<2048){h[h.length]=Tn[192|d>>6]+Tn[128|d&63];continue}if(d<55296||d>=57344){h[h.length]=Tn[224|d>>12]+Tn[128|d>>6&63]+Tn[128|d&63];continue}u+=1,d=65536+((d&1023)<<10|c.charCodeAt(u)&1023),h[h.length]=Tn[240|d>>18]+Tn[128|d>>12&63]+Tn[128|d>>6&63]+Tn[128|d&63]}a+=h.join("")}return a},jH=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],s=0;s<r.length;++s)for(var i=r[s],o=i.obj[i.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],h=o[c];typeof h=="object"&&h!==null&&n.indexOf(h)===-1&&(r.push({obj:o,prop:c}),n.push(h))}return OH(r),e},$H=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},GH=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},zH=function(e,r){return[].concat(e,r)},HH=function(e,r){if(Oi(e)){for(var n=[],s=0;s<e.length;s+=1)n.push(r(e[s]));return n}return r(e)},ZM={arrayToObject:KM,assign:DH,combine:zH,compact:jH,decode:UH,encode:VH,isBuffer:GH,isRegExp:$H,maybeMap:HH,merge:BH},QM=kH,Eh=ZM,Kl=vv,WH=Object.prototype.hasOwnProperty,JM={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},Pn=Array.isArray,XH=Array.prototype.push,eI=function(t,e){XH.apply(t,Pn(e)?e:[e])},YH=Date.prototype.toISOString,wA=Kl.default,wt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Eh.encode,encodeValuesOnly:!1,filter:void 0,format:wA,formatter:Kl.formatters[wA],indices:!1,serializeDate:function(e){return YH.call(e)},skipNulls:!1,strictNullHandling:!1},qH=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},km={},KH=function t(e,r,n,s,i,o,a,l,c,h,u,d,f,p,m,g,y,v){for(var x=e,_=v,b=0,A=!1;(_=_.get(km))!==void 0&&!A;){var S=_.get(e);if(b+=1,typeof S<"u"){if(S===b)throw new RangeError("Cyclic object value");A=!0}typeof _.get(km)>"u"&&(b=0)}if(typeof h=="function"?x=h(r,x):x instanceof Date?x=f(x):n==="comma"&&Pn(x)&&(x=Eh.maybeMap(x,function(I){return I instanceof Date?f(I):I})),x===null){if(o)return c&&!g?c(r,wt.encoder,y,"key",p):r;x=""}if(qH(x)||Eh.isBuffer(x)){if(c){var T=g?r:c(r,wt.encoder,y,"key",p);return[m(T)+"="+m(c(x,wt.encoder,y,"value",p))]}return[m(r)+"="+m(String(x))]}var E=[];if(typeof x>"u")return E;var R;if(n==="comma"&&Pn(x))g&&c&&(x=Eh.maybeMap(x,c)),R=[{value:x.length>0?x.join(",")||null:void 0}];else if(Pn(h))R=h;else{var P=Object.keys(x);R=u?P.sort(u):P}var D=l?String(r).replace(/\./g,"%2E"):String(r),k=s&&Pn(x)&&x.length===1?D+"[]":D;if(i&&Pn(x)&&x.length===0)return k+"[]";for(var M=0;M<R.length;++M){var G=R[M],B=typeof G=="object"&&G&&typeof G.value<"u"?G.value:x[G];if(!(a&&B===null)){var U=d&&l?String(G).replace(/\./g,"%2E"):String(G),F=Pn(x)?typeof n=="function"?n(k,U):k:k+(d?"."+U:"["+U+"]");v.set(e,b);var O=QM();O.set(km,v),eI(E,t(B,F,n,s,i,o,a,l,n==="comma"&&g&&Pn(x)?null:c,h,u,d,f,p,m,g,y,O))}}return E},ZH=function(e){if(!e)return wt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||wt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Kl.default;if(typeof e.format<"u"){if(!WH.call(Kl.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var s=Kl.formatters[n],i=wt.filter;(typeof e.filter=="function"||Pn(e.filter))&&(i=e.filter);var o;if(e.arrayFormat in JM?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=wt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:wt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:wt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:wt.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:wt.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?wt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:wt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:wt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:wt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:wt.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:wt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:wt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:wt.strictNullHandling}},QH=function(t,e){var r=t,n=ZH(e),s,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):Pn(n.filter)&&(i=n.filter,s=i);var o=[];if(typeof r!="object"||r===null)return"";var a=JM[n.arrayFormat],l=a==="comma"&&n.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);for(var c=QM(),h=0;h<s.length;++h){var u=s[h],d=r[u];n.skipNulls&&d===null||eI(o,KH(d,u,a,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var f=o.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},io=ZM,Hy=Object.prototype.hasOwnProperty,bA=Array.isArray,tt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:io.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},JH=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},tI=function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},eW="utf8=%26%2310003%3B",tW="utf8=%E2%9C%93",rW=function(e,r){var n={__proto__:null},s=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=r.parameterLimit===1/0?void 0:r.parameterLimit,o=s.split(r.delimiter,r.throwOnLimitExceeded?i+1:i);if(r.throwOnLimitExceeded&&o.length>i)throw new RangeError("Parameter limit exceeded. Only "+i+" parameter"+(i===1?"":"s")+" allowed.");var a=-1,l,c=r.charset;if(r.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===tW?c="utf-8":o[l]===eW&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var h=o[l],u=h.indexOf("]="),d=u===-1?h.indexOf("="):u+1,f,p;d===-1?(f=r.decoder(h,tt.decoder,c,"key"),p=r.strictNullHandling?null:""):(f=r.decoder(h.slice(0,d),tt.decoder,c,"key"),p=io.maybeMap(tI(h.slice(d+1),r,bA(n[f])?n[f].length:0),function(g){return r.decoder(g,tt.decoder,c,"value")})),p&&r.interpretNumericEntities&&c==="iso-8859-1"&&(p=JH(String(p))),h.indexOf("[]=")>-1&&(p=bA(p)?[p]:p);var m=Hy.call(n,f);m&&r.duplicates==="combine"?n[f]=io.combine(n[f],p):(!m||r.duplicates==="last")&&(n[f]=p)}return n},nW=function(t,e,r,n){var s=0;if(t.length>0&&t[t.length-1]==="[]"){var i=t.slice(0,-1).join("");s=Array.isArray(e)&&e[i]?e[i].length:0}for(var o=n?e:tI(e,r,s),a=t.length-1;a>=0;--a){var l,c=t[a];if(c==="[]"&&r.parseArrays)l=r.allowEmptyArrays&&(o===""||r.strictNullHandling&&o===null)?[]:io.combine([],o);else{l=r.plainObjects?{__proto__:null}:{};var h=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,u=r.decodeDotInKeys?h.replace(/%2E/g,"."):h,d=parseInt(u,10);!r.parseArrays&&u===""?l={0:o}:!isNaN(d)&&c!==u&&String(d)===u&&d>=0&&r.parseArrays&&d<=r.arrayLimit?(l=[],l[d]=o):u!=="__proto__"&&(l[u]=o)}o=l}return o},sW=function(e,r,n,s){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(i),c=l?i.slice(0,l.index):i,h=[];if(c){if(!n.plainObjects&&Hy.call(Object.prototype,c)&&!n.allowPrototypes)return;h.push(c)}for(var u=0;n.depth>0&&(l=a.exec(i))!==null&&u<n.depth;){if(u+=1,!n.plainObjects&&Hy.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;h.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");h.push("["+i.slice(l.index)+"]")}return nW(h,r,n,s)}},iW=function(e){if(!e)return tt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?tt.charset:e.charset,n=typeof e.duplicates>"u"?tt.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:tt.allowDots:!!e.allowDots;return{allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:tt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:tt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:tt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:tt.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:tt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:tt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:tt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:tt.decoder,delimiter:typeof e.delimiter=="string"||io.isRegExp(e.delimiter)?e.delimiter:tt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:tt.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:tt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:tt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:tt.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:tt.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:tt.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},oW=function(t,e){var r=iW(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var n=typeof t=="string"?rW(t,r):t,s=r.plainObjects?{__proto__:null}:{},i=Object.keys(n),o=0;o<i.length;++o){var a=i[o],l=sW(a,n[a],r,typeof t=="string");s=io.merge(s,l,r)}return r.allowSparse===!0?s:io.compact(s)},aW=QH,lW=oW,cW=vv,uW={formats:cW,parse:lW,stringify:aW},hW=h8;function ls(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var dW=/^([a-z0-9.+-]+:)/i,fW=/:[0-9]*$/,pW=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,mW=["<",">",'"',"`"," ","\r",`
`,"	"],gW=["{","}","|","\\","^","`"].concat(mW),Wy=["'"].concat(gW),AA=["%","/","?",";","#"].concat(Wy),SA=["/","?","#"],yW=255,TA=/^[+a-z0-9A-Z_-]{0,63}$/,xW=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,vW={javascript:!0,"javascript:":!0},Xy={javascript:!0,"javascript:":!0},ha={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Yy=uW;function _W(t,e,r){if(t&&typeof t=="object"&&t instanceof ls)return t;var n=new ls;return n.parse(t,e,r),n}ls.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),s=n!==-1&&n<t.indexOf("#")?"?":"#",i=t.split(s),o=/\\/g;i[0]=i[0].replace(o,"/"),t=i.join(s);var a=t;if(a=a.trim(),!r&&t.split("#").length===1){var l=pW.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=Yy.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=dW.exec(a);if(c){c=c[0];var h=c.toLowerCase();this.protocol=h,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var u=a.substr(0,2)==="//";u&&!(c&&Xy[c])&&(a=a.substr(2),this.slashes=!0)}if(!Xy[c]&&(u||c&&!ha[c])){for(var d=-1,f=0;f<SA.length;f++){var p=a.indexOf(SA[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var m,g;d===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",d),g!==-1&&(m=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(m)),d=-1;for(var f=0;f<AA.length;f++){var p=a.indexOf(AA[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var v=this.hostname.split(/\./),f=0,x=v.length;f<x;f++){var _=v[f];if(_&&!_.match(TA)){for(var b="",A=0,S=_.length;A<S;A++)_.charCodeAt(A)>127?b+="x":b+=_[A];if(!b.match(TA)){var T=v.slice(0,f),E=v.slice(f+1),R=_.match(xW);R&&(T.push(R[1]),E.unshift(R[2])),E.length&&(a="/"+E.join(".")+a),this.hostname=T.join(".");break}}}this.hostname.length>yW?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=hW.toASCII(this.hostname));var P=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+P,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!vW[h])for(var f=0,x=Wy.length;f<x;f++){var k=Wy[f];if(a.indexOf(k)!==-1){var M=encodeURIComponent(k);M===k&&(M=escape(k)),a=a.split(k).join(M)}}var G=a.indexOf("#");G!==-1&&(this.hash=a.substr(G),a=a.slice(0,G));var B=a.indexOf("?");if(B!==-1?(this.search=a.substr(B),this.query=a.substr(B+1),e&&(this.query=Yy.parse(this.query)),a=a.slice(0,B)):e&&(this.search="",this.query={}),a&&(this.pathname=a),ha[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",U=this.search||"";this.path=P+U}return this.href=this.format(),this};ls.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,i="";this.host?s=t+this.host:this.hostname&&(s=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(i=Yy.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||i&&"?"+i||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||ha[e])&&s!==!1?(s="//"+(s||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):s||(s=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+s+r+o+n};ls.prototype.resolve=function(t){return this.resolveObject(_W(t,!1,!0)).format()};ls.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new ls;e.parse(t,!1,!0),t=e}for(var r=new ls,n=Object.keys(this),s=0;s<n.length;s++){var i=n[s];r[i]=this[i]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(r[l]=t[l])}return ha[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!ha[t.protocol]){for(var c=Object.keys(t),h=0;h<c.length;h++){var u=c[h];r[u]=t[u]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!Xy[t.protocol]){for(var x=(t.pathname||"").split("/");x.length&&!(t.host=x.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),x[0]!==""&&x.unshift(""),x.length<2&&x.unshift(""),r.pathname=x.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var d=r.pathname||"",f=r.search||"";r.path=d+f}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var p=r.pathname&&r.pathname.charAt(0)==="/",m=t.host||t.pathname&&t.pathname.charAt(0)==="/",g=m||p||r.host&&t.pathname,y=g,v=r.pathname&&r.pathname.split("/")||[],x=t.pathname&&t.pathname.split("/")||[],_=r.protocol&&!ha[r.protocol];if(_&&(r.hostname="",r.port=null,r.host&&(v[0]===""?v[0]=r.host:v.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host=null),g=g&&(x[0]===""||v[0]==="")),m)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,v=x;else if(x.length)v||(v=[]),v.pop(),v=v.concat(x),r.search=t.search,r.query=t.query;else if(t.search!=null){if(_){r.host=v.shift(),r.hostname=r.host;var b=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;b&&(r.auth=b.shift(),r.hostname=b.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!v.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=v.slice(-1)[0],S=(r.host||t.host||v.length>1)&&(A==="."||A==="..")||A==="",T=0,E=v.length;E>=0;E--)A=v[E],A==="."?v.splice(E,1):A===".."?(v.splice(E,1),T++):T&&(v.splice(E,1),T--);if(!g&&!y)for(;T--;T)v.unshift("..");g&&v[0]!==""&&(!v[0]||v[0].charAt(0)!=="/")&&v.unshift(""),S&&v.join("/").substr(-1)!=="/"&&v.push("");var R=v[0]===""||v[0]&&v[0].charAt(0)==="/";if(_){r.hostname=R?"":v.length?v.shift():"",r.host=r.hostname;var b=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;b&&(r.auth=b.shift(),r.hostname=b.shift(),r.host=r.hostname)}return g=g||r.host&&v.length,g&&!R&&v.unshift(""),v.length>0?r.pathname=v.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};ls.prototype.parseHost=function(){var t=this.host,e=fW.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const EA={};function we(t,e,r=3){if(EA[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(n))),EA[e]=!0}function Qr(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function dl(t){return t.split("?")[0].split("#")[0]}function wW(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function bW(t,e,r){return t.replace(new RegExp(wW(e),"g"),r)}function AW(t,e){let r="",n=0,s=-1,i=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),s=a,i=0;continue}}else if(r.length===2||r.length===1){r="",n=0,s=a,i=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${t.slice(s+1,a)}`:r=t.slice(s+1,a),n=a-s-1;s=a,i=0}else o===46&&i!==-1?++i:i=-1}return r}const Xt={toPosix(t){return bW(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){Qr(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if(Qr(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const n=dl(this.toPosix(e??se.ADAPTER.getBaseUrl())),s=dl(this.toPosix(r??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?Xt.join(s,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(Qr(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=AW(t,!1),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return Qr(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(Qr(n),n.length>0)if(e===void 0)e=n;else{const s=t[r-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(Qr(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let n=-1,s=!0;const i=this.getProtocol(t),o=t;t=t.slice(i.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!s){n=a;break}}else s=!1;return n===-1?r?"/":this.isUrl(o)?i+t:i:r&&n===1?"//":i+t.slice(0,n)},rootname(t){Qr(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){Qr(t),e&&Qr(e),t=dl(this.toPosix(t));let r=0,n=-1,s=!0,i;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(i=t.length-1;i>=0;--i){const l=t.charCodeAt(i);if(l===47){if(!s){r=i+1;break}}else a===-1&&(s=!1,a=i+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=i):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(i=t.length-1;i>=0;--i)if(t.charCodeAt(i)===47){if(!s){r=i+1;break}}else n===-1&&(s=!1,n=i+1);return n===-1?"":t.slice(r,n)},extname(t){Qr(t),t=dl(this.toPosix(t));let e=-1,r=0,n=-1,s=!0,i=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!s){r=o+1;break}continue}n===-1&&(s=!1,n=o+1),a===46?e===-1?e=o:i!==1&&(i=1):e!==-1&&(i=-1)}return e===-1||n===-1||i===0||i===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){Qr(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=dl(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let s;e.root=this.rootname(t),n||this.hasProtocol(t)?s=1:s=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,h=0;for(;c>=s;--c){if(r=t.charCodeAt(c),r===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),r===46?i===-1?i=c:h!==1&&(h=1):i!==-1&&(h=-1)}return i===-1||a===-1||h===0||h===1&&i===a-1&&i===o+1?a!==-1&&(o===0&&n?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&n?(e.name=t.slice(1,i),e.base=t.slice(1,a)):(e.name=t.slice(o,i),e.base=t.slice(o,a)),e.ext=t.slice(i,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let Nm;async function SW(){return Nm??(Nm=(async()=>{var i;const t=document.createElement("canvas").getContext("webgl");if(!t)return jr.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return jr.UNPACK;const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const s=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,s),t.deleteFramebuffer(n),t.deleteTexture(r),(i=t.getExtension("WEBGL_lose_context"))==null||i.loseContext(),s[0]<=s[3]?jr.PMA:jr.UNPACK})()),Nm}let Fm;function TW(){return typeof Fm>"u"&&(Fm=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:se.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!se.ADAPTER.getWebGLRenderingContext())return!1;const r=se.ADAPTER.createCanvas();let n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);const s=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,s}catch{return!1}}()),Fm}iP([oP]);const Mo=class Ch{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ch)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,r){const n=typeof e;if(n!==typeof r)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every((s,i)=>s===r[i]);if(e!==null&&r!==null){const s=Object.keys(e),i=Object.keys(r);return s.length!==i.length?!1:s.every(o=>e[o]===r[o])}return e===r}toRgba(){const[e,r,n,s]=this._components;return{r:e,g:r,b:n,a:s}}toRgb(){const[e,r,n]=this._components;return{r:e,g:r,b:n}}toRgbaString(){const[e,r,n]=this.toUint8RgbArray();return`rgba(${e},${r},${n},${this.alpha})`}toUint8RgbArray(e){const[r,n,s]=this._components;return e=e??[],e[0]=Math.round(r*255),e[1]=Math.round(n*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[r,n,s]=this._components;return e[0]=r,e[1]=n,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[r,n,s,i]=Ch.temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=s,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(e,r=!0){return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,r=!0){if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;let n=this._int>>16&255,s=this._int>>8&255,i=this._int&255;return r&&(n=n*e+.5|0,s=s*e+.5|0,i=i*e+.5|0),(e*255<<24)+(n<<16)+(s<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[r,n,s]=this._components;return this._components[0]=Math.round(r*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[r,n,s,i]=this._components;return e[0]=r,e[1]=n,e[2]=s,e[3]=i,e}normalize(e){let r,n,s,i;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;r=(o>>16&255)/255,n=(o>>8&255)/255,s=(o&255)/255,i=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,n,s,i=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,n,s,i=255]=e,r/=255,n/=255,s/=255,i/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Ch.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=tn(e);o.isValid()&&({r,g:n,b:s,a:i}=o.rgba,r/=255,n/=255,s/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=n,this._components[2]=s,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,r,n]=this._components;this._int=(e*255<<16)+(r*255<<8)+(n*255|0)}_clamp(e,r=0,n=1){return typeof e=="number"?Math.min(Math.max(e,r),n):(e.forEach((s,i)=>{e[i]=Math.min(Math.max(s,r),n)}),e)}};Mo.shared=new Mo,Mo.temp=new Mo,Mo.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Wt=Mo;function EW(t,e=[]){return we("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Wt.shared.setValue(t).toRgbArray(e)}function Lm(t){return we("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Wt.shared.setValue(t).toNumber()}function CW(){const t=[],e=[];for(let n=0;n<32;n++)t[n]=n,e[n]=n;t[J.NORMAL_NPM]=J.NORMAL,t[J.ADD_NPM]=J.ADD,t[J.SCREEN_NPM]=J.SCREEN,e[J.NORMAL]=J.NORMAL_NPM,e[J.ADD]=J.ADD_NPM,e[J.SCREEN]=J.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const RW=CW();function rI(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function Id(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function CA(t){return!(t&t-1)&&!!t}function RA(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function Rh(t,e,r){const n=t.length;let s;if(e>=n||r===0)return;r=e+r>n?n-e:r;const i=n-r;for(s=e;s<i;++s)t[s]=t[s+r];t.length=i}function Gu(t){return t===0?0:t<0?-1:1}let PW=0;function Ic(){return++PW}const PA={},Cn=Object.create(null),Es=Object.create(null);function MW(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}function kc(t,e=1){var n;const r=(n=se.RETINA_PREFIX)==null?void 0:n.exec(t);return r?parseFloat(r[1]):e}var Z=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(Z||{});const qy=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},MA=(t,e)=>qy(t).priority??e,ne={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(qy).forEach(e=>{e.type.forEach(r=>{var n,s;return(s=(n=this._removeHandlers)[r])==null?void 0:s.call(n,e)})}),this},add(...t){return t.map(qy).forEach(e=>{e.type.forEach(r=>{var i,o;const n=this._addHandlers,s=this._queue;n[r]?(i=n[r])==null||i.call(n,e):(s[r]=s[r]||[],(o=s[r])==null||o.push(e))})}),this},handle(t,e,r){var o;const n=this._addHandlers,s=this._removeHandlers;if(n[t]||s[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,s[t]=r;const i=this._queue;return i[t]&&((o=i[t])==null||o.forEach(a=>e(a)),delete i[t]),this},handleByMap(t,e){return this.handle(t,r=>{r.name&&(e[r.name]=r.ref)},r=>{r.name&&delete e[r.name]})},handleByList(t,e,r=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((s,i)=>MA(i,r)-MA(s,r)))},n=>{const s=e.indexOf(n.ref);s!==-1&&e.splice(s,1)})}};class IW{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const kW=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function NW(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function FW(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=kW.replace(/%forloop%/gi,NW(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}const Om=0,Bm=1,Dm=2,Um=3,Vm=4,jm=5;class di{constructor(){this.data=0,this.blendMode=J.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Om)}set blend(e){!!(this.data&1<<Om)!==e&&(this.data^=1<<Om)}get offsets(){return!!(this.data&1<<Bm)}set offsets(e){!!(this.data&1<<Bm)!==e&&(this.data^=1<<Bm)}get culling(){return!!(this.data&1<<Dm)}set culling(e){!!(this.data&1<<Dm)!==e&&(this.data^=1<<Dm)}get depthTest(){return!!(this.data&1<<Um)}set depthTest(e){!!(this.data&1<<Um)!==e&&(this.data^=1<<Um)}get depthMask(){return!!(this.data&1<<jm)}set depthMask(e){!!(this.data&1<<jm)!==e&&(this.data^=1<<jm)}get clockwiseFrontFace(){return!!(this.data&1<<Vm)}set clockwiseFrontFace(e){!!(this.data&1<<Vm)!==e&&(this.data^=1<<Vm)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==J.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new di;return e.depthTest=!1,e.blend=!0,e}}di.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const Ky=[];function nI(t,e){if(!t)return null;let r="";if(typeof t=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(let n=Ky.length-1;n>=0;--n){const s=Ky[n];if(s.test&&s.test(t,r))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class fn{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,n,s,i,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:h}=this;this._aliasCount++;for(let u=0,d=h.length;u<d;u++)h[u][c](e,r,n,s,i,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(fn.prototype,{dispatch:{value:fn.prototype.emit},run:{value:fn.prototype.emit}});class Nc{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new fn("setRealSize"),this.onUpdate=new fn("update"),this.onError=new fn("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class sI extends Nc{constructor(e,r){const{width:n,height:s}=r||{};if(!n||!s)throw new Error("BufferResource width or height invalid");super(n,s),this.data=e,this.unpackAlignment=r.unpackAlignment??4}upload(e,r,n){const s=e.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===jr.UNPACK);const i=r.realWidth,o=r.realHeight;return n.width===i&&n.height===o?s.texSubImage2D(r.target,0,0,0,i,o,r.format,n.type,this.data):(n.width=i,n.height=o,s.texImage2D(r.target,0,n.internalFormat,i,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const LW={scaleMode:Er.NEAREST,alphaMode:jr.NPM},Zy=class Io extends Mf{constructor(e=null,r=null){super(),r=Object.assign({},Io.defaultOptions,r);const{alphaMode:n,mipmap:s,anisotropicLevel:i,scaleMode:o,width:a,height:l,wrapMode:c,format:h,type:u,target:d,resolution:f,resourceOptions:p}=r;e&&!(e instanceof Nc)&&(e=nI(e,p),e.internal=!0),this.resolution=f||se.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=i,this._wrapMode=c,this._scaleMode=o,this.format=h,this.type=u,this.target=d,this.alphaMode=n,this.uid=Ic(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,r){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this}setSize(e,r,n){return n=n||this.resolution,this.setRealSize(e*n,r*n,n)}setRealSize(e,r,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=CA(this.realWidth)&&CA(this.realHeight)}setResolution(e){const r=this.resolution;return r===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*r)/e,this.height=Math.round(this.height*r)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Es[this.cacheId],delete Cn[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Io.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,r,n=se.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let i=null;if(s)i=e;else{if(!e._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Ic()}`}i=e._pixiId}let o=Es[i];if(s&&n&&!o)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return o||(o=new Io(e,r),o.cacheId=i,Io.addToCache(o,i)),o}static fromBuffer(e,r,n,s){e=e||new Float32Array(r*n*4);const i=new sI(e,{width:r,height:n,...s==null?void 0:s.resourceOptions});let o,a;return e instanceof Float32Array?(o=W.RGBA,a=he.FLOAT):e instanceof Int32Array?(o=W.RGBA_INTEGER,a=he.INT):e instanceof Uint32Array?(o=W.RGBA_INTEGER,a=he.UNSIGNED_INT):e instanceof Int16Array?(o=W.RGBA_INTEGER,a=he.SHORT):e instanceof Uint16Array?(o=W.RGBA_INTEGER,a=he.UNSIGNED_SHORT):e instanceof Int8Array?(o=W.RGBA,a=he.BYTE):(o=W.RGBA,a=he.UNSIGNED_BYTE),i.internal=!0,new Io(i,Object.assign({},LW,{type:a,format:o},s))}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Es[r]&&Es[r]!==e&&console.warn(`BaseTexture added to the cache with an id [${r}] that already had an entry`),Es[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Es[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Es[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)delete Es[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}};Zy.defaultOptions={mipmap:ii.POW2,anisotropicLevel:0,scaleMode:Er.LINEAR,wrapMode:Ec.CLAMP,alphaMode:jr.UNPACK,target:ca.TEXTURE_2D,format:W.RGBA,type:he.UNSIGNED_BYTE},Zy._globalBatch=0;let xe=Zy;class Qy{constructor(){this.texArray=null,this.blend=0,this.type=ln.TRIANGLES,this.start=0,this.size=0,this.data=null}}let OW=0,Gt=class iI{constructor(e,r=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=OW++,this.disposeRunner=new fn("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?jn.ELEMENT_ARRAY_BUFFER:jn.ARRAY_BUFFER}get index(){return this.type===jn.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new iI(e)}};class kd{constructor(e,r=0,n=!1,s=he.FLOAT,i,o,a,l=1){this.buffer=e,this.size=r,this.normalized=n,this.type=s,this.stride=i,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,r,n,s,i){return new kd(e,r,n,s,i)}}const BW={Float32Array,Uint32Array,Int32Array,Uint8Array};function DW(t,e){let r=0,n=0;const s={};for(let l=0;l<t.length;l++)n+=e[l],r+=t[l].length;const i=new ArrayBuffer(r*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],h=t[l],u=rI(h);s[u]||(s[u]=new BW[u](i)),o=s[u];for(let d=0;d<h.length;d++){const f=(d/c|0)*n+a,p=d%c;o[f+p]=h[d]}a+=c}return new Float32Array(i)}const IA={5126:4,5123:2,5121:1};let UW=0;const VW={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class oo{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=UW++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new fn("disposeGeometry"),this.refCount=0}addAttribute(e,r,n=0,s=!1,i,o,a,l=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Gt||(r instanceof Array&&(r=new Float32Array(r)),r=new Gt(r));const c=e.split("|");if(c.length>1){for(let u=0;u<c.length;u++)this.addAttribute(c[u],r,n,s,i);return this}let h=this.buffers.indexOf(r);return h===-1&&(this.buffers.push(r),h=this.buffers.length-1),this.attributes[e]=new kd(h,n,s,i,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Gt||(e instanceof Array&&(e=new Uint16Array(e)),e=new Gt(e)),e.type=jn.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],n=new Gt;let s;for(s in this.attributes){const i=this.attributes[s],o=this.buffers[i.buffer];e.push(o.data),r.push(i.size*IA[i.type]/4),i.buffer=0}for(n.data=DW(e,r),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new oo;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new Gt(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];e.attributes[r]=new kd(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=jn.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new oo,n=[],s=[],i=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)s[l]=s[l]||0,s[l]+=o.buffers[l].data.length,i[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new VW[rI(o.buffers[a].data)](s[a]),r.buffers[a]=new Gt(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,i[l]),i[l]+=o.buffers[l].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=jn.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,h=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){h=u;break}for(const u in o.attributes){const d=o.attributes[u];(d.buffer|0)===h&&(l+=d.size*IA[d.type]/4)}for(let u=0;u<e.length;u++){const d=e[u].indexBuffer.data;for(let f=0;f<d.length;f++)r.indexBuffer.data[f+c]+=a;a+=e[u].buffers[h].data.length/l,c+=d.length}}return r}}class oI extends oo{constructor(e=!1){super(),this._buffer=new Gt(null,e,!1),this._indexBuffer=new Gt(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,he.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,he.FLOAT).addAttribute("aColor",this._buffer,4,!0,he.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,he.FLOAT).addIndex(this._indexBuffer)}}const Nd=Math.PI*2,jW=180/Math.PI,$W=Math.PI/180;var Nt=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Nt||{});class ht{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new ht(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}}ht.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const zu=[new ht,new ht,new ht,new ht];class Ae{constructor(e=0,r=0,n=0,s=0){this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(s),this.type=Nt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ae(0,0,0,0)}clone(){return new Ae(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const T=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=T)return!1;const E=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>E}const n=this.left,s=this.right,i=this.top,o=this.bottom;if(s<=n||o<=i)return!1;const a=zu[0].set(e.left,e.top),l=zu[1].set(e.left,e.bottom),c=zu[2].set(e.right,e.top),h=zu[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(r.a*r.d-r.b*r.c);if(u===0||(r.apply(a,a),r.apply(l,l),r.apply(c,c),r.apply(h,h),Math.max(a.x,l.x,c.x,h.x)<=n||Math.min(a.x,l.x,c.x,h.x)>=s||Math.max(a.y,l.y,c.y,h.y)<=i||Math.min(a.y,l.y,c.y,h.y)>=o))return!1;const d=u*(l.y-a.y),f=u*(a.x-l.x),p=d*n+f*i,m=d*s+f*i,g=d*n+f*o,y=d*s+f*o;if(Math.max(p,m,g,y)<=d*a.x+f*a.y||Math.min(p,m,g,y)>=d*h.x+f*h.y)return!1;const v=u*(a.y-c.y),x=u*(c.x-a.x),_=v*n+x*i,b=v*s+x*i,A=v*n+x*o,S=v*s+x*o;return!(Math.max(_,b,A,S)<=v*a.x+x*a.y||Math.min(_,b,A,S)>=v*h.x+x*h.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=s,this.height=Math.max(i-s,0),this}ceil(e=1,r=.001){const n=Math.ceil((this.x+this.width-r)*e)/e,s=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=s-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=s,this.height=i-s,this}}Ae.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Bf{constructor(e=0,r=0,n=0){this.x=e,this.y=r,this.radius=n,this.type=Nt.CIRC}clone(){return new Bf(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let s=this.x-e,i=this.y-r;return s*=s,i*=i,s+i<=n}getBounds(){return new Ae(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Bf.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Df{constructor(e=0,r=0,n=0,s=0){this.x=e,this.y=r,this.width=n,this.height=s,this.type=Nt.ELIP}clone(){return new Df(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,s=(r-this.y)/this.height;return n*=n,s*=s,n+s<=1}getBounds(){return new Ae(this.x-this.width,this.y-this.height,this.width,this.height)}}Df.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class ei{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const n=[];for(let s=0,i=r.length;s<i;s++)n.push(r[s].x,r[s].y);r=n}this.points=r,this.type=Nt.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new ei(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let n=!1;const s=this.points.length/2;for(let i=0,o=s-1;i<s;o=i++){const a=this.points[i*2],l=this.points[i*2+1],c=this.points[o*2],h=this.points[o*2+1];l>r!=h>r&&e<(c-a)*((r-l)/(h-l))+a&&(n=!n)}return n}}ei.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class Uf{constructor(e=0,r=0,n=0,s=0,i=20){this.x=e,this.y=r,this.width=n,this.height=s,this.radius=i,this.type=Nt.RREC}clone(){return new Uf(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let s=e-(this.x+n),i=r-(this.y+n);const o=n*n;if(s*s+i*i<=o||(s=e-(this.x+this.width-n),s*s+i*i<=o)||(i=r-(this.y+this.height-n),s*s+i*i<=o)||(s=e-(this.x+n),s*s+i*i<=o))return!0}return!1}}Uf.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class ot{constructor(e=1,r=0,n=0,s=1,i=0,o=0){this.array=null,this.a=e,this.b=r,this.c=n,this.d=s,this.tx=i,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,n,s,i,o){return this.a=e,this.b=r,this.c=n,this.d=s,this.tx=i,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,r){r=r||new ht;const n=e.x,s=e.y;return r.x=this.a*n+this.c*s+this.tx,r.y=this.b*n+this.d*s+this.ty,r}applyInverse(e,r){r=r||new ht;const n=1/(this.a*this.d+this.c*-this.b),s=e.x,i=e.y;return r.x=this.d*n*s+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*i+-this.b*n*s+(-this.ty*this.a+this.tx*this.b)*n,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),s=this.a,i=this.c,o=this.tx;return this.a=s*r-this.b*n,this.b=s*n+this.b*r,this.c=i*r-this.d*n,this.d=i*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(e){const r=this.a,n=this.b,s=this.c,i=this.d;return this.a=e.a*r+e.b*s,this.b=e.a*n+e.b*i,this.c=e.c*r+e.d*s,this.d=e.c*n+e.d*i,this.tx=e.tx*r+e.ty*s+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this}setTransform(e,r,n,s,i,o,a,l,c){return this.a=Math.cos(a+c)*i,this.b=Math.sin(a+c)*i,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(n*this.a+s*this.c),this.ty=r-(n*this.b+s*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,s=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,n=this.b,s=this.c,i=this.d,o=e.pivot,a=-Math.atan2(-s,i),l=Math.atan2(n,r),c=Math.abs(a+l);return c<1e-5||Math.abs(Nd-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(s*s+i*i),e.position.x=this.tx+(o.x*r+o.y*s),e.position.y=this.ty+(o.x*n+o.y*i),e}invert(){const e=this.a,r=this.b,n=this.c,s=this.d,i=this.tx,o=e*s-r*n;return this.a=s/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-s*i)/o,this.ty=-(e*this.ty-r*i)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new ot;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new ot}static get TEMP_MATRIX(){return new ot}}ot.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Pi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Mi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ii=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ki=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Jy=[],aI=[],Hu=Math.sign;function GW(){for(let t=0;t<16;t++){const e=[];Jy.push(e);for(let r=0;r<16;r++){const n=Hu(Pi[t]*Pi[r]+Ii[t]*Mi[r]),s=Hu(Mi[t]*Pi[r]+ki[t]*Mi[r]),i=Hu(Pi[t]*Ii[r]+Ii[t]*ki[r]),o=Hu(Mi[t]*Ii[r]+ki[t]*ki[r]);for(let a=0;a<16;a++)if(Pi[a]===n&&Mi[a]===s&&Ii[a]===i&&ki[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new ot;e.set(Pi[t],Mi[t],Ii[t],ki[t],0,0),aI.push(e)}}GW();const We={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Pi[t],uY:t=>Mi[t],vX:t=>Ii[t],vY:t=>ki[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>Jy[t][e],sub:(t,e)=>Jy[t][We.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?We.S:We.N:Math.abs(e)*2<=Math.abs(t)?t>0?We.E:We.W:e>0?t>0?We.SE:We.SW:t>0?We.NE:We.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const s=aI[We.inv(e)];s.tx=r,s.ty=n,t.append(s)}};class Us{constructor(e,r,n=0,s=0){this._x=n,this._y=s,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new Us(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Us.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const e0=class{constructor(){this.worldTransform=new ot,this.localTransform=new ot,this.position=new Us(this.onChange,this,0,0),this.scale=new Us(this.onChange,this,1,1),this.pivot=new Us(this.onChange,this,0,0),this.skew=new Us(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};e0.IDENTITY=new e0;let Vf=e0;Vf.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var zW=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,HW=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function kA(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function $m(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function lI(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return $m(2*e);case"bvec3":return $m(3*e);case"bvec4":return $m(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const da=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],WW={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},XW={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function YW(t,e){var n;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in t.uniforms){const i=e[s];if(!i){((n=t.uniforms[s])==null?void 0:n.group)===!0&&(t.uniforms[s].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const o=t.uniforms[s];let a=!1;for(let l=0;l<da.length;l++)if(da[l].test(i,o)){r.push(da[l].code(s,o)),a=!0;break}if(!a){const l=(i.size===1&&!i.isArray?WW:XW)[i.type].replace("location",`ud["${s}"].location`);r.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const cI={};let To=cI;function qW(){if(To===cI||To!=null&&To.isContextLost()){const t=se.ADAPTER.createCanvas();let e;se.PREFER_ENV>=fo.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),To=e}return To}let Wu;function KW(){if(!Wu){Wu=$r.MEDIUM;const t=qW();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(Wu=e.precision?$r.HIGH:$r.MEDIUM)}}return Wu}function NA(t,e){const r=t.getShaderSource(e).split(`
`).map((c,h)=>`${h}: ${c}`),n=t.getShaderInfoLog(e),s=n.split(`
`),i={},o=s.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!i[c]?(i[c]=!0,!0):!1),a=[""];o.forEach(c=>{r[c-1]=`%c${r[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=r.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function ZW(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||NA(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||NA(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const QW={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function uI(t){return QW[t]}let Xu=null;const FA={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function hI(t,e){if(!Xu){const r=Object.keys(FA);Xu={};for(let n=0;n<r.length;++n){const s=r[n];Xu[t[s]]=FA[s]}}return Xu[e]}function LA(t,e,r){if(t.substring(0,9)!=="precision"){let n=e;return e===$r.HIGH&&r!==$r.HIGH&&(n=$r.MEDIUM),`precision ${n} float;
${t}`}else if(r!==$r.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let fl;function JW(){if(typeof fl=="boolean")return fl;try{fl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{fl=!1}return fl}let eX=0;const Yu={},t0=class ko{constructor(e,r,n="pixi-shader",s={}){this.extra={},this.id=eX++,this.vertexSrc=e||ko.defaultVertexSrc,this.fragmentSrc=r||ko.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Yu[n]?(Yu[n]++,n+=`-${Yu[n]}`):Yu[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=LA(this.vertexSrc,ko.defaultVertexPrecision,$r.HIGH),this.fragmentSrc=LA(this.fragmentSrc,ko.defaultFragmentPrecision,KW())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return HW}static get defaultFragmentSrc(){return zW}static from(e,r,n){const s=e+r;let i=PA[s];return i||(PA[s]=i=new ko(e,r,n)),i}};t0.defaultVertexPrecision=$r.HIGH,t0.defaultFragmentPrecision=Ko.apple.device?$r.HIGH:$r.MEDIUM;let Vs=t0,tX=0;class pn{constructor(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=tX++,this.static=!!r,this.ubo=!!n,e instanceof Gt?(this.buffer=e,this.buffer.type=jn.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Gt(new Float32Array(1)),this.buffer.type=jn.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,n){if(!this.ubo)this.uniforms[e]=new pn(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,n){return new pn(e,r,n)}static uboFrom(e,r){return new pn(e,r??!0,!0)}}class Wa{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof pn?this.uniformGroup=r:this.uniformGroup=new pn(r):this.uniformGroup=new pn({}),this.disposeRunner=new fn("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const n in r.uniforms){const s=r.uniforms[n];if(s.group===!0&&this.checkUniformExists(e,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,n){const s=Vs.from(e,r);return new Wa(s,n)}}class rX{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=i;this.defaultGroupCache[e]=pn.from({uSamplers:n},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${e}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Vs(this.vertexSrc,s)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new ot,default:this.defaultGroupCache[e]};return new Wa(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class r0{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function nX(){return!Ko.apple.device}function sX(t){let e=!0;const r=se.ADAPTER.getNavigator();if(Ko.tablet||Ko.phone){if(Ko.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(Ko.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?t:4}class dI{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var iX=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,oX=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Tl=class Jr extends dI{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=oI,this.vertexSize=6,this.state=di.for2d(),this.size=Jr.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??sX(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??nX(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return we("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return oX}static get defaultFragmentTemplate(){return iX}setShaderGenerator({vertex:e=Jr.defaultVertexSrc,fragment:r=Jr.defaultFragmentTemplate}={}){this.shaderGenerator=new rX(e,r)}contextChange(){const e=this.renderer.gl;se.PREFER_ENV===fo.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Jr.defaultMaxTextures),this.maxTextures=FW(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:r}=Jr,n=this.size/4,s=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new Qy);for(;r.length<s;)r.push(new r0);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:r}=this,n=Jr._textureArrayPool,s=this.renderer.batch,i=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++xe._globalBatch,l=0,c=n[0],h=0;s.copyBoundTextures(i,r);for(let u=0;u<this._bufferSize;++u){const d=e[u];e[u]=null,d._batchEnabled!==a&&(c.count>=r&&(s.boundArray(c,i,a,r),this.buildDrawCalls(c,h,u),h=u,c=n[++l],++a),d._batchEnabled=a,d.touched=o,c.elements[c.count++]=d)}c.count>0&&(s.boundArray(c,i,a,r),this.buildDrawCalls(c,h,this._bufferSize),++l,++a);for(let u=0;u<i.length;u++)i[u]=null;xe._globalBatch=a}buildDrawCalls(e,r,n){const{_bufferedElements:s,_attributeBuffer:i,_indexBuffer:o,vertexSize:a}=this,l=Jr._drawCallPool;let c=this._dcIndex,h=this._aIndex,u=this._iIndex,d=l[c];d.start=this._iIndex,d.texArray=e;for(let f=r;f<n;++f){const p=s[f],m=p._texture.baseTexture,g=RW[m.alphaMode?1:0][p.blendMode];s[f]=null,r<f&&d.blend!==g&&(d.size=u-d.start,r=f,d=l[++c],d.texArray=e,d.start=u),this.packInterleavedGeometry(p,i,o,h,u),h+=p.vertexData.length/2*a,u+=p.indices.length,d.blend=g}r<n&&(d.size=u-d.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=u}bindAndClearTexArray(e){const r=this.renderer.texture;for(let n=0;n<e.count;n++)r.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:r,_indexBuffer:n}=this;Jr.canUploadSameBuffer?(e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:r,state:n}=this.renderer,s=Jr._drawCallPool;let i=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:c,start:h,blend:u}=s[o];i!==a&&(i=a,this.bindAndClearTexArray(a)),this.state.blendMode=u,n.set(this.state),r.drawElements(l,c,r.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Jr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const r=Id(Math.ceil(e/8)),n=RA(r),s=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._aBuffers[s];return i||(this._aBuffers[s]=i=new IW(s*this.vertexSize*4)),i}getIndexBuffer(e){const r=Id(Math.ceil(e/12)),n=RA(r),s=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(s)),i}packInterleavedGeometry(e,r,n,s,i){const{uint32View:o,float32View:a}=r,l=s/this.vertexSize,c=e.uvs,h=e.indices,u=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=Wt.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let m=0;m<u.length;m+=2)a[s++]=u[m],a[s++]=u[m+1],a[s++]=c[m],a[s++]=c[m+1],o[s++]=p,a[s++]=d;for(let m=0;m<h.length;m++)n[i++]=l+h[m]}};Tl.defaultBatchSize=4096,Tl.extension={name:"batch",type:Z.RendererPlugin},Tl._drawCallPool=[],Tl._textureArrayPool=[];let Ni=Tl;ne.add(Ni);var aX=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,lX=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const n0=class El extends Wa{constructor(e,r,n){const s=Vs.from(e||El.defaultVertexSrc,r||El.defaultFragmentSrc);super(s,n),this.padding=0,this.resolution=El.defaultResolution,this.multisample=El.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new di}apply(e,r,n,s,i){e.applyFilter(this,r,n,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return lX}static get defaultFragmentSrc(){return aX}};n0.defaultResolution=1,n0.defaultMultisample=pt.NONE;let Qo=n0;class Fd{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Wt(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:s}=e,i=n??r;i!==void 0&&(this.color=i),this.alpha=s}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Fd.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Fd.extension={type:[Z.RendererSystem,Z.CanvasRendererSystem],name:"background"};ne.add(Fd);class fI{constructor(e){this.renderer=e,this.emptyRenderer=new dI(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:n}=this.renderer.texture;for(let s=r-1;s>=0;--s)e[s]=n[s]||null,e[s]&&(e[s]._batchLocation=s)}boundArray(e,r,n,s){const{elements:i,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const h=i[c],u=h._batchLocation;if(u>=0&&u<s&&r[u]===h){o[c]=u;continue}for(;l<s;){const d=r[l];if(d&&d._batchEnabled===n&&d._batchLocation===l){l++;continue}o[c]=l,h._batchLocation=l,r[l]=h;break}}}destroy(){this.renderer=null}}fI.extension={type:Z.RendererSystem,name:"batch"};ne.add(fI);let OA=0;class Ld{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=OA++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=OA++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let n;if(se.PREFER_ENV>=fo.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Ld.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Ld.extension={type:Z.RendererSystem,name:"context"};ne.add(Ld);class s0{constructor(e,r){if(this.width=Math.round(e),this.height=Math.round(r),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new fn("disposeFramebuffer"),this.multisample=pt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new xe(null,{scaleMode:Er.NEAREST,resolution:1,mipmap:ii.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new xe(null,{scaleMode:Er.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ii.OFF,format:W.DEPTH_COMPONENT,type:he.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!e||!r)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const s=this.colorTextures[n],i=s.resolution;s.setSize(e/i,r/i)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class pI extends xe{constructor(e={}){if(typeof e=="number"){const r=arguments[0],n=arguments[1],s=arguments[2],i=arguments[3];e={width:r,height:n,scaleMode:s,resolution:i}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=pt.NONE),super(null,e),this.mipmap=ii.OFF,this.valid=!0,this._clear=new Wt([0,0,0,0]),this.framebuffer=new s0(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class xs extends Nc{constructor(e){const r=e,n=r.naturalWidth||r.videoWidth||r.displayWidth||r.width,s=r.naturalHeight||r.videoHeight||r.displayHeight||r.height;super(n,s),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,n){n===void 0&&!r.startsWith("data:")?e.crossOrigin=MW(r):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,r,n,s){const i=e.gl,o=r.realWidth,a=r.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===jr.UNPACK),!this.noSubImage&&r.target===i.TEXTURE_2D&&n.width===o&&n.height===a?i.texSubImage2D(i.TEXTURE_2D,0,0,0,r.format,n.type,s):(n.width=o,n.height=a,i.texImage2D(r.target,0,n.internalFormat,r.format,n.type,s)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class mI extends xs{constructor(e,r){if(r=r||{},typeof e=="string"){const n=new Image;xs.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??se.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,n)=>{const s=this.source;this.url=s.src;const i=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?r(this.process()):r(this))};s.complete&&s.src?i():(s.onload=i,s.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(s=>s.blob()).then(s=>r(s,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===jr.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,n,this.bitmap),!this.preserveBitmap){let s=!0;const i=r._glTextures;for(const o in i){const a=i[o];if(a!==n&&a.dirtyId!==r.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class _v{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,n){const s=r.width,i=r.height;if(n){const o=e.width/2/s,a=e.height/2/i,l=e.x/s+o,c=e.y/i+a;n=We.add(n,We.NW),this.x0=l+o*We.uX(n),this.y0=c+a*We.uY(n),n=We.add(n,2),this.x1=l+o*We.uX(n),this.y1=c+a*We.uY(n),n=We.add(n,2),this.x2=l+o*We.uX(n),this.y2=c+a*We.uY(n),n=We.add(n,2),this.x3=l+o*We.uX(n),this.y3=c+a*We.uY(n)}else this.x0=e.x/s,this.y0=e.y/i,this.x1=(e.x+e.width)/s,this.y1=e.y/i,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/i,this.x3=e.x/s,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}_v.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const BA=new _v;function qu(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class ae extends Mf{constructor(e,r,n,s,i,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new Ae(0,0,1,1)),e instanceof ae&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=BA,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(i||0),i===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ht(o.x,o.y):new ht(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r!=null&&r.url&&Cn[r.url]&&ae.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ae.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var s;const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),n=new ae(this.baseTexture,!this.noFrame&&e,r,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===BA&&(this._uvs=new _v),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},n=se.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let i=null;if(s)i=e;else if(e instanceof xe){if(!e.cacheId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${Ic()}`,xe.addToCache(e,e.cacheId)}i=e.cacheId}else{if(!e._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Ic()}`}i=e._pixiId}let o=Cn[i];if(s&&n&&!o)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return!o&&!(e instanceof xe)?(r.resolution||(r.resolution=kc(e)),o=new ae(new xe(e,r)),o.baseTexture.cacheId=i,xe.addToCache(o.baseTexture,i),ae.addToCache(o,i)):!o&&e instanceof xe&&(o=new ae(e),ae.addToCache(o,i)),o}static fromURL(e,r){const n=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),s=ae.from(e,Object.assign({resourceOptions:n},r),!1),i=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):i.load().then(()=>Promise.resolve(s))}static fromBuffer(e,r,n,s){return new ae(xe.fromBuffer(e,r,n,s))}static fromLoader(e,r,n,s){const i=new xe(e,Object.assign({scaleMode:xe.defaultOptions.scaleMode,resolution:kc(r)},s)),{resource:o}=i;o instanceof mI&&(o.url=r);const a=new ae(i);return n||(n=r),xe.addToCache(a.baseTexture,n),ae.addToCache(a,n),n!==r&&(xe.addToCache(a.baseTexture,r),ae.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Cn[r]&&Cn[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),Cn[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Cn[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Cn[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)Cn[e.textureCacheIds[r]]===e&&delete Cn[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:n,width:s,height:i}=e,o=r+s>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${r} + ${s} = ${r+s} > ${this.baseTexture.width}`,h=`Y: ${n} + ${i} = ${n+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${h}`)}this.valid=s&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ae._EMPTY||(ae._EMPTY=new ae(new xe),qu(ae._EMPTY),qu(ae._EMPTY.baseTexture)),ae._EMPTY}static get WHITE(){if(!ae._WHITE){const e=se.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),ae._WHITE=new ae(xe.from(e)),qu(ae._WHITE),qu(ae._WHITE.baseTexture)}return ae._WHITE}}class jf extends ae{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,n=!0){const s=this.baseTexture.resolution,i=Math.round(e*s)/s,o=Math.round(r*s)/s;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new jf(new pI(e))}}class gI{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,n=pt.NONE){const s=new pI(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new jf(s)}getOptimalTexture(e,r,n=1,s=pt.NONE){let i;e=Math.max(Math.ceil(e*n-1e-6),1),r=Math.max(Math.ceil(r*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=Id(e),r=Id(r),i=((e&65535)<<16|r&65535)>>>0,s>1&&(i+=s*4294967296)):i=s>1?-s:-1,this.texturePool[i]||(this.texturePool[i]=[]);let o=this.texturePool[i].pop();return o||(o=this.createTexture(e,r,s)),o.filterPoolKey=i,o.setResolution(n),o}getFilterTexture(e,r,n){const s=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||pt.NONE);return s.filterFrame=e.filterFrame,s}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}gI.SCREEN_KEY=-1;class cX extends oo{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class uX extends oo{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Gt(this.vertices),this.uvBuffer=new Gt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+r.width/e.width,this.uvs[3]=s,this.uvs[4]=n+r.width/e.width,this.uvs[5]=s+r.height/e.height,this.uvs[6]=n,this.uvs[7]=s+r.height/e.height,n=r.x,s=r.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+r.width,this.vertices[3]=s,this.vertices[4]=n+r.width,this.vertices[5]=s+r.height,this.vertices[6]=n,this.vertices[7]=s+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class hX{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=pt.NONE,this.sourceFrame=new Ae,this.destinationFrame=new Ae,this.bindingSourceFrame=new Ae,this.bindingDestinationFrame=new Ae,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ku=[new ht,new ht,new ht,new ht],Gm=new ot;class yI{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new gI,this.statePool=[],this.quad=new cX,this.quadUv=new uX,this.tempRect=new Ae,this.activeState={},this.globalUniforms=new pn({outputFrame:new Ae,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const n=this.renderer,s=this.defaultFilterStack,i=this.statePool.pop()||new hX,o=n.renderTexture;let a,l;if(o.current){const g=o.current;a=g.resolution,l=g.multisample}else a=n.resolution,l=n.multisample;let c=r[0].resolution||a,h=r[0].multisample??l,u=r[0].padding,d=r[0].autoFit,f=r[0].legacy??!0;for(let g=1;g<r.length;g++){const y=r[g];c=Math.min(c,y.resolution||a),h=Math.min(h,y.multisample??l),u=this.useMaxPadding?Math.max(u,y.padding):u+y.padding,d=d&&y.autoFit,f=f||(y.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),s.push(i),i.resolution=c,i.multisample=h,i.legacy=f,i.target=e,i.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),i.sourceFrame.pad(u);const p=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Gm.copyFrom(n.projection.transform).invert(),p),d?(i.sourceFrame.fit(p),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(p)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,c,h),i.filters=r,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=i.sourceFrame.width,m.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(o.sourceFrame),i.bindingDestinationFrame.copyFrom(o.destinationFrame),i.transform=n.projection.transform,n.projection.transform=null,o.bind(i.renderTexture,i.sourceFrame,m),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;const s=this.globalUniforms.uniforms;s.outputFrame=r.sourceFrame,s.resolution=r.resolution;const i=s.inputSize,o=s.inputPixel,a=s.inputClamp;if(i[0]=r.destinationFrame.width,i[1]=r.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*r.resolution),o[1]=Math.round(i[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*i[2]-.5*o[2],a[3]=r.sourceFrame.height*i[3]-.5*o[3],r.legacy){const c=s.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,l.renderTexture,Ri.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let c=r.renderTexture,h=this.getOptimalFilterTexture(c.width,c.height,r.resolution);h.filterFrame=c.filterFrame;let u=0;for(u=0;u<n.length-1;++u){u===1&&r.multisample>1&&(h=this.getOptimalFilterTexture(c.width,c.height,r.resolution),h.filterFrame=c.filterFrame),n[u].apply(this,c,h,Ri.CLEAR,r);const d=c;c=h,h=d}n[u].apply(this,c,l.renderTexture,Ri.BLEND,r),u>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(h)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=Ri.CLEAR){const{renderTexture:n,state:s}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=s.stateId&1||this.forceClear;(r===Ri.CLEAR||r===Ri.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,n,s){const i=this.renderer;i.state.set(e.state),this.bindAndClear(n,s),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(ln.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(ln.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:n,destinationFrame:s}=this.activeState,{orig:i}=r._texture,o=e.set(s.width,0,0,s.height,n.x,n.y),a=r.worldTransform.copyTo(ot.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/i.width,1/i.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,n=1,s=pt.NONE){return this.texturePool.getOptimalTexture(e,r,n,s)}getFilterTexture(e,r,n){if(typeof e=="number"){const i=e;e=r,r=i}e=e||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||pt.NONE);return s.filterFrame=e.filterFrame,s}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const n=Ku[0],s=Ku[1],i=Ku[2],o=Ku[3];n.set(r.left,r.top),s.set(r.left,r.bottom),i.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(n,n),e.apply(s,s),e.apply(i,i),e.apply(o,o);const a=Math.min(n.x,s.x,i.x,o.x),l=Math.min(n.y,s.y,i.y,o.y),c=Math.max(n.x,s.x,i.x,o.x),h=Math.max(n.y,s.y,i.y,o.y);r.x=a,r.y=l,r.width=c-a,r.height=h-l}roundFrame(e,r,n,s,i){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(i){const{a:o,b:a,c:l,d:c}=i;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}i=i?Gm.copyFrom(i):Gm.identity(),i.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.transformAABB(i,e),e.ceil(r),this.transformAABB(i.invert(),e)}}}yI.extension={type:Z.RendererSystem,name:"filter"};ne.add(yI);class dX{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=pt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const fX=new Ae;class xI{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new s0(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ae,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;se.PREFER_ENV===fo.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=s=>r.drawBuffersWEBGL(s):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,n=0){const{gl:s}=this;if(e){const i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=n),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const o=r.width>>n,a=r.height>>n,l=o/r.width;this.setViewport(r.x*l,r.y*l,o,a)}else{const o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,n,s){const i=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),s=Math.round(s),(i.width!==n||i.height!==s||i.x!==e||i.y!==r)&&(i.x=e,i.y=r,i.width=n,i.height=s,this.gl.viewport(e,r,n,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,n,s,i=Oy.COLOR|Oy.DEPTH){const{gl:o}=this;o.clearColor(e,r,n,s),o.clear(i)}initFramebuffer(e){const{gl:r}=this,n=new dX(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){r.bindRenderbuffer(r.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=r.DEPTH_STENCIL:e.depth&&e.stencil?o=r.DEPTH24_STENCIL8:e.depth?o=r.DEPTH_COMPONENT24:o=r.STENCIL_INDEX8,n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,o,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,o,e.width,e.height)}const s=e.colorTextures;let i=s.length;r.drawBuffers||(i=Math.min(i,1));for(let o=0;o<i;o++){const a=s[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:n}=this,s=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures;let o=i.length;n.drawBuffers||(o=Math.min(o,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?s.msaaBuffer=s.msaaBuffer||n.createRenderbuffer():s.msaaBuffer&&(n.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=i[l],h=c.parentTextureArray||c;this.renderer.texture.bind(h,0),l===0&&s.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,s.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,s.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,c.target,h._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,r)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||n.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH_STENCIL):e.depth&&e.stencil?(l=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH24_STENCIL8):e.depth?(l=n.DEPTH_ATTACHMENT,c=n.DEPTH_COMPONENT24):(l=n.STENCIL_ATTACHMENT,c=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,s.stencil),s.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,c,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,c,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,l,n.RENDERBUFFER,s.stencil)}else s.stencil&&(n.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let n=pt.NONE;if(e<=1||r===null)return n;for(let s=0;s<r.length;s++)if(r[s]<=e){n=r[s];break}return n===1&&(n=pt.NONE),n}blit(e,r,n){const{current:s,renderer:i,gl:o,CONTEXT_UID:a}=this;if(i.context.webGLVersion!==2||!s)return;const l=s.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const h=s.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new s0(s.width,s.height),l.blitFramebuffer.addColorTexture(0,h)),e=l.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}r||(r=fX,r.width=s.width,r.height=s.height),n||(n=r);const c=r.width===n.width&&r.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,r){const n=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),r||(s.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&s.deleteRenderbuffer(n.msaaBuffer),n.stencil&&s.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,s=e.height,i=this.gl,o=r.stencil=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=i.DEPTH_STENCIL_ATTACHMENT,l=i.DEPTH_STENCIL):e.depth?(a=i.DEPTH_STENCIL_ATTACHMENT,l=i.DEPTH24_STENCIL8):(a=i.STENCIL_ATTACHMENT,l=i.STENCIL_INDEX8),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,l,n,s):i.renderbufferStorage(i.RENDERBUFFER,l,n,s),i.framebufferRenderbuffer(i.FRAMEBUFFER,a,i.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ae}destroy(){this.renderer=null}}xI.extension={type:Z.RendererSystem,name:"framebuffer"};ne.add(xI);const zm={5126:4,5123:2,5121:1};class vI{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;se.PREFER_ENV===fo.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=s=>n.bindVertexArrayOES(s),e.deleteVertexArray=s=>n.deleteVertexArrayOES(s)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(s,i)=>n.vertexAttribDivisorANGLE(s,i),e.drawElementsInstanced=(s,i,o,a,l)=>n.drawElementsInstancedANGLE(s,i,o,a,l),e.drawArraysInstanced=(s,i,o,a)=>n.drawArraysInstancedANGLE(s,i,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let s=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},i=!0);const o=s[r.program.id]||this.initGeometryVao(e,r,i);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const s=e.buffers[n];r.update(s)}}checkCompatibility(e,r){const n=e.attributes,s=r.attributeData;for(const i in s)if(!n[i])throw new Error(`shader and geometry incompatible, geometry missing the "${i}" attribute`)}getSignature(e,r){const n=e.attributes,s=r.attributeData,i=["g",e.id];for(const o in n)s[o]&&i.push(o,s[o].location);return i.join("-")}initGeometryVao(e,r,n=!0){const s=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[i]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let h=c[l];if(h)return c[a.id]=h,h;const u=e.buffers,d=e.attributes,f={},p={};for(const m in u)f[m]=0,p[m]=0;for(const m in d)!d[m].size&&a.attributeData[m]?d[m].size=a.attributeData[m].size:d[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[m].buffer]+=d[m].size*zm[d[m].type];for(const m in d){const g=d[m],y=g.size;g.stride===void 0&&(f[g.buffer]===y*zm[g.type]?g.stride=0:g.stride=f[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=y*zm[g.type])}h=s.createVertexArray(),s.bindVertexArray(h);for(let m=0;m<u.length;m++){const g=u[m];o.bind(g),n&&g._glBuffers[i].refCount++}return this.activateVao(e,a),c[a.id]=h,c[l]=h,s.bindVertexArray(null),o.unbind(jn.ARRAY_BUFFER),h}disposeGeometry(e,r){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,i=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let l=0;l<i.length;l++){const c=i[l]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!r&&o.dispose(i[l],r))}if(!r){for(const l in n)if(l[0]==="g"){const c=n[l];this._activeVao===c&&this.unbind(),s.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)}activateVao(e,r){const n=this.gl,s=this.CONTEXT_UID,i=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let l=null;for(const c in a){const h=a[c],u=o[h.buffer],d=u._glBuffers[s];if(r.attributeData[c]){l!==d&&(i.bind(u),l=d);const f=r.attributeData[c].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)n.vertexAttribDivisor(f,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,n,s){const{gl:i}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?i.UNSIGNED_SHORT:i.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(e,r||o.indexBuffer.data.length,l,(n||0)*a,s||1):i.drawElements(e,r||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(e,n,r||o.getSize(),s||1):i.drawArrays(e,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}vI.extension={type:Z.RendererSystem,name:"geometry"};ne.add(vI);const DA=new ot;class _I{constructor(e,r){this._texture=e,this.mapCoord=new ot,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const n=this.mapCoord;for(let s=0;s<e.length;s+=2){const i=e[s],o=e[s+1];r[s]=i*n.a+o*n.c+n.tx,r[s+1]=i*n.b+o*n.d+n.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const s=r.orig,i=r.trim;i&&(DA.set(s.width/i.width,0,0,s.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(DA));const o=r.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(r._frame.x+l+c)/o.width,a[1]=(r._frame.y+l+c)/o.height,a[2]=(r._frame.x+r._frame.width-l+c)/o.width,a[3]=(r._frame.y+r._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var pX=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,mX=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class gX extends Qo{constructor(e,r,n){let s=null;typeof e!="string"&&r===void 0&&n===void 0&&(s=e,e=void 0,r=void 0,n=void 0),super(e||mX,r||pX,n),this.maskSprite=s,this.maskMatrix=new ot}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,n,s){const i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new _I(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,r,n,s))}}class yX{constructor(e=null){this.type=bt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Qo.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=bt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class wI{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let n=r;if(!n.isMaskData){const i=this.maskDataPool.pop()||new yX;i.pooled=!0,i.maskObject=r,n=i}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(s),n._colorMask=s?s._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==bt.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case bt.SCISSOR:this.renderer.scissor.push(n);break;case bt.STENCIL:this.renderer.stencil.push(n);break;case bt.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case bt.COLOR:this.pushColorMask(n);break}n.type===bt.SPRITE&&this.maskStack.push(n)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case bt.SCISSOR:this.renderer.scissor.pop(r);break;case bt.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case bt.SPRITE:this.popSpriteMask(r);break;case bt.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===bt.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=bt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=bt.SCISSOR:e.type=bt.STENCIL:e.type=bt.COLOR}pushSpriteMask(e){const{maskObject:r}=e,n=e._target;let s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new gX])),s[0].resolution=e.resolution,s[0].multisample=e.multisample,s[0].maskSprite=r;const i=n.filterArea;n.filterArea=r.getBounds(!0),this.renderer.filter.push(n,s),n.filterArea=i,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}wI.extension={type:Z.RendererSystem,name:"mask"};ne.add(wI);class bI{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=e;const s=this.getStackLength();s!==n&&(s===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const UA=new ot,VA=[],AI=class Ph extends bI{constructor(e){super(e),this.glConst=se.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const r=e._scissorRect,{maskObject:n}=e,{renderer:s}=this,i=s.renderTexture,o=n.getBounds(!0,VA.pop()??new Ae);this.roundFrameToPixels(o,i.current?i.current.resolution:s.resolution,i.sourceFrame,i.destinationFrame,s.projection.transform),r&&o.fit(r),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:r,b:n,c:s,d:i}=e;return(Math.abs(n)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(i)>1e-4)}testScissor(e){const{maskObject:r}=e;if(!r.isFastRect||!r.isFastRect()||Ph.isMatrixRotated(r.worldTransform)||Ph.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,r,n,s,i){Ph.isMatrixRotated(i)||(i=i?UA.copyFrom(i):UA.identity(),i.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.renderer.filter.transformAABB(i,e),e.fit(s),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:r}=this.renderer;e._scissorRect||r.enable(r.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:r}=this.renderer;e&&VA.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let r;this.renderer.renderTexture.current?r=e.y:r=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,r,e.width,e.height)}};AI.extension={type:Z.RendererSystem,name:"scissor"};let xX=AI;ne.add(xX);class SI extends bI{constructor(e){super(e),this.glConst=se.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:n}=this.renderer,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const i=e._colorMask;i!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,s,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,i!==0&&(e._colorMask=i,n.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=n?n._colorMask:15;s!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(n._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}SI.extension={type:Z.RendererSystem,name:"stencil"};ne.add(SI);class TI{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return we("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return we("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return we("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}TI.extension={type:[Z.RendererSystem,Z.CanvasRendererSystem],name:"_plugin"};ne.add(TI);class EI{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ot,this.transform=null}update(e,r,n,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,s),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(e,r,n,s){const i=this.projectionMatrix,o=s?-1:1;i.identity(),i.a=1/r.width*2,i.d=o*(1/r.height*2),i.tx=-1-r.x*i.a,i.ty=-o-r.y*i.d}setTransform(e){}destroy(){this.renderer=null}}EI.extension={type:Z.RendererSystem,name:"projection"};ne.add(EI);const vX=new Vf,jA=new Ae;class CI{constructor(e){this.renderer=e,this._tempMatrix=new ot}generateTexture(e,r){const{region:n,...s}=r||{},i=(n==null?void 0:n.copyTo(jA))||e.getLocalBounds(jA,!0),o=s.resolution||this.renderer.resolution;i.width=Math.max(i.width,1/o),i.height=Math.max(i.height,1/o),s.width=i.width,s.height=i.height,s.resolution=o,s.multisample??(s.multisample=this.renderer.multisample);const a=jf.create(s);this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const l=e.transform;return e.transform=vX,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}CI.extension={type:[Z.RendererSystem,Z.CanvasRendererSystem],name:"textureGenerator"};ne.add(CI);const mi=new Ae,pl=new Ae;class RI{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ae,this.destinationFrame=new Ae,this.viewportFrame=new Ae}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,r,n){const s=this.renderer;this.current=e;let i,o,a;e?(i=e.baseTexture,a=i.resolution,r||(mi.width=e.frame.width,mi.height=e.frame.height,r=mi),n||(pl.x=e.frame.x,pl.y=e.frame.y,pl.width=r.width,pl.height=r.height,n=pl),o=i.framebuffer):(a=s.resolution,r||(mi.width=s._view.screen.width,mi.height=s._view.screen.height,r=mi),n||(n=mi,n.width=r.width,n.height=r.height));const l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,e||(l.y=s.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,r,a,!o),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(e,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=Wt.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const i=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=i.width!==o.width||i.height!==o.height;if(a){let{x:l,y:c,width:h,height:u}=this.viewportFrame;l=Math.round(l),c=Math.round(c),h=Math.round(h),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,h,u)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RI.extension={type:Z.RendererSystem,name:"renderTexture"};ne.add(RI);class _X{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function wX(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const i=e.getActiveAttrib(t,s);if(i.name.startsWith("gl_"))continue;const o=hI(e,i.type),a={type:o,name:i.name,size:uI(o),location:e.getAttribLocation(t,i.name)};r[i.name]=a}return r}function bX(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;s++){const i=e.getActiveUniform(t,s),o=i.name.replace(/\[.*?\]$/,""),a=!!i.name.match(/\[.*?\]$/),l=hI(e,i.type);r[o]={name:o,index:s,type:l,size:i.size,isArray:a,value:lI(l,i.size)}}return r}function AX(t,e){var a;const r=kA(t,t.VERTEX_SHADER,e.vertexSrc),n=kA(t,t.FRAGMENT_SHADER,e.fragmentSrc),s=t.createProgram();t.attachShader(s,r),t.attachShader(s,n);const i=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(i&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(s,i.names,i.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||ZW(t,s,r,n),e.attributeData=wX(s,t),e.uniformData=bX(s,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,h)=>c>h?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,t.bindAttribLocation(s,c,l[c]);t.linkProgram(s)}t.deleteShader(r),t.deleteShader(n);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:t.getUniformLocation(s,l),value:lI(c.type,c.size)}}return new _X(s,o)}function SX(t,e,r,n,s){r.buffer.update(s)}const TX={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},PI={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function EX(t){const e=t.map(i=>({data:i,offset:0,dataLen:0,dirty:0}));let r=0,n=0,s=0;for(let i=0;i<e.length;i++){const o=e[i];if(r=PI[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const a=n%r%16;n+=a,s+=a}n+r>16?(s=Math.ceil(s/16)*16,o.offset=s,s+=r,n=r):(o.offset=s,n+=r,s+=r)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function CX(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort((n,s)=>n.index-s.index),r}function RX(t,e){if(!t.autoManage)return{size:0,syncFunc:SX};const r=CX(t.uniforms,e),{uboElements:n,size:s}=EX(r),i=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],l=t.uniforms[a.data.name],c=a.data.name;let h=!1;for(let u=0;u<da.length;u++){const d=da[u];if(d.codeUbo&&d.test(a.data,l)){i.push(`offset = ${a.offset/4};`,da[u].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const u=uI(a.data.type),d=Math.max(PI[a.data.type]/16,1),f=u/d,p=(4-f%4)%4;i.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const u=TX[a.data.type];i.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${u};
                `)}}return i.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",i.join(`
`))}}let PX=0;const Zu={textureCount:0,uboCount:0};class MI{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=PX++}systemCheck(){if(!JW())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,s=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(s.program)),r||(Zu.textureCount=0,Zu.uboCount=0,this.syncUniformGroup(e.uniformGroup,Zu)),s}setUniforms(e){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,r){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))}syncUniforms(e,r,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=YW(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const s=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),s(n.uniformData,e.uniforms,this.renderer,Zu,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(e,r,n){const{gl:s}=this.renderer;this.renderer.buffer.bind(e.buffer);const i=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,s.uniformBlockBinding(r.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=RX(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return r.uniformGroups[e.id]=a.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,n){const s=e.uniforms,i=[`${n}-`];for(const o in s)i.push(o),r[o]&&i.push(r[o].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,n=e.program,s=AX(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}MI.extension={type:Z.RendererSystem,name:"shader"};ne.add(MI);class Od{constructor(e){this.renderer=e}run(e){const{renderer:r}=this;r.runners.init.emit(r.options),e.hello&&console.log(`PixiJS 7.4.3 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}Od.defaultOptions={hello:!1},Od.extension={type:[Z.RendererSystem,Z.CanvasRendererSystem],name:"startup"};ne.add(Od);function MX(t,e=[]){return e[J.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.ADD]=[t.ONE,t.ONE],e[J.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.NONE]=[0,0],e[J.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[J.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[J.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[J.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[J.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[J.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[J.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[J.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[J.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[J.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[J.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const IX=0,kX=1,NX=2,FX=3,LX=4,OX=5,II=class i0{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=J.NONE,this._blendEq=!1,this.map=[],this.map[IX]=this.setBlend,this.map[kX]=this.setOffset,this.map[NX]=this.setCullFace,this.map[FX]=this.setDepthTest,this.map[LX]=this.setFrontFace,this.map[OX]=this.setDepthMask,this.checks=[],this.defaultState=new di,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=MX(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let r=this.stateId^e.data,n=0;for(;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r=r>>1,n++;this.stateId=e.data}for(let r=0;r<this.checks.length;r++)this.checks[r](this,e)}forceState(e){e=e||this.defaultState;for(let r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(let r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(i0.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(i0.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const r=this.blendModes[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,r){this.gl.polygonOffset(e,r)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,r){const n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,r){e.setBlendMode(r.blendMode)}static checkPolygonOffset(e,r){e.setPolygonOffset(1,r.polygonOffset)}destroy(){this.gl=null}};II.extension={type:Z.RendererSystem,name:"state"};let BX=II;ne.add(BX);class DX extends Mf{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(s=>e.systems[s]),n=[...r,...Object.keys(e.systems).filter(s=>!r.includes(s))];for(const s of n)this.addSystem(e.systems[s],s)}addRunners(...e){e.forEach(r=>{this.runners[r]=new fn(r)})}addSystem(e,r){const n=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const s in this.runners)this.runners[s].add(n);return this}emitWithCustomOptions(e,r){const n=Object.keys(this._systemsHash);e.items.forEach(s=>{const i=n.find(o=>this._systemsHash[o]===s);s[e.name](r[i])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Cl=class Mh{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Mh.defaultMaxIdle,this.checkCountMax=Mh.defaultCheckCountMax,this.mode=Mh.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==dv.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,r=e.managedTextures;let n=!1;for(let s=0;s<r.length;s++){const i=r[s];i.resource&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),r[s]=null,n=!0)}if(n){let s=0;for(let i=0;i<r.length;i++)r[i]!==null&&(r[s++]=r[i]);r.length=s}}unload(e){const r=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};Cl.defaultMode=dv.AUTO,Cl.defaultMaxIdle=60*60,Cl.defaultCheckCountMax=60*10,Cl.extension={type:Z.RendererSystem,name:"textureGC"};let Fi=Cl;ne.add(Fi);class Hm{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=he.UNSIGNED_BYTE,this.internalFormat=W.RGBA,this.samplerType=0}}function UX(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:Y.FLOAT,[t.RGBA]:Y.FLOAT,[t.ALPHA]:Y.FLOAT,[t.LUMINANCE]:Y.FLOAT,[t.LUMINANCE_ALPHA]:Y.FLOAT,[t.R8]:Y.FLOAT,[t.R8_SNORM]:Y.FLOAT,[t.RG8]:Y.FLOAT,[t.RG8_SNORM]:Y.FLOAT,[t.RGB8]:Y.FLOAT,[t.RGB8_SNORM]:Y.FLOAT,[t.RGB565]:Y.FLOAT,[t.RGBA4]:Y.FLOAT,[t.RGB5_A1]:Y.FLOAT,[t.RGBA8]:Y.FLOAT,[t.RGBA8_SNORM]:Y.FLOAT,[t.RGB10_A2]:Y.FLOAT,[t.RGB10_A2UI]:Y.FLOAT,[t.SRGB8]:Y.FLOAT,[t.SRGB8_ALPHA8]:Y.FLOAT,[t.R16F]:Y.FLOAT,[t.RG16F]:Y.FLOAT,[t.RGB16F]:Y.FLOAT,[t.RGBA16F]:Y.FLOAT,[t.R32F]:Y.FLOAT,[t.RG32F]:Y.FLOAT,[t.RGB32F]:Y.FLOAT,[t.RGBA32F]:Y.FLOAT,[t.R11F_G11F_B10F]:Y.FLOAT,[t.RGB9_E5]:Y.FLOAT,[t.R8I]:Y.INT,[t.R8UI]:Y.UINT,[t.R16I]:Y.INT,[t.R16UI]:Y.UINT,[t.R32I]:Y.INT,[t.R32UI]:Y.UINT,[t.RG8I]:Y.INT,[t.RG8UI]:Y.UINT,[t.RG16I]:Y.INT,[t.RG16UI]:Y.UINT,[t.RG32I]:Y.INT,[t.RG32UI]:Y.UINT,[t.RGB8I]:Y.INT,[t.RGB8UI]:Y.UINT,[t.RGB16I]:Y.INT,[t.RGB16UI]:Y.UINT,[t.RGB32I]:Y.INT,[t.RGB32UI]:Y.UINT,[t.RGBA8I]:Y.INT,[t.RGBA8UI]:Y.UINT,[t.RGBA16I]:Y.INT,[t.RGBA16UI]:Y.UINT,[t.RGBA32I]:Y.INT,[t.RGBA32UI]:Y.UINT,[t.DEPTH_COMPONENT16]:Y.FLOAT,[t.DEPTH_COMPONENT24]:Y.FLOAT,[t.DEPTH_COMPONENT32F]:Y.FLOAT,[t.DEPTH_STENCIL]:Y.FLOAT,[t.DEPTH24_STENCIL8]:Y.FLOAT,[t.DEPTH32F_STENCIL8]:Y.FLOAT}:e={[t.RGB]:Y.FLOAT,[t.RGBA]:Y.FLOAT,[t.ALPHA]:Y.FLOAT,[t.LUMINANCE]:Y.FLOAT,[t.LUMINANCE_ALPHA]:Y.FLOAT,[t.DEPTH_STENCIL]:Y.FLOAT},e}function VX(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[he.UNSIGNED_BYTE]:{[W.RGBA]:t.RGBA8,[W.RGB]:t.RGB8,[W.RG]:t.RG8,[W.RED]:t.R8,[W.RGBA_INTEGER]:t.RGBA8UI,[W.RGB_INTEGER]:t.RGB8UI,[W.RG_INTEGER]:t.RG8UI,[W.RED_INTEGER]:t.R8UI,[W.ALPHA]:t.ALPHA,[W.LUMINANCE]:t.LUMINANCE,[W.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[he.BYTE]:{[W.RGBA]:t.RGBA8_SNORM,[W.RGB]:t.RGB8_SNORM,[W.RG]:t.RG8_SNORM,[W.RED]:t.R8_SNORM,[W.RGBA_INTEGER]:t.RGBA8I,[W.RGB_INTEGER]:t.RGB8I,[W.RG_INTEGER]:t.RG8I,[W.RED_INTEGER]:t.R8I},[he.UNSIGNED_SHORT]:{[W.RGBA_INTEGER]:t.RGBA16UI,[W.RGB_INTEGER]:t.RGB16UI,[W.RG_INTEGER]:t.RG16UI,[W.RED_INTEGER]:t.R16UI,[W.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[he.SHORT]:{[W.RGBA_INTEGER]:t.RGBA16I,[W.RGB_INTEGER]:t.RGB16I,[W.RG_INTEGER]:t.RG16I,[W.RED_INTEGER]:t.R16I},[he.UNSIGNED_INT]:{[W.RGBA_INTEGER]:t.RGBA32UI,[W.RGB_INTEGER]:t.RGB32UI,[W.RG_INTEGER]:t.RG32UI,[W.RED_INTEGER]:t.R32UI,[W.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[he.INT]:{[W.RGBA_INTEGER]:t.RGBA32I,[W.RGB_INTEGER]:t.RGB32I,[W.RG_INTEGER]:t.RG32I,[W.RED_INTEGER]:t.R32I},[he.FLOAT]:{[W.RGBA]:t.RGBA32F,[W.RGB]:t.RGB32F,[W.RG]:t.RG32F,[W.RED]:t.R32F,[W.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[he.HALF_FLOAT]:{[W.RGBA]:t.RGBA16F,[W.RGB]:t.RGB16F,[W.RG]:t.RG16F,[W.RED]:t.R16F},[he.UNSIGNED_SHORT_5_6_5]:{[W.RGB]:t.RGB565},[he.UNSIGNED_SHORT_4_4_4_4]:{[W.RGBA]:t.RGBA4},[he.UNSIGNED_SHORT_5_5_5_1]:{[W.RGBA]:t.RGB5_A1},[he.UNSIGNED_INT_2_10_10_10_REV]:{[W.RGBA]:t.RGB10_A2,[W.RGBA_INTEGER]:t.RGB10_A2UI},[he.UNSIGNED_INT_10F_11F_11F_REV]:{[W.RGB]:t.R11F_G11F_B10F},[he.UNSIGNED_INT_5_9_9_9_REV]:{[W.RGB]:t.RGB9_E5},[he.UNSIGNED_INT_24_8]:{[W.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[he.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[W.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[he.UNSIGNED_BYTE]:{[W.RGBA]:t.RGBA,[W.RGB]:t.RGB,[W.ALPHA]:t.ALPHA,[W.LUMINANCE]:t.LUMINANCE,[W.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[he.UNSIGNED_SHORT_5_6_5]:{[W.RGB]:t.RGB},[he.UNSIGNED_SHORT_4_4_4_4]:{[W.RGBA]:t.RGBA},[he.UNSIGNED_SHORT_5_5_5_1]:{[W.RGBA]:t.RGBA}},e}class kI{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new xe,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=VX(e),this.samplerTypes=UX(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let s=0;s<r;s++)this.boundTextures[s]=null;this.emptyTextures={};const n=new Hm(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Hm(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(e,r=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<n.length;s++)n[s]===e&&(this.currentLocation!==s&&(r.activeTexture(r.TEXTURE0+s),this.currentLocation=s),r.bindTexture(e.target,this.emptyTextures[e.target].texture),n[s]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:s}=this;if(n)for(let i=e-1;i>=0;--i){const o=r[i];o&&o._glTextures[s].samplerType!==Y.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const r=new Hm(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){var n;r.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,r.samplerType=this.samplerTypes[r.internalFormat]??Y.FLOAT,this.webGLVersion===2&&e.type===he.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){var s;const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(e,r),(s=e.resource)==null?void 0:s.upload(n,e,r))r.samplerType!==Y.FLOAT&&(this.hasIntegerTextures=!0);else{const i=e.realWidth,o=e.realHeight,a=n.gl;(r.width!==i||r.height!==o||r.dirtyId<0)&&(r.width=i,r.height=o,a.texImage2D(e.target,0,r.internalFormat,i,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const s=this.managedTextures.indexOf(e);s!==-1&&Rh(this.managedTextures,s,1)}}updateTextureStyle(e){var n;const r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===ii.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Ec.CLAMP:r.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const n=this.gl;if(r.mipmap&&e.mipmap!==ii.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Er.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===Er.LINEAR){const i=Math.min(e.anisotropicLevel,n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Er.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Er.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}kI.extension={type:Z.RendererSystem,name:"texture"};ne.add(kI);class NI{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,s=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:n,renderer:s}=this;r&&s.shader.bind(r),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:n,CONTEXT_UID:s}=this,i=r.createTransformFeedback();e._glTransformFeedbacks[s]=i,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[s].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[s].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i}disposeTransformFeedback(e,r){const n=e._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&i.dispose(a,r))}n&&(r||s.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}NI.extension={type:Z.RendererSystem,name:"transformFeedback"};ne.add(NI);class Bd{constructor(e){this.renderer=e}init(e){this.screen=new Ae(0,0,e.width,e.height),this.element=e.view||se.ADAPTER.createCanvas(),this.resolution=e.resolution||se.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",n,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var r;e&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Bd.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Bd.extension={type:[Z.RendererSystem,Z.CanvasRendererSystem],name:"_view"};ne.add(Bd);se.PREFER_ENV=fo.WEBGL2;se.STRICT_TEXTURE_CACHE=!1;se.RENDER_OPTIONS={...Ld.defaultOptions,...Fd.defaultOptions,...Bd.defaultOptions,...Od.defaultOptions};Object.defineProperties(se,{WRAP_MODE:{get(){return xe.defaultOptions.wrapMode},set(t){we("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),xe.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return xe.defaultOptions.scaleMode},set(t){we("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),xe.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return xe.defaultOptions.mipmap},set(t){we("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),xe.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return xe.defaultOptions.anisotropicLevel},set(t){we("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),xe.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return we("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Qo.defaultResolution},set(t){Qo.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return we("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Qo.defaultMultisample},set(t){Qo.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return Ni.defaultMaxTextures},set(t){we("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Ni.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return Ni.defaultBatchSize},set(t){we("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Ni.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return Ni.canUploadSameBuffer},set(t){we("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Ni.canUploadSameBuffer=t}},GC_MODE:{get(){return Fi.defaultMode},set(t){we("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Fi.defaultMode=t}},GC_MAX_IDLE:{get(){return Fi.defaultMaxIdle},set(t){we("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Fi.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Fi.defaultCheckCountMax},set(t){we("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Fi.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Vs.defaultVertexPrecision},set(t){we("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Vs.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Vs.defaultFragmentPrecision},set(t){we("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Vs.defaultFragmentPrecision=t}}});var Dd=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Dd||{});class Wm{constructor(e,r=null,n=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=s}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const FI=class _r{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Wm(null,null,1/0),this.deltaMS=1/_r.targetFPMS,this.elapsedMS=1/_r.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,n=Dd.NORMAL){return this._addListener(new Wm(e,r,n))}addOnce(e,r,n=Dd.NORMAL){return this._addListener(new Wm(e,r,n,!0))}_addListener(e){let r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,r){let n=this._head.next;for(;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*_r.targetFPMS;const n=this._head;let s=n.next;for(;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,_r.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!_r._shared){const e=_r._shared=new _r;e.autoStart=!0,e._protected=!0}return _r._shared}static get system(){if(!_r._system){const e=_r._system=new _r;e.autoStart=!0,e._protected=!0}return _r._system}};FI.targetFPMS=.06;let js=FI;Object.defineProperties(se,{TARGET_FPMS:{get(){return js.targetFPMS},set(t){we("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),js.targetFPMS=t}}});class LI{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Dd.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?js.shared:new js,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}LI.extension=Z.Application;ne.add(LI);const jX=[];ne.handleByList(Z.Renderer,jX);class OI{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}r>=pt.HIGH?this.multisample=pt.HIGH:r>=pt.MEDIUM?this.multisample=pt.MEDIUM:r>=pt.LOW?this.multisample=pt.LOW:this.multisample=pt.NONE}destroy(){}}OI.extension={type:Z.RendererSystem,name:"_multisample"};ne.add(OI);class $X{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BI{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,s=e._glBuffers[n]||this.createGLBuffer(e);r.bindBuffer(e.type,s.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:n,CONTEXT_UID:s}=this;if(this.boundBufferBases[r]!==e){const i=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[r]=e,n.bindBufferBase(n.UNIFORM_BUFFER,r,i.buffer)}}bindBufferRange(e,r,n){const{gl:s,CONTEXT_UID:i}=this;n=n||0;const o=e._glBuffers[i]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(e){const{gl:r,CONTEXT_UID:n}=this,s=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==s.updateID)if(s.updateID=e._updateID,r.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const i=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,i)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),n&&(r||s.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:n}=this;return e._glBuffers[r]=new $X(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}BI.extension={type:Z.RendererSystem,name:"buffer"};ne.add(BI);class DI{constructor(e){this.renderer=e}render(e,r){const n=this.renderer;let s,i,o,a;if(r&&(s=r.renderTexture,i=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!s,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(s||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}n.renderTexture.bind(s),n.batch.currentRenderer.start(),(i??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),s&&(r.blit&&n.framebuffer.blit(),s.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}DI.extension={type:Z.RendererSystem,name:"objectRenderer"};ne.add(DI);const Ih=class o0 extends DX{constructor(e){super(),this.type=EM.WEBGL,e=Object.assign({},se.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new pn({projectionMatrix:new ot},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:o0.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in e&&(we("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=o0.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:TW()}render(e,r){this.objectRenderer.render(e,r)}resize(e,r){this._view.resizeView(e,r)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return we("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return we("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return we("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return we("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){we("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return we("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){we("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return we("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,r){return this.textureGenerator.generateTexture(e,r)}};Ih.extension={type:Z.Renderer,priority:1},Ih.__plugins={},Ih.__systems={};let wv=Ih;ne.handleByMap(Z.RendererPlugin,wv.__plugins);ne.handleByMap(Z.RendererSystem,wv.__systems);ne.add(wv);class UI extends Nc{constructor(e,r){const{width:n,height:s}=r||{};super(n,s),this.items=[],this.itemDirtyIds=[];for(let i=0;i<e;i++){const o=new xe;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Nc?this.addResourceAt(e[n],n):this.addResourceAt(nI(e[n],r),n))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(e).then(()=>{const{realWidth:r,realHeight:n}=this.items[0];return this.resize(r,n),this.update(),Promise.resolve(this)}),this._load}}class GX extends UI{constructor(e,r){const{width:n,height:s}=r||{};let i,o;Array.isArray(e)?(i=e,o=e.length):o=e,super(o,{width:n,height:s}),i&&this.initFromArray(i,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=ca.TEXTURE_2D_ARRAY}upload(e,r,n){const{length:s,itemDirtyIds:i,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,s,0,r.format,n.type,null);for(let l=0;l<s;l++){const c=o[l];i[l]<c.dirtyId&&(i[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,r.format,n.type,c.resource.source))}return!0}}class zX extends xs{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const VI=class Rl extends UI{constructor(e,r){const{width:n,height:s,autoLoad:i,linkBaseTexture:o}=r||{};if(e&&e.length!==Rl.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:s});for(let a=0;a<Rl.SIDES;a++)this.items[a].target=ca.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,r),i!==!1&&this.load()}bind(e){super.bind(e),e.target=ca.TEXTURE_CUBE_MAP}addBaseTextureAt(e,r,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[r])throw new Error(`Index ${r} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=ca.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this}upload(e,r,n){const s=this.itemDirtyIds;for(let i=0;i<Rl.SIDES;i++){const o=this.items[i];(s[i]<o.dirtyId||n.dirtyId<r.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[i]=o.dirtyId):s[i]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),s[i]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Rl.SIDES}};VI.SIDES=6;let HX=VI;class Jo extends xs{constructor(e,r){r=r||{};let n,s,i;typeof e=="string"?(n=Jo.EMPTY,s=e,i=!0):(n=e,s=null,i=!1),super(n),this.url=s,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.ownsImageBitmap=r.ownsImageBitmap??i,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const n=await se.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await n.blob();if(this.destroyed)return;const i=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===jr.UNPACK?"premultiply":"none"});if(this.destroyed){i.close();return}this.source=i,this.update(),e(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(e,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Jo._EMPTY=Jo._EMPTY??se.ADAPTER.createCanvas(0,0),Jo._EMPTY}}const a0=class kh extends xs{constructor(e,r){r=r||{},super(se.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=r.scale||1,this._overrideWidth=r.width,this._overrideHeight=r.height,this._resolve=null,this._crossorigin=r.crossorigin,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},kh.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;xs.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=r=>{this._resolve&&(e.onerror=null,this.onError.emit(r))},e.onload=()=>{if(!this._resolve)return;const r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=r*this.scale,i=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/n*r,i=this._overrideHeight||this._overrideWidth/r*n),s=Math.round(s),i=Math.round(i);const o=this.source;o.width=s,o.height=i,o._pixiId=`canvas_${Ic()}`,o.getContext("2d").drawImage(e,0,0,r,n,0,0,s,i),this._resolve(),this._resolve=null}}static getSize(e){const r=kh.SVG_SIZE.exec(e),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,r){return r==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&kh.SVG_XML.test(e)}};a0.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,a0.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let l0=a0;class WX extends xs{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const c0=class u0 extends xs{constructor(e,r){if(r=r||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");r.autoLoad!==!1&&n.setAttribute("preload","auto"),r.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),r.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),r.loop===!0&&n.setAttribute("loop",""),r.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];xs.crossOrigin(n,s,r.crossorigin);for(let i=0;i<e.length;++i){const o=document.createElement("source");let{src:a,mime:l}=e[i];if(a=a||e[i],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const c=a.split("?").shift().toLowerCase(),h=c.slice(c.lastIndexOf(".")+1);l=l||u0.MIME_TYPES[h]||`video/${h}`}o.src=a,l&&(o.type=l),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=r.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),r.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const r=js.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((r,n)=>{this.valid?r(this):(this._resolve=r,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const r=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!r&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(js.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(js.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(js.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||u0.TYPES.includes(r)}};c0.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],c0.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let jI=c0;Ky.push(Jo,mI,zX,jI,WX,l0,sI,HX,GX);function $A(t){switch(t.toLowerCase()){case"nearest":return ir.Nearest;case"linear":return ir.Linear;case"mipmap":return ir.MipMap;case"mipmapnearestnearest":return ir.MipMapNearestNearest;case"mipmaplinearnearest":return ir.MipMapLinearNearest;case"mipmapnearestlinear":return ir.MipMapNearestLinear;case"mipmaplinearlinear":return ir.MipMapLinearLinear;default:throw new Error(`Unknown texture filter ${t}`)}}var ir=(t=>(t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear",t))(ir||{}),Wi=(t=>(t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat",t))(Wi||{});class h0{constructor(){this.size=null,this.names=null,this.values=null,this.renderObject=null}get width(){const e=this.texture;return e.trim?e.trim.width:e.orig.width}get height(){const e=this.texture;return e.trim?e.trim.height:e.orig.height}get u(){return this.texture._uvs.x0}get v(){return this.texture._uvs.y0}get u2(){return this.texture._uvs.x2}get v2(){return this.texture._uvs.y2}get offsetX(){const e=this.texture;return e.trim?e.trim.x:0}get offsetY(){return this.spineOffsetY}get pixiOffsetY(){const e=this.texture;return e.trim?e.trim.y:0}get spineOffsetY(){const e=this.texture;return this.originalHeight-this.height-(e.trim?e.trim.y:0)}get originalWidth(){return this.texture.orig.width}get originalHeight(){return this.texture.orig.height}get x(){return this.texture.frame.x}get y(){return this.texture.frame.y}get rotate(){return this.texture.rotate!==0}get degrees(){return(360-this.texture.rotate*45)%360}}class XX{constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0}}class d0{constructor(e,r,n){this.pages=new Array,this.regions=new Array,e&&this.addSpineAtlas(e,r,n)}addTexture(e,r){const n=this.pages;let s=null;for(let o=0;o<n.length;o++)if(n[o].baseTexture===r.baseTexture){s=n[o];break}if(s===null){s=new GA,s.name="texturePage";const o=r.baseTexture;s.width=o.realWidth,s.height=o.realHeight,s.baseTexture=o,s.minFilter=s.magFilter=ir.Nearest,s.uWrap=Wi.ClampToEdge,s.vWrap=Wi.ClampToEdge,n.push(s)}const i=new zA;return i.name=e,i.page=s,i.texture=r,i.index=-1,this.regions.push(i),i}addTextureHash(e,r){for(const n in e)e.hasOwnProperty(n)&&this.addTexture(r&&n.indexOf(".")!==-1?n.substr(0,n.lastIndexOf(".")):n,e[n])}addSpineAtlas(e,r,n){return this.load(e,r,n)}load(e,r,n){if(r==null)throw new Error("textureLoader cannot be null.");const s=new YX(e),i=new Array(4);let o=null;const a={};let l=null;a.size=()=>{o.width=parseInt(i[1]),o.height=parseInt(i[2])},a.format=()=>{},a.filter=()=>{o.minFilter=$A(i[1]),o.magFilter=$A(i[2])},a.repeat=()=>{i[1].indexOf("x")!=-1&&(o.uWrap=Wi.Repeat),i[1].indexOf("y")!=-1&&(o.vWrap=Wi.Repeat)},a.pma=()=>{o.pma=i[1]=="true"};const c={};c.xy=()=>{l.x=parseInt(i[1]),l.y=parseInt(i[2])},c.size=()=>{l.width=parseInt(i[1]),l.height=parseInt(i[2])},c.bounds=()=>{l.x=parseInt(i[1]),l.y=parseInt(i[2]),l.width=parseInt(i[3]),l.height=parseInt(i[4])},c.offset=()=>{l.offsetX=parseInt(i[1]),l.offsetY=parseInt(i[2])},c.orig=()=>{l.originalWidth=parseInt(i[1]),l.originalHeight=parseInt(i[2])},c.offsets=()=>{l.offsetX=parseInt(i[1]),l.offsetY=parseInt(i[2]),l.originalWidth=parseInt(i[3]),l.originalHeight=parseInt(i[4])},c.rotate=()=>{const d=i[1];let f=0;d.toLocaleLowerCase()=="true"?f=6:d.toLocaleLowerCase()=="false"?f=0:f=(720-parseFloat(d))%360/45,l.rotate=f},c.index=()=>{l.index=parseInt(i[1])};let h=s.readLine();for(;h!=null&&h.trim().length==0;)h=s.readLine();for(;!(h==null||h.trim().length==0||s.readEntry(i,h)==0);)h=s.readLine();const u=()=>{for(;;){if(h==null)return n&&n(this);if(h.trim().length==0)o=null,h=s.readLine();else if(o===null){for(o=new GA,o.name=h.trim();s.readEntry(i,h=s.readLine())!=0;){const d=a[i[0]];d&&d()}this.pages.push(o),r(o.name,d=>{if(d===null)return this.pages.splice(this.pages.indexOf(o),1),n&&n(null);o.baseTexture=d,o.pma&&(d.alphaMode=jr.PMA),d.valid||d.setSize(o.width,o.height),o.setFilters(),(!o.width||!o.height)&&(o.width=d.realWidth,o.height=d.realHeight,(!o.width||!o.height)&&console.log(`ERROR spine atlas page ${o.name}: meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)`)),u()});break}else{l=new XX;const d=new zA;d.name=h,d.page=o;let f=null,p=null;for(;;){const _=s.readEntry(i,h=s.readLine());if(_==0)break;const b=c[i[0]];if(b)b();else{f==null&&(f=[],p=[]),f.push(i[0]);const A=[];for(let S=0;S<_;S++)A.push(parseInt(i[S+1]));p.push(A)}}l.originalWidth==0&&l.originalHeight==0&&(l.originalWidth=l.width,l.originalHeight=l.height);const m=o.baseTexture.resolution;l.x/=m,l.y/=m,l.width/=m,l.height/=m,l.originalWidth/=m,l.originalHeight/=m,l.offsetX/=m,l.offsetY/=m;const g=l.rotate%4!==0,y=new Ae(l.x,l.y,g?l.height:l.width,g?l.width:l.height),v=new Ae(0,0,l.originalWidth,l.originalHeight),x=new Ae(l.offsetX,l.originalHeight-l.height-l.offsetY,l.width,l.height);d.texture=new ae(d.page.baseTexture,y,v,x,l.rotate),d.index=l.index,d.texture.updateUvs(),this.regions.push(d)}}};u()}findRegion(e){for(let r=0;r<this.regions.length;r++)if(this.regions[r].name==e)return this.regions[r];return null}dispose(){for(let e=0;e<this.pages.length;e++)this.pages[e].baseTexture.dispose()}}class YX{constructor(e){this.index=0,this.lines=e.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(e,r){if(r==null||(r=r.trim(),r.length==0))return 0;const n=r.indexOf(":");if(n==-1)return 0;e[0]=r.substr(0,n).trim();for(let s=1,i=n+1;;s++){const o=r.indexOf(",",i);if(o==-1)return e[s]=r.substr(i).trim(),s;if(e[s]=r.substr(i,o-i).trim(),i=o+1,s==4)return 4}}}class GA{constructor(){this.minFilter=ir.Nearest,this.magFilter=ir.Nearest,this.uWrap=Wi.ClampToEdge,this.vWrap=Wi.ClampToEdge}setFilters(){const e=this.baseTexture,r=this.minFilter;r==ir.Linear?e.scaleMode=Er.LINEAR:this.minFilter==ir.Nearest?e.scaleMode=Er.NEAREST:(e.mipmap=ii.POW2,r==ir.MipMapNearestNearest?e.scaleMode=Er.NEAREST:e.scaleMode=Er.LINEAR)}}class zA extends h0{}class qX{constructor(){this.array=new Array}add(e){const r=this.contains(e);return this.array[e|0]=e|0,!r}contains(e){return this.array[e|0]!=null}remove(e){this.array[e|0]=void 0}clear(){this.array.length=0}}const mo=class{constructor(t=0,e=0,r=0,n=0){this.r=t,this.g=e,this.b=r,this.a=n}set(t,e,r,n){return this.r=t,this.g=e,this.b=r,this.a=n,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t=t.charAt(0)=="#"?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=t.length!=8?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,r,n){return this.r+=t,this.g+=e,this.b+=r,this.a+=n,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((e&4278190080)>>>24)/255,t.g=((e&16711680)>>>16)/255,t.b=((e&65280)>>>8)/255,t.a=(e&255)/255}static rgb888ToColor(t,e){t.r=((e&16711680)>>>16)/255,t.g=((e&65280)>>>8)/255,t.b=(e&255)/255}static fromString(t){return new mo().setFromString(t)}};let de=mo;de.WHITE=new mo(1,1,1,1);de.RED=new mo(1,0,0,1);de.GREEN=new mo(0,1,0,1);de.BLUE=new mo(0,0,1,1);de.MAGENTA=new mo(1,0,1,1);const cs=class{static clamp(t,e,r){return t<e?e:t>r?r:t}static cosDeg(t){return Math.cos(t*cs.degRad)}static sinDeg(t){return Math.sin(t*cs.degRad)}static signum(t){return Math.sign(t)}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){const e=Math.pow(Math.abs(t),.3333333333333333);return t<0?-e:e}static randomTriangular(t,e){return cs.randomTriangularWith(t,e,(t+e)*.5)}static randomTriangularWith(t,e,r){const n=Math.random(),s=e-t;return n<=(r-t)/s?t+Math.sqrt(n*s*(r-t)):e-Math.sqrt((1-n)*s*(e-r))}static isPowerOfTwo(t){return t&&(t&t-1)===0}};let V=cs;V.PI=3.1415927;V.PI2=cs.PI*2;V.radiansToDegrees=180/cs.PI;V.radDeg=cs.radiansToDegrees;V.degreesToRadians=cs.PI/180;V.degRad=cs.degreesToRadians;class KX{apply(e,r,n){return e+(r-e)*this.applyInternal(n)}}class ZX extends KX{constructor(e){super(),this.power=2,this.power=e}applyInternal(e){return e<=.5?Math.pow(e*2,this.power)/2:Math.pow((e-1)*2,this.power)/(this.power%2==0?-2:2)+1}}class QX extends ZX{applyInternal(e){return Math.pow(e-1,this.power)*(this.power%2==0?-1:1)+1}}const No=class{static arrayCopy(t,e,r,n,s){for(let i=e,o=n;i<e+s;i++,o++)r[o]=t[i]}static arrayFill(t,e,r,n){for(let s=e;s<r;s++)t[s]=n}static setArraySize(t,e,r=0){const n=t.length;if(n==e)return t;if(t.length=e,n<e)for(let s=n;s<e;s++)t[s]=r;return t}static ensureArrayCapacity(t,e,r=0){return t.length>=e?t:No.setArraySize(t,e,r)}static newArray(t,e){const r=new Array(t);for(let n=0;n<t;n++)r[n]=e;return r}static newFloatArray(t){if(No.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=0;return e}static newShortArray(t){if(No.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=0;return e}static toFloatArray(t){return No.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return No.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,r=!0){for(let n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}};let K=No;K.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";class JX{constructor(e){this.items=new Array,this.instantiator=e}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(e){e.reset&&e.reset(),this.items.push(e)}freeAll(e){for(let r=0;r<e.length;r++)this.free(e[r])}clear(){this.items.length=0}}class e9{constructor(e=0,r=0){this.x=e,this.y=r}set(e,r){return this.x=e,this.y=r,this}length(){const e=this.x,r=this.y;return Math.sqrt(e*e+r*r)}normalize(){const e=this.length();return e!=0&&(this.x/=e,this.y/=e),this}}const t9={yDown:!0,FAIL_ON_NON_EXISTING_SKIN:!1,GLOBAL_AUTO_UPDATE:!0,GLOBAL_DELAY_LIMIT:0,REPORT_TEXTURE_LOADER_ERROR:!0};class Ud{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Ae.EMPTY:(e=e||new Ae(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:n,b:s,c:i,d:o,tx:a,ty:l}=e,c=n*r.x+i*r.y+a,h=s*r.x+o*r.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let r=this.minX,n=this.minY,s=this.maxX,i=this.maxY,o=e[0],a=e[1];r=o<r?o:r,n=a<n?a:n,s=o>s?o:s,i=a>i?a:i,o=e[2],a=e[3],r=o<r?o:r,n=a<n?a:n,s=o>s?o:s,i=a>i?a:i,o=e[4],a=e[5],r=o<r?o:r,n=a<n?a:n,s=o>s?o:s,i=a>i?a:i,o=e[6],a=e[7],r=o<r?o:r,n=a<n?a:n,s=o>s?o:s,i=a>i?a:i,this.minX=r,this.minY=n,this.maxX=s,this.maxY=i}addFrame(e,r,n,s,i){this.addFrameMatrix(e.worldTransform,r,n,s,i)}addFrameMatrix(e,r,n,s,i){const o=e.a,a=e.b,l=e.c,c=e.d,h=e.tx,u=e.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=o*r+l*n+h,y=a*r+c*n+u;d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*s+l*n+h,y=a*s+c*n+u,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*r+l*i+h,y=a*r+c*i+u,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*s+l*i+h,y=a*s+c*i+u,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(e,r,n){let s=this.minX,i=this.minY,o=this.maxX,a=this.maxY;for(let l=r;l<n;l+=2){const c=e[l],h=e[l+1];s=c<s?c:s,i=h<i?h:i,o=c>o?c:o,a=h>a?h:a}this.minX=s,this.minY=i,this.maxX=o,this.maxY=a}addVertices(e,r,n,s){this.addVerticesMatrix(e.worldTransform,r,n,s)}addVerticesMatrix(e,r,n,s,i=0,o=i){const a=e.a,l=e.b,c=e.c,h=e.d,u=e.tx,d=e.ty;let f=this.minX,p=this.minY,m=this.maxX,g=this.maxY;for(let y=n;y<s;y+=2){const v=r[y],x=r[y+1],_=a*v+c*x+u,b=h*x+l*v+d;f=Math.min(f,_-i),m=Math.max(m,_+i),p=Math.min(p,b-o),g=Math.max(g,b+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=g}addBounds(e){const r=this.minX,n=this.minY,s=this.maxX,i=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>i?e.maxY:i}addBoundsMask(e,r){const n=e.minX>r.minX?e.minX:r.minX,s=e.minY>r.minY?e.minY:r.minY,i=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=i&&s<=o){const a=this.minX,l=this.minY,c=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=s<l?s:l,this.maxX=i>c?i:c,this.maxY=o>h?o:h}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const n=e.minX>r.x?e.minX:r.x,s=e.minY>r.y?e.minY:r.y,i=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=i&&s<=o){const a=this.minX,l=this.minY,c=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=s<l?s:l,this.maxX=i>c?i:c,this.maxY=o>h?o:h}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,n,s,i,o){e-=i,r-=o,n+=i,s+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>s?this.maxY:s}}class Ma extends Mf{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Vf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Ud,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let n=0;n<r.length;++n){const s=r[n];Object.defineProperty(Ma.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Ae),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Ae),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Ud);const r=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=r,this._bounds=s,this._bounds.updateID+=this._boundsID-i,o}toGlobal(e,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,n,s){return r&&(e=r.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,r=0,n=1,s=1,i=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=r,this.scale.x=n||1,this.scale.y=s||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new r9),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*jW}set angle(e){this.transform.rotation=e*$W}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class r9 extends Ma{constructor(){super(...arguments),this.sortDirty=null}}Ma.prototype.displayObjectUpdateTransform=Ma.prototype.updateTransform;const n9=new ot;function s9(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const $I=class f0 extends Ma{constructor(){super(),this.children=[],this.sortableChildren=f0.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.addChild(e[r]);else{const r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]}addChildAt(e,r){if(r<0||r>this.children.length)throw new Error(`${e}addChildAt: The index ${r} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e}swapChildren(e,r){if(e===r)return;const n=this.getChildIndex(e),s=this.getChildIndex(r);this.children[n]=r,this.children[s]=e,this.onChildrenChange(n<s?n:s)}getChildIndex(e){const r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r}setChildIndex(e,r){if(r<0||r>=this.children.length)throw new Error(`The index ${r} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);Rh(this.children,n,1),this.children.splice(r,0,e),this.onChildrenChange(r)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.removeChild(e[r]);else{const r=e[0],n=this.children.indexOf(r);if(n===-1)return null;r.parent=null,r.transform._parentID=-1,Rh(this.children,n,1),this._boundsID++,this.onChildrenChange(n),r.emit("removed",this),this.emit("childRemoved",r,this,n)}return e[0]}removeChildAt(e){const r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,Rh(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r}removeChildren(e=0,r=this.children.length){const n=e,s=r,i=s-n;let o;if(i>0&&i<=s){o=this.children.splice(n,i);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let r=0,n=this.children.length;r<n;++r){const s=this.children[r];s._lastSortedIndex=r,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(s9),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,r=this.children.length;e<r;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){const n=r._mask.isMaskData?r._mask.maskObject:r._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,r=!1){const n=super.getLocalBounds(e);if(!r)for(let s=0,i=this.children.length;s<i;++s){const o=this.children[s];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const r=e.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let n,s;this.cullArea?(n=this.cullArea,s=this.worldTransform):this._render!==f0.prototype._render&&(n=this.getBounds(!0));const i=e.projection.transform;if(i&&(s?(s=n9.copyFrom(s),s.prepend(i)):s=i),n&&r.intersects(n,s))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){var r;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(r=this.filters)!=null&&r.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,s=this.children.length;n<s;++n)this.children[n].render(e)}}renderAdvanced(e){var i,o,a;const r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<r.length;l++)r[l].enabled&&this._enabledFilters.push(r[l])}const s=r&&((i=this._enabledFilters)==null?void 0:i.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==bt.NONE));if(s&&e.batch.flush(),r&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,c=this.children.length;l<c;++l)this.children[l].render(e)}s&&e.batch.flush(),n&&e.mask.pop(this),r&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const r=typeof e=="boolean"?e:e==null?void 0:e.children,n=this.removeChildren(0,this.children.length);if(r)for(let s=0;s<n.length;++s)n[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e}};$I.defaultSortableChildren=!1;let cn=$I;cn.prototype.containerUpdateTransform=cn.prototype.updateTransform;Object.defineProperties(se,{SORTABLE_CHILDREN:{get(){return cn.defaultSortableChildren},set(t){we("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),cn.defaultSortableChildren=t}}});const ml=new ht,i9=new Uint16Array([0,1,2,0,2,3]);class bv extends cn{constructor(e){super(),this._anchor=new Us(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Wt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=J.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||ae.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=i9,this.pluginName="batch",this.isSprite=!0,this._roundPixels=se.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Gu(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Gu(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,n=r.a,s=r.b,i=r.c,o=r.d,a=r.tx,l=r.ty,c=this.vertexData,h=e.trim,u=e.orig,d=this._anchor;let f=0,p=0,m=0,g=0;if(h?(p=h.x-d._x*u.width,f=p+h.width,g=h.y-d._y*u.height,m=g+h.height):(p=-d._x*u.width,f=p+u.width,g=-d._y*u.height,m=g+u.height),c[0]=n*p+i*g+a,c[1]=o*g+s*p+l,c[2]=n*f+i*g+a,c[3]=o*g+s*f+l,c[4]=n*f+i*m+a,c[5]=o*m+s*f+l,c[6]=n*p+i*m+a,c[7]=o*m+s*p+l,this._roundPixels){const y=se.RESOLUTION;for(let v=0;v<c.length;++v)c[v]=Math.round(c[v]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,n=e.orig,s=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,l=i.c,c=i.d,h=i.tx,u=i.ty,d=-s._x*n.width,f=d+n.width,p=-s._y*n.height,m=p+n.height;if(r[0]=o*d+l*p+h,r[1]=c*p+a*d+u,r[2]=o*f+l*p+h,r[3]=c*p+a*f+u,r[4]=o*f+l*m+h,r[5]=c*m+a*f+u,r[6]=o*d+l*m+h,r[7]=c*m+a*d+u,this._roundPixels){const g=se.RESOLUTION;for(let y=0;y<r.length;++y)r[y]=Math.round(r[y]*g)/g}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Ud),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ae),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,ml);const r=this._texture.orig.width,n=this._texture.orig.height,s=-r*this.anchor.x;let i=0;return ml.x>=s&&ml.x<s+r&&(i=-n*this.anchor.y,ml.y>=i&&ml.y<i+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const r=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(e,r){const n=e instanceof ae?e:ae.from(e,r);return new bv(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=Gu(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=Gu(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||ae.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}class o9{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Xm=new ht,HA=new ei,GI=class zI extends cn{constructor(e,r,n,s=ln.TRIANGLES){super(),this.geometry=e,this.shader=r,this.state=n||di.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=se.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ln.TRIANGLES&&r.length<zI.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(r),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const r=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const s=this.transform.worldTransform,i=s.a,o=s.b,a=s.c,l=s.d,c=s.tx,h=s.ty,u=this.vertexData;for(let d=0;d<u.length/2;d++){const f=r[d*2],p=r[d*2+1];u[d*2]=i*f+a*p+c,u[d*2+1]=o*f+l*p+h}if(this._roundPixels){const d=se.RESOLUTION;for(let f=0;f<u.length;++f)u[f]=Math.round(u[f]*d)/d}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new o9(e,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Xm);const r=this.geometry.getBuffer("aVertexPosition").data,n=HA.points,s=this.geometry.getIndex().data,i=s.length,o=this.drawMode===4?3:1;for(let a=0;a+2<i;a+=o){const l=s[a]*2,c=s[a+1]*2,h=s[a+2]*2;if(n[0]=r[l],n[1]=r[l+1],n[2]=r[c],n[3]=r[c+1],n[4]=r[h],n[5]=r[h+1],HA.contains(Xm.x,Xm.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};GI.BATCHABLE_SIZE=100;let a9=GI;class l9 extends oo{constructor(e,r,n){super();const s=new Gt(e),i=new Gt(r,!0),o=new Gt(n,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,he.FLOAT).addAttribute("aTextureCoord",i,2,!1,he.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var c9=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,u9=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class h9 extends Wa{constructor(e,r){const n={uSampler:e,alpha:1,uTextureMatrix:ot.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||Vs.from(u9,c9),n),this._colorDirty=!1,this.uvMatrix=new _I(e),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new Wt(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Wt.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class d9 extends a9{constructor(e=ae.EMPTY,r,n,s,i){const o=new l9(r,n,s);o.getBuffer("aVertexPosition").static=!1;const a=new h9(e);super(o,a,null,i),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}const Vd={build(t){const e=t.points;let r,n,s,i,o,a;if(t.type===Nt.CIRC){const p=t.shape;r=p.x,n=p.y,o=a=p.radius,s=i=0}else if(t.type===Nt.ELIP){const p=t.shape;r=p.x,n=p.y,o=p.width,a=p.height,s=i=0}else{const p=t.shape,m=p.width/2,g=p.height/2;r=p.x+m,n=p.y+g,o=a=Math.max(0,Math.min(p.radius,Math.min(m,g))),s=m-o,i=g-a}if(!(o>=0&&a>=0&&s>=0&&i>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(s?4:0)+(i?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=r+s,e[1]=e[3]=n+i,e[2]=e[4]=r-s,e[5]=e[7]=n-i;return}let h=0,u=l*4+(s?2:0)+2,d=u,f=c;{const p=s+o,m=i,g=r+p,y=r-p,v=n+m;if(e[h++]=g,e[h++]=v,e[--u]=v,e[--u]=y,i){const x=n-m;e[d++]=y,e[d++]=x,e[--f]=x,e[--f]=g}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),g=s+Math.cos(m)*o,y=i+Math.sin(m)*a,v=r+g,x=r-g,_=n+y,b=n-y;e[h++]=v,e[h++]=_,e[--u]=_,e[--u]=x,e[d++]=x,e[d++]=b,e[--f]=b,e[--f]=v}{const p=s,m=i+a,g=r+p,y=r-p,v=n+m,x=n-m;e[h++]=g,e[h++]=v,e[--f]=x,e[--f]=g,s&&(e[h++]=y,e[h++]=v,e[--f]=x,e[--f]=y)}},triangulate(t,e){const r=t.points,n=e.points,s=e.indices;if(r.length===0)return;let i=n.length/2;const o=i;let a,l;if(t.type!==Nt.RREC){const h=t.shape;a=h.x,l=h.y}else{const h=t.shape;a=h.x+h.width/2,l=h.y+h.height/2}const c=t.matrix;n.push(t.matrix?c.a*a+c.c*l+c.tx:a,t.matrix?c.b*a+c.d*l+c.ty:l),i++,n.push(r[0],r[1]);for(let h=2;h<r.length;h+=2)n.push(r[h],r[h+1]),s.push(i++,o,i);s.push(o+1,o,i)}};function WA(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let s=0,i=t[r-2],o=t[r-1];s<r;s+=2){const a=t[s],l=t[s+1];n+=(a-i)*(l+o),i=a,o=l}if(!e&&n>0||e&&n<=0){const s=r/2;for(let i=s+s%2;i<r;i+=2){const o=r-i-2,a=r-i-1,l=i,c=i+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[c]]=[t[c],t[a]]}}}const HI={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const n=t.holes,s=e.points,i=e.indices;if(r.length>=6){WA(r,!1);const o=[];for(let c=0;c<n.length;c++){const h=n[c];WA(h.points,!0),o.push(r.length/2),r=r.concat(h.points)}const a=u8(r,o,2);if(!a)return;const l=s.length/2;for(let c=0;c<a.length;c+=3)i.push(a[c]+l),i.push(a[c+1]+l),i.push(a[c+2]+l);for(let c=0;c<r.length;c++)s.push(r[c])}}},f9={build(t){const e=t.shape,r=e.x,n=e.y,s=e.width,i=e.height,o=t.points;o.length=0,s>=0&&i>=0&&o.push(r,n,r+s,n,r+s,n+i,r,n+i)},triangulate(t,e){const r=t.points,n=e.points;if(r.length===0)return;const s=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},p9={build(t){Vd.build(t)},triangulate(t,e){Vd.triangulate(t,e)}};var Or=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(Or||{}),$s=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))($s||{});const Ia={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class XA{static curveTo(e,r,n,s,i,o){const a=o[o.length-2],l=o[o.length-1]-r,c=a-e,h=s-r,u=n-e,d=Math.abs(l*u-c*h);if(d<1e-8||i===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;const f=l*l+c*c,p=h*h+u*u,m=l*h+c*u,g=i*Math.sqrt(f)/d,y=i*Math.sqrt(p)/d,v=g*m/f,x=y*m/p,_=g*u+y*c,b=g*h+y*l,A=c*(y+v),S=l*(y+v),T=u*(g+x),E=h*(g+x),R=Math.atan2(S-b,A-_),P=Math.atan2(E-b,T-_);return{cx:_+e,cy:b+r,radius:i,startAngle:R,endAngle:P,anticlockwise:c*h>u*l}}static arc(e,r,n,s,i,o,a,l,c){const h=a-o,u=Ia._segmentsCount(Math.abs(h)*i,Math.ceil(Math.abs(h)/Nd)*40),d=h/(u*2),f=d*2,p=Math.cos(d),m=Math.sin(d),g=u-1,y=g%1/g;for(let v=0;v<=g;++v){const x=v+y*v,_=d+o+f*x,b=Math.cos(_),A=-Math.sin(_);c.push((p*b+m*A)*i+n,(p*-A+m*b)*i+s)}}}class m9{constructor(){this.reset()}begin(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Av{static curveLength(e,r,n,s,i,o,a,l){let c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,y=0,v=0,x=0,_=e,b=r;for(let A=1;A<=10;++A)h=A/10,u=h*h,d=u*h,f=1-h,p=f*f,m=p*f,g=m*e+3*p*h*n+3*f*u*i+d*a,y=m*r+3*p*h*s+3*f*u*o+d*l,v=_-g,x=b-y,_=g,b=y,c+=Math.sqrt(v*v+x*x);return c}static curveTo(e,r,n,s,i,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const h=Ia._segmentsCount(Av.curveLength(l,c,e,r,n,s,i,o));let u=0,d=0,f=0,p=0,m=0;a.push(l,c);for(let g=1,y=0;g<=h;++g)y=g/h,u=1-y,d=u*u,f=d*u,p=y*y,m=p*y,a.push(f*l+3*d*y*e+3*u*p*n+m*i,f*c+3*d*y*r+3*u*p*s+m*o)}}function YA(t,e,r,n,s,i,o,a){const l=t-r*s,c=e-n*s,h=t+r*i,u=e+n*i;let d,f;o?(d=n,f=-r):(d=-n,f=r);const p=l+d,m=c+f,g=h+d,y=u+f;return a.push(p,m,g,y),2}function gi(t,e,r,n,s,i,o,a){const l=r-t,c=n-e;let h=Math.atan2(l,c),u=Math.atan2(s-t,i-e);a&&h<u?h+=Math.PI*2:!a&&h>u&&(u+=Math.PI*2);let d=h;const f=u-h,p=Math.abs(f),m=Math.sqrt(l*l+c*c),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,y=f/g;if(d+=y,a){o.push(t,e,r,n);for(let v=1,x=d;v<g;v++,x+=y)o.push(t,e,t+Math.sin(x)*m,e+Math.cos(x)*m);o.push(t,e,s,i)}else{o.push(r,n,t,e);for(let v=1,x=d;v<g;v++,x+=y)o.push(t+Math.sin(x)*m,e+Math.cos(x)*m,t,e);o.push(s,i,t,e)}return g*2}function g9(t,e){const r=t.shape;let n=t.points||r.points.slice();const s=e.closePointEps;if(n.length===0)return;const i=t.lineStyle,o=new ht(n[0],n[1]),a=new ht(n[n.length-2],n[n.length-1]),l=r.type!==Nt.POLY||r.closeStroke,c=Math.abs(o.x-a.x)<s&&Math.abs(o.y-a.y)<s;if(l){n=n.slice(),c&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const U=(o.x+a.x)*.5,F=(a.y+o.y)*.5;n.unshift(U,F),n.push(U,F)}const h=e.points,u=n.length/2;let d=n.length;const f=h.length/2,p=i.width/2,m=p*p,g=i.miterLimit*i.miterLimit;let y=n[0],v=n[1],x=n[2],_=n[3],b=0,A=0,S=-(v-_),T=y-x,E=0,R=0,P=Math.sqrt(S*S+T*T);S/=P,T/=P,S*=p,T*=p;const D=i.alignment,k=(1-D)*2,M=D*2;l||(i.cap===$s.ROUND?d+=gi(y-S*(k-M)*.5,v-T*(k-M)*.5,y-S*k,v-T*k,y+S*M,v+T*M,h,!0)+2:i.cap===$s.SQUARE&&(d+=YA(y,v,S,T,k,M,!0,h))),h.push(y-S*k,v-T*k,y+S*M,v+T*M);for(let U=1;U<u-1;++U){y=n[(U-1)*2],v=n[(U-1)*2+1],x=n[U*2],_=n[U*2+1],b=n[(U+1)*2],A=n[(U+1)*2+1],S=-(v-_),T=y-x,P=Math.sqrt(S*S+T*T),S/=P,T/=P,S*=p,T*=p,E=-(_-A),R=x-b,P=Math.sqrt(E*E+R*R),E/=P,R/=P,E*=p,R*=p;const F=x-y,O=v-_,I=x-b,L=A-_,z=F*I+O*L,X=O*I-L*F,H=X<0;if(Math.abs(X)<.001*Math.abs(z)){h.push(x-S*k,_-T*k,x+S*M,_+T*M),z>=0&&(i.join===Or.ROUND?d+=gi(x,_,x-S*k,_-T*k,x-E*k,_-R*k,h,!1)+4:d+=2,h.push(x-E*M,_-R*M,x+E*k,_+R*k));continue}const oe=(-S+y)*(-T+_)-(-S+x)*(-T+v),te=(-E+b)*(-R+_)-(-E+x)*(-R+A),ie=(F*te-I*oe)/X,Re=(L*oe-O*te)/X,Se=(ie-x)*(ie-x)+(Re-_)*(Re-_),Te=x+(ie-x)*k,ue=_+(Re-_)*k,Ee=x-(ie-x)*M,Ce=_-(Re-_)*M,Je=Math.min(F*F+O*O,I*I+L*L),at=H?k:M,wn=Je+at*at*m,Hn=Se<=wn;let bn=i.join;if(bn===Or.MITER&&Se/m>g&&(bn=Or.BEVEL),Hn)switch(bn){case Or.MITER:{h.push(Te,ue,Ee,Ce);break}case Or.BEVEL:{H?h.push(Te,ue,x+S*M,_+T*M,Te,ue,x+E*M,_+R*M):h.push(x-S*k,_-T*k,Ee,Ce,x-E*k,_-R*k,Ee,Ce),d+=2;break}case Or.ROUND:{H?(h.push(Te,ue,x+S*M,_+T*M),d+=gi(x,_,x+S*M,_+T*M,x+E*M,_+R*M,h,!0)+4,h.push(Te,ue,x+E*M,_+R*M)):(h.push(x-S*k,_-T*k,Ee,Ce),d+=gi(x,_,x-S*k,_-T*k,x-E*k,_-R*k,h,!1)+4,h.push(x-E*k,_-R*k,Ee,Ce));break}}else{switch(h.push(x-S*k,_-T*k,x+S*M,_+T*M),bn){case Or.MITER:{H?h.push(Ee,Ce,Ee,Ce):h.push(Te,ue,Te,ue),d+=2;break}case Or.ROUND:{H?d+=gi(x,_,x+S*M,_+T*M,x+E*M,_+R*M,h,!0)+2:d+=gi(x,_,x-S*k,_-T*k,x-E*k,_-R*k,h,!1)+2;break}}h.push(x-E*k,_-R*k,x+E*M,_+R*M),d+=2}}y=n[(u-2)*2],v=n[(u-2)*2+1],x=n[(u-1)*2],_=n[(u-1)*2+1],S=-(v-_),T=y-x,P=Math.sqrt(S*S+T*T),S/=P,T/=P,S*=p,T*=p,h.push(x-S*k,_-T*k,x+S*M,_+T*M),l||(i.cap===$s.ROUND?d+=gi(x-S*(k-M)*.5,_-T*(k-M)*.5,x-S*k,_-T*k,x+S*M,_+T*M,h,!1)+2:i.cap===$s.SQUARE&&(d+=YA(x,_,S,T,k,M,!1,h)));const G=e.indices,B=Ia.epsilon*Ia.epsilon;for(let U=f;U<d+f-2;++U)y=h[U*2],v=h[U*2+1],x=h[(U+1)*2],_=h[(U+1)*2+1],b=h[(U+2)*2],A=h[(U+2)*2+1],!(Math.abs(y*(_-A)+x*(A-v)+b*(v-_))<B)&&G.push(U,U+1,U+2)}function y9(t,e){let r=0;const n=t.shape,s=t.points||n.points,i=n.type!==Nt.POLY||n.closeStroke;if(s.length===0)return;const o=e.points,a=e.indices,l=s.length/2,c=o.length/2;let h=c;for(o.push(s[0],s[1]),r=1;r<l;r++)o.push(s[r*2],s[r*2+1]),a.push(h,h+1),h++;i&&a.push(h,c)}function qA(t,e){t.lineStyle.native?y9(t,e):g9(t,e)}class Sv{static curveLength(e,r,n,s,i,o){const a=e-2*n+i,l=r-2*s+o,c=2*n-2*e,h=2*s-2*r,u=4*(a*a+l*l),d=4*(a*c+l*h),f=c*c+h*h,p=2*Math.sqrt(u+d+f),m=Math.sqrt(u),g=2*u*m,y=2*Math.sqrt(f),v=d/m;return(g*p+m*d*(p-y)+(4*f*u-d*d)*Math.log((2*m+v+p)/(v+y)))/(4*g)}static curveTo(e,r,n,s,i){const o=i[i.length-2],a=i[i.length-1],l=Ia._segmentsCount(Sv.curveLength(o,a,e,r,n,s));let c=0,h=0;for(let u=1;u<=l;++u){const d=u/l;c=o+(e-o)*d,h=a+(r-a)*d,i.push(c+(e+(n-e)*d-c)*d,h+(r+(s-r)*d-h)*d)}}}const Ym={[Nt.POLY]:HI,[Nt.CIRC]:Vd,[Nt.ELIP]:Vd,[Nt.RECT]:f9,[Nt.RREC]:p9},KA=[],Qu=[];class jd{constructor(e,r=null,n=null,s=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=s,this.type=e.type}clone(){return new jd(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Eo=new ht,WI=class XI extends oI{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Ud,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Qu.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r.reset(),KA.push(r)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,r=null,n=null,s=null){const i=new jd(e,r,n,s);return this.graphicsData.push(i),this.dirty++,this}drawHole(e,r=null){if(!this.graphicsData.length)return null;const n=new jd(e,null,null,r),s=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=s.lineStyle,s.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const r=this.graphicsData;for(let n=0;n<r.length;++n){const s=r[n];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,Eo):Eo.copyFrom(e),s.shape.contains(Eo.x,Eo.y))){let i=!1;if(s.holes){for(let o=0;o<s.holes.length;o++)if(s.holes[o].shape.contains(Eo.x,Eo.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,r=this.graphicsData;let n=null,s=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],s=n.style);for(let l=this.shapeIndex;l<r.length;l++){this.shapeIndex++;const c=r[l],h=c.fillStyle,u=c.lineStyle;Ym[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(h.visible||u.visible)&&this.processHoles(c.holes);for(let d=0;d<2;d++){const f=d===0?h:u;if(!f.visible)continue;const p=f.texture.baseTexture,m=this.indices.length,g=this.points.length/2;p.wrapMode=Ec.REPEAT,d===0?this.processFill(c):this.processLine(c);const y=this.points.length/2-g;y!==0&&(n&&!this._compareStyles(s,f)&&(n.end(m,g),n=null),n||(n=KA.pop()||new m9,n.begin(f,m,g),this.batches.push(n),s=f),this.addUvs(this.points,e,f.texture,g,y,f.matrix))}}const i=this.indices.length,o=this.points.length/2;if(n&&n.end(i,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,r){return!(!e||!r||e.texture.baseTexture!==r.texture.baseTexture||e.color+e.alpha!==r.color+r.alpha||!!e.native!=!!r.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,r=this.graphicsData.length;e<r;e++){const n=this.graphicsData[e],s=n.fillStyle,i=n.lineStyle;if(s&&!s.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let r=0,n=e.length;r<n;r++){const s=e[r];for(let i=0;i<s.size;i++){const o=s.start+i;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<XI.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++xe._globalBatch;for(let u=0;u<this.drawCalls.length;u++)this.drawCalls[u].texArray.clear(),Qu.push(this.drawCalls[u]);this.drawCalls.length=0;const r=this.colors,n=this.textureIds;let s=Qu.pop();s||(s=new Qy,s.texArray=new r0),s.texArray.count=0,s.start=0,s.size=0,s.type=ln.TRIANGLES;let i=0,o=null,a=0,l=!1,c=ln.TRIANGLES,h=0;this.drawCalls.push(s);for(let u=0;u<this.batches.length;u++){const d=this.batches[u],f=8,p=d.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,c=l?ln.LINES:ln.TRIANGLES,o=null,i=f,e++),o!==m&&(o=m,m._batchEnabled!==e&&(i===f&&(e++,i=0,s.size>0&&(s=Qu.pop(),s||(s=new Qy,s.texArray=new r0),this.drawCalls.push(s)),s.start=h,s.size=0,s.texArray.count=0,s.type=c),m.touched=1,m._batchEnabled=e,m._batchLocation=i,m.wrapMode=Ec.REPEAT,s.texArray.elements[s.texArray.count++]=m,i++)),s.size+=d.size,h+=d.size,a=m._batchLocation,this.addColors(r,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,a,d.attribSize,d.attribStart)}xe._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,r=this.uvs,n=this.colors,s=this.textureIds,i=new ArrayBuffer(e.length*3*4),o=new Float32Array(i),a=new Uint32Array(i);let l=0;for(let c=0;c<e.length/2;c++)o[l++]=e[c*2],o[l++]=e[c*2+1],o[l++]=r[c*2],o[l++]=r[c*2+1],a[l++]=n[c],o[l++]=s[c];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?HI.triangulate(e,this):Ym[e.type].triangulate(e,this)}processLine(e){qA(e,this);for(let r=0;r<e.holes.length;r++)qA(e.holes[r],this)}processHoles(e){for(let r=0;r<e.length;r++){const n=e[r];Ym[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,r){for(let n=0;n<e.length/2;n++){const s=e[n*2],i=e[n*2+1];e[n*2]=r.a*s+r.c*i+r.tx,e[n*2+1]=r.b*s+r.d*i+r.ty}}addColors(e,r,n,s,i=0){const o=Wt.shared.setValue(r).toLittleEndianNumber(),a=Wt.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,i+s);for(let l=0;l<s;l++)e[i+l]=a}addTextureIds(e,r,n,s=0){e.length=Math.max(e.length,s+n);for(let i=0;i<n;i++)e[s+i]=r}addUvs(e,r,n,s,i,o=null){let a=0;const l=r.length,c=n.frame;for(;a<i;){let u=e[(s+a)*2],d=e[(s+a)*2+1];if(o){const f=o.a*u+o.c*d+o.tx;d=o.b*u+o.d*d+o.ty,u=f}a++,r.push(u/c.width,d/c.height)}const h=n.baseTexture;(c.width<h.width||c.height<h.height)&&this.adjustUvs(r,n,l,i)}adjustUvs(e,r,n,s){const i=r.baseTexture,o=1e-6,a=n+s*2,l=r.frame,c=l.width/i.width,h=l.height/i.height;let u=l.x/l.width,d=l.y/l.height,f=Math.floor(e[n]+o),p=Math.floor(e[n+1]+o);for(let m=n+2;m<a;m+=2)f=Math.min(f,Math.floor(e[m]+o)),p=Math.min(p,Math.floor(e[m+1]+o));u-=f,d-=p;for(let m=n;m<a;m+=2)e[m]=(e[m]+u)*c,e[m+1]=(e[m+1]+d)*h}};WI.BATCHABLE_SIZE=100;let x9=WI;class $f{constructor(){this.color=16777215,this.alpha=1,this.texture=ae.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new $f;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=ae.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Tv extends $f{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=$s.BUTT,this.join=Or.MITER,this.miterLimit=10}clone(){const e=new Tv;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=$s.BUTT,this.join=Or.MITER,this.miterLimit=10}}const qm={},p0=class Nh extends cn{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new $f,this._lineStyle=new Tv,this._matrix=null,this._holeMode=!1,this.state=di.for2d(),this._geometry=e||new x9,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Wt(16777215),this.blendMode=J.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Nh(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,r=0,n,s=.5,i=!1){return typeof e=="number"&&(e={width:e,color:r,alpha:n,alignment:s,native:i}),this.lineTextureStyle(e)}lineTextureStyle(e){const r={width:0,texture:ae.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:$s.BUTT,join:Or.MITER,miterLimit:10};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new ei,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[r-2],e[r-1]))}else this.currentPath=new ei,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,r){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=r,this}lineTo(e,r){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,s=n[n.length-2],i=n[n.length-1];return(s!==e||i!==r)&&n.push(e,r),this}_initCurve(e=0,r=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,r]):this.moveTo(e,r)}quadraticCurveTo(e,r,n,s){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),Sv.curveTo(e,r,n,s,i),this}bezierCurveTo(e,r,n,s,i,o){return this._initCurve(),Av.curveTo(e,r,n,s,i,o,this.currentPath.points),this}arcTo(e,r,n,s,i){this._initCurve(e,r);const o=this.currentPath.points,a=XA.curveTo(e,r,n,s,i,o);if(a){const{cx:l,cy:c,radius:h,startAngle:u,endAngle:d,anticlockwise:f}=a;this.arc(l,c,h,u,d,f)}return this}arc(e,r,n,s,i,o=!1){if(s===i)return this;if(!o&&i<=s?i+=Nd:o&&s<=i&&(s+=Nd),i-s===0)return this;const a=e+Math.cos(s)*n,l=r+Math.sin(s)*n,c=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const u=Math.abs(h[h.length-2]-a),d=Math.abs(h[h.length-1]-l);u<c&&d<c||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return XA.arc(a,l,e,r,n,s,i,o,h),this}beginFill(e=0,r){return this.beginTextureFill({texture:ae.WHITE,color:e,alpha:r})}normalizeColor(e){const r=Wt.shared.setValue(e.color??0);e.color=r.toNumber(),e.alpha??(e.alpha=r.alpha)}beginTextureFill(e){const r={texture:ae.WHITE,color:16777215,matrix:null};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,r,n,s){return this.drawShape(new Ae(e,r,n,s))}drawRoundedRect(e,r,n,s,i){return this.drawShape(new Uf(e,r,n,s,i))}drawCircle(e,r,n){return this.drawShape(new Bf(e,r,n))}drawEllipse(e,r,n,s){return this.drawShape(new Df(e,r,n,s))}drawPolygon(...e){let r,n=!0;const s=e[0];s.points?(n=s.closeStroke,r=s.points):Array.isArray(e[0])?r=e[0]:r=e;const i=new ei(r);return i.closeStroke=n,this.drawShape(i),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Nt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,r=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let s=0;s<n;s++){const i=e.batches[s],o=i.style.color,a=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,i.start*2,i.size),h={vertexData:a,blendMode:r,indices:c,uvs:l,_batchRGB:Wt.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[s]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let r=0,n=this.batches.length;r<n;r++){const s=this.batches[r];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const r=this._resolveDirectShader(e),n=this._geometry,s=this.worldAlpha,i=r.uniforms,o=n.drawCalls;i.translationMatrix=this.transform.worldTransform,Wt.shared.setValue(this._tintColor).premultiply(s).toArray(i.tint),e.shader.bind(r),e.geometry.bind(n,r),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,r){const{texArray:n,type:s,size:i,start:o}=r,a=n.count;for(let l=0;l<a;l++)e.texture.bind(n.elements[l],l);e.geometry.draw(s,i,o)}_resolveDirectShader(e){let r=this.shader;const n=this.pluginName;if(!r){if(!qm[n]){const{maxTextures:s}=e.plugins[n],i=new Int32Array(s);for(let l=0;l<s;l++)i[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new ot,default:pn.from({uSamplers:i},!0)},a=e.plugins[n]._shader.program;qm[n]=new Wa(a,o)}r=qm[n]}return r}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:r,minY:n,maxX:s,maxY:i}=e.bounds;this._bounds.addFrame(this.transform,r,n,s,i)}containsPoint(e){return this.worldTransform.applyInverse(e,Nh._TEMP_POINT),this._geometry.containsPoint(Nh._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r._tintRGB=Wt.shared.setValue(this._tintColor).multiply(r._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const r=this.transform.worldTransform,n=r.a,s=r.b,i=r.c,o=r.d,a=r.tx,l=r.ty,c=this._geometry.points,h=this.vertexData;let u=0;for(let d=0;d<c.length;d+=2){const f=c[d],p=c[d+1];h[u++]=n*f+i*p+a,h[u++]=o*p+s*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};p0.curves=Ia,p0._TEMP_POINT=new ht;let v9=p0;const Cs=[0,0,0];class _9 extends bv{constructor(){super(...arguments),this.region=null,this.attachment=null}}class w9 extends d9{constructor(e,r,n,s,i){super(e,r,n,s,i),this.region=null,this.attachment=null}}const YI=class extends cn{constructor(t){if(super(),!t)throw new Error("The spineData param is required.");if(typeof t=="string")throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');this.spineData=t,this.createSkeleton(t),this.slotContainers=[],this.tempClipContainers=[];for(let e=0,r=this.skeleton.slots.length;e<r;e++){const n=this.skeleton.slots[e],s=n.getAttachment(),i=this.newContainer();if(this.slotContainers.push(i),this.addChild(i),this.tempClipContainers.push(null),!!s)if(s.type===ft.Region){const o=s.name,a=this.createSprite(n,s,o);n.currentSprite=a,n.currentSpriteName=o,i.addChild(a)}else if(s.type===ft.Mesh){const o=this.createMesh(n,s);n.currentMesh=o,n.currentMeshId=s.id,n.currentMeshName=s.name,i.addChild(o)}else s.type===ft.Clipping&&(this.createGraphics(n,s),i.addChild(n.clippingContainer),i.addChild(n.currentGraphics))}this.tintRgb=new Float32Array([1,1,1]),this.autoUpdate=!0,this.visible=!0}get debug(){return this._debug}set debug(t){var e;t!=this._debug&&((e=this._debug)==null||e.unregisterSpine(this),t==null||t.registerSpine(this),this._debug=t)}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this.updateTransform=t?YI.prototype.autoUpdateTransform:cn.prototype.updateTransform)}get tint(){return Lm(this.tintRgb)}set tint(t){this.tintRgb=EW(t,this.tintRgb)}get delayLimit(){return(typeof this.localDelayLimit<"u"?this.localDelayLimit:t9.GLOBAL_DELAY_LIMIT)||Number.MAX_VALUE}update(t){var c;const e=this.delayLimit;if(t>e&&(t=e),this.state.update(t),this.state.apply(this.skeleton),!this.skeleton)return;this.skeleton.updateWorldTransform();const r=this.skeleton.slots,n=this.color;let s=null,i=null;n?(s=n.light,i=n.dark):s=this.tintRgb;for(let h=0,u=r.length;h<u;h++){const d=r[h],f=d.getAttachment(),p=this.slotContainers[h];if(!f){p.visible=!1;continue}let m=null;f.sequence&&f.sequence.apply(d,f);let g=f.region;const y=f.color;switch(f!=null&&f.type){case ft.Region:if(p.transform.setFromMatrix(d.bone.matrix),g=f.region,d.currentMesh&&(d.currentMesh.visible=!1,d.currentMesh=null,d.currentMeshId=void 0,d.currentMeshName=void 0),!g){d.currentSprite&&(d.currentSprite.renderable=!1);break}if(!d.currentSpriteName||d.currentSpriteName!==f.name){const _=f.name;if(d.currentSprite&&(d.currentSprite.visible=!1),d.sprites=d.sprites||{},d.sprites[_]!==void 0)d.sprites[_].visible=!0;else{const b=this.createSprite(d,f,_);p.addChild(b)}d.currentSprite=d.sprites[_],d.currentSpriteName=_}d.currentSprite.renderable=!0,d.hackRegion||this.setSpriteRegion(f,d.currentSprite,g),d.currentSprite.color?m=d.currentSprite.color:(Cs[0]=s[0]*d.color.r*y.r,Cs[1]=s[1]*d.color.g*y.g,Cs[2]=s[2]*d.color.b*y.b,d.currentSprite.tint=Lm(Cs)),d.currentSprite.blendMode=d.blendMode;break;case ft.Mesh:if(d.currentSprite){d.currentSprite.visible=!1,d.currentSprite=null,d.currentSpriteName=void 0;const _=new Vf;_._parentID=-1,_._worldID=p.transform._worldID,p.transform=_}if(!g){d.currentMesh&&(d.currentMesh.renderable=!1);break}const x=f.id;if(d.currentMeshId===void 0||d.currentMeshId!==x){const _=x;if(d.currentMesh&&(d.currentMesh.visible=!1),d.meshes=d.meshes||{},d.meshes[_]!==void 0)d.meshes[_].visible=!0;else{const b=this.createMesh(d,f);p.addChild(b)}d.currentMesh=d.meshes[_],d.currentMeshName=f.name,d.currentMeshId=_}d.currentMesh.renderable=!0,f.computeWorldVerticesOld(d,d.currentMesh.vertices),d.currentMesh.color?m=d.currentMesh.color:(Cs[0]=s[0]*d.color.r*y.r,Cs[1]=s[1]*d.color.g*y.g,Cs[2]=s[2]*d.color.b*y.b,d.currentMesh.tint=Lm(Cs)),d.currentMesh.blendMode=d.blendMode,d.hackRegion||this.setMeshRegion(f,d.currentMesh,g);break;case ft.Clipping:d.currentGraphics||(this.createGraphics(d,f),p.addChild(d.clippingContainer),p.addChild(d.currentGraphics)),this.updateGraphics(d,f),p.alpha=1,p.visible=!0;continue;default:p.visible=!1;continue}if(p.visible=!0,m){let v=d.color.r*y.r,x=d.color.g*y.g,_=d.color.b*y.b;m.setLight(s[0]*v+i[0]*(1-v),s[1]*x+i[1]*(1-x),s[2]*_+i[2]*(1-_)),d.darkColor?(v=d.darkColor.r,x=d.darkColor.g,_=d.darkColor.b):(v=0,x=0,_=0),m.setDark(s[0]*v+i[0]*(1-v),s[1]*x+i[1]*(1-x),s[2]*_+i[2]*(1-_))}p.alpha=d.color.a}const o=this.skeleton.drawOrder;let a=null,l=null;for(let h=0,u=o.length;h<u;h++){const d=r[o[h].data.index],f=this.slotContainers[o[h].data.index];if(l||f.parent!==null&&f.parent!==this&&(f.parent.removeChild(f),f.parent=this),d.currentGraphics&&d.getAttachment())l=d.clippingContainer,a=d.getAttachment(),l.children.length=0,this.children[h]=f,a.endSlot===d.data&&(a.endSlot=null);else if(l){let p=this.tempClipContainers[h];p||(p=this.tempClipContainers[h]=this.newContainer(),p.visible=!1),this.children[h]=p,f.parent=null,l.addChild(f),a.endSlot==d.data&&(l.renderable=!0,l=null,a=null)}else this.children[h]=f}(c=this._debug)==null||c.renderDebug(this)}setSpriteRegion(t,e,r){e.attachment===t&&e.region===r||(e.region=r,e.attachment=t,e.texture=r.texture,e.rotation=t.rotation*V.degRad,e.position.x=t.x,e.position.y=t.y,e.alpha=t.color.a,r.size?(e.scale.x=r.size.width/r.originalWidth,e.scale.y=-r.size.height/r.originalHeight):(e.scale.x=t.scaleX*t.width/r.originalWidth,e.scale.y=-t.scaleY*t.height/r.originalHeight))}setMeshRegion(t,e,r){e.attachment===t&&e.region===r||(e.region=r,e.attachment=t,e.texture=r.texture,r.texture.updateUvs(),e.uvBuffer.update(t.regionUVs))}autoUpdateTransform(){{this.lastTime=this.lastTime||Date.now();const t=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(t)}cn.prototype.updateTransform.call(this)}createSprite(t,e,r){let n=e.region;t.hackAttachment===e&&(n=t.hackRegion);const s=n?n.texture:null,i=this.newSprite(s);return i.anchor.set(.5),n&&this.setSpriteRegion(e,i,e.region),t.sprites=t.sprites||{},t.sprites[r]=i,i}createMesh(t,e){!e.region&&e.sequence&&e.sequence.apply(t,e);let r=e.region;t.hackAttachment===e&&(r=t.hackRegion,t.hackAttachment=null,t.hackRegion=null);const n=this.newMesh(r?r.texture:null,new Float32Array(e.regionUVs.length),e.regionUVs,new Uint16Array(e.triangles),ln.TRIANGLES);return typeof n._canvasPadding<"u"&&(n._canvasPadding=1.5),n.alpha=e.color.a,n.region=e.region,r&&this.setMeshRegion(e,n,r),t.meshes=t.meshes||{},t.meshes[e.id]=n,n}createGraphics(t,e){const r=this.newGraphics(),n=new ei([]);return r.clear(),r.beginFill(16777215,1),r.drawPolygon(n),r.renderable=!1,t.currentGraphics=r,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,r}updateGraphics(t,e){const r=t.currentGraphics.geometry,n=r.graphicsData[0].shape.points,s=e.worldVerticesLength;n.length=s,e.computeWorldVertices(t,0,s,n,0,2),r.invalidate()}hackTextureBySlotIndex(t,e=null,r=null){const n=this.skeleton.slots[t];if(!n)return!1;const s=n.getAttachment();let i=s.region;return e?(i=new h0,i.texture=e,i.size=r,n.hackRegion=i,n.hackAttachment=s):(n.hackRegion=null,n.hackAttachment=null),n.currentSprite?this.setSpriteRegion(s,n.currentSprite,i):n.currentMesh&&this.setMeshRegion(s,n.currentMesh,i),!0}hackTextureBySlotName(t,e=null,r=null){const n=this.skeleton.findSlotIndex(t);return n==-1?!1:this.hackTextureBySlotIndex(n,e,r)}hackTextureAttachment(t,e,r,n=null){const s=this.skeleton.findSlotIndex(t),i=this.skeleton.getAttachmentByName(t,e);i.region.texture=r;const o=this.skeleton.slots[s];if(!o)return!1;const a=o.getAttachment();if(e===a.name){let l=i.region;return r?(l=new h0,l.texture=r,l.size=n,o.hackRegion=l,o.hackAttachment=a):(o.hackRegion=null,o.hackAttachment=null),o.currentSprite&&o.currentSprite.region!=l?(this.setSpriteRegion(a,o.currentSprite,l),o.currentSprite.region=l):o.currentMesh&&o.currentMesh.region!=l&&this.setMeshRegion(a,o.currentMesh,l),!0}return!1}newContainer(){return new cn}newSprite(t){return new _9(t)}newGraphics(){return new v9}newMesh(t,e,r,n,s){return new w9(t,e,r,n,s)}transformHack(){return 1}hackAttachmentGroups(t,e,r){if(!t)return;const n=[],s=[];for(let i=0,o=this.skeleton.slots.length;i<o;i++){const a=this.skeleton.slots[i],l=a.currentSpriteName||a.currentMeshName||"",c=a.currentSprite||a.currentMesh;l.endsWith(t)?(c.parentGroup=e,s.push(c)):r&&c&&(c.parentGroup=r,n.push(c))}return[n,s]}destroy(t){this.debug=null;for(let e=0,r=this.skeleton.slots.length;e<r;e++){const n=this.skeleton.slots[e];for(const s in n.meshes)n.meshes[s].destroy(t);n.meshes=null;for(const s in n.sprites)n.sprites[s].destroy(t);n.sprites=null}for(let e=0,r=this.slotContainers.length;e<r;e++)this.slotContainers[e].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,super.destroy(t)}};let Ev=YI;Ev.clippingPolygon=[];Object.defineProperty(Ev.prototype,"visible",{get(){return this._visible},set(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))}});class qI{constructor(e){if(e==null)throw new Error("name cannot be null.");this.name=e}}const KI=class extends qI{constructor(t){super(t),this.id=(KI.nextID++&65535)<<11,this.worldVerticesLength=0,this.deformAttachment=this}computeWorldVerticesOld(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)}computeWorldVertices(t,e,r,n,s,i){r=s+(r>>1)*i;const o=t.bone.skeleton,a=t.deform;let l=this.vertices;const c=this.bones;if(c==null){a.length>0&&(l=a);const f=t.bone.matrix,p=f.tx,m=f.ty,g=f.a,y=f.c,v=f.b,x=f.d;for(let _=e,b=s;b<r;_+=2,b+=i){const A=l[_],S=l[_+1];n[b]=A*g+S*y+p,n[b+1]=A*v+S*x+m}return}let h=0,u=0;for(let f=0;f<e;f+=2){const p=c[h];h+=p+1,u+=p}const d=o.bones;if(a.length==0)for(let f=s,p=u*3;f<r;f+=i){let m=0,g=0,y=c[h++];for(y+=h;h<y;h++,p+=3){const v=d[c[h]].matrix,x=l[p],_=l[p+1],b=l[p+2];m+=(x*v.a+_*v.c+v.tx)*b,g+=(x*v.b+_*v.d+v.ty)*b}n[f]=m,n[f+1]=g}else{const f=a;for(let p=s,m=u*3,g=u<<1;p<r;p+=i){let y=0,v=0,x=c[h++];for(x+=h;h<x;h++,m+=3,g+=2){const _=d[c[h]].matrix,b=l[m]+f[g],A=l[m+1]+f[g+1],S=l[m+2];y+=(b*_.a+A*_.c+_.tx)*S,v+=(b*_.b+A*_.d+_.ty)*S}n[p]=y,n[p+1]=v}}}copyTo(t){this.bones!=null?(t.bones=new Array(this.bones.length),K.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices!=null?(t.vertices=K.newFloatArray(this.vertices.length),K.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment}};let go=KI;go.nextID=0;class Cv extends go{constructor(e){super(e),this.type=ft.BoundingBox,this.color=new de(1,1,1,1)}copy(){const e=new Cv(this.name);return this.copyTo(e),e.color.setFromColor(this.color),e}}class Rv extends go{constructor(e){super(e),this.type=ft.Clipping,this.color=new de(.2275,.2275,.8078,1)}copy(){const e=new Rv(this.name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e}}class ka extends go{constructor(e){super(e),this.type=ft.Mesh,this.color=new de(1,1,1,1),this.tempColor=new de(0,0,0,0)}getParentMesh(){return this.parentMesh}setParentMesh(e){this.parentMesh=e,e!=null&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)}copy(){if(this.parentMesh!=null)return this.newLinkedMesh();const e=new ka(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Float32Array(this.regionUVs.length),K.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.triangles=new Array(this.triangles.length),K.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,this.edges!=null&&(e.edges=new Array(this.edges.length),K.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e}newLinkedMesh(){const e=new ka(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),e.deformAttachment=this.deformAttachment,e.setParentMesh(this.parentMesh!=null?this.parentMesh:this),e}}class Na extends go{constructor(e){super(e),this.type=ft.Path,this.closed=!1,this.constantSpeed=!1,this.color=new de(1,1,1,1)}copy(){const e=new Na(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),K.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e}}class Pv extends go{constructor(e){super(e),this.type=ft.Point,this.color=new de(.38,.94,0,1)}computeWorldPosition(e,r){const n=e.matrix;return r.x=this.x*n.a+this.y*n.c+e.worldX,r.y=this.x*n.b+this.y*n.d+e.worldY,r}computeWorldRotation(e){const r=e.matrix,n=V.cosDeg(this.rotation),s=V.sinDeg(this.rotation),i=n*r.a+s*r.c,o=n*r.b+s*r.d;return Math.atan2(o,i)*V.radDeg}copy(){const e=new Pv(this.name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e}}class ZI{constructor(e,r){if(this.deform=new Array,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("bone cannot be null.");this.data=e,this.bone=r,this.color=new de,this.darkColor=e.darkColor==null?null:new de,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(e){this.attachment!=e&&(this.attachment=e,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)}setAttachmentTime(e){this.attachmentTime=this.bone.skeleton.time-e}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}}const Et=class extends qI{constructor(t){super(t),this.type=ft.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new de(1,1,1,1),this.offset=K.newFloatArray(8),this.uvs=K.newFloatArray(8),this.tempColor=new de(1,1,1,1)}updateOffset(){const t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,s=r+this.region.width*t,i=n+this.region.height*e,o=this.rotation*Math.PI/180,a=Math.cos(o),l=Math.sin(o),c=r*a+this.x,h=r*l,u=n*a+this.y,d=n*l,f=s*a+this.x,p=s*l,m=i*a+this.y,g=i*l,y=this.offset;y[Et.OX1]=c-d,y[Et.OY1]=u+h,y[Et.OX2]=c-g,y[Et.OY2]=m+h,y[Et.OX3]=f-g,y[Et.OY3]=m+p,y[Et.OX4]=f-d,y[Et.OY4]=u+p}setRegion(t){this.region=t;const e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,r,n){const s=this.offset,i=t instanceof ZI?t.bone.matrix:t.matrix,o=i.tx,a=i.ty,l=i.a,c=i.c,h=i.b,u=i.d;let d=0,f=0;d=s[Et.OX1],f=s[Et.OY1],e[r]=d*l+f*c+o,e[r+1]=d*h+f*u+a,r+=n,d=s[Et.OX2],f=s[Et.OY2],e[r]=d*l+f*c+o,e[r+1]=d*h+f*u+a,r+=n,d=s[Et.OX3],f=s[Et.OY3],e[r]=d*l+f*c+o,e[r+1]=d*h+f*u+a,r+=n,d=s[Et.OX4],f=s[Et.OY4],e[r]=d*l+f*c+o,e[r+1]=d*h+f*u+a}copy(){const t=new Et(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,K.arrayCopy(this.uvs,0,t.uvs,0,8),K.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}};let ce=Et;ce.OX1=0;ce.OY1=1;ce.OX2=2;ce.OY2=3;ce.OX3=4;ce.OY3=5;ce.OX4=6;ce.OY4=7;ce.X1=0;ce.Y1=1;ce.C1R=2;ce.C1G=3;ce.C1B=4;ce.C1A=5;ce.U1=6;ce.V1=7;ce.X2=8;ce.Y2=9;ce.C2R=10;ce.C2G=11;ce.C2B=12;ce.C2A=13;ce.U2=14;ce.V2=15;ce.X3=16;ce.Y3=17;ce.C3R=18;ce.C3G=19;ce.C3B=20;ce.C3A=21;ce.U3=22;ce.V3=23;ce.X4=24;ce.Y4=25;ce.C4R=26;ce.C4G=27;ce.C4B=28;ce.C4A=29;ce.U4=30;ce.V4=31;new QX(2);class xt{constructor(e,r,n){if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("timelines cannot be null.");this.name=e,this.timelines=r,this.timelineIds=[];for(let s=0;s<r.length;s++)this.timelineIds[r[s].getPropertyId()]=!0;this.duration=n}hasTimeline(e){return this.timelineIds[e]==!0}apply(e,r,n,s,i,o,a,l){if(e==null)throw new Error("skeleton cannot be null.");s&&this.duration!=0&&(n%=this.duration,r>0&&(r%=this.duration));const c=this.timelines;for(let h=0,u=c.length;h<u;h++)c[h].apply(e,r,n,i,o,a,l)}static binarySearch(e,r,n=1){let s=0,i=e.length/n-2;if(i==0)return n;let o=i>>>1;for(;;){if(e[(o+1)*n]<=r?s=o+1:i=o,s==i)return(s+1)*n;o=s+i>>>1}}static linearSearch(e,r,n){for(let s=0,i=e.length-n;s<=i;s+=n)if(e[s]>r)return s;return-1}}const lt=class{constructor(t){if(t<=0)throw new Error(`frameCount must be > 0: ${t}`);this.curves=K.newFloatArray((t-1)*lt.BEZIER_SIZE)}getFrameCount(){return this.curves.length/lt.BEZIER_SIZE+1}setLinear(t){this.curves[t*lt.BEZIER_SIZE]=lt.LINEAR}setStepped(t){this.curves[t*lt.BEZIER_SIZE]=lt.STEPPED}getCurveType(t){const e=t*lt.BEZIER_SIZE;if(e==this.curves.length)return lt.LINEAR;const r=this.curves[e];return r==lt.LINEAR?lt.LINEAR:r==lt.STEPPED?lt.STEPPED:lt.BEZIER}setCurve(t,e,r,n,s){const i=(-e*2+n)*.03,o=(-r*2+s)*.03,a=((e-n)*3+1)*.006,l=((r-s)*3+1)*.006;let c=i*2+a,h=o*2+l,u=e*.3+i+a*.16666667,d=r*.3+o+l*.16666667,f=t*lt.BEZIER_SIZE;const p=this.curves;p[f++]=lt.BEZIER;let m=u,g=d;for(let y=f+lt.BEZIER_SIZE-1;f<y;f+=2)p[f]=m,p[f+1]=g,u+=c,d+=h,c+=a,h+=l,m+=u,g+=d}getCurvePercent(t,e){e=V.clamp(e,0,1);const r=this.curves;let n=t*lt.BEZIER_SIZE;const s=r[n];if(s==lt.LINEAR)return e;if(s==lt.STEPPED)return 0;n++;let i=0;for(let a=n,l=n+lt.BEZIER_SIZE-1;n<l;n+=2)if(i=r[n],i>=e){let c,h;return n==a?(c=0,h=0):(c=r[n-2],h=r[n-1]),h+(r[n+1]-h)*(e-c)/(i-c)}const o=r[n-1];return o+(1-o)*(e-i)/(1-i)}};let Nr=lt;Nr.LINEAR=0;Nr.STEPPED=1;Nr.BEZIER=2;Nr.BEZIER_SIZE=10*2-1;const Ps=class extends Nr{constructor(t){super(t),this.frames=K.newFloatArray(t<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(t,e,r){t<<=1,this.frames[t]=e,this.frames[t+Ps.ROTATION]=r}apply(t,e,r,n,s,i,o){const a=this.frames,l=t.bones[this.boneIndex];if(!l.active)return;if(r<a[0]){switch(i){case j.setup:l.rotation=l.data.rotation;return;case j.first:const p=l.data.rotation-l.rotation;l.rotation+=(p-(16384-(16384.499999999996-p/360|0))*360)*s}return}if(r>=a[a.length-Ps.ENTRIES]){let p=a[a.length+Ps.PREV_ROTATION];switch(i){case j.setup:l.rotation=l.data.rotation+p*s;break;case j.first:case j.replace:p+=l.data.rotation-l.rotation,p-=(16384-(16384.499999999996-p/360|0))*360;case j.add:l.rotation+=p*s}return}const c=xt.binarySearch(a,r,Ps.ENTRIES),h=a[c+Ps.PREV_ROTATION],u=a[c],d=this.getCurvePercent((c>>1)-1,1-(r-u)/(a[c+Ps.PREV_TIME]-u));let f=a[c+Ps.ROTATION]-h;switch(f=h+(f-(16384-(16384.499999999996-f/360|0))*360)*d,i){case j.setup:l.rotation=l.data.rotation+(f-(16384-(16384.499999999996-f/360|0))*360)*s;break;case j.first:case j.replace:f+=l.data.rotation-l.rotation;case j.add:l.rotation+=(f-(16384-(16384.499999999996-f/360|0))*360)*s}}};let $t=Ps;$t.ENTRIES=2;$t.PREV_TIME=-2;$t.PREV_ROTATION=-1;$t.ROTATION=1;const Kt=class extends Nr{constructor(t){super(t),this.frames=K.newFloatArray(t*Kt.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(t,e,r,n){t*=Kt.ENTRIES,this.frames[t]=e,this.frames[t+Kt.X]=r,this.frames[t+Kt.Y]=n}apply(t,e,r,n,s,i,o){const a=this.frames,l=t.bones[this.boneIndex];if(!l.active)return;if(r<a[0]){switch(i){case j.setup:l.x=l.data.x,l.y=l.data.y;return;case j.first:l.x+=(l.data.x-l.x)*s,l.y+=(l.data.y-l.y)*s}return}let c=0,h=0;if(r>=a[a.length-Kt.ENTRIES])c=a[a.length+Kt.PREV_X],h=a[a.length+Kt.PREV_Y];else{const u=xt.binarySearch(a,r,Kt.ENTRIES);c=a[u+Kt.PREV_X],h=a[u+Kt.PREV_Y];const d=a[u],f=this.getCurvePercent(u/Kt.ENTRIES-1,1-(r-d)/(a[u+Kt.PREV_TIME]-d));c+=(a[u+Kt.X]-c)*f,h+=(a[u+Kt.Y]-h)*f}switch(i){case j.setup:l.x=l.data.x+c*s,l.y=l.data.y+h*s;break;case j.first:case j.replace:l.x+=(l.data.x+c-l.x)*s,l.y+=(l.data.y+h-l.y)*s;break;case j.add:l.x+=c*s,l.y+=h*s}}};let Yr=Kt;Yr.ENTRIES=3;Yr.PREV_TIME=-3;Yr.PREV_X=-2;Yr.PREV_Y=-1;Yr.X=1;Yr.Y=2;class br extends Yr{constructor(e){super(e)}getPropertyId(){return(2<<24)+this.boneIndex}apply(e,r,n,s,i,o,a){const l=this.frames,c=e.bones[this.boneIndex];if(!c.active)return;if(n<l[0]){switch(o){case j.setup:c.scaleX=c.data.scaleX,c.scaleY=c.data.scaleY;return;case j.first:c.scaleX+=(c.data.scaleX-c.scaleX)*i,c.scaleY+=(c.data.scaleY-c.scaleY)*i}return}let h=0,u=0;if(n>=l[l.length-br.ENTRIES])h=l[l.length+br.PREV_X]*c.data.scaleX,u=l[l.length+br.PREV_Y]*c.data.scaleY;else{const d=xt.binarySearch(l,n,br.ENTRIES);h=l[d+br.PREV_X],u=l[d+br.PREV_Y];const f=l[d],p=this.getCurvePercent(d/br.ENTRIES-1,1-(n-f)/(l[d+br.PREV_TIME]-f));h=(h+(l[d+br.X]-h)*p)*c.data.scaleX,u=(u+(l[d+br.Y]-u)*p)*c.data.scaleY}if(i==1)o==j.add?(c.scaleX+=h-c.data.scaleX,c.scaleY+=u-c.data.scaleY):(c.scaleX=h,c.scaleY=u);else{let d=0,f=0;if(a==lr.mixOut)switch(o){case j.setup:d=c.data.scaleX,f=c.data.scaleY,c.scaleX=d+(Math.abs(h)*V.signum(d)-d)*i,c.scaleY=f+(Math.abs(u)*V.signum(f)-f)*i;break;case j.first:case j.replace:d=c.scaleX,f=c.scaleY,c.scaleX=d+(Math.abs(h)*V.signum(d)-d)*i,c.scaleY=f+(Math.abs(u)*V.signum(f)-f)*i;break;case j.add:d=c.scaleX,f=c.scaleY,c.scaleX=d+(Math.abs(h)*V.signum(d)-c.data.scaleX)*i,c.scaleY=f+(Math.abs(u)*V.signum(f)-c.data.scaleY)*i}else switch(o){case j.setup:d=Math.abs(c.data.scaleX)*V.signum(h),f=Math.abs(c.data.scaleY)*V.signum(u),c.scaleX=d+(h-d)*i,c.scaleY=f+(u-f)*i;break;case j.first:case j.replace:d=Math.abs(c.scaleX)*V.signum(h),f=Math.abs(c.scaleY)*V.signum(u),c.scaleX=d+(h-d)*i,c.scaleY=f+(u-f)*i;break;case j.add:d=V.signum(h),f=V.signum(u),c.scaleX=Math.abs(c.scaleX)*d+(h-Math.abs(c.data.scaleX)*d)*i,c.scaleY=Math.abs(c.scaleY)*f+(u-Math.abs(c.data.scaleY)*f)*i}}}}class Ar extends Yr{constructor(e){super(e)}getPropertyId(){return(3<<24)+this.boneIndex}apply(e,r,n,s,i,o,a){const l=this.frames,c=e.bones[this.boneIndex];if(!c.active)return;if(n<l[0]){switch(o){case j.setup:c.shearX=c.data.shearX,c.shearY=c.data.shearY;return;case j.first:c.shearX+=(c.data.shearX-c.shearX)*i,c.shearY+=(c.data.shearY-c.shearY)*i}return}let h=0,u=0;if(n>=l[l.length-Ar.ENTRIES])h=l[l.length+Ar.PREV_X],u=l[l.length+Ar.PREV_Y];else{const d=xt.binarySearch(l,n,Ar.ENTRIES);h=l[d+Ar.PREV_X],u=l[d+Ar.PREV_Y];const f=l[d],p=this.getCurvePercent(d/Ar.ENTRIES-1,1-(n-f)/(l[d+Ar.PREV_TIME]-f));h=h+(l[d+Ar.X]-h)*p,u=u+(l[d+Ar.Y]-u)*p}switch(o){case j.setup:c.shearX=c.data.shearX+h*i,c.shearY=c.data.shearY+u*i;break;case j.first:case j.replace:c.shearX+=(c.data.shearX+h-c.shearX)*i,c.shearY+=(c.data.shearY+u-c.shearY)*i;break;case j.add:c.shearX+=h*i,c.shearY+=u*i}}}const Ge=class extends Nr{constructor(t){super(t),this.frames=K.newFloatArray(t*Ge.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(t,e,r,n,s,i){t*=Ge.ENTRIES,this.frames[t]=e,this.frames[t+Ge.R]=r,this.frames[t+Ge.G]=n,this.frames[t+Ge.B]=s,this.frames[t+Ge.A]=i}apply(t,e,r,n,s,i,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=this.frames;if(r<l[0]){switch(i){case j.setup:a.color.setFromColor(a.data.color);return;case j.first:const f=a.color,p=a.data.color;f.add((p.r-f.r)*s,(p.g-f.g)*s,(p.b-f.b)*s,(p.a-f.a)*s)}return}let c=0,h=0,u=0,d=0;if(r>=l[l.length-Ge.ENTRIES]){const f=l.length;c=l[f+Ge.PREV_R],h=l[f+Ge.PREV_G],u=l[f+Ge.PREV_B],d=l[f+Ge.PREV_A]}else{const f=xt.binarySearch(l,r,Ge.ENTRIES);c=l[f+Ge.PREV_R],h=l[f+Ge.PREV_G],u=l[f+Ge.PREV_B],d=l[f+Ge.PREV_A];const p=l[f],m=this.getCurvePercent(f/Ge.ENTRIES-1,1-(r-p)/(l[f+Ge.PREV_TIME]-p));c+=(l[f+Ge.R]-c)*m,h+=(l[f+Ge.G]-h)*m,u+=(l[f+Ge.B]-u)*m,d+=(l[f+Ge.A]-d)*m}if(s==1)a.color.set(c,h,u,d);else{const f=a.color;i==j.setup&&f.setFromColor(a.data.color),f.add((c-f.r)*s,(h-f.g)*s,(u-f.b)*s,(d-f.a)*s)}}};let yr=Ge;yr.ENTRIES=5;yr.PREV_TIME=-5;yr.PREV_R=-4;yr.PREV_G=-3;yr.PREV_B=-2;yr.PREV_A=-1;yr.R=1;yr.G=2;yr.B=3;yr.A=4;const ge=class extends Nr{constructor(t){super(t),this.frames=K.newFloatArray(t*ge.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(t,e,r,n,s,i,o,a,l){t*=ge.ENTRIES,this.frames[t]=e,this.frames[t+ge.R]=r,this.frames[t+ge.G]=n,this.frames[t+ge.B]=s,this.frames[t+ge.A]=i,this.frames[t+ge.R2]=o,this.frames[t+ge.G2]=a,this.frames[t+ge.B2]=l}apply(t,e,r,n,s,i,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const l=this.frames;if(r<l[0]){switch(i){case j.setup:a.color.setFromColor(a.data.color),a.darkColor.setFromColor(a.data.darkColor);return;case j.first:const g=a.color,y=a.darkColor,v=a.data.color,x=a.data.darkColor;g.add((v.r-g.r)*s,(v.g-g.g)*s,(v.b-g.b)*s,(v.a-g.a)*s),y.add((x.r-y.r)*s,(x.g-y.g)*s,(x.b-y.b)*s,0)}return}let c=0,h=0,u=0,d=0,f=0,p=0,m=0;if(r>=l[l.length-ge.ENTRIES]){const g=l.length;c=l[g+ge.PREV_R],h=l[g+ge.PREV_G],u=l[g+ge.PREV_B],d=l[g+ge.PREV_A],f=l[g+ge.PREV_R2],p=l[g+ge.PREV_G2],m=l[g+ge.PREV_B2]}else{const g=xt.binarySearch(l,r,ge.ENTRIES);c=l[g+ge.PREV_R],h=l[g+ge.PREV_G],u=l[g+ge.PREV_B],d=l[g+ge.PREV_A],f=l[g+ge.PREV_R2],p=l[g+ge.PREV_G2],m=l[g+ge.PREV_B2];const y=l[g],v=this.getCurvePercent(g/ge.ENTRIES-1,1-(r-y)/(l[g+ge.PREV_TIME]-y));c+=(l[g+ge.R]-c)*v,h+=(l[g+ge.G]-h)*v,u+=(l[g+ge.B]-u)*v,d+=(l[g+ge.A]-d)*v,f+=(l[g+ge.R2]-f)*v,p+=(l[g+ge.G2]-p)*v,m+=(l[g+ge.B2]-m)*v}if(s==1)a.color.set(c,h,u,d),a.darkColor.set(f,p,m,1);else{const g=a.color,y=a.darkColor;i==j.setup&&(g.setFromColor(a.data.color),y.setFromColor(a.data.darkColor)),g.add((c-g.r)*s,(h-g.g)*s,(u-g.b)*s,(d-g.a)*s),y.add((f-y.r)*s,(p-y.g)*s,(m-y.b)*s,0)}}};let vt=ge;vt.ENTRIES=8;vt.PREV_TIME=-8;vt.PREV_R=-7;vt.PREV_G=-6;vt.PREV_B=-5;vt.PREV_A=-4;vt.PREV_R2=-3;vt.PREV_G2=-2;vt.PREV_B2=-1;vt.R=1;vt.G=2;vt.B=3;vt.A=4;vt.R2=5;vt.G2=6;vt.B2=7;class ea{constructor(e){this.frames=K.newFloatArray(e),this.attachmentNames=new Array(e)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(e,r,n){this.frames[e]=r,this.attachmentNames[e]=n}apply(e,r,n,s,i,o,a){const l=e.slots[this.slotIndex];if(!l.bone.active)return;if(a==lr.mixOut){o==j.setup&&this.setAttachment(e,l,l.data.attachmentName);return}const c=this.frames;if(n<c[0]){(o==j.setup||o==j.first)&&this.setAttachment(e,l,l.data.attachmentName);return}let h=0;n>=c[c.length-1]?h=c.length-1:h=xt.binarySearch(c,n,1)-1;const u=this.attachmentNames[h];e.slots[this.slotIndex].setAttachment(u==null?null:e.getAttachment(this.slotIndex,u))}setAttachment(e,r,n){r.setAttachment(n==null?null:e.getAttachment(this.slotIndex,n))}}let ZA=null;class QI extends Nr{constructor(e){super(e),this.frames=K.newFloatArray(e),this.frameVertices=new Array(e),ZA==null&&(ZA=K.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(e,r,n){this.frames[e]=r,this.frameVertices[e]=n}apply(e,r,n,s,i,o,a){const l=e.slots[this.slotIndex];if(!l.bone.active)return;const c=l.getAttachment();if(!(c instanceof go)||c.deformAttachment!=this.attachment)return;const h=l.deform;h.length==0&&(o=j.setup);const u=this.frameVertices,d=u[0].length,f=this.frames;if(n<f[0]){const _=c;switch(o){case j.setup:h.length=0;return;case j.first:if(i==1){h.length=0;break}const b=K.setArraySize(h,d);if(_.bones==null){const A=_.vertices;for(let S=0;S<d;S++)b[S]+=(A[S]-b[S])*i}else{i=1-i;for(let A=0;A<d;A++)b[A]*=i}}return}const p=K.setArraySize(h,d);if(n>=f[f.length-1]){const _=u[f.length-1];if(i==1)if(o==j.add){const b=c;if(b.bones==null){const A=b.vertices;for(let S=0;S<d;S++)p[S]+=_[S]-A[S]}else for(let A=0;A<d;A++)p[A]+=_[A]}else K.arrayCopy(_,0,p,0,d);else switch(o){case j.setup:{const A=c;if(A.bones==null){const S=A.vertices;for(let T=0;T<d;T++){const E=S[T];p[T]=E+(_[T]-E)*i}}else for(let S=0;S<d;S++)p[S]=_[S]*i;break}case j.first:case j.replace:for(let A=0;A<d;A++)p[A]+=(_[A]-p[A])*i;break;case j.add:const b=c;if(b.bones==null){const A=b.vertices;for(let S=0;S<d;S++)p[S]+=(_[S]-A[S])*i}else for(let A=0;A<d;A++)p[A]+=_[A]*i}return}const m=xt.binarySearch(f,n),g=u[m-1],y=u[m],v=f[m],x=this.getCurvePercent(m-1,1-(n-v)/(f[m-1]-v));if(i==1)if(o==j.add){const _=c;if(_.bones==null){const b=_.vertices;for(let A=0;A<d;A++){const S=g[A];p[A]+=S+(y[A]-S)*x-b[A]}}else for(let b=0;b<d;b++){const A=g[b];p[b]+=A+(y[b]-A)*x}}else for(let _=0;_<d;_++){const b=g[_];p[_]=b+(y[_]-b)*x}else switch(o){case j.setup:{const b=c;if(b.bones==null){const A=b.vertices;for(let S=0;S<d;S++){const T=g[S],E=A[S];p[S]=E+(T+(y[S]-T)*x-E)*i}}else for(let A=0;A<d;A++){const S=g[A];p[A]=(S+(y[A]-S)*x)*i}break}case j.first:case j.replace:for(let b=0;b<d;b++){const A=g[b];p[b]+=(A+(y[b]-A)*x-p[b])*i}break;case j.add:const _=c;if(_.bones==null){const b=_.vertices;for(let A=0;A<d;A++){const S=g[A];p[A]+=(S+(y[A]-S)*x-b[A])*i}}else for(let b=0;b<d;b++){const A=g[b];p[b]+=(A+(y[b]-A)*x)*i}}}}class Mv{constructor(e){this.frames=K.newFloatArray(e),this.events=new Array(e)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(e,r){this.frames[e]=r.time,this.events[e]=r}apply(e,r,n,s,i,o,a){if(s==null)return;const l=this.frames,c=this.frames.length;if(r>n)this.apply(e,r,Number.MAX_VALUE,s,i,o,a),r=-1;else if(r>=l[c-1])return;if(n<l[0])return;let h=0;if(r<l[0])h=0;else{h=xt.binarySearch(l,r);const u=l[h];for(;h>0&&l[h-1]==u;)h--}for(;h<c&&n>=l[h];h++)s.push(this.events[h])}}class Zl{constructor(e){this.frames=K.newFloatArray(e),this.drawOrders=new Array(e)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(e,r,n){this.frames[e]=r,this.drawOrders[e]=n}apply(e,r,n,s,i,o,a){const l=e.drawOrder,c=e.slots;if(a==lr.mixOut&&o==j.setup){K.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}const h=this.frames;if(n<h[0]){(o==j.setup||o==j.first)&&K.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}let u=0;n>=h[h.length-1]?u=h.length-1:u=xt.binarySearch(h,n)-1;const d=this.drawOrders[u];if(d==null)K.arrayCopy(c,0,l,0,c.length);else for(let f=0,p=d.length;f<p;f++)l[f]=c[d[f]]}}const ye=class extends Nr{constructor(t){super(t),this.frames=K.newFloatArray(t*ye.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(t,e,r,n,s,i,o){t*=ye.ENTRIES,this.frames[t]=e,this.frames[t+ye.MIX]=r,this.frames[t+ye.SOFTNESS]=n,this.frames[t+ye.BEND_DIRECTION]=s,this.frames[t+ye.COMPRESS]=i?1:0,this.frames[t+ye.STRETCH]=o?1:0}apply(t,e,r,n,s,i,o){const a=this.frames,l=t.ikConstraints[this.ikConstraintIndex];if(!l.active)return;if(r<a[0]){switch(i){case j.setup:l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch;return;case j.first:l.mix+=(l.data.mix-l.mix)*s,l.softness+=(l.data.softness-l.softness)*s,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}return}if(r>=a[a.length-ye.ENTRIES]){i==j.setup?(l.mix=l.data.mix+(a[a.length+ye.PREV_MIX]-l.data.mix)*s,l.softness=l.data.softness+(a[a.length+ye.PREV_SOFTNESS]-l.data.softness)*s,o==lr.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=a[a.length+ye.PREV_BEND_DIRECTION],l.compress=a[a.length+ye.PREV_COMPRESS]!=0,l.stretch=a[a.length+ye.PREV_STRETCH]!=0)):(l.mix+=(a[a.length+ye.PREV_MIX]-l.mix)*s,l.softness+=(a[a.length+ye.PREV_SOFTNESS]-l.softness)*s,o==lr.mixIn&&(l.bendDirection=a[a.length+ye.PREV_BEND_DIRECTION],l.compress=a[a.length+ye.PREV_COMPRESS]!=0,l.stretch=a[a.length+ye.PREV_STRETCH]!=0));return}const c=xt.binarySearch(a,r,ye.ENTRIES),h=a[c+ye.PREV_MIX],u=a[c+ye.PREV_SOFTNESS],d=a[c],f=this.getCurvePercent(c/ye.ENTRIES-1,1-(r-d)/(a[c+ye.PREV_TIME]-d));i==j.setup?(l.mix=l.data.mix+(h+(a[c+ye.MIX]-h)*f-l.data.mix)*s,l.softness=l.data.softness+(u+(a[c+ye.SOFTNESS]-u)*f-l.data.softness)*s,o==lr.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=a[c+ye.PREV_BEND_DIRECTION],l.compress=a[c+ye.PREV_COMPRESS]!=0,l.stretch=a[c+ye.PREV_STRETCH]!=0)):(l.mix+=(h+(a[c+ye.MIX]-h)*f-l.mix)*s,l.softness+=(u+(a[c+ye.SOFTNESS]-u)*f-l.softness)*s,o==lr.mixIn&&(l.bendDirection=a[c+ye.PREV_BEND_DIRECTION],l.compress=a[c+ye.PREV_COMPRESS]!=0,l.stretch=a[c+ye.PREV_STRETCH]!=0))}};let qt=ye;qt.ENTRIES=6;qt.PREV_TIME=-6;qt.PREV_MIX=-5;qt.PREV_SOFTNESS=-4;qt.PREV_BEND_DIRECTION=-3;qt.PREV_COMPRESS=-2;qt.PREV_STRETCH=-1;qt.MIX=1;qt.SOFTNESS=2;qt.BEND_DIRECTION=3;qt.COMPRESS=4;qt.STRETCH=5;const ze=class extends Nr{constructor(t){super(t),this.frames=K.newFloatArray(t*ze.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(t,e,r,n,s,i){t*=ze.ENTRIES,this.frames[t]=e,this.frames[t+ze.ROTATE]=r,this.frames[t+ze.TRANSLATE]=n,this.frames[t+ze.SCALE]=s,this.frames[t+ze.SHEAR]=i}apply(t,e,r,n,s,i,o){const a=this.frames,l=t.transformConstraints[this.transformConstraintIndex];if(!l.active)return;if(r<a[0]){const f=l.data;switch(i){case j.setup:l.rotateMix=f.rotateMix,l.translateMix=f.translateMix,l.scaleMix=f.scaleMix,l.shearMix=f.shearMix;return;case j.first:l.rotateMix+=(f.rotateMix-l.rotateMix)*s,l.translateMix+=(f.translateMix-l.translateMix)*s,l.scaleMix+=(f.scaleMix-l.scaleMix)*s,l.shearMix+=(f.shearMix-l.shearMix)*s}return}let c=0,h=0,u=0,d=0;if(r>=a[a.length-ze.ENTRIES]){const f=a.length;c=a[f+ze.PREV_ROTATE],h=a[f+ze.PREV_TRANSLATE],u=a[f+ze.PREV_SCALE],d=a[f+ze.PREV_SHEAR]}else{const f=xt.binarySearch(a,r,ze.ENTRIES);c=a[f+ze.PREV_ROTATE],h=a[f+ze.PREV_TRANSLATE],u=a[f+ze.PREV_SCALE],d=a[f+ze.PREV_SHEAR];const p=a[f],m=this.getCurvePercent(f/ze.ENTRIES-1,1-(r-p)/(a[f+ze.PREV_TIME]-p));c+=(a[f+ze.ROTATE]-c)*m,h+=(a[f+ze.TRANSLATE]-h)*m,u+=(a[f+ze.SCALE]-u)*m,d+=(a[f+ze.SHEAR]-d)*m}if(i==j.setup){const f=l.data;l.rotateMix=f.rotateMix+(c-f.rotateMix)*s,l.translateMix=f.translateMix+(h-f.translateMix)*s,l.scaleMix=f.scaleMix+(u-f.scaleMix)*s,l.shearMix=f.shearMix+(d-f.shearMix)*s}else l.rotateMix+=(c-l.rotateMix)*s,l.translateMix+=(h-l.translateMix)*s,l.scaleMix+=(u-l.scaleMix)*s,l.shearMix+=(d-l.shearMix)*s}};let xr=ze;xr.ENTRIES=5;xr.PREV_TIME=-5;xr.PREV_ROTATE=-4;xr.PREV_TRANSLATE=-3;xr.PREV_SCALE=-2;xr.PREV_SHEAR=-1;xr.ROTATE=1;xr.TRANSLATE=2;xr.SCALE=3;xr.SHEAR=4;const en=class extends Nr{constructor(t){super(t),this.frames=K.newFloatArray(t*en.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(t,e,r){t*=en.ENTRIES,this.frames[t]=e,this.frames[t+en.VALUE]=r}apply(t,e,r,n,s,i,o){const a=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(!l.active)return;if(r<a[0]){switch(i){case j.setup:l.position=l.data.position;return;case j.first:l.position+=(l.data.position-l.position)*s}return}let c=0;if(r>=a[a.length-en.ENTRIES])c=a[a.length+en.PREV_VALUE];else{const h=xt.binarySearch(a,r,en.ENTRIES);c=a[h+en.PREV_VALUE];const u=a[h],d=this.getCurvePercent(h/en.ENTRIES-1,1-(r-u)/(a[h+en.PREV_TIME]-u));c+=(a[h+en.VALUE]-c)*d}i==j.setup?l.position=l.data.position+(c-l.data.position)*s:l.position+=(c-l.position)*s}};let vs=en;vs.ENTRIES=2;vs.PREV_TIME=-2;vs.PREV_VALUE=-1;vs.VALUE=1;class Mn extends vs{constructor(e){super(e)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(e,r,n,s,i,o,a){const l=this.frames,c=e.pathConstraints[this.pathConstraintIndex];if(!c.active)return;if(n<l[0]){switch(o){case j.setup:c.spacing=c.data.spacing;return;case j.first:c.spacing+=(c.data.spacing-c.spacing)*i}return}let h=0;if(n>=l[l.length-Mn.ENTRIES])h=l[l.length+Mn.PREV_VALUE];else{const u=xt.binarySearch(l,n,Mn.ENTRIES);h=l[u+Mn.PREV_VALUE];const d=l[u],f=this.getCurvePercent(u/Mn.ENTRIES-1,1-(n-d)/(l[u+Mn.PREV_TIME]-d));h+=(l[u+Mn.VALUE]-h)*f}o==j.setup?c.spacing=c.data.spacing+(h-c.data.spacing)*i:c.spacing+=(h-c.spacing)*i}}const Zt=class extends Nr{constructor(t){super(t),this.frames=K.newFloatArray(t*Zt.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(t,e,r,n){t*=Zt.ENTRIES,this.frames[t]=e,this.frames[t+Zt.ROTATE]=r,this.frames[t+Zt.TRANSLATE]=n}apply(t,e,r,n,s,i,o){const a=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(!l.active)return;if(r<a[0]){switch(i){case j.setup:l.rotateMix=l.data.rotateMix,l.translateMix=l.data.translateMix;return;case j.first:l.rotateMix+=(l.data.rotateMix-l.rotateMix)*s,l.translateMix+=(l.data.translateMix-l.translateMix)*s}return}let c=0,h=0;if(r>=a[a.length-Zt.ENTRIES])c=a[a.length+Zt.PREV_ROTATE],h=a[a.length+Zt.PREV_TRANSLATE];else{const u=xt.binarySearch(a,r,Zt.ENTRIES);c=a[u+Zt.PREV_ROTATE],h=a[u+Zt.PREV_TRANSLATE];const d=a[u],f=this.getCurvePercent(u/Zt.ENTRIES-1,1-(r-d)/(a[u+Zt.PREV_TIME]-d));c+=(a[u+Zt.ROTATE]-c)*f,h+=(a[u+Zt.TRANSLATE]-h)*f}i==j.setup?(l.rotateMix=l.data.rotateMix+(c-l.data.rotateMix)*s,l.translateMix=l.data.translateMix+(h-l.data.translateMix)*s):(l.rotateMix+=(c-l.rotateMix)*s,l.translateMix+=(h-l.translateMix)*s)}};let $n=Zt;$n.ENTRIES=3;$n.PREV_TIME=-3;$n.PREV_ROTATE=-2;$n.PREV_TRANSLATE=-1;$n.ROTATE=1;$n.TRANSLATE=2;const He=class{constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new JI(this),this.propertyIDs=new qX,this.animationsChanged=!1,this.trackEntryPool=new JX(()=>new Iv),this.data=t}update(t){t*=this.timeScale;const e=this.tracks;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s==null)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let i=t*s.timeScale;if(s.delay>0){if(s.delay-=i,s.delay>0)continue;i=-s.delay,s.delay=0}let o=s.next;if(o!=null){const a=s.trackLast-o.delay;if(a>=0){for(o.delay=0,o.trackTime+=s.timeScale==0?0:(a/s.timeScale+t)*o.timeScale,s.trackTime+=i,this.setCurrent(r,o,!0);o.mixingFrom!=null;)o.mixTime+=t,o=o.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&s.mixingFrom==null){e[r]=null,this.queue.end(s),this.disposeNext(s);continue}if(s.mixingFrom!=null&&this.updateMixingFrom(s,t)){let a=s.mixingFrom;for(s.mixingFrom=null,a!=null&&(a.mixingTo=null);a!=null;)this.queue.end(a),a=a.mixingFrom}s.trackTime+=i}this.queue.drain()}updateMixingFrom(t,e){const r=t.mixingFrom;if(r==null)return!0;const n=this.updateMixingFrom(r,e);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((r.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=r.mixingFrom,r.mixingFrom!=null&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),n):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)}apply(t){if(t==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();const e=this.events,r=this.tracks;let n=!1;for(let o=0,a=r.length;o<a;o++){const l=r[o];if(l==null||l.delay>0)continue;n=!0;const c=o==0?j.first:l.mixBlend;let h=l.alpha;l.mixingFrom!=null?h*=this.applyMixingFrom(l,t,c):l.trackTime>=l.trackEnd&&l.next==null&&(h=0);const u=l.animationLast,d=l.getAnimationTime(),f=l.animation.timelines.length,p=l.animation.timelines;if(o==0&&h==1||c==j.add)for(let m=0;m<f;m++){const g=p[m];g instanceof ea?this.applyAttachmentTimeline(g,t,d,c,!0):g.apply(t,u,d,e,h,c,lr.mixIn)}else{const m=l.timelineMode,g=l.timelinesRotation.length==0;g&&K.setArraySize(l.timelinesRotation,f<<1,null);const y=l.timelinesRotation;for(let v=0;v<f;v++){const x=p[v],_=m[v]==He.SUBSEQUENT?c:j.setup;x instanceof $t?this.applyRotateTimeline(x,t,d,h,_,y,v<<1,g):x instanceof ea?this.applyAttachmentTimeline(x,t,d,c,!0):x.apply(t,u,d,e,h,_,lr.mixIn)}}this.queueEvents(l,d),e.length=0,l.nextAnimationLast=d,l.nextTrackLast=l.trackTime}const s=this.unkeyedState+He.SETUP,i=t.slots;for(let o=0,a=t.slots.length;o<a;o++){const l=i[o];if(l.attachmentState==s){const c=l.data.attachmentName;l.setAttachment(c==null?null:t.getAttachment(l.data.index,c))}}return this.unkeyedState+=2,this.queue.drain(),n}applyMixingFrom(t,e,r){const n=t.mixingFrom;n.mixingFrom!=null&&this.applyMixingFrom(n,e,r);let s=0;t.mixDuration==0?(s=1,r==j.first&&(r=j.setup)):(s=t.mixTime/t.mixDuration,s>1&&(s=1),r!=j.first&&(r=n.mixBlend));const i=s<n.eventThreshold?this.events:null,o=s<n.attachmentThreshold,a=s<n.drawOrderThreshold,l=n.animationLast,c=n.getAnimationTime(),h=n.animation.timelines.length,u=n.animation.timelines,d=n.alpha*t.interruptAlpha,f=d*(1-s);if(r==j.add)for(let p=0;p<h;p++)u[p].apply(e,l,c,i,f,r,lr.mixOut);else{const p=n.timelineMode,m=n.timelineHoldMix,g=n.timelinesRotation.length==0;g&&K.setArraySize(n.timelinesRotation,h<<1,null);const y=n.timelinesRotation;n.totalAlpha=0;for(let v=0;v<h;v++){const x=u[v];let _=lr.mixOut,b,A=0;switch(p[v]){case He.SUBSEQUENT:if(!a&&x instanceof Zl)continue;b=r,A=f;break;case He.FIRST:b=j.setup,A=f;break;case He.HOLD_SUBSEQUENT:b=r,A=d;break;case He.HOLD_FIRST:b=j.setup,A=d;break;default:b=j.setup;const S=m[v];A=d*Math.max(0,1-S.mixTime/S.mixDuration);break}n.totalAlpha+=A,x instanceof $t?this.applyRotateTimeline(x,e,c,A,b,y,v<<1,g):x instanceof ea?this.applyAttachmentTimeline(x,e,c,b,o):(a&&x instanceof Zl&&b==j.setup&&(_=lr.mixIn),x.apply(e,l,c,i,A,b,_))}}return t.mixDuration>0&&this.queueEvents(n,c),this.events.length=0,n.nextAnimationLast=c,n.nextTrackLast=n.trackTime,s}applyAttachmentTimeline(t,e,r,n,s){const i=e.slots[t.slotIndex];if(!i.bone.active)return;const o=t.frames;if(r<o[0])(n==j.setup||n==j.first)&&this.setAttachment(e,i,i.data.attachmentName,s);else{let a;r>=o[o.length-1]?a=o.length-1:a=xt.binarySearch(o,r)-1,this.setAttachment(e,i,t.attachmentNames[a],s)}i.attachmentState<=this.unkeyedState&&(i.attachmentState=this.unkeyedState+He.SETUP)}setAttachment(t,e,r,n){e.setAttachment(r==null?null:t.getAttachment(e.data.index,r)),n&&(e.attachmentState=this.unkeyedState+He.CURRENT)}applyRotateTimeline(t,e,r,n,s,i,o,a){if(a&&(i[o]=0),n==1){t.apply(e,0,r,null,1,s,lr.mixIn);return}const l=t,c=l.frames,h=e.bones[l.boneIndex];if(!h.active)return;let u=0,d=0;if(r<c[0])switch(s){case j.setup:h.rotation=h.data.rotation;default:return;case j.first:u=h.rotation,d=h.data.rotation}else if(u=s==j.setup?h.data.rotation:h.rotation,r>=c[c.length-$t.ENTRIES])d=h.data.rotation+c[c.length+$t.PREV_ROTATION];else{const m=xt.binarySearch(c,r,$t.ENTRIES),g=c[m+$t.PREV_ROTATION],y=c[m],v=l.getCurvePercent((m>>1)-1,1-(r-y)/(c[m+$t.PREV_TIME]-y));d=c[m+$t.ROTATION]-g,d-=(16384-(16384.499999999996-d/360|0))*360,d=g+d*v+h.data.rotation,d-=(16384-(16384.499999999996-d/360|0))*360}let f=0,p=d-u;if(p-=(16384-(16384.499999999996-p/360|0))*360,p==0)f=i[o];else{let m=0,g=0;a?(m=0,g=p):(m=i[o],g=i[o+1]);const y=p>0;let v=m>=0;V.signum(g)!=V.signum(p)&&Math.abs(g)<=90&&(Math.abs(m)>180&&(m+=360*V.signum(m)),v=y),f=p+m-m%360,v!=y&&(f+=360*V.signum(m)),i[o]=f}i[o+1]=p,u+=f*n,h.rotation=u-(16384-(16384.499999999996-u/360|0))*360}queueEvents(t,e){const r=t.animationStart,n=t.animationEnd,s=n-r,i=t.trackLast%s,o=this.events;let a=0;const l=o.length;for(;a<l;a++){const h=o[a];if(h.time<i)break;h.time>n||this.queue.event(t,h)}let c=!1;for(t.loop?c=s==0||i>t.trackTime%s:c=e>=n&&t.animationLast<n,c&&this.queue.complete(t);a<l;a++)o[a].time<r||this.queue.event(t,o[a])}clearTracks(){const t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;const e=this.tracks[t];if(e==null)return;this.queue.end(e),this.disposeNext(e);let r=e;for(;;){const n=r.mixingFrom;if(n==null)break;this.queue.end(n),r.mixingFrom=null,r.mixingTo=null,r=n}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,r){const n=this.expandToIndex(t);this.tracks[t]=e,n!=null&&(r&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,n.mixingFrom!=null&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,r){const n=this.data.skeletonData.findAnimation(e);if(n==null)throw new Error(`Animation not found: ${e}`);return this.setAnimationWith(t,n,r)}setAnimationWith(t,e,r){if(e==null)throw new Error("animation cannot be null.");let n=!0,s=this.expandToIndex(t);s!=null&&(s.nextTrackLast==-1?(this.tracks[t]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.disposeNext(s),s=s.mixingFrom,n=!1):this.disposeNext(s));const i=this.trackEntry(t,e,r,s);return this.setCurrent(t,i,n),this.queue.drain(),i}addAnimation(t,e,r,n){const s=this.data.skeletonData.findAnimation(e);if(s==null)throw new Error(`Animation not found: ${e}`);return this.addAnimationWith(t,s,r,n)}addAnimationWith(t,e,r,n){if(e==null)throw new Error("animation cannot be null.");let s=this.expandToIndex(t);if(s!=null)for(;s.next!=null;)s=s.next;const i=this.trackEntry(t,e,r,s);if(s==null)this.setCurrent(t,i,!0),this.queue.drain();else if(s.next=i,n<=0){const o=s.animationEnd-s.animationStart;o!=0?(s.loop?n+=o*(1+(s.trackTime/o|0)):n+=Math.max(o,s.trackTime),n-=this.data.getMix(s.animation,e)):n=s.trackTime}return i.delay=n,i}setEmptyAnimation(t,e){const r=this.setAnimationWith(t,He.emptyAnimation,!1);return r.mixDuration=e,r.trackEnd=e,r}addEmptyAnimation(t,e,r){r<=0&&(r-=e);const n=this.addAnimationWith(t,He.emptyAnimation,!1,r);return n.mixDuration=e,n.trackEnd=e,n}setEmptyAnimations(t){const e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let r=0,n=this.tracks.length;r<n;r++){const s=this.tracks[r];s!=null&&this.setEmptyAnimation(s.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(K.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,r,n){const s=this.trackEntryPool.obtain();return s.trackIndex=t,s.animation=e,s.loop=r,s.holdPrevious=!1,s.eventThreshold=0,s.attachmentThreshold=0,s.drawOrderThreshold=0,s.animationStart=0,s.animationEnd=e.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.interruptAlpha=1,s.mixTime=0,s.mixDuration=n==null?0:this.data.getMix(n.animation,e),s.mixBlend=j.replace,s}disposeNext(t){let e=t.next;for(;e!=null;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();for(let t=0,e=this.tracks.length;t<e;t++){let r=this.tracks[t];if(r!=null){for(;r.mixingFrom!=null;)r=r.mixingFrom;do(r.mixingFrom==null||r.mixBlend!=j.add)&&this.computeHold(r),r=r.mixingTo;while(r!=null)}}}computeHold(t){const e=t.mixingTo,r=t.animation.timelines,n=t.animation.timelines.length,s=K.setArraySize(t.timelineMode,n);t.timelineHoldMix.length=0;const i=K.setArraySize(t.timelineHoldMix,n),o=this.propertyIDs;if(e!=null&&e.holdPrevious){for(let a=0;a<n;a++)s[a]=o.add(r[a].getPropertyId())?He.HOLD_FIRST:He.HOLD_SUBSEQUENT;return}e:for(let a=0;a<n;a++){const l=r[a],c=l.getPropertyId();if(!o.add(c))s[a]=He.SUBSEQUENT;else if(e==null||l instanceof ea||l instanceof Zl||l instanceof Mv||!e.animation.hasTimeline(c))s[a]=He.FIRST;else{for(let h=e.mixingTo;h!=null;h=h.mixingTo)if(!h.animation.hasTimeline(c)){if(t.mixDuration>0){s[a]=He.HOLD_MIX,i[a]=h;continue e}break}s[a]=He.HOLD_FIRST}}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(t==null)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}setAnimationByName(t,e,r){He.deprecatedWarning1||(He.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,r)}addAnimationByName(t,e,r,n){He.deprecatedWarning2||(He.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,r,n)}hasAnimation(t){return this.data.skeletonData.findAnimation(t)!==null}hasAnimationByName(t){return He.deprecatedWarning3||(He.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)}};let qr=He;qr.emptyAnimation=new xt("<empty>",[],0);qr.SUBSEQUENT=0;qr.FIRST=1;qr.HOLD_SUBSEQUENT=2;qr.HOLD_FIRST=3;qr.HOLD_MIX=4;qr.SETUP=1;qr.CURRENT=2;qr.deprecatedWarning1=!1;qr.deprecatedWarning2=!1;qr.deprecatedWarning3=!1;const Yn=class{constructor(){this.mixBlend=j.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}get time(){return Yn.deprecatedWarning1||(Yn.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(t){Yn.deprecatedWarning1||(Yn.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t}get endTime(){return Yn.deprecatedWarning2||(Yn.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(t){Yn.deprecatedWarning2||(Yn.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}};let Iv=Yn;Iv.deprecatedWarning1=!1;Iv.deprecatedWarning2=!1;const m0=class{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(wr.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(wr.interrupt),this.objects.push(t)}end(t){this.objects.push(wr.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(wr.dispose),this.objects.push(t)}complete(t){this.objects.push(wr.complete),this.objects.push(t)}event(t,e){this.objects.push(wr.event),this.objects.push(t),this.objects.push(e)}deprecateStuff(){return m0.deprecatedWarning1||(m0.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const t=this.objects,e=this.animState.listeners;for(let r=0;r<t.length;r+=2){const n=t[r],s=t[r+1];switch(n){case wr.start:s.listener!=null&&s.listener.start&&s.listener.start(s);for(let a=0;a<e.length;a++)e[a].start&&e[a].start(s);s.onStart&&this.deprecateStuff()&&s.onStart(s.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(s.trackIndex);break;case wr.interrupt:s.listener!=null&&s.listener.interrupt&&s.listener.interrupt(s);for(let a=0;a<e.length;a++)e[a].interrupt&&e[a].interrupt(s);break;case wr.end:s.listener!=null&&s.listener.end&&s.listener.end(s);for(let a=0;a<e.length;a++)e[a].end&&e[a].end(s);s.onEnd&&this.deprecateStuff()&&s.onEnd(s.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(s.trackIndex);case wr.dispose:s.listener!=null&&s.listener.dispose&&s.listener.dispose(s);for(let a=0;a<e.length;a++)e[a].dispose&&e[a].dispose(s);this.animState.trackEntryPool.free(s);break;case wr.complete:s.listener!=null&&s.listener.complete&&s.listener.complete(s);for(let a=0;a<e.length;a++)e[a].complete&&e[a].complete(s);const i=V.toInt(s.loopsCount());s.onComplete&&this.deprecateStuff()&&s.onComplete(s.trackIndex,i),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(s.trackIndex,i);break;case wr.event:const o=t[r+++2];s.listener!=null&&s.listener.event&&s.listener.event(s,o);for(let a=0;a<e.length;a++)e[a].event&&e[a].event(s,o);s.onEvent&&this.deprecateStuff()&&s.onEvent(s.trackIndex,o),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(s.trackIndex,o);break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};let JI=m0;JI.deprecatedWarning1=!1;var wr=(t=>(t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event",t))(wr||{});const g0=class{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,t==null)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,r){const n=this.skeletonData.findAnimation(t);if(n==null)throw new Error(`Animation not found: ${t}`);const s=this.skeletonData.findAnimation(e);if(s==null)throw new Error(`Animation not found: ${e}`);this.setMixWith(n,s,r)}setMixByName(t,e,r){g0.deprecatedWarning1||(g0.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,e,r)}setMixWith(t,e,r){if(t==null)throw new Error("from cannot be null.");if(e==null)throw new Error("to cannot be null.");const n=`${t.name}.${e.name}`;this.animationToMixTime[n]=r}getMix(t,e){const r=`${t.name}.${e.name}`,n=this.animationToMixTime[r];return n===void 0?this.defaultMix:n}};let ek=g0;ek.deprecatedWarning1=!1;class b9{constructor(e){this.atlas=e}newRegionAttachment(e,r,n){const s=this.atlas.findRegion(n);if(s==null)throw new Error(`Region not found in atlas: ${n} (region attachment: ${r})`);const i=new ce(r);return i.region=s,i}newMeshAttachment(e,r,n){const s=this.atlas.findRegion(n);if(s==null)throw new Error(`Region not found in atlas: ${n} (mesh attachment: ${r})`);const i=new ka(r);return i.region=s,i}newBoundingBoxAttachment(e,r){return new Cv(r)}newPathAttachment(e,r){return new Na(r)}newPointAttachment(e,r){return new Pv(r)}newClippingAttachment(e,r){return new Rv(r)}}class QA{constructor(e,r,n){if(this.matrix=new ot,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=r,this.parent=n,this.setToSetupPose()}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}isActive(){return this.active}update(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(e,r,n,s,i,o,a){this.ax=e,this.ay=r,this.arotation=n,this.ascaleX=s,this.ascaleY=i,this.ashearX=o,this.ashearY=a,this.appliedValid=!0;const l=this.parent,c=this.matrix,h=this.skeleton.scaleX,u=-this.skeleton.scaleY;if(l==null){const g=this.skeleton,y=n+90+a;c.a=V.cosDeg(n+o)*s*h,c.c=V.cosDeg(y)*i*h,c.b=V.sinDeg(n+o)*s*u,c.d=V.sinDeg(y)*i*u,c.tx=e*h+g.x,c.ty=r*u+g.y;return}let d=l.matrix.a,f=l.matrix.c,p=l.matrix.b,m=l.matrix.d;switch(c.tx=d*e+f*r+l.matrix.tx,c.ty=p*e+m*r+l.matrix.ty,this.data.transformMode){case st.Normal:{const g=n+90+a,y=V.cosDeg(n+o)*s,v=V.cosDeg(g)*i,x=V.sinDeg(n+o)*s,_=V.sinDeg(g)*i;c.a=d*y+f*x,c.c=d*v+f*_,c.b=p*y+m*x,c.d=p*v+m*_;return}case st.OnlyTranslation:{const g=n+90+a;c.a=V.cosDeg(n+o)*s,c.c=V.cosDeg(g)*i,c.b=V.sinDeg(n+o)*s,c.d=V.sinDeg(g)*i;break}case st.NoRotationOrReflection:{let g=d*d+p*p,y=0;g>1e-4?(g=Math.abs(d*m-f*p)/g,d/=this.skeleton.scaleX,p/=this.skeleton.scaleY,f=p*g,m=d*g,y=Math.atan2(p,d)*V.radDeg):(d=0,p=0,y=90-Math.atan2(m,f)*V.radDeg);const v=n+o-y,x=n+a-y+90,_=V.cosDeg(v)*s,b=V.cosDeg(x)*i,A=V.sinDeg(v)*s,S=V.sinDeg(x)*i;c.a=d*_-f*A,c.c=d*b-f*S,c.b=p*_+m*A,c.d=p*b+m*S;break}case st.NoScale:case st.NoScaleOrReflection:{const g=V.cosDeg(n),y=V.sinDeg(n);let v=(d*g+f*y)/h,x=(p*g+m*y)/u,_=Math.sqrt(v*v+x*x);_>1e-5&&(_=1/_),v*=_,x*=_,_=Math.sqrt(v*v+x*x),this.data.transformMode==st.NoScale&&d*m-f*p<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(_=-_);const b=Math.PI/2+Math.atan2(x,v),A=Math.cos(b)*_,S=Math.sin(b)*_,T=V.cosDeg(o)*s,E=V.cosDeg(90+a)*i,R=V.sinDeg(o)*s,P=V.sinDeg(90+a)*i;c.a=v*T+A*R,c.c=v*E+A*P,c.b=x*T+S*R,c.d=x*E+S*P;break}}c.a*=h,c.c*=h,c.b*=u,c.d*=u}setToSetupPose(){const e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*V.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*V.radDeg}getWorldScaleX(){const e=this.matrix;return Math.sqrt(e.a*e.a+e.c*e.c)}getWorldScaleY(){const e=this.matrix;return Math.sqrt(e.b*e.b+e.d*e.d)}updateAppliedTransform(){this.appliedValid=!0;const e=this.parent,r=this.matrix;if(e==null){this.ax=r.tx,this.ay=r.ty,this.arotation=Math.atan2(r.b,r.a)*V.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*V.radDeg;return}const n=e.matrix,s=1/(n.a*n.d-n.b*n.c),i=r.tx-n.tx,o=r.ty-n.ty;this.ax=i*n.d*s-o*n.c*s,this.ay=o*n.a*s-i*n.b*s;const a=s*n.d,l=s*n.a,c=s*n.c,h=s*n.b,u=a*r.a-c*r.b,d=a*r.c-c*r.d,f=l*r.b-h*r.a,p=l*r.d-h*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+f*f),this.ascaleX>1e-4){const m=u*p-d*f;this.ascaleY=m/this.ascaleX,this.ashearY=Math.atan2(u*d+f*p,m)*V.radDeg,this.arotation=Math.atan2(f,u)*V.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,d)*V.radDeg}worldToLocal(e){const r=this.matrix,n=r.a,s=r.c,i=r.b,o=r.d,a=1/(n*o-s*i),l=e.x-r.tx,c=e.y-r.ty;return e.x=l*o*a-c*s*a,e.y=c*n*a-l*i*a,e}localToWorld(e){const r=this.matrix,n=e.x,s=e.y;return e.x=n*r.a+s*r.c+r.tx,e.y=n*r.b+s*r.d+r.ty,e}worldToLocalRotation(e){const r=V.sinDeg(e),n=V.cosDeg(e),s=this.matrix;return Math.atan2(s.a*r-s.b*n,s.d*n-s.c*r)*V.radDeg}localToWorldRotation(e){const r=V.sinDeg(e),n=V.cosDeg(e),s=this.matrix;return Math.atan2(n*s.b+r*s.d,n*s.a+r*s.c)*V.radDeg}rotateWorld(e){const r=this.matrix,n=r.a,s=r.c,i=r.b,o=r.d,a=V.cosDeg(e),l=V.sinDeg(e);r.a=a*n-l*i,r.c=a*s-l*o,r.b=l*n+a*i,r.d=l*s+a*o,this.appliedValid=!1}}class tk{constructor(e,r,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=st.Normal,this.skinRequired=!1,this.color=new de,e<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");this.index=e,this.name=r,this.parent=n}}class kv{constructor(e,r,n){this.name=e,this.order=r,this.skinRequired=n}}let rk=class{constructor(e,r){if(r==null)throw new Error("data cannot be null.");this.time=e,this.data=r}};class nk{constructor(e){this.name=e}}class A9{constructor(e,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(let n=0;n<e.bones.length;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findBone(e.target.name)}isActive(){return this.active}apply(){this.update()}update(){const e=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}}apply1(e,r,n,s,i,o,a){e.appliedValid||e.updateAppliedTransform();const l=e.parent.matrix,c=l.a;let h=l.c;const u=l.b;let d=l.d,f=-e.ashearX-e.arotation,p=0,m=0;switch(e.data.transformMode){case st.OnlyTranslation:p=r-e.worldX,m=n-e.worldY;break;case st.NoRotationOrReflection:const v=Math.abs(c*d-h*u)/(c*c+u*u),x=c/e.skeleton.scaleX,_=u/e.skeleton.scaleY;h=-_*v*e.skeleton.scaleX,d=x*v*e.skeleton.scaleY,f+=Math.atan2(_,x)*V.radDeg;default:const b=r-l.tx,A=n-l.ty,S=c*d-h*u;p=(b*d-A*h)/S-e.ax,m=(A*c-b*u)/S-e.ay}f+=Math.atan2(m,p)*V.radDeg,e.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let g=e.ascaleX,y=e.ascaleY;if(s||i){switch(e.data.transformMode){case st.NoScale:case st.NoScaleOrReflection:p=r-e.worldX,m=n-e.worldY}const v=e.data.length*g,x=Math.sqrt(p*p+m*m);if(s&&x<v||i&&x>v&&v>1e-4){const _=(x/v-1)*a+1;g*=_,o&&(y*=_)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+f*a,g,y,e.ashearX,e.ashearY)}apply2(e,r,n,s,i,o,a,l){if(l==0){r.updateWorldTransform();return}e.appliedValid||e.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();const c=e.ax,h=e.ay;let u=e.ascaleX,d=u,f=e.ascaleY,p=r.ascaleX;const m=e.matrix;let g=0,y=0,v=0;u<0?(u=-u,g=180,v=-1):(g=0,v=1),f<0&&(f=-f,v=-v),p<0?(p=-p,y=180):y=0;const x=r.ax;let _=0,b=0,A=0,S=m.a,T=m.c,E=m.b,R=m.d;const P=Math.abs(u-f)<=1e-4;P?(_=r.ay,b=S*x+T*_+m.tx,A=E*x+R*_+m.ty):(_=0,b=S*x+m.tx,A=E*x+m.ty);const D=e.parent.matrix;S=D.a,T=D.c,E=D.b,R=D.d;const k=1/(S*R-T*E);let M=b-D.tx,G=A-D.ty;const B=(M*R-G*T)*k-c,U=(G*S-M*E)*k-h,F=Math.sqrt(B*B+U*U);let O=r.data.length*p,I,L;if(F<1e-4){this.apply1(e,n,s,!1,o,!1,l),r.updateWorldTransformWith(x,_,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);return}M=n-D.tx,G=s-D.ty;let z=(M*R-G*T)*k-c,X=(G*S-M*E)*k-h,H=z*z+X*X;if(a!=0){a*=u*(p+1)/2;const ie=Math.sqrt(H),Re=ie-F-O*u+a;if(Re>0){let Se=Math.min(1,Re/(a*2))-1;Se=(Re-a*(1-Se*Se))/ie,z-=Se*z,X-=Se*X,H=z*z+X*X}}e:if(P){O*=u;let ie=(H-F*F-O*O)/(2*F*O);ie<-1?ie=-1:ie>1&&(ie=1,o&&(d*=(Math.sqrt(H)/(F+O)-1)*l+1)),L=Math.acos(ie)*i,S=F+O*ie,T=O*Math.sin(L),I=Math.atan2(X*S-z*T,z*S+X*T)}else{S=u*O,T=f*O;const ie=S*S,Re=T*T,Se=Math.atan2(X,z);E=Re*F*F+ie*H-ie*Re;const Te=-2*Re*F,ue=Re-ie;if(R=Te*Te-4*ue*E,R>=0){let yo=Math.sqrt(R);Te<0&&(yo=-yo),yo=-(Te+yo)/2;const Lv=yo/ue,Ov=E/yo,xo=Math.abs(Lv)<Math.abs(Ov)?Lv:Ov;if(xo*xo<=H){G=Math.sqrt(H-xo*xo)*i,I=Se-Math.atan2(G,xo),L=Math.atan2(G/f,(xo-F)/u);break e}}let Ee=V.PI,Ce=F-S,Je=Ce*Ce,at=0,wn=0,Hn=F+S,bn=Hn*Hn,zf=0;E=-S*F/(ie-Re),E>=-1&&E<=1&&(E=Math.acos(E),M=S*Math.cos(E)+F,G=T*Math.sin(E),R=M*M+G*G,R<Je&&(Ee=E,Je=R,Ce=M,at=G),R>bn&&(wn=E,bn=R,Hn=M,zf=G)),H<=(Je+bn)/2?(I=Se-Math.atan2(at*i,Ce),L=Ee*i):(I=Se-Math.atan2(zf*i,Hn),L=wn*i)}const oe=Math.atan2(_,x)*v;let te=e.arotation;I=(I-oe)*V.radDeg+g-te,I>180?I-=360:I<-180&&(I+=360),e.updateWorldTransformWith(c,h,te+I*l,d,e.ascaleY,0,0),te=r.arotation,L=((L+oe)*V.radDeg-r.ashearX)*v+y-te,L>180?L-=360:L<-180&&(L+=360),r.updateWorldTransformWith(x,_,te+L*l,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)}}class sk extends kv{constructor(e){super(e,0,!1),this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}}class ik extends kv{constructor(e){super(e,0,!1),this.bones=new Array}}var kt=(t=>(t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t))(kt||{});const Li=class{constructor(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let r=0,n=t.bones.length;r<n;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}isActive(){return this.active}apply(){this.update()}update(){const t=this.target.getAttachment();if(!(t instanceof Na))return;const e=this.rotateMix,r=this.translateMix,n=r>0,s=e>0;if(!n&&!s)return;const i=this.data,o=i.spacingMode,a=o==kt.Length,l=i.rotateMode,c=l==Vn.Tangent,h=l==Vn.ChainScale,u=this.bones.length,d=c?u:u+1,f=this.bones,p=K.setArraySize(this.spaces,d);let m=null;const g=this.spacing;if(h||a){h&&(m=K.setArraySize(this.lengths,u));for(let A=0,S=d-1;A<S;){const T=f[A],E=T.data.length;if(E<Li.epsilon)h&&(m[A]=0),p[++A]=0;else{const R=E*T.matrix.a,P=E*T.matrix.b,D=Math.sqrt(R*R+P*P);h&&(m[A]=D),p[++A]=(a?E+g:g)*D/E}}}else for(let A=1;A<d;A++)p[A]=g;const y=this.computeWorldPositions(t,d,c,i.positionMode==Ln.Percent,o==kt.Percent);let v=y[0],x=y[1],_=i.offsetRotation,b=!1;if(_==0)b=l==Vn.Chain;else{b=!1;const A=this.target.bone.matrix;_*=A.a*A.d-A.b*A.c>0?V.degRad:-V.degRad}for(let A=0,S=3;A<u;A++,S+=3){const T=f[A],E=T.matrix;E.tx+=(v-E.tx)*r,E.ty+=(x-E.ty)*r;const R=y[S],P=y[S+1],D=R-v,k=P-x;if(h){const M=m[A];if(M!=0){const G=(Math.sqrt(D*D+k*k)/M-1)*e+1;E.a*=G,E.b*=G}}if(v=R,x=P,s){const M=E.a,G=E.c,B=E.b,U=E.d;let F=0,O=0,I=0;if(c&&(c?F=y[S-1]:p[A+1]==0?F=y[S+2]:F=Math.atan2(k,D)),F-=Math.atan2(B,M),b){O=Math.cos(F),I=Math.sin(F);const L=T.data.length;v+=(L*(O*M-I*B)-D)*e,x+=(L*(I*M+O*B)-k)*e}else F+=_;F>V.PI?F-=V.PI2:F<-V.PI&&(F+=V.PI2),F*=e,O=Math.cos(F),I=Math.sin(F),E.a=O*M-I*B,E.c=O*G-I*U,E.b=I*M+O*B,E.d=I*G+O*U}T.appliedValid=!1}}computeWorldPositions(t,e,r,n,s){const i=this.target;let o=this.position;const a=this.spaces,l=K.setArraySize(this.positions,e*3+2);let c=null;const h=t.closed;let u=t.worldVerticesLength,d=u/6,f=Li.NONE;if(!t.constantSpeed){const F=t.lengths;d-=h?1:2;const O=F[d];if(n&&(o*=O),s)for(let I=0;I<e;I++)a[I]*=O;c=K.setArraySize(this.world,8);for(let I=0,L=0,z=0;I<e;I++,L+=3){const X=a[I];o+=X;let H=o;if(h)H%=O,H<0&&(H+=O),z=0;else if(H<0){f!=Li.BEFORE&&(f=Li.BEFORE,t.computeWorldVertices(i,2,4,c,0,2)),this.addBeforePosition(H,c,0,l,L);continue}else if(H>O){f!=Li.AFTER&&(f=Li.AFTER,t.computeWorldVertices(i,u-6,4,c,0,2)),this.addAfterPosition(H-O,c,0,l,L);continue}for(;;z++){const oe=F[z];if(!(H>oe)){if(z==0)H/=oe;else{const te=F[z-1];H=(H-te)/(oe-te)}break}}z!=f&&(f=z,h&&z==d?(t.computeWorldVertices(i,u-4,4,c,0,2),t.computeWorldVertices(i,0,4,c,4,2)):t.computeWorldVertices(i,z*6+2,8,c,0,2)),this.addCurvePosition(H,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],l,L,r||I>0&&X==0)}return l}h?(u+=2,c=K.setArraySize(this.world,u),t.computeWorldVertices(i,2,u-4,c,0,2),t.computeWorldVertices(i,0,2,c,u-4,2),c[u-2]=c[0],c[u-1]=c[1]):(d--,u-=4,c=K.setArraySize(this.world,u),t.computeWorldVertices(i,2,u,c,0,2));const p=K.setArraySize(this.curves,d);let m=0,g=c[0],y=c[1],v=0,x=0,_=0,b=0,A=0,S=0,T=0,E=0,R=0,P=0,D=0,k=0,M=0,G=0;for(let F=0,O=2;F<d;F++,O+=6)v=c[O],x=c[O+1],_=c[O+2],b=c[O+3],A=c[O+4],S=c[O+5],T=(g-v*2+_)*.1875,E=(y-x*2+b)*.1875,R=((v-_)*3-g+A)*.09375,P=((x-b)*3-y+S)*.09375,D=T*2+R,k=E*2+P,M=(v-g)*.75+T+R*.16666667,G=(x-y)*.75+E+P*.16666667,m+=Math.sqrt(M*M+G*G),M+=D,G+=k,D+=R,k+=P,m+=Math.sqrt(M*M+G*G),M+=D,G+=k,m+=Math.sqrt(M*M+G*G),M+=D+R,G+=k+P,m+=Math.sqrt(M*M+G*G),p[F]=m,g=A,y=S;if(n&&(o*=m),s)for(let F=0;F<e;F++)a[F]*=m;const B=this.segments;let U=0;for(let F=0,O=0,I=0,L=0;F<e;F++,O+=3){const z=a[F];o+=z;let X=o;if(h)X%=m,X<0&&(X+=m),I=0;else if(X<0){this.addBeforePosition(X,c,0,l,O);continue}else if(X>m){this.addAfterPosition(X-m,c,u-4,l,O);continue}for(;;I++){const H=p[I];if(!(X>H)){if(I==0)X/=H;else{const oe=p[I-1];X=(X-oe)/(H-oe)}break}}if(I!=f){f=I;let H=I*6;for(g=c[H],y=c[H+1],v=c[H+2],x=c[H+3],_=c[H+4],b=c[H+5],A=c[H+6],S=c[H+7],T=(g-v*2+_)*.03,E=(y-x*2+b)*.03,R=((v-_)*3-g+A)*.006,P=((x-b)*3-y+S)*.006,D=T*2+R,k=E*2+P,M=(v-g)*.3+T+R*.16666667,G=(x-y)*.3+E+P*.16666667,U=Math.sqrt(M*M+G*G),B[0]=U,H=1;H<8;H++)M+=D,G+=k,D+=R,k+=P,U+=Math.sqrt(M*M+G*G),B[H]=U;M+=D,G+=k,U+=Math.sqrt(M*M+G*G),B[8]=U,M+=D+R,G+=k+P,U+=Math.sqrt(M*M+G*G),B[9]=U,L=0}for(X*=U;;L++){const H=B[L];if(!(X>H)){if(L==0)X/=H;else{const oe=B[L-1];X=L+(X-oe)/(H-oe)}break}}this.addCurvePosition(X*.1,g,y,v,x,_,b,A,S,l,O,r||F>0&&z==0)}return l}addBeforePosition(t,e,r,n,s){const i=e[r],o=e[r+1],a=e[r+2]-i,l=e[r+3]-o,c=Math.atan2(l,a);n[s]=i+t*Math.cos(c),n[s+1]=o+t*Math.sin(c),n[s+2]=c}addAfterPosition(t,e,r,n,s){const i=e[r+2],o=e[r+3],a=i-e[r],l=o-e[r+1],c=Math.atan2(l,a);n[s]=i+t*Math.cos(c),n[s+1]=o+t*Math.sin(c),n[s+2]=c}addCurvePosition(t,e,r,n,s,i,o,a,l,c,h,u){(t==0||isNaN(t))&&(t=1e-4);const d=t*t,f=d*t,p=1-t,m=p*p,g=m*p,y=p*t,v=y*3,x=p*v,_=v*t,b=e*g+n*x+i*_+a*f,A=r*g+s*x+o*_+l*f;c[h]=b,c[h+1]=A,u&&(c[h+2]=Math.atan2(A-(r*m+s*y*2+o*d),b-(e*m+n*y*2+i*d)))}};let Jc=Li;Jc.NONE=-1;Jc.BEFORE=-2;Jc.AFTER=-3;Jc.epsilon=1e-5;class S9{constructor(e,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new e9,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(let n=0;n<e.bones.length;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findBone(e.target.name)}isActive(){return this.active}apply(){this.update()}update(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()}applyAbsoluteWorld(){const e=this.rotateMix,r=this.translateMix,n=this.scaleMix,s=this.shearMix,i=this.target,o=i.matrix,a=o.a,l=o.c,c=o.b,h=o.d,u=a*h-l*c>0?V.degRad:-V.degRad,d=this.data.offsetRotation*u,f=this.data.offsetShearY*u,p=this.bones;for(let m=0,g=p.length;m<g;m++){const y=p[m];let v=!1;const x=y.matrix;if(e!=0){const _=x.a,b=x.c,A=x.b,S=x.d;let T=Math.atan2(c,a)-Math.atan2(A,_)+d;T>V.PI?T-=V.PI2:T<-V.PI&&(T+=V.PI2),T*=e;const E=Math.cos(T),R=Math.sin(T);x.a=E*_-R*A,x.c=E*b-R*S,x.b=R*_+E*A,x.d=R*b+E*S,v=!0}if(r!=0){const _=this.temp;i.localToWorld(_.set(this.data.offsetX,this.data.offsetY)),x.tx+=(_.x-x.tx)*r,x.ty+=(_.y-x.ty)*r,v=!0}if(n>0){let _=Math.sqrt(x.a*x.a+x.b*x.b),b=Math.sqrt(a*a+c*c);_>1e-5&&(_=(_+(b-_+this.data.offsetScaleX)*n)/_),x.a*=_,x.b*=_,_=Math.sqrt(x.c*x.c+x.d*x.d),b=Math.sqrt(l*l+h*h),_>1e-5&&(_=(_+(b-_+this.data.offsetScaleY)*n)/_),x.c*=_,x.d*=_,v=!0}if(s>0){const _=x.c,b=x.d,A=Math.atan2(b,_);let S=Math.atan2(h,l)-Math.atan2(c,a)-(A-Math.atan2(x.b,x.a));S>V.PI?S-=V.PI2:S<-V.PI&&(S+=V.PI2),S=A+(S+f)*s;const T=Math.sqrt(_*_+b*b);x.c=Math.cos(S)*T,x.d=Math.sin(S)*T,v=!0}v&&(y.appliedValid=!1)}}applyRelativeWorld(){const e=this.rotateMix,r=this.translateMix,n=this.scaleMix,s=this.shearMix,i=this.target,o=i.matrix,a=o.a,l=o.c,c=o.b,h=o.d,u=a*h-l*c>0?V.degRad:-V.degRad,d=this.data.offsetRotation*u,f=this.data.offsetShearY*u,p=this.bones;for(let m=0,g=p.length;m<g;m++){const y=p[m];let v=!1;const x=y.matrix;if(e!=0){const _=x.a,b=x.c,A=x.b,S=x.d;let T=Math.atan2(c,a)+d;T>V.PI?T-=V.PI2:T<-V.PI&&(T+=V.PI2),T*=e;const E=Math.cos(T),R=Math.sin(T);x.a=E*_-R*A,x.c=E*b-R*S,x.b=R*_+E*A,x.d=R*b+E*S,v=!0}if(r!=0){const _=this.temp;i.localToWorld(_.set(this.data.offsetX,this.data.offsetY)),x.tx+=_.x*r,x.ty+=_.y*r,v=!0}if(n>0){let _=(Math.sqrt(a*a+c*c)-1+this.data.offsetScaleX)*n+1;x.a*=_,x.b*=_,_=(Math.sqrt(l*l+h*h)-1+this.data.offsetScaleY)*n+1,x.c*=_,x.d*=_,v=!0}if(s>0){let _=Math.atan2(h,l)-Math.atan2(c,a);_>V.PI?_-=V.PI2:_<-V.PI&&(_+=V.PI2);const b=x.c,A=x.d;_=Math.atan2(A,b)+(_-V.PI/2+f)*s;const S=Math.sqrt(b*b+A*A);x.c=Math.cos(_)*S,x.d=Math.sin(_)*S,v=!0}v&&(y.appliedValid=!1)}}applyAbsoluteLocal(){const e=this.rotateMix,r=this.translateMix,n=this.scaleMix,s=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();const o=this.bones;for(let a=0,l=o.length;a<l;a++){const c=o[a];c.appliedValid||c.updateAppliedTransform();let h=c.arotation;if(e!=0){let g=i.arotation-h+this.data.offsetRotation;g-=(16384-(16384.499999999996-g/360|0))*360,h+=g*e}let u=c.ax,d=c.ay;r!=0&&(u+=(i.ax-u+this.data.offsetX)*r,d+=(i.ay-d+this.data.offsetY)*r);let f=c.ascaleX,p=c.ascaleY;n>0&&(f>1e-5&&(f=(f+(i.ascaleX-f+this.data.offsetScaleX)*n)/f),p>1e-5&&(p=(p+(i.ascaleY-p+this.data.offsetScaleY)*n)/p));const m=c.ashearY;if(s>0){let g=i.ashearY-m+this.data.offsetShearY;g-=(16384-(16384.499999999996-g/360|0))*360,c.shearY+=g*s}c.updateWorldTransformWith(u,d,h,f,p,c.ashearX,m)}}applyRelativeLocal(){const e=this.rotateMix,r=this.translateMix,n=this.scaleMix,s=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();const o=this.bones;for(let a=0,l=o.length;a<l;a++){const c=o[a];c.appliedValid||c.updateAppliedTransform();let h=c.arotation;e!=0&&(h+=(i.arotation+this.data.offsetRotation)*e);let u=c.ax,d=c.ay;r!=0&&(u+=(i.ax+this.data.offsetX)*r,d+=(i.ay+this.data.offsetY)*r);let f=c.ascaleX,p=c.ascaleY;n>0&&(f>1e-5&&(f*=(i.ascaleX-1+this.data.offsetScaleX)*n+1),p>1e-5&&(p*=(i.ascaleY-1+this.data.offsetScaleY)*n+1));let m=c.ashearY;s>0&&(m+=(i.ashearY+this.data.offsetShearY)*s),c.updateWorldTransformWith(u,d,h,f,p,c.ashearX,m)}}}const Pl=class{constructor(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,t==null)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){const r=t.bones[e];let n;if(r.parent==null)n=new QA(r,this,null);else{const s=this.bones[r.parent.index];n=new QA(r,this,s),s.children.push(n)}this.bones.push(n)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){const r=t.slots[e],n=this.bones[r.boneData.index],s=new ZI(r,n);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){const r=t.ikConstraints[e];this.ikConstraints.push(new A9(r,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){const r=t.transformConstraints[e];this.transformConstraints.push(new S9(r,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){const r=t.pathConstraints[e];this.pathConstraints.push(new Jc(r,this))}this.color=new de(1,1,1,1),this.updateCache()}updateCache(){const t=this._updateCache;t.length=0,this.updateCacheReset.length=0;const e=this.bones;for(let c=0,h=e.length;c<h;c++){const u=e[c];u.sorted=u.data.skinRequired,u.active=!u.sorted}if(this.skin!=null){const c=this.skin.bones;for(let h=0,u=this.skin.bones.length;h<u;h++){let d=this.bones[c[h].index];do d.sorted=!1,d.active=!0,d=d.parent;while(d!=null)}}const r=this.ikConstraints,n=this.transformConstraints,s=this.pathConstraints,i=r.length,o=n.length,a=s.length,l=i+o+a;e:for(let c=0;c<l;c++){for(let h=0;h<i;h++){const u=r[h];if(u.data.order==c){this.sortIkConstraint(u);continue e}}for(let h=0;h<o;h++){const u=n[h];if(u.data.order==c){this.sortTransformConstraint(u);continue e}}for(let h=0;h<a;h++){const u=s[h];if(u.data.order==c){this.sortPathConstraint(u);continue e}}}for(let c=0,h=e.length;c<h;c++)this.sortBone(e[c])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin!=null&&K.contains(this.skin.constraints,t.data,!0)),!t.active)return;const e=t.target;this.sortBone(e);const r=t.bones,n=r[0];if(this.sortBone(n),r.length>1){const s=r[r.length-1];this._updateCache.indexOf(s)>-1||this.updateCacheReset.push(s)}this._updateCache.push(t),this.sortReset(n.children),r[r.length-1].sorted=!0}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin!=null&&K.contains(this.skin.constraints,t.data,!0)),!t.active)return;const e=t.target,r=e.data.index,n=e.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,r,n),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,n);for(let a=0,l=this.data.skins.length;a<l;a++)this.sortPathConstraintAttachment(this.data.skins[a],r,n);const s=e.getAttachment();s instanceof Na&&this.sortPathConstraintAttachmentWith(s,n);const i=t.bones,o=i.length;for(let a=0;a<o;a++)this.sortBone(i[a]);this._updateCache.push(t);for(let a=0;a<o;a++)this.sortReset(i[a].children);for(let a=0;a<o;a++)i[a].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin!=null&&K.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);const e=t.bones,r=e.length;if(t.data.local)for(let n=0;n<r;n++){const s=e[n];this.sortBone(s.parent),this._updateCache.indexOf(s)>-1||this.updateCacheReset.push(s)}else for(let n=0;n<r;n++)this.sortBone(e[n]);this._updateCache.push(t);for(let n=0;n<r;n++)this.sortReset(e[n].children);for(let n=0;n<r;n++)e[n].sorted=!0}sortPathConstraintAttachment(t,e,r){const n=t.attachments[e];if(n)for(const s in n)this.sortPathConstraintAttachmentWith(n[s],r)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof Na))return;const r=t.bones;if(r==null)this.sortBone(e);else{const n=this.bones;let s=0;for(;s<r.length;){const i=r[s++];for(let o=s+i;s<o;s++){const a=r[s];this.sortBone(n[a])}}}}sortBone(t){if(t.sorted)return;const e=t.parent;e!=null&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,r=t.length;e<r;e++){const n=t[e];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}}updateWorldTransform(){const t=this.updateCacheReset;for(let r=0,n=t.length;r<n;r++){const s=t[r];s.ax=s.x,s.ay=s.y,s.arotation=s.rotation,s.ascaleX=s.scaleX,s.ascaleY=s.scaleY,s.ashearX=s.shearX,s.ashearY=s.shearY,s.appliedValid=!0}const e=this._updateCache;for(let r=0,n=e.length;r<n;r++)e[r].update()}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const t=this.bones;for(let s=0,i=t.length;s<i;s++)t[s].setToSetupPose();const e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){const o=e[s];o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}const r=this.transformConstraints;for(let s=0,i=r.length;s<i;s++){const o=r[s],a=o.data;o.rotateMix=a.rotateMix,o.translateMix=a.translateMix,o.scaleMix=a.scaleMix,o.shearMix=a.shearMix}const n=this.pathConstraints;for(let s=0,i=n.length;s<i;s++){const o=n[s],a=o.data;o.position=a.position,o.spacing=a.spacing,o.rotateMix=a.rotateMix,o.translateMix=a.translateMix}}setSlotsToSetupPose(){const t=this.slots;K.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,r=t.length;e<r;e++)t[e].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return-1}setSkinByName(t){const e=this.data.findSkin(t);if(e==null)throw new Error(`Skin not found: ${t}`);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t!=null)if(this.skin!=null)t.attachAll(this,this.skin);else{const e=this.slots;for(let r=0,n=e.length;r<n;r++){const s=e[r],i=s.data.attachmentName;if(i!=null){const o=t.getAttachment(r,i);o!=null&&s.setAttachment(o)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)}getAttachment(t,e){if(e==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){const r=this.skin.getAttachment(t,e);if(r!=null)return r}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(t==null)throw new Error("slotName cannot be null.");const r=this.slots;for(let n=0,s=r.length;n<s;n++){const i=r[n];if(i.data.name==t){let o=null;if(e!=null&&(o=this.getAttachment(n,e),o==null))throw new Error(`Attachment not found: ${e}, for slot: ${t}`);i.setAttachment(o);return}}throw new Error(`Slot not found: ${t}`)}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.data.name==t)return s}return null}getBounds(t,e,r=new Array(2)){if(t==null)throw new Error("offset cannot be null.");if(e==null)throw new Error("size cannot be null.");const n=this.drawOrder;let s=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let l=0,c=n.length;l<c;l++){const h=n[l];if(!h.bone.active)continue;let u=0,d=null;const f=h.getAttachment();if(f instanceof ce)u=8,d=K.setArraySize(r,u,0),f.computeWorldVertices(h.bone,d,0,2);else if(f instanceof ka){const p=f;u=p.worldVerticesLength,d=K.setArraySize(r,u,0),p.computeWorldVertices(h,0,u,d,0,2)}if(d!=null)for(let p=0,m=d.length;p<m;p+=2){const g=d[p],y=d[p+1];s=Math.min(s,g),i=Math.min(i,y),o=Math.max(o,g),a=Math.max(a,y)}}t.set(s,i),e.set(o-s,a-i)}update(t){this.time+=t}get flipX(){return this.scaleX==-1}set flipX(t){Pl.deprecatedWarning1||(Pl.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1}get flipY(){return this.scaleY==-1}set flipY(t){Pl.deprecatedWarning1||(Pl.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1}};let ok=Pl;ok.deprecatedWarning1=!1;class ak{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(e){if(e==null)throw new Error("boneName cannot be null.");const r=this.bones;for(let n=0,s=r.length;n<s;n++){const i=r[n];if(i.name==e)return i}return null}findBoneIndex(e){if(e==null)throw new Error("boneName cannot be null.");const r=this.bones;for(let n=0,s=r.length;n<s;n++)if(r[n].name==e)return n;return-1}findSlot(e){if(e==null)throw new Error("slotName cannot be null.");const r=this.slots;for(let n=0,s=r.length;n<s;n++){const i=r[n];if(i.name==e)return i}return null}findSlotIndex(e){if(e==null)throw new Error("slotName cannot be null.");const r=this.slots;for(let n=0,s=r.length;n<s;n++)if(r[n].name==e)return n;return-1}findSkin(e){if(e==null)throw new Error("skinName cannot be null.");const r=this.skins;for(let n=0,s=r.length;n<s;n++){const i=r[n];if(i.name==e)return i}return null}findEvent(e){if(e==null)throw new Error("eventDataName cannot be null.");const r=this.events;for(let n=0,s=r.length;n<s;n++){const i=r[n];if(i.name==e)return i}return null}findAnimation(e){if(e==null)throw new Error("animationName cannot be null.");const r=this.animations;for(let n=0,s=r.length;n<s;n++){const i=r[n];if(i.name==e)return i}return null}findIkConstraint(e){if(e==null)throw new Error("constraintName cannot be null.");const r=this.ikConstraints;for(let n=0,s=r.length;n<s;n++){const i=r[n];if(i.name==e)return i}return null}findTransformConstraint(e){if(e==null)throw new Error("constraintName cannot be null.");const r=this.transformConstraints;for(let n=0,s=r.length;n<s;n++){const i=r[n];if(i.name==e)return i}return null}findPathConstraint(e){if(e==null)throw new Error("constraintName cannot be null.");const r=this.pathConstraints;for(let n=0,s=r.length;n<s;n++){const i=r[n];if(i.name==e)return i}return null}findPathConstraintIndex(e){if(e==null)throw new Error("pathConstraintName cannot be null.");const r=this.pathConstraints;for(let n=0,s=r.length;n<s;n++)if(r[n].name==e)return n;return-1}}class lk{constructor(e,r,n){if(this.color=new de(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");if(n==null)throw new Error("boneData cannot be null.");this.index=e,this.name=r,this.boneData=n}}class ck extends kv{constructor(e){super(e,0,!1),this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}}class JA{constructor(e,r,n){this.slotIndex=e,this.name=r,this.attachment=n}}class y0{constructor(e){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,e==null)throw new Error("name cannot be null.");this.name=e}setAttachment(e,r,n){if(n==null)throw new Error("attachment cannot be null.");const s=this.attachments;e>=s.length&&(s.length=e+1),s[e]||(s[e]={}),s[e][r]=n}addSkin(e){for(let n=0;n<e.bones.length;n++){const s=e.bones[n];let i=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==s){i=!0;break}i||this.bones.push(s)}for(let n=0;n<e.constraints.length;n++){const s=e.constraints[n];let i=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==s){i=!0;break}i||this.constraints.push(s)}const r=e.getAttachments();for(let n=0;n<r.length;n++){const s=r[n];this.setAttachment(s.slotIndex,s.name,s.attachment)}}copySkin(e){for(let n=0;n<e.bones.length;n++){const s=e.bones[n];let i=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==s){i=!0;break}i||this.bones.push(s)}for(let n=0;n<e.constraints.length;n++){const s=e.constraints[n];let i=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==s){i=!0;break}i||this.constraints.push(s)}const r=e.getAttachments();for(let n=0;n<r.length;n++){const s=r[n];s.attachment!=null&&(s.attachment instanceof ka?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)))}}getAttachment(e,r){const n=this.attachments[e];return n?n[r]:null}removeAttachment(e,r){const n=this.attachments[e];n&&(n[r]=null)}getAttachments(){const e=new Array;for(let r=0;r<this.attachments.length;r++){const n=this.attachments[r];if(n)for(const s in n){const i=n[s];i&&e.push(new JA(r,s,i))}}return e}getAttachmentsForSlot(e,r){const n=this.attachments[e];if(n)for(const s in n){const i=n[s];i&&r.push(new JA(e,s,i))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(e,r){let n=0;for(let s=0;s<e.slots.length;s++){const i=e.slots[s],o=i.getAttachment();if(o&&n<r.attachments.length){const a=r.attachments[n];for(const l in a){const c=a[l];if(o==c){const h=this.getAttachment(n,l);h!=null&&i.setAttachment(h);break}}}n++}}}const et=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,r=new ak;r.name="";const n=new zG(t);r.hash=n.readString(),r.version=n.readString(),r.version==="3.8.75"&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),r.x=n.readFloat(),r.y=n.readFloat(),r.width=n.readFloat(),r.height=n.readFloat();const s=n.readBoolean();s&&(r.fps=n.readFloat(),r.imagesPath=n.readString(),r.audioPath=n.readString());let i=0;i=n.readInt(!0);for(let a=0;a<i;a++)n.strings.push(n.readString());i=n.readInt(!0);for(let a=0;a<i;a++){const l=n.readString(),c=a==0?null:r.bones[n.readInt(!0)],h=new tk(a,l,c);h.rotation=n.readFloat(),h.x=n.readFloat()*e,h.y=n.readFloat()*e,h.scaleX=n.readFloat(),h.scaleY=n.readFloat(),h.shearX=n.readFloat(),h.shearY=n.readFloat(),h.length=n.readFloat()*e,h.transformMode=et.TransformModeValues[n.readInt(!0)],h.skinRequired=n.readBoolean(),s&&de.rgba8888ToColor(h.color,n.readInt32()),r.bones.push(h)}i=n.readInt(!0);for(let a=0;a<i;a++){const l=n.readString(),c=r.bones[n.readInt(!0)],h=new lk(a,l,c);de.rgba8888ToColor(h.color,n.readInt32());const u=n.readInt32();u!=-1&&de.rgb888ToColor(h.darkColor=new de,u),h.attachmentName=n.readStringRef(),h.blendMode=et.BlendModeValues[n.readInt(!0)],r.slots.push(h)}i=n.readInt(!0);for(let a=0,l;a<i;a++){const c=new sk(n.readString());c.order=n.readInt(!0),c.skinRequired=n.readBoolean(),l=n.readInt(!0);for(let h=0;h<l;h++)c.bones.push(r.bones[n.readInt(!0)]);c.target=r.bones[n.readInt(!0)],c.mix=n.readFloat(),c.softness=n.readFloat()*e,c.bendDirection=n.readByte(),c.compress=n.readBoolean(),c.stretch=n.readBoolean(),c.uniform=n.readBoolean(),r.ikConstraints.push(c)}i=n.readInt(!0);for(let a=0,l;a<i;a++){const c=new ck(n.readString());c.order=n.readInt(!0),c.skinRequired=n.readBoolean(),l=n.readInt(!0);for(let h=0;h<l;h++)c.bones.push(r.bones[n.readInt(!0)]);c.target=r.bones[n.readInt(!0)],c.local=n.readBoolean(),c.relative=n.readBoolean(),c.offsetRotation=n.readFloat(),c.offsetX=n.readFloat()*e,c.offsetY=n.readFloat()*e,c.offsetScaleX=n.readFloat(),c.offsetScaleY=n.readFloat(),c.offsetShearY=n.readFloat(),c.rotateMix=n.readFloat(),c.translateMix=n.readFloat(),c.scaleMix=n.readFloat(),c.shearMix=n.readFloat(),r.transformConstraints.push(c)}i=n.readInt(!0);for(let a=0,l;a<i;a++){const c=new ik(n.readString());c.order=n.readInt(!0),c.skinRequired=n.readBoolean(),l=n.readInt(!0);for(let h=0;h<l;h++)c.bones.push(r.bones[n.readInt(!0)]);c.target=r.slots[n.readInt(!0)],c.positionMode=et.PositionModeValues[n.readInt(!0)],c.spacingMode=et.SpacingModeValues[n.readInt(!0)],c.rotateMode=et.RotateModeValues[n.readInt(!0)],c.offsetRotation=n.readFloat(),c.position=n.readFloat(),c.positionMode==Ln.Fixed&&(c.position*=e),c.spacing=n.readFloat(),(c.spacingMode==kt.Length||c.spacingMode==kt.Fixed)&&(c.spacing*=e),c.rotateMix=n.readFloat(),c.translateMix=n.readFloat(),r.pathConstraints.push(c)}const o=this.readSkin(n,r,!0,s);o!=null&&(r.defaultSkin=o,r.skins.push(o));{let a=r.skins.length;for(K.setArraySize(r.skins,i=a+n.readInt(!0));a<i;a++)r.skins[a]=this.readSkin(n,r,!1,s)}i=this.linkedMeshes.length;for(let a=0;a<i;a++){const l=this.linkedMeshes[a],c=l.skin==null?r.defaultSkin:r.findSkin(l.skin);if(c==null)throw new Error(`Skin not found: ${l.skin}`);const h=c.getAttachment(l.slotIndex,l.parent);if(h==null)throw new Error(`Parent mesh not found: ${l.parent}`);l.mesh.deformAttachment=l.inheritDeform?h:l.mesh,l.mesh.setParentMesh(h)}this.linkedMeshes.length=0,i=n.readInt(!0);for(let a=0;a<i;a++){const l=new nk(n.readStringRef());l.intValue=n.readInt(!1),l.floatValue=n.readFloat(),l.stringValue=n.readString(),l.audioPath=n.readString(),l.audioPath!=null&&(l.volume=n.readFloat(),l.balance=n.readFloat()),r.events.push(l)}i=n.readInt(!0);for(let a=0;a<i;a++)r.animations.push(this.readAnimation(n,n.readString(),r));return r}readSkin(t,e,r,n){let s=null,i=0;if(r){if(i=t.readInt(!0),i==0)return null;s=new y0("default")}else{s=new y0(t.readStringRef()),s.bones.length=t.readInt(!0);for(let o=0,a=s.bones.length;o<a;o++)s.bones[o]=e.bones[t.readInt(!0)];for(let o=0,a=t.readInt(!0);o<a;o++)s.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let o=0,a=t.readInt(!0);o<a;o++)s.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let o=0,a=t.readInt(!0);o<a;o++)s.constraints.push(e.pathConstraints[t.readInt(!0)]);i=t.readInt(!0)}for(let o=0;o<i;o++){const a=t.readInt(!0);for(let l=0,c=t.readInt(!0);l<c;l++){const h=t.readStringRef(),u=this.readAttachment(t,e,s,a,h,n);u!=null&&s.setAttachment(a,h,u)}}return s}readAttachment(t,e,r,n,s,i){const o=this.scale;let a=t.readStringRef();a==null&&(a=s);const l=t.readByte();switch(et.AttachmentTypeValues[l]){case ft.Region:{let h=t.readStringRef();const u=t.readFloat(),d=t.readFloat(),f=t.readFloat(),p=t.readFloat(),m=t.readFloat(),g=t.readFloat(),y=t.readFloat(),v=t.readInt32();h==null&&(h=a);const x=this.attachmentLoader.newRegionAttachment(r,a,h);return x==null?null:(x.path=h,x.x=d*o,x.y=f*o,x.scaleX=p,x.scaleY=m,x.rotation=u,x.width=g*o,x.height=y*o,de.rgba8888ToColor(x.color,v),x)}case ft.BoundingBox:{const h=t.readInt(!0),u=this.readVertices(t,h),d=i?t.readInt32():0,f=this.attachmentLoader.newBoundingBoxAttachment(r,a);return f==null?null:(f.worldVerticesLength=h<<1,f.vertices=u.vertices,f.bones=u.bones,i&&de.rgba8888ToColor(f.color,d),f)}case ft.Mesh:{let h=t.readStringRef();const u=t.readInt32(),d=t.readInt(!0),f=this.readFloatArray(t,d<<1,1),p=this.readShortArray(t),m=this.readVertices(t,d),g=t.readInt(!0);let y=null,v=0,x=0;i&&(y=this.readShortArray(t),v=t.readFloat(),x=t.readFloat()),h==null&&(h=a);const _=this.attachmentLoader.newMeshAttachment(r,a,h);return _==null?null:(_.path=h,de.rgba8888ToColor(_.color,u),_.bones=m.bones,_.vertices=m.vertices,_.worldVerticesLength=d<<1,_.triangles=p,_.regionUVs=new Float32Array(f),_.hullLength=g<<1,i&&(_.edges=y,_.width=v*o,_.height=x*o),_)}case ft.LinkedMesh:{let h=t.readStringRef();const u=t.readInt32(),d=t.readStringRef(),f=t.readStringRef(),p=t.readBoolean();let m=0,g=0;i&&(m=t.readFloat(),g=t.readFloat()),h==null&&(h=a);const y=this.attachmentLoader.newMeshAttachment(r,a,h);return y==null?null:(y.path=h,de.rgba8888ToColor(y.color,u),i&&(y.width=m*o,y.height=g*o),this.linkedMeshes.push(new T9(y,d,n,f,p)),y)}case ft.Path:{const h=t.readBoolean(),u=t.readBoolean(),d=t.readInt(!0),f=this.readVertices(t,d),p=K.newArray(d/3,0);for(let y=0,v=p.length;y<v;y++)p[y]=t.readFloat()*o;const m=i?t.readInt32():0,g=this.attachmentLoader.newPathAttachment(r,a);return g==null?null:(g.closed=h,g.constantSpeed=u,g.worldVerticesLength=d<<1,g.vertices=f.vertices,g.bones=f.bones,g.lengths=p,i&&de.rgba8888ToColor(g.color,m),g)}case ft.Point:{const h=t.readFloat(),u=t.readFloat(),d=t.readFloat(),f=i?t.readInt32():0,p=this.attachmentLoader.newPointAttachment(r,a);return p==null?null:(p.x=u*o,p.y=d*o,p.rotation=h,i&&de.rgba8888ToColor(p.color,f),p)}case ft.Clipping:{const h=t.readInt(!0),u=t.readInt(!0),d=this.readVertices(t,u),f=i?t.readInt32():0,p=this.attachmentLoader.newClippingAttachment(r,a);return p==null?null:(p.endSlot=e.slots[h],p.worldVerticesLength=u<<1,p.vertices=d.vertices,p.bones=d.bones,i&&de.rgba8888ToColor(p.color,f),p)}}return null}readVertices(t,e){const r=e<<1,n=new E9,s=this.scale;if(!t.readBoolean())return n.vertices=this.readFloatArray(t,r,s),n;const i=new Array,o=new Array;for(let a=0;a<e;a++){const l=t.readInt(!0);o.push(l);for(let c=0;c<l;c++)o.push(t.readInt(!0)),i.push(t.readFloat()*s),i.push(t.readFloat()*s),i.push(t.readFloat())}return n.vertices=K.toFloatArray(i),n.bones=o,n}readFloatArray(t,e,r){const n=new Array(e);if(r==1)for(let s=0;s<e;s++)n[s]=t.readFloat();else for(let s=0;s<e;s++)n[s]=t.readFloat()*r;return n}readShortArray(t){const e=t.readInt(!0),r=new Array(e);for(let n=0;n<e;n++)r[n]=t.readShort();return r}readAnimation(t,e,r){const n=new Array,s=this.scale;let i=0;const o=new de,a=new de;for(let h=0,u=t.readInt(!0);h<u;h++){const d=t.readInt(!0);for(let f=0,p=t.readInt(!0);f<p;f++){const m=t.readByte(),g=t.readInt(!0);switch(m){case et.SLOT_ATTACHMENT:{const y=new ea(g);y.slotIndex=d;for(let v=0;v<g;v++)y.setFrame(v,t.readFloat(),t.readStringRef());n.push(y),i=Math.max(i,y.frames[g-1]);break}case et.SLOT_COLOR:{const y=new yr(g);y.slotIndex=d;for(let v=0;v<g;v++){const x=t.readFloat();de.rgba8888ToColor(o,t.readInt32()),y.setFrame(v,x,o.r,o.g,o.b,o.a),v<g-1&&this.readCurve(t,v,y)}n.push(y),i=Math.max(i,y.frames[(g-1)*yr.ENTRIES]);break}case et.SLOT_TWO_COLOR:{const y=new vt(g);y.slotIndex=d;for(let v=0;v<g;v++){const x=t.readFloat();de.rgba8888ToColor(o,t.readInt32()),de.rgb888ToColor(a,t.readInt32()),y.setFrame(v,x,o.r,o.g,o.b,o.a,a.r,a.g,a.b),v<g-1&&this.readCurve(t,v,y)}n.push(y),i=Math.max(i,y.frames[(g-1)*vt.ENTRIES]);break}}}}for(let h=0,u=t.readInt(!0);h<u;h++){const d=t.readInt(!0);for(let f=0,p=t.readInt(!0);f<p;f++){const m=t.readByte(),g=t.readInt(!0);switch(m){case et.BONE_ROTATE:{const y=new $t(g);y.boneIndex=d;for(let v=0;v<g;v++)y.setFrame(v,t.readFloat(),t.readFloat()),v<g-1&&this.readCurve(t,v,y);n.push(y),i=Math.max(i,y.frames[(g-1)*$t.ENTRIES]);break}case et.BONE_TRANSLATE:case et.BONE_SCALE:case et.BONE_SHEAR:{let y,v=1;m==et.BONE_SCALE?y=new br(g):m==et.BONE_SHEAR?y=new Ar(g):(y=new Yr(g),v=s),y.boneIndex=d;for(let x=0;x<g;x++)y.setFrame(x,t.readFloat(),t.readFloat()*v,t.readFloat()*v),x<g-1&&this.readCurve(t,x,y);n.push(y),i=Math.max(i,y.frames[(g-1)*Yr.ENTRIES]);break}}}}for(let h=0,u=t.readInt(!0);h<u;h++){const d=t.readInt(!0),f=t.readInt(!0),p=new qt(f);p.ikConstraintIndex=d;for(let m=0;m<f;m++)p.setFrame(m,t.readFloat(),t.readFloat(),t.readFloat()*s,t.readByte(),t.readBoolean(),t.readBoolean()),m<f-1&&this.readCurve(t,m,p);n.push(p),i=Math.max(i,p.frames[(f-1)*qt.ENTRIES])}for(let h=0,u=t.readInt(!0);h<u;h++){const d=t.readInt(!0),f=t.readInt(!0),p=new xr(f);p.transformConstraintIndex=d;for(let m=0;m<f;m++)p.setFrame(m,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),m<f-1&&this.readCurve(t,m,p);n.push(p),i=Math.max(i,p.frames[(f-1)*xr.ENTRIES])}for(let h=0,u=t.readInt(!0);h<u;h++){const d=t.readInt(!0),f=r.pathConstraints[d];for(let p=0,m=t.readInt(!0);p<m;p++){const g=t.readByte(),y=t.readInt(!0);switch(g){case et.PATH_POSITION:case et.PATH_SPACING:{let v,x=1;g==et.PATH_SPACING?(v=new Mn(y),(f.spacingMode==kt.Length||f.spacingMode==kt.Fixed)&&(x=s)):(v=new vs(y),f.positionMode==Ln.Fixed&&(x=s)),v.pathConstraintIndex=d;for(let _=0;_<y;_++)v.setFrame(_,t.readFloat(),t.readFloat()*x),_<y-1&&this.readCurve(t,_,v);n.push(v),i=Math.max(i,v.frames[(y-1)*vs.ENTRIES]);break}case et.PATH_MIX:{const v=new $n(y);v.pathConstraintIndex=d;for(let x=0;x<y;x++)v.setFrame(x,t.readFloat(),t.readFloat(),t.readFloat()),x<y-1&&this.readCurve(t,x,v);n.push(v),i=Math.max(i,v.frames[(y-1)*$n.ENTRIES]);break}}}}for(let h=0,u=t.readInt(!0);h<u;h++){const d=r.skins[t.readInt(!0)];for(let f=0,p=t.readInt(!0);f<p;f++){const m=t.readInt(!0);for(let g=0,y=t.readInt(!0);g<y;g++){const v=d.getAttachment(m,t.readStringRef()),x=v.bones!=null,_=v.vertices,b=x?_.length/3*2:_.length,A=t.readInt(!0),S=new QI(A);S.slotIndex=m,S.attachment=v;for(let T=0;T<A;T++){const E=t.readFloat();let R,P=t.readInt(!0);if(P==0)R=x?K.newFloatArray(b):_;else{R=K.newFloatArray(b);const D=t.readInt(!0);if(P+=D,s==1)for(let k=D;k<P;k++)R[k]=t.readFloat();else for(let k=D;k<P;k++)R[k]=t.readFloat()*s;if(!x)for(let k=0,M=R.length;k<M;k++)R[k]+=_[k]}S.setFrame(T,E,R),T<A-1&&this.readCurve(t,T,S)}n.push(S),i=Math.max(i,S.frames[A-1])}}}const l=t.readInt(!0);if(l>0){const h=new Zl(l),u=r.slots.length;for(let d=0;d<l;d++){const f=t.readFloat(),p=t.readInt(!0),m=K.newArray(u,0);for(let x=u-1;x>=0;x--)m[x]=-1;const g=K.newArray(u-p,0);let y=0,v=0;for(let x=0;x<p;x++){const _=t.readInt(!0);for(;y!=_;)g[v++]=y++;m[y+t.readInt(!0)]=y++}for(;y<u;)g[v++]=y++;for(let x=u-1;x>=0;x--)m[x]==-1&&(m[x]=g[--v]);h.setFrame(d,f,m)}n.push(h),i=Math.max(i,h.frames[l-1])}const c=t.readInt(!0);if(c>0){const h=new Mv(c);for(let u=0;u<c;u++){const d=t.readFloat(),f=r.events[t.readInt(!0)],p=new rk(d,f);p.intValue=t.readInt(!1),p.floatValue=t.readFloat(),p.stringValue=t.readBoolean()?t.readString():f.stringValue,p.data.audioPath!=null&&(p.volume=t.readFloat(),p.balance=t.readFloat()),h.setFrame(u,p)}n.push(h),i=Math.max(i,h.frames[c-1])}return new xt(e,n,i)}readCurve(t,e,r){switch(t.readByte()){case et.CURVE_STEPPED:r.setStepped(e);break;case et.CURVE_BEZIER:this.setCurve(r,e,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat());break}}setCurve(t,e,r,n,s,i){t.setCurve(e,r,n,s,i)}};let _t=et;_t.AttachmentTypeValues=[0,1,2,3,4,5,6];_t.TransformModeValues=[st.Normal,st.OnlyTranslation,st.NoRotationOrReflection,st.NoScale,st.NoScaleOrReflection];_t.PositionModeValues=[Ln.Fixed,Ln.Percent];_t.SpacingModeValues=[kt.Length,kt.Fixed,kt.Percent];_t.RotateModeValues=[Vn.Tangent,Vn.Chain,Vn.ChainScale];_t.BlendModeValues=[J.NORMAL,J.ADD,J.MULTIPLY,J.SCREEN];_t.BONE_ROTATE=0;_t.BONE_TRANSLATE=1;_t.BONE_SCALE=2;_t.BONE_SHEAR=3;_t.SLOT_ATTACHMENT=0;_t.SLOT_COLOR=1;_t.SLOT_TWO_COLOR=2;_t.PATH_POSITION=0;_t.PATH_SPACING=1;_t.PATH_MIX=2;_t.CURVE_LINEAR=0;_t.CURVE_STEPPED=1;_t.CURVE_BEZIER=2;let T9=class{constructor(e,r,n,s,i){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=s,this.inheritDeform=i}};class E9{constructor(e=null,r=null){this.bones=e,this.vertices=r}}class Bi{constructor(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}readSkeletonData(e){const r=this.scale,n=new ak,s=typeof e=="string"?JSON.parse(e):e,i=s.skeleton;if(i!=null){if(n.hash=i.hash,n.version=i.spine,n.version.substr(0,3)!=="3.8"){const o=`Spine 3.8 loader cant load version ${i.spine}. Please configure your pixi-spine bundle`;console.error(o)}n.version==="3.8.75"&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),n.x=i.x,n.y=i.y,n.width=i.width,n.height=i.height,n.fps=i.fps,n.imagesPath=i.images}if(s.bones)for(let o=0;o<s.bones.length;o++){const a=s.bones[o];let l=null;const c=this.getValue(a,"parent",null);if(c!=null&&(l=n.findBone(c),l==null))throw new Error(`Parent bone not found: ${c}`);const h=new tk(n.bones.length,a.name,l);h.length=this.getValue(a,"length",0)*r,h.x=this.getValue(a,"x",0)*r,h.y=this.getValue(a,"y",0)*r,h.rotation=this.getValue(a,"rotation",0),h.scaleX=this.getValue(a,"scaleX",1),h.scaleY=this.getValue(a,"scaleY",1),h.shearX=this.getValue(a,"shearX",0),h.shearY=this.getValue(a,"shearY",0),h.transformMode=Bi.transformModeFromString(this.getValue(a,"transform","normal")),h.skinRequired=this.getValue(a,"skin",!1),n.bones.push(h)}if(s.slots)for(let o=0;o<s.slots.length;o++){const a=s.slots[o],l=a.name,c=a.bone,h=n.findBone(c);if(h==null)throw new Error(`Slot bone not found: ${c}`);const u=new lk(n.slots.length,l,h),d=this.getValue(a,"color",null);d!=null&&u.color.setFromString(d);const f=this.getValue(a,"dark",null);f!=null&&(u.darkColor=new de(1,1,1,1),u.darkColor.setFromString(f)),u.attachmentName=this.getValue(a,"attachment",null),u.blendMode=Bi.blendModeFromString(this.getValue(a,"blend","normal")),n.slots.push(u)}if(s.ik)for(let o=0;o<s.ik.length;o++){const a=s.ik[o],l=new sk(a.name);l.order=this.getValue(a,"order",0),l.skinRequired=this.getValue(a,"skin",!1);for(let h=0;h<a.bones.length;h++){const u=a.bones[h],d=n.findBone(u);if(d==null)throw new Error(`IK bone not found: ${u}`);l.bones.push(d)}const c=a.target;if(l.target=n.findBone(c),l.target==null)throw new Error(`IK target bone not found: ${c}`);l.mix=this.getValue(a,"mix",1),l.softness=this.getValue(a,"softness",0)*r,l.bendDirection=this.getValue(a,"bendPositive",!0)?1:-1,l.compress=this.getValue(a,"compress",!1),l.stretch=this.getValue(a,"stretch",!1),l.uniform=this.getValue(a,"uniform",!1),n.ikConstraints.push(l)}if(s.transform)for(let o=0;o<s.transform.length;o++){const a=s.transform[o],l=new ck(a.name);l.order=this.getValue(a,"order",0),l.skinRequired=this.getValue(a,"skin",!1);for(let h=0;h<a.bones.length;h++){const u=a.bones[h],d=n.findBone(u);if(d==null)throw new Error(`Transform constraint bone not found: ${u}`);l.bones.push(d)}const c=a.target;if(l.target=n.findBone(c),l.target==null)throw new Error(`Transform constraint target bone not found: ${c}`);l.local=this.getValue(a,"local",!1),l.relative=this.getValue(a,"relative",!1),l.offsetRotation=this.getValue(a,"rotation",0),l.offsetX=this.getValue(a,"x",0)*r,l.offsetY=this.getValue(a,"y",0)*r,l.offsetScaleX=this.getValue(a,"scaleX",0),l.offsetScaleY=this.getValue(a,"scaleY",0),l.offsetShearY=this.getValue(a,"shearY",0),l.rotateMix=this.getValue(a,"rotateMix",1),l.translateMix=this.getValue(a,"translateMix",1),l.scaleMix=this.getValue(a,"scaleMix",1),l.shearMix=this.getValue(a,"shearMix",1),n.transformConstraints.push(l)}if(s.path)for(let o=0;o<s.path.length;o++){const a=s.path[o],l=new ik(a.name);l.order=this.getValue(a,"order",0),l.skinRequired=this.getValue(a,"skin",!1);for(let h=0;h<a.bones.length;h++){const u=a.bones[h],d=n.findBone(u);if(d==null)throw new Error(`Transform constraint bone not found: ${u}`);l.bones.push(d)}const c=a.target;if(l.target=n.findSlot(c),l.target==null)throw new Error(`Path target slot not found: ${c}`);l.positionMode=Bi.positionModeFromString(this.getValue(a,"positionMode","percent")),l.spacingMode=Bi.spacingModeFromString(this.getValue(a,"spacingMode","length")),l.rotateMode=Bi.rotateModeFromString(this.getValue(a,"rotateMode","tangent")),l.offsetRotation=this.getValue(a,"rotation",0),l.position=this.getValue(a,"position",0),l.positionMode==Ln.Fixed&&(l.position*=r),l.spacing=this.getValue(a,"spacing",0),(l.spacingMode==kt.Length||l.spacingMode==kt.Fixed)&&(l.spacing*=r),l.rotateMix=this.getValue(a,"rotateMix",1),l.translateMix=this.getValue(a,"translateMix",1),n.pathConstraints.push(l)}if(s.skins)for(let o=0;o<s.skins.length;o++){const a=s.skins[o],l=new y0(a.name);if(a.bones)for(let c=0;c<a.bones.length;c++){const h=n.findBone(a.bones[c]);if(h==null)throw new Error(`Skin bone not found: ${a.bones[o]}`);l.bones.push(h)}if(a.ik)for(let c=0;c<a.ik.length;c++){const h=n.findIkConstraint(a.ik[c]);if(h==null)throw new Error(`Skin IK constraint not found: ${a.ik[o]}`);l.constraints.push(h)}if(a.transform)for(let c=0;c<a.transform.length;c++){const h=n.findTransformConstraint(a.transform[c]);if(h==null)throw new Error(`Skin transform constraint not found: ${a.transform[o]}`);l.constraints.push(h)}if(a.path)for(let c=0;c<a.path.length;c++){const h=n.findPathConstraint(a.path[c]);if(h==null)throw new Error(`Skin path constraint not found: ${a.path[o]}`);l.constraints.push(h)}for(const c in a.attachments){const h=n.findSlot(c);if(h==null)throw new Error(`Slot not found: ${c}`);const u=a.attachments[c];for(const d in u){const f=this.readAttachment(u[d],l,h.index,d,n);f!=null&&l.setAttachment(h.index,d,f)}}n.skins.push(l),l.name=="default"&&(n.defaultSkin=l)}for(let o=0,a=this.linkedMeshes.length;o<a;o++){const l=this.linkedMeshes[o],c=l.skin==null?n.defaultSkin:n.findSkin(l.skin);if(c==null)throw new Error(`Skin not found: ${l.skin}`);const h=c.getAttachment(l.slotIndex,l.parent);if(h==null)throw new Error(`Parent mesh not found: ${l.parent}`);l.mesh.deformAttachment=l.inheritDeform?h:l.mesh,l.mesh.setParentMesh(h)}if(this.linkedMeshes.length=0,s.events)for(const o in s.events){const a=s.events[o],l=new nk(o);l.intValue=this.getValue(a,"int",0),l.floatValue=this.getValue(a,"float",0),l.stringValue=this.getValue(a,"string",""),l.audioPath=this.getValue(a,"audio",null),l.audioPath!=null&&(l.volume=this.getValue(a,"volume",1),l.balance=this.getValue(a,"balance",0)),n.events.push(l)}if(s.animations)for(const o in s.animations){const a=s.animations[o];this.readAnimation(a,o,n)}return n}readAttachment(e,r,n,s,i){const o=this.scale;switch(s=this.getValue(e,"name",s),this.getValue(e,"type","region")){case"region":{const l=this.getValue(e,"path",s),c=this.attachmentLoader.newRegionAttachment(r,s,l);if(c==null)return null;c.path=l,c.x=this.getValue(e,"x",0)*o,c.y=this.getValue(e,"y",0)*o,c.scaleX=this.getValue(e,"scaleX",1),c.scaleY=this.getValue(e,"scaleY",1),c.rotation=this.getValue(e,"rotation",0),c.width=e.width*o,c.height=e.height*o;const h=this.getValue(e,"color",null);return h!=null&&c.color.setFromString(h),c}case"boundingbox":{const l=this.attachmentLoader.newBoundingBoxAttachment(r,s);if(l==null)return null;this.readVertices(e,l,e.vertexCount<<1);const c=this.getValue(e,"color",null);return c!=null&&l.color.setFromString(c),l}case"mesh":case"linkedmesh":{const l=this.getValue(e,"path",s),c=this.attachmentLoader.newMeshAttachment(r,s,l);if(c==null)return null;c.path=l;const h=this.getValue(e,"color",null);h!=null&&c.color.setFromString(h),c.width=this.getValue(e,"width",0)*o,c.height=this.getValue(e,"height",0)*o;const u=this.getValue(e,"parent",null);if(u!=null)return this.linkedMeshes.push(new C9(c,this.getValue(e,"skin",null),n,u,this.getValue(e,"deform",!0))),c;const d=e.uvs;return this.readVertices(e,c,d.length),c.triangles=e.triangles,c.regionUVs=new Float32Array(d),c.edges=this.getValue(e,"edges",null),c.hullLength=this.getValue(e,"hull",0)*2,c}case"path":{const l=this.attachmentLoader.newPathAttachment(r,s);if(l==null)return null;l.closed=this.getValue(e,"closed",!1),l.constantSpeed=this.getValue(e,"constantSpeed",!0);const c=e.vertexCount;this.readVertices(e,l,c<<1);const h=K.newArray(c/3,0);for(let d=0;d<e.lengths.length;d++)h[d]=e.lengths[d]*o;l.lengths=h;const u=this.getValue(e,"color",null);return u!=null&&l.color.setFromString(u),l}case"point":{const l=this.attachmentLoader.newPointAttachment(r,s);if(l==null)return null;l.x=this.getValue(e,"x",0)*o,l.y=this.getValue(e,"y",0)*o,l.rotation=this.getValue(e,"rotation",0);const c=this.getValue(e,"color",null);return c!=null&&l.color.setFromString(c),l}case"clipping":{const l=this.attachmentLoader.newClippingAttachment(r,s);if(l==null)return null;const c=this.getValue(e,"end",null);if(c!=null){const d=i.findSlot(c);if(d==null)throw new Error(`Clipping end slot not found: ${c}`);l.endSlot=d}const h=e.vertexCount;this.readVertices(e,l,h<<1);const u=this.getValue(e,"color",null);return u!=null&&l.color.setFromString(u),l}}return null}readVertices(e,r,n){const s=this.scale;r.worldVerticesLength=n;const i=e.vertices;if(n==i.length){const l=K.toFloatArray(i);if(s!=1)for(let c=0,h=i.length;c<h;c++)l[c]*=s;r.vertices=l;return}const o=new Array,a=new Array;for(let l=0,c=i.length;l<c;){const h=i[l++];a.push(h);for(let u=l+h*4;l<u;l+=4)a.push(i[l]),o.push(i[l+1]*s),o.push(i[l+2]*s),o.push(i[l+3])}r.bones=a,r.vertices=K.toFloatArray(o)}readAnimation(e,r,n){const s=this.scale,i=new Array;let o=0;if(e.slots)for(const l in e.slots){const c=e.slots[l],h=n.findSlotIndex(l);if(h==-1)throw new Error(`Slot not found: ${l}`);for(const u in c){const d=c[u];if(u=="attachment"){const f=new ea(d.length);f.slotIndex=h;let p=0;for(let m=0;m<d.length;m++){const g=d[m];f.setFrame(p++,this.getValue(g,"time",0),g.name)}i.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}else if(u=="color"){const f=new yr(d.length);f.slotIndex=h;let p=0;for(let m=0;m<d.length;m++){const g=d[m],y=new de;y.setFromString(g.color||"ffffffff"),f.setFrame(p,this.getValue(g,"time",0),y.r,y.g,y.b,y.a),this.readCurve(g,f,p),p++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*yr.ENTRIES])}else if(u=="twoColor"){const f=new vt(d.length);f.slotIndex=h;let p=0;for(let m=0;m<d.length;m++){const g=d[m],y=new de,v=new de;y.setFromString(g.light),v.setFromString(g.dark),f.setFrame(p,this.getValue(g,"time",0),y.r,y.g,y.b,y.a,v.r,v.g,v.b),this.readCurve(g,f,p),p++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*vt.ENTRIES])}else throw new Error(`Invalid timeline type for a slot: ${u} (${l})`)}}if(e.bones)for(const l in e.bones){const c=e.bones[l],h=n.findBoneIndex(l);if(h==-1)throw new Error(`Bone not found: ${l}`);for(const u in c){const d=c[u];if(u==="rotate"){const f=new $t(d.length);f.boneIndex=h;let p=0;for(let m=0;m<d.length;m++){const g=d[m];f.setFrame(p,this.getValue(g,"time",0),this.getValue(g,"angle",0)),this.readCurve(g,f,p),p++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*$t.ENTRIES])}else if(u==="translate"||u==="scale"||u==="shear"){let f=null,p=1,m=0;u==="scale"?(f=new br(d.length),m=1):u==="shear"?f=new Ar(d.length):(f=new Yr(d.length),p=s),f.boneIndex=h;let g=0;for(let y=0;y<d.length;y++){const v=d[y],x=this.getValue(v,"x",m),_=this.getValue(v,"y",m);f.setFrame(g,this.getValue(v,"time",0),x*p,_*p),this.readCurve(v,f,g),g++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*Yr.ENTRIES])}else throw new Error(`Invalid timeline type for a bone: ${u} (${l})`)}}if(e.ik)for(const l in e.ik){const c=e.ik[l],h=n.findIkConstraint(l),u=new qt(c.length);u.ikConstraintIndex=n.ikConstraints.indexOf(h);let d=0;for(let f=0;f<c.length;f++){const p=c[f];u.setFrame(d,this.getValue(p,"time",0),this.getValue(p,"mix",1),this.getValue(p,"softness",0)*s,this.getValue(p,"bendPositive",!0)?1:-1,this.getValue(p,"compress",!1),this.getValue(p,"stretch",!1)),this.readCurve(p,u,d),d++}i.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*qt.ENTRIES])}if(e.transform)for(const l in e.transform){const c=e.transform[l],h=n.findTransformConstraint(l),u=new xr(c.length);u.transformConstraintIndex=n.transformConstraints.indexOf(h);let d=0;for(let f=0;f<c.length;f++){const p=c[f];u.setFrame(d,this.getValue(p,"time",0),this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,u,d),d++}i.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*xr.ENTRIES])}if(e.path)for(const l in e.path){const c=e.path[l],h=n.findPathConstraintIndex(l);if(h==-1)throw new Error(`Path constraint not found: ${l}`);const u=n.pathConstraints[h];for(const d in c){const f=c[d];if(d==="position"||d==="spacing"){let p=null,m=1;d==="spacing"?(p=new Mn(f.length),(u.spacingMode==kt.Length||u.spacingMode==kt.Fixed)&&(m=s)):(p=new vs(f.length),u.positionMode==Ln.Fixed&&(m=s)),p.pathConstraintIndex=h;let g=0;for(let y=0;y<f.length;y++){const v=f[y];p.setFrame(g,this.getValue(v,"time",0),this.getValue(v,d,0)*m),this.readCurve(v,p,g),g++}i.push(p),o=Math.max(o,p.frames[(p.getFrameCount()-1)*vs.ENTRIES])}else if(d==="mix"){const p=new $n(f.length);p.pathConstraintIndex=h;let m=0;for(let g=0;g<f.length;g++){const y=f[g];p.setFrame(m,this.getValue(y,"time",0),this.getValue(y,"rotateMix",1),this.getValue(y,"translateMix",1)),this.readCurve(y,p,m),m++}i.push(p),o=Math.max(o,p.frames[(p.getFrameCount()-1)*$n.ENTRIES])}}}if(e.deform)for(const l in e.deform){const c=e.deform[l],h=n.findSkin(l);if(h!=null)for(const u in c){const d=c[u],f=n.findSlotIndex(u);if(f==-1)throw new Error(`Slot not found: ${d.name}`);for(const p in d){const m=d[p],g=h.getAttachment(f,p);if(g==null)throw new Error(`Deform attachment not found: ${m.name}`);const y=g.bones!=null,v=g.vertices,x=y?v.length/3*2:v.length,_=new QI(m.length);_.slotIndex=f,_.attachment=g;let b=0;for(let A=0;A<m.length;A++){const S=m[A];let T;const E=this.getValue(S,"vertices",null);if(E==null)T=y?K.newFloatArray(x):v;else{T=K.newFloatArray(x);const R=this.getValue(S,"offset",0);if(K.arrayCopy(E,0,T,R,E.length),s!=1)for(let P=R,D=P+E.length;P<D;P++)T[P]*=s;if(!y)for(let P=0;P<x;P++)T[P]+=v[P]}_.setFrame(b,this.getValue(S,"time",0),T),this.readCurve(S,_,b),b++}i.push(_),o=Math.max(o,_.frames[_.getFrameCount()-1])}}}let a=e.drawOrder;if(a==null&&(a=e.draworder),a!=null){const l=new Zl(a.length),c=n.slots.length;let h=0;for(let u=0;u<a.length;u++){const d=a[u];let f=null;const p=this.getValue(d,"offsets",null);if(p!=null){f=K.newArray(c,-1);const m=K.newArray(c-p.length,0);let g=0,y=0;for(let v=0;v<p.length;v++){const x=p[v],_=n.findSlotIndex(x.slot);if(_==-1)throw new Error(`Slot not found: ${x.slot}`);for(;g!=_;)m[y++]=g++;f[g+x.offset]=g++}for(;g<c;)m[y++]=g++;for(let v=c-1;v>=0;v--)f[v]==-1&&(f[v]=m[--y])}l.setFrame(h++,this.getValue(d,"time",0),f)}i.push(l),o=Math.max(o,l.frames[l.getFrameCount()-1])}if(e.events){const l=new Mv(e.events.length);let c=0;for(let h=0;h<e.events.length;h++){const u=e.events[h],d=n.findEvent(u.name);if(d==null)throw new Error(`Event not found: ${u.name}`);const f=new rk(K.toSinglePrecision(this.getValue(u,"time",0)),d);f.intValue=this.getValue(u,"int",d.intValue),f.floatValue=this.getValue(u,"float",d.floatValue),f.stringValue=this.getValue(u,"string",d.stringValue),f.data.audioPath!=null&&(f.volume=this.getValue(u,"volume",1),f.balance=this.getValue(u,"balance",0)),l.setFrame(c++,f)}i.push(l),o=Math.max(o,l.frames[l.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new xt(r,i,o))}readCurve(e,r,n){if(e.hasOwnProperty("curve"))if(e.curve==="stepped")r.setStepped(n);else{const s=e.curve;r.setCurve(n,s,this.getValue(e,"c2",0),this.getValue(e,"c3",1),this.getValue(e,"c4",1))}}getValue(e,r,n){return e[r]!==void 0?e[r]:n}static blendModeFromString(e){if(e=e.toLowerCase(),e=="normal")return J.NORMAL;if(e=="additive")return J.ADD;if(e=="multiply")return J.MULTIPLY;if(e=="screen")return J.SCREEN;throw new Error(`Unknown blend mode: ${e}`)}static positionModeFromString(e){if(e=e.toLowerCase(),e=="fixed")return Ln.Fixed;if(e=="percent")return Ln.Percent;throw new Error(`Unknown position mode: ${e}`)}static spacingModeFromString(e){if(e=e.toLowerCase(),e=="length")return kt.Length;if(e=="fixed")return kt.Fixed;if(e=="percent")return kt.Percent;throw new Error(`Unknown position mode: ${e}`)}static rotateModeFromString(e){if(e=e.toLowerCase(),e=="tangent")return Vn.Tangent;if(e=="chain")return Vn.Chain;if(e=="chainscale")return Vn.ChainScale;throw new Error(`Unknown rotate mode: ${e}`)}static transformModeFromString(e){if(e=e.toLowerCase(),e=="normal")return st.Normal;if(e=="onlytranslation")return st.OnlyTranslation;if(e=="norotationorreflection")return st.NoRotationOrReflection;if(e=="noscale")return st.NoScale;if(e=="noscaleorreflection")return st.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${e}`)}}class C9{constructor(e,r,n,s,i){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=s,this.inheritDeform=i}}class R9 extends Ev{createSkeleton(e){this.skeleton=new ok(e),this.skeleton.updateWorldTransform(),this.stateData=new ek(e),this.state=new qr(this.stateData)}}const eS={loader:Z.LoadParser,resolver:Z.ResolveParser,cache:Z.CacheParser,detection:Z.DetectionParser};ne.handle(Z.Asset,t=>{const e=t.ref;Object.entries(eS).filter(([r])=>!!e[r]).forEach(([r,n])=>ne.add(Object.assign(e[r],{extension:e[r].extension??n})))},t=>{const e=t.ref;Object.keys(eS).filter(r=>!!e[r]).forEach(r=>ne.remove(e[r]))});class P9{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Xa(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Gr(t,e){const r=t.split("?")[0],n=Xt.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const an=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||r?e(n):n):t);function uk(t,e,r,n,s){const i=e[r];for(let o=0;o<i.length;o++){const a=i[o];r<e.length-1?uk(t.replace(n[r],a),e,r+1,n,s):s.push(t.replace(n[r],a))}}function M9(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const s=[];r.forEach(i=>{const o=i.substring(1,i.length-1).split(",");s.push(o)}),uk(t,s,0,r,n)}else n.push(t);return n}const $d=t=>!Array.isArray(t);class I9{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const n=an(e);let s;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(r)){s=l.getCacheableAssets(n,r);break}}s||(s={},n.forEach(a=>{s[a]=r}));const i=Object.keys(s),o={cacheKeys:i,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),i.forEach(a=>{const l=s?s[a]:r;this._cache.has(a)&&this._cache.get(a)!==l&&console.warn("[Cache] already has key:",a),this._cache.set(a,s[a])}),r instanceof ae){const a=r;n.forEach(l=>{a.baseTexture!==ae.EMPTY.baseTexture&&xe.addToCache(a.baseTexture,l),ae.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(n=>{this._cache.delete(n)}),r.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Di=new I9;class k9{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,n)=>(this._parsersValidated=!1,e[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let s=null,i=null;if(r.loadParser&&(i=this._parserHash[r.loadParser],i||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!i){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((o=c.test)!=null&&o.call(c,e,r,this))){i=c;break}}if(!i)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await i.load(e,r,this),n.parser=i;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((a=c.testParse)==null?void 0:a.call(c,s,r,this))&&(s=await c.parse(s,r,this)||s,n.parser=c)}return s})(),n}async load(e,r){this._parsersValidated||this._validateParsers();let n=0;const s={},i=$d(e),o=an(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(async c=>{const h=Xt.toAbsolute(c.src);if(!s[c.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,c)),s[c.src]=await this.promiseCache[h].promise,r&&r(++n/a)}catch(u){throw delete this.promiseCache[h],delete s[c.src],new Error(`[Loader.load] Failed to load ${h}.
${u}`)}});return await Promise.all(l),i?s[o[0].src]:s}async unload(e){const r=an(e,n=>({alias:[n],src:n})).map(async n=>{var o,a;const s=Xt.toAbsolute(n.src),i=this.promiseCache[s];if(i){const l=await i.promise;delete this.promiseCache[s],(a=(o=i.parser)==null?void 0:o.unload)==null||a.call(o,l,n,this)}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(e[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...e,[r.name]:r}),{})}}var As=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(As||{});const N9=".json",F9="application/json",L9={extension:{type:Z.LoadParser,priority:As.Low},name:"loadJson",test(t){return Xa(t,F9)||Gr(t,N9)},async load(t){return await(await se.ADAPTER.fetch(t)).json()}};ne.add(L9);const O9=".txt",B9="text/plain",D9={name:"loadTxt",extension:{type:Z.LoadParser,priority:As.Low},test(t){return Xa(t,B9)||Gr(t,O9)},async load(t){return await(await se.ADAPTER.fetch(t)).text()}};ne.add(D9);const U9=["normal","bold","100","200","300","400","500","600","700","800","900"],V9=[".ttf",".otf",".woff",".woff2"],j9=["font/ttf","font/otf","font/woff","font/woff2"],$9=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function G9(t){const e=Xt.extname(t),r=Xt.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1));let n=r.length>0;for(const i of r)if(!i.match($9)){n=!1;break}let s=r.join(" ");return n||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const z9=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function H9(t){return z9.test(t)?t:encodeURI(t)}const W9={extension:{type:Z.LoadParser,priority:As.Low},name:"loadWebFont",test(t){return Xa(t,j9)||Gr(t,V9)},async load(t,e){var n,s,i;const r=se.ADAPTER.getFontFaceSet();if(r){const o=[],a=((n=e.data)==null?void 0:n.family)??G9(t),l=((i=(s=e.data)==null?void 0:s.weights)==null?void 0:i.filter(h=>U9.includes(h)))??["normal"],c=e.data??{};for(let h=0;h<l.length;h++){const u=l[h],d=new FontFace(a,`url(${H9(t)})`,{...c,weight:u});await d.load(),r.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>se.ADAPTER.getFontFaceSet().delete(e))}};ne.add(W9);const X9=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let fa=null,x0=class{constructor(){fa||(fa=URL.createObjectURL(new Blob([X9],{type:"application/javascript"}))),this.worker=new Worker(fa)}};x0.revokeObjectURL=function(){fa&&(URL.revokeObjectURL(fa),fa=null)};const Y9=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let pa=null;class hk{constructor(){pa||(pa=URL.createObjectURL(new Blob([Y9],{type:"application/javascript"}))),this.worker=new Worker(pa)}}hk.revokeObjectURL=function(){pa&&(URL.revokeObjectURL(pa),pa=null)};let tS=0,Km;class q9{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:r}=new x0;r.addEventListener("message",n=>{r.terminate(),x0.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Km===void 0&&(Km=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Km&&(this._createdWorkers++,e=new hk().worker,e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const n=new Promise((s,i)=>{this.queue.push({id:e,arguments:r,resolve:s,reject:i})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),n=r.id;this.resolveHash[tS]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:tS++,id:n})}}const rS=new q9;function Nv(t,e,r){t.resource.internal=!0;const n=new ae(t),s=()=>{delete e.promiseCache[r],Di.has(r)&&Di.remove(r)};return n.baseTexture.once("destroyed",()=>{r in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),n.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),n}const K9=[".jpeg",".jpg",".png",".webp",".avif"],Z9=["image/jpeg","image/png","image/webp","image/avif"];async function Q9(t){const e=await se.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const Gf={name:"loadTextures",extension:{type:Z.LoadParser,priority:As.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Xa(t,Z9)||Gr(t,K9)},async load(t,e,r){var a;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;n?this.config.preferWorkers&&await rS.isImageBitmapSupported()?s=await rS.loadImageBitmap(t):s=await Q9(t):s=await new Promise((l,c)=>{const h=new Image;h.crossOrigin=this.config.crossOrigin,h.src=t,h.complete?l(h):(h.onload=()=>l(h),h.onerror=u=>c(u))});const i={...e.data};i.resolution??(i.resolution=kc(t)),n&&((a=i.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(i.resourceOptions={...i.resourceOptions},i.resourceOptions.ownsImageBitmap=!0);const o=new xe(s,i);return o.resource.src=t,Nv(o,r,t)},unload(t){t.destroy(!0)}};ne.add(Gf);const J9=".svg",e7="image/svg+xml",t7={extension:{type:Z.LoadParser,priority:As.High},name:"loadSVG",test(t){return Xa(t,e7)||Gr(t,J9)},async testParse(t){return l0.test(t)},async parse(t,e,r){var i;const n=new l0(t,(i=e==null?void 0:e.data)==null?void 0:i.resourceOptions);await n.load();const s=new xe(n,{resolution:kc(t),...e==null?void 0:e.data});return s.resource.src=e.src,Nv(s,r,e.src)},async load(t,e){return(await se.ADAPTER.fetch(t)).text()},unload:Gf.unload};ne.add(t7);const r7=[".mp4",".m4v",".webm",".ogv"],n7=["video/mp4","video/webm","video/ogg"],s7={name:"loadVideo",extension:{type:Z.LoadParser,priority:As.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return Xa(t,n7)||Gr(t,r7)},async load(t,e,r){var o;let n;const s=await(await se.ADAPTER.fetch(t)).blob(),i=URL.createObjectURL(s);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new jI(i,a);await l.load();const c=new xe(l,{alphaMode:await SW(),resolution:kc(t),...e==null?void 0:e.data});c.resource.src=t,n=Nv(c,r,t),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(i)})}catch(a){throw URL.revokeObjectURL(i),a}return n},unload(t){t.destroy(!0)}};ne.add(s7);class i7{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}getAlias(e){const{alias:r,name:n,src:s,srcs:i}=e;return an(r||n||s||i,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const n=[];Array.isArray(r)?r.forEach(s=>{const i=s.src??s.srcs,o=s.alias??s.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);n.push(l),a=[o,l]}else{const l=o.map(c=>this._createBundleAssetId(e,c));n.push(...l),a=[...o,...l]}this.add({...s,alias:a,src:i})}):Object.keys(r).forEach(s=>{const i=[s,this._createBundleAssetId(e,s)];if(typeof r[s]=="string")this.add({alias:i,src:r[s]});else if(Array.isArray(r[s]))this.add({alias:i,src:r[s]});else{const o=r[s],a=o.src??o.srcs;this.add({...o,alias:i,src:Array.isArray(a)?a:[a]})}n.push(...i)}),this._bundles[e]=n}add(e,r,n,s,i){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(we("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:r,data:n,format:s,loadParser:i})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},an(o).forEach(l=>{const{src:c,srcs:h}=l;let{data:u,format:d,loadParser:f}=l;const p=an(c||h).map(y=>typeof y=="string"?M9(y):Array.isArray(y)?y:[y]),m=this.getAlias(l);Array.isArray(m)?m.forEach(a):a(m);const g=[];p.forEach(y=>{y.forEach(v=>{let x={};if(typeof v!="object"){x.src=v;for(let _=0;_<this._parsers.length;_++){const b=this._parsers[_];if(b.test(v)){x=b.parse(v);break}}}else u=v.data??u,d=v.format??d,f=v.loadParser??f,x={...x,...v};if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${x.src}`);x=this.buildResolvedAsset(x,{aliases:m,data:u,format:d,loadParser:f}),g.push(x)})}),m.forEach(y=>{this._assetMap[y]=g})})}resolveBundle(e){const r=$d(e);e=an(e);const n={};return e.forEach(s=>{const i=this._bundles[s];if(i){const o=this.resolve(i),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(s,l)]=c}n[s]=a}}),r?n[e[0]]:n}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const n={};for(const s in r)n[s]=r[s].src;return n}return r.src}resolve(e){const r=$d(e);e=an(e);const n={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let i=this._assetMap[s];const o=i[0],a=this._getPreferredOrder(i);a==null||a.priority.forEach(l=>{a.params[l].forEach(c=>{const h=i.filter(u=>u[l]?u[l]===c:!1);h.length&&(i=h)})}),this._resolverHash[s]=i[0]??o}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});n[s]=this._resolverHash[s]}),r?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const n=e[0],s=this._preferredOrder.find(i=>i.params.format.includes(n.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}buildResolvedAsset(e,r){const{aliases:n,data:s,loadParser:i,format:o}=r;return(this._basePath||this._rootPath)&&(e.src=Xt.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=i??e.loadParser,e.format=o??e.format??Xt.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class o7{constructor(){this._detections=[],this._initialized=!1,this.resolver=new i7,this.loader=new k9,this.cache=Di,this._backgroundLoader=new P9(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var i,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const r=((i=e.texturePreference)==null?void 0:i.resolution)??1,n=typeof r=="number"?[r]:r,s=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,r,n,s,i){this.resolver.add(e,r,n,s,i)}async load(e,r){this._initialized||await this.init();const n=$d(e),s=an(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),i=this.resolver.resolve(s),o=await this._mapLoadToResolve(i,r);return n?o[s[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const s=this.resolver.resolveBundle(e),i={},o=Object.keys(s);let a=0,l=0;const c=()=>{r==null||r(++a/l)},h=o.map(u=>{const d=s[u];return l+=Object.keys(d).length,this._mapLoadToResolve(d,c).then(f=>{i[u]=f})});return await Promise.all(h),n?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Di.get(e);const r={};for(let n=0;n<e.length;n++)r[n]=Di.get(e[n]);return r}async _mapLoadToResolve(e,r){const n=Object.values(e),s=Object.keys(e);this._backgroundLoader.active=!1;const i=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((a,l)=>{const c=i[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[s[l]]=c,Di.set(h,c)}),o}async unload(e){this._initialized||await this.init();const r=an(e).map(s=>typeof s!="string"?s.src:s),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=an(e);const r=this.resolver.resolveBundle(e),n=Object.keys(r).map(s=>this._unloadFromResolved(r[s]));await Promise.all(n)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(n=>{Di.remove(n.src)}),await this.loader.unload(r)}async _detectFormats(e){let r=[];e.preferredFormats&&(r=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?r=await n.add(r):e.skipDetections||(r=await n.remove(r));return r=r.filter((n,s)=>r.indexOf(n)===s),r}get detections(){return this._detections}get preferWorkers(){return Gf.config.preferWorkers}set preferWorkers(e){we("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in e).forEach(n=>{r.config[n]=e[n]})})}}const Ju=new o7;ne.handleByList(Z.LoadParser,Ju.loader.parsers).handleByList(Z.ResolveParser,Ju.resolver.parsers).handleByList(Z.CacheParser,Ju.cache.parsers).handleByList(Z.DetectionParser,Ju.detections);const a7={extension:Z.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof ae),getCacheableAssets:(t,e)=>{const r={};return t.forEach(n=>{e.forEach((s,i)=>{r[n+(i===0?"":i+1)]=s})}),r}};ne.add(a7);async function dk(t){if("Image"in globalThis)return new Promise(e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const l7={extension:{type:Z.DetectionParser,priority:1},test:async()=>dk("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};ne.add(l7);const c7={extension:{type:Z.DetectionParser,priority:0},test:async()=>dk("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};ne.add(c7);const nS=["png","jpg","jpeg"],u7={extension:{type:Z.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...nS],remove:async t=>t.filter(e=>!nS.includes(e))};ne.add(u7);const h7="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Fv(t){return h7?!1:document.createElement("video").canPlayType(t)!==""}const d7={extension:{type:Z.DetectionParser,priority:0},test:async()=>Fv("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};ne.add(d7);const f7={extension:{type:Z.DetectionParser,priority:0},test:async()=>Fv("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};ne.add(f7);const p7={extension:{type:Z.DetectionParser,priority:0},test:async()=>Fv("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};ne.add(p7);const m7={extension:Z.ResolveParser,test:Gf.test,parse:t=>{var e;return{resolution:parseFloat(((e=se.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:Xt.extname(t).slice(1),src:t}}};ne.add(m7);const g7={extension:Z.Asset,loader:{extension:{type:Z.LoadParser,priority:As.Normal},test(t){return Gr(t,".atlas")},async load(t){return await(await se.ADAPTER.fetch(t)).text()},testParse(t,e){const r=Gr(e.src,".atlas"),n=typeof t=="string";return Promise.resolve(r&&n)},async parse(t,e,r){const n=e.data;let s=Xt.dirname(e.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");let i=null,o=null;const a=new Promise((h,u)=>{i=h,o=u});let l;const c=h=>{h||o(`Something went terribly wrong loading a spine .atlas file
Most likely your texture failed to load.`),i(l)};if(n.image||n.images){const h=Object.assign(n.image?{default:n.image}:{},n.images);l=new d0(t,(u,d)=>{const f=h[u]||h.default;f&&f.baseTexture?d(f.baseTexture):d(f)},c)}else l=new d0(t,fk(r,s,n.imageMetadata),c);return await a},unload(t){t.dispose()}}},fk=(t,e,r)=>async(n,s)=>{try{const i=Xt.normalize([...e.split(Xt.sep),n].join(Xt.sep)),o=await t.load({src:i,data:r});s(o.baseTexture)}catch(i){console.error("Spine: error in texture loader",i),s(null)}};ne.add(g7);function sS(t){return t.hasOwnProperty("bones")}function y7(t){return t instanceof ArrayBuffer}class x7{constructor(){}installLoader(){const e=this,r={extension:Z.Asset,loader:{extension:{type:Z.LoadParser,priority:As.Normal},test(n){return Gr(n,".skel")},async load(n){return await(await se.ADAPTER.fetch(n)).arrayBuffer()},testParse(n,s){var l;const i=Gr(s.src,".json")&&sS(n),o=Gr(s.src,".skel")&&y7(n),a=((l=s.data)==null?void 0:l.spineAtlas)===!1;return Promise.resolve(i&&!a||o)},async parse(n,s,i){const o=Xt.extname(s.src).toLowerCase(),a=Xt.basename(s.src,o);let l=Xt.dirname(s.src);l&&l.lastIndexOf("/")!==l.length-1&&(l+="/");const c=Gr(s.src,".json")&&sS(n);let h=null,u=n;c?h=e.createJsonParser():(h=e.createBinaryParser(),u=new Uint8Array(n));const d=s.data||{},f=(d==null?void 0:d.spineSkeletonScale)??null;f&&(h.scale=f);const p=d.spineAtlas;if(p&&p.pages)return e.parseData(h,p,u);const m=d.atlasRawData;if(m){let v=null,x=null;const _=new Promise((S,T)=>{v=S,x=T}),b=new d0(m,fk(i,l,d.imageMetadata),S=>{S||x(`Something went terribly wrong loading a spine .atlas file
Most likely your texture failed to load.`),v(b)}),A=await _;return e.parseData(h,A,u)}let g=d.spineAtlasFile;g||(g=`${l+a}.atlas`);const y=await i.load({src:g,data:d,alias:d.spineAtlasAlias});return e.parseData(h,y,u)}}};return ne.add(r),r}}class v7 extends x7{createBinaryParser(){return new _t(null)}createJsonParser(){return new Bi(null)}parseData(e,r,n){const s=e;return s.attachmentLoader=new b9(r),{spineData:s.readSkeletonData(n),spineAtlas:r}}}new v7().installLoader();var v0={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||r;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var d=this||r;if(u=parseFloat(u),d.ctx||h(),typeof u<"u"&&u>=0&&u<=1){if(d._volume=u,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u,r.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),m=0;m<p.length;m++){var g=d._howls[f]._soundById(p[m]);g&&g._node&&(g._node.volume=g._volume*u)}return d}return d._volume},mute:function(u){var d=this||r;d.ctx||h(),d._muted=u,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u?0:d._volume,r.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),m=0;m<p.length;m++){var g=d._howls[f]._soundById(p[m]);g&&g._node&&(g._node.muted=u?!0:g._muted)}return d},stop:function(){for(var u=this||r,d=0;d<u._howls.length;d++)u._howls[d].stop();return u},unload:function(){for(var u=this||r,d=u._howls.length-1;d>=0;d--)u._howls[d].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,h()),u},codecs:function(u){return(this||r)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||r;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var d=new Audio;d.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||r,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return u}if(!d||typeof d.canPlayType!="function")return u;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),p=u._navigator?u._navigator.userAgent:"",m=p.match(/OPR\/(\d+)/g),g=m&&parseInt(m[0].split("/")[1],10)<33,y=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,v=p.match(/Version\/(.*?) /),x=y&&v&&parseInt(v[1],10)<15;return u._codecs={mp3:!!(!g&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||r;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var d=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,u._releaseHtml5Audio(p)}catch{u.noAudio=!0;break}for(var m=0;m<u._howls.length;m++)if(!u._howls[m]._webAudio)for(var g=u._howls[m]._getSoundIds(),y=0;y<g.length;y++){var v=u._howls[m]._soundById(g[y]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}u._autoResume();var x=u.ctx.createBufferSource();x.buffer=u._scratchBuffer,x.connect(u.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),x.onended=function(){x.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var _=0;_<u._howls.length;_++)u._howls[_]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),u}},_obtainHtml5Audio:function(){var u=this||r;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var d=this||r;return u._unlocked&&d._html5AudioPool.push(u),d},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!r.usingWebAudio)){for(var d=0;d<u._howls.length;d++)if(u._howls[d]._webAudio){for(var f=0;f<u._howls[d]._sounds.length;f++)if(!u._howls[d]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var p=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(p,p)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!r.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var d=0;d<u._howls.length;d++)u._howls[d]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var r=new e,n=function(u){var d=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(u)};n.prototype={init:function(u){var d=this;return r.ctx||h(),d._autoplay=u.autoplay||!1,d._format=typeof u.format!="string"?u.format:[u.format],d._html5=u.html5||!1,d._muted=u.mute||!1,d._loop=u.loop||!1,d._pool=u.pool||5,d._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,d._rate=u.rate||1,d._sprite=u.sprite||{},d._src=typeof u.src!="string"?u.src:[u.src],d._volume=u.volume!==void 0?u.volume:1,d._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=u.onend?[{fn:u.onend}]:[],d._onfade=u.onfade?[{fn:u.onfade}]:[],d._onload=u.onload?[{fn:u.onload}]:[],d._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],d._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],d._onpause=u.onpause?[{fn:u.onpause}]:[],d._onplay=u.onplay?[{fn:u.onplay}]:[],d._onstop=u.onstop?[{fn:u.onstop}]:[],d._onmute=u.onmute?[{fn:u.onmute}]:[],d._onvolume=u.onvolume?[{fn:u.onvolume}]:[],d._onrate=u.onrate?[{fn:u.onrate}]:[],d._onseek=u.onseek?[{fn:u.onseek}]:[],d._onunlock=u.onunlock?[{fn:u.onunlock}]:[],d._onresume=[],d._webAudio=r.usingWebAudio&&!d._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var u=this,d=null;if(r.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var p,m;if(u._format&&u._format[f])p=u._format[f];else{if(m=u._src[f],typeof m!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(m),p||(p=/\.([^.]+)$/.exec(m.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&r.codecs(p)){d=u._src[f];break}}if(!d){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=d,u._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new s(u),u._webAudio&&o(u),u},play:function(u,d){var f=this,p=null;if(typeof u=="number")p=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var m=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(m++,p=f._sounds[g]._id);m===1?u=null:p=null}}var y=p?f._soundById(p):f._inactiveSound();if(!y)return null;if(p&&!u&&(u=y._sprite||"__default"),f._state!=="loaded"){y._sprite=u,y._ended=!1;var v=y._id;return f._queue.push({event:"play",action:function(){f.play(v)}}),v}if(p&&!y._paused)return d||f._loadQueue("play"),y._id;f._webAudio&&r._autoResume();var x=Math.max(0,y._seek>0?y._seek:f._sprite[u][0]/1e3),_=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-x),b=_*1e3/Math.abs(y._rate),A=f._sprite[u][0]/1e3,S=(f._sprite[u][0]+f._sprite[u][1])/1e3;y._sprite=u,y._ended=!1;var T=function(){y._paused=!1,y._seek=x,y._start=A,y._stop=S,y._loop=!!(y._loop||f._sprite[u][2])};if(x>=S){f._ended(y);return}var E=y._node;if(f._webAudio){var R=function(){f._playLock=!1,T(),f._refreshBuffer(y);var M=y._muted||f._muted?0:y._volume;E.gain.setValueAtTime(M,r.ctx.currentTime),y._playStart=r.ctx.currentTime,typeof E.bufferSource.start>"u"?y._loop?E.bufferSource.noteGrainOn(0,x,86400):E.bufferSource.noteGrainOn(0,x,_):y._loop?E.bufferSource.start(0,x,86400):E.bufferSource.start(0,x,_),b!==1/0&&(f._endTimers[y._id]=setTimeout(f._ended.bind(f,y),b)),d||setTimeout(function(){f._emit("play",y._id),f._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?R():(f._playLock=!0,f.once("resume",R),f._clearTimer(y._id))}else{var P=function(){E.currentTime=x,E.muted=y._muted||f._muted||r._muted||E.muted,E.volume=y._volume*r.volume(),E.playbackRate=y._rate;try{var M=E.play();if(M&&typeof Promise<"u"&&(M instanceof Promise||typeof M.then=="function")?(f._playLock=!0,T(),M.then(function(){f._playLock=!1,E._unlocked=!0,d?f._loadQueue():f._emit("play",y._id)}).catch(function(){f._playLock=!1,f._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),y._ended=!0,y._paused=!0})):d||(f._playLock=!1,T(),f._emit("play",y._id)),E.playbackRate=y._rate,E.paused){f._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||y._loop?f._endTimers[y._id]=setTimeout(f._ended.bind(f,y),b):(f._endTimers[y._id]=function(){f._ended(y),E.removeEventListener("ended",f._endTimers[y._id],!1)},E.addEventListener("ended",f._endTimers[y._id],!1))}catch(G){f._emit("playerror",y._id,G)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=f._src,E.load());var D=window&&window.ejecta||!E.readyState&&r._navigator.isCocoonJS;if(E.readyState>=3||D)P();else{f._playLock=!0,f._state="loading";var k=function(){f._state="loaded",P(),E.removeEventListener(r._canPlayEvent,k,!1)};E.addEventListener(r._canPlayEvent,k,!1),f._clearTimer(y._id)}}return y._id},pause:function(u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(u)}}),d;for(var f=d._getSoundIds(u),p=0;p<f.length;p++){d._clearTimer(f[p]);var m=d._soundById(f[p]);if(m&&!m._paused&&(m._seek=d.seek(f[p]),m._rateSeek=0,m._paused=!0,d._stopFade(f[p]),m._node))if(d._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),d._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||d._emit("pause",m?m._id:null)}return d},stop:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var p=f._getSoundIds(u),m=0;m<p.length;m++){f._clearTimer(p[m]);var g=f._soundById(p[m]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(p[m]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),d||f._emit("stop",g._id))}return f},mute:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,d)}}),f;if(typeof d>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var p=f._getSoundIds(d),m=0;m<p.length;m++){var g=f._soundById(p[m]);g&&(g._muted=u,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(u?0:g._volume,r.ctx.currentTime):g._node&&(g._node.muted=r._muted?!0:u),f._emit("mute",g._id))}return f},volume:function(){var u=this,d=arguments,f,p;if(d.length===0)return u._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var y;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,d)}}),u;typeof p>"u"&&(u._volume=f),p=u._getSoundIds(p);for(var v=0;v<p.length;v++)y=u._soundById(p[v]),y&&(y._volume=f,d[2]||u._stopFade(p[v]),u._webAudio&&y._node&&!y._muted?y._node.gain.setValueAtTime(f,r.ctx.currentTime):y._node&&!y._muted&&(y._node.volume=f*r.volume()),u._emit("volume",y._id))}else return y=p?u._soundById(p):u._sounds[0],y?y._volume:0;return u},fade:function(u,d,f,p){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(u,d,f,p)}}),m;u=Math.min(Math.max(0,parseFloat(u)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),m.volume(u,p);for(var g=m._getSoundIds(p),y=0;y<g.length;y++){var v=m._soundById(g[y]);if(v){if(p||m._stopFade(g[y]),m._webAudio&&!v._muted){var x=r.ctx.currentTime,_=x+f/1e3;v._volume=u,v._node.gain.setValueAtTime(u,x),v._node.gain.linearRampToValueAtTime(d,_)}m._startFadeInterval(v,u,d,f,g[y],typeof p>"u")}}return m},_startFadeInterval:function(u,d,f,p,m,g){var y=this,v=d,x=f-d,_=Math.abs(x/.01),b=Math.max(4,_>0?p/_:p),A=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var S=(Date.now()-A)/p;A=Date.now(),v+=x*S,v=Math.round(v*100)/100,x<0?v=Math.max(f,v):v=Math.min(f,v),y._webAudio?u._volume=v:y.volume(v,u._id,!0),g&&(y._volume=v),(f<d&&v<=f||f>d&&v>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,y.volume(f,u._id),y._emit("fade",u._id))},b)},_stopFade:function(u){var d=this,f=d._soundById(u);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,u),f._fadeTo=null,d._emit("fade",u)),d},loop:function(){var u=this,d=arguments,f,p,m;if(d.length===0)return u._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],u._loop=f;else return m=u._soundById(parseInt(d[0],10)),m?m._loop:!1;else d.length===2&&(f=d[0],p=parseInt(d[1],10));for(var g=u._getSoundIds(p),y=0;y<g.length;y++)m=u._soundById(g[y]),m&&(m._loop=f,u._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=f,f&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,u.playing(g[y])&&(u.pause(g[y],!0),u.play(g[y],!0)))));return u},rate:function(){var u=this,d=arguments,f,p;if(d.length===0)p=u._sounds[0]._id;else if(d.length===1){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var y;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,d)}}),u;typeof p>"u"&&(u._rate=f),p=u._getSoundIds(p);for(var v=0;v<p.length;v++)if(y=u._soundById(p[v]),y){u.playing(p[v])&&(y._rateSeek=u.seek(p[v]),y._playStart=u._webAudio?r.ctx.currentTime:y._playStart),y._rate=f,u._webAudio&&y._node&&y._node.bufferSource?y._node.bufferSource.playbackRate.setValueAtTime(f,r.ctx.currentTime):y._node&&(y._node.playbackRate=f);var x=u.seek(p[v]),_=(u._sprite[y._sprite][0]+u._sprite[y._sprite][1])/1e3-x,b=_*1e3/Math.abs(y._rate);(u._endTimers[p[v]]||!y._paused)&&(u._clearTimer(p[v]),u._endTimers[p[v]]=setTimeout(u._ended.bind(u,y),b)),u._emit("rate",y._id)}}else return y=u._soundById(p),y?y._rate:u._rate;return u},seek:function(){var u=this,d=arguments,f,p;if(d.length===0)u._sounds.length&&(p=u._sounds[0]._id);else if(d.length===1){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?p=parseInt(d[0],10):u._sounds.length&&(p=u._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));if(typeof p>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,d)}}),u;var y=u._soundById(p);if(y)if(typeof f=="number"&&f>=0){var v=u.playing(p);v&&u.pause(p,!0),y._seek=f,y._ended=!1,u._clearTimer(p),!u._webAudio&&y._node&&!isNaN(y._node.duration)&&(y._node.currentTime=f);var x=function(){v&&u.play(p,!0),u._emit("seek",p)};if(v&&!u._webAudio){var _=function(){u._playLock?setTimeout(_,0):x()};setTimeout(_,0)}else x()}else if(u._webAudio){var b=u.playing(p)?r.ctx.currentTime-y._playStart:0,A=y._rateSeek?y._rateSeek-y._seek:0;return y._seek+(A+b*Math.abs(y._rate))}else return y._node.currentTime;return u},playing:function(u){var d=this;if(typeof u=="number"){var f=d._soundById(u);return f?!f._paused:!1}for(var p=0;p<d._sounds.length;p++)if(!d._sounds[p]._paused)return!0;return!1},duration:function(u){var d=this,f=d._duration,p=d._soundById(u);return p&&(f=d._sprite[p._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,d=u._sounds,f=0;f<d.length;f++)d[f]._paused||u.stop(d[f]._id),u._webAudio||(u._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(r._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),r._releaseHtml5Audio(d[f]._node)),delete d[f]._node,u._clearTimer(d[f]._id);var p=r._howls.indexOf(u);p>=0&&r._howls.splice(p,1);var m=!0;for(f=0;f<r._howls.length;f++)if(r._howls[f]._src===u._src||u._src.indexOf(r._howls[f]._src)>=0){m=!1;break}return i&&m&&delete i[u._src],r.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,d,f,p){var m=this,g=m["_on"+u];return typeof d=="function"&&g.push(p?{id:f,fn:d,once:p}:{id:f,fn:d}),m},off:function(u,d,f){var p=this,m=p["_on"+u],g=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(g=0;g<m.length;g++){var y=f===m[g].id;if(d===m[g].fn&&y||!d&&y){m.splice(g,1);break}}else if(u)p["_on"+u]=[];else{var v=Object.keys(p);for(g=0;g<v.length;g++)v[g].indexOf("_on")===0&&Array.isArray(p[v[g]])&&(p[v[g]]=[])}return p},once:function(u,d,f){var p=this;return p.on(u,d,f,1),p},_emit:function(u,d,f){for(var p=this,m=p["_on"+u],g=m.length-1;g>=0;g--)(!m[g].id||m[g].id===d||u==="load")&&(setTimeout((function(y){y.call(this,d,f)}).bind(p,m[g].fn),0),m[g].once&&p.off(u,m[g].fn,m[g].id));return p._loadQueue(u),p},_loadQueue:function(u){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===u&&(d._queue.shift(),d._loadQueue()),u||f.action()}return d},_ended:function(u){var d=this,f=u._sprite;if(!d._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(d._ended.bind(d,u),100),d;var p=!!(u._loop||d._sprite[f][2]);if(d._emit("end",u._id),!d._webAudio&&p&&d.stop(u._id,!0).play(u._id),d._webAudio&&p){d._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=r.ctx.currentTime;var m=(u._stop-u._start)*1e3/Math.abs(u._rate);d._endTimers[u._id]=setTimeout(d._ended.bind(d,u),m)}return d._webAudio&&!p&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,d._clearTimer(u._id),d._cleanBuffer(u._node),r._autoSuspend()),!d._webAudio&&!p&&d.stop(u._id,!0),d},_clearTimer:function(u){var d=this;if(d._endTimers[u]){if(typeof d._endTimers[u]!="function")clearTimeout(d._endTimers[u]);else{var f=d._soundById(u);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[u],!1)}delete d._endTimers[u]}return d},_soundById:function(u){for(var d=this,f=0;f<d._sounds.length;f++)if(u===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var d=0;d<u._sounds.length;d++)if(u._sounds[d]._ended)return u._sounds[d].reset();return new s(u)},_drain:function(){var u=this,d=u._pool,f=0,p=0;if(!(u._sounds.length<d)){for(p=0;p<u._sounds.length;p++)u._sounds[p]._ended&&f++;for(p=u._sounds.length-1;p>=0;p--){if(f<=d)return;u._sounds[p]._ended&&(u._webAudio&&u._sounds[p]._node&&u._sounds[p]._node.disconnect(0),u._sounds.splice(p,1),f--)}}},_getSoundIds:function(u){var d=this;if(typeof u>"u"){for(var f=[],p=0;p<d._sounds.length;p++)f.push(d._sounds[p]._id);return f}else return[u]},_refreshBuffer:function(u){var d=this;return u._node.bufferSource=r.ctx.createBufferSource(),u._node.bufferSource.buffer=i[d._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,r.ctx.currentTime),d},_cleanBuffer:function(u){var d=this,f=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!u.bufferSource)return d;if(r._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=r._scratchBuffer}catch{}return u.bufferSource=null,d},_clearSound:function(u){var d=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);d||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(u){this._parent=u,this.init()};s.prototype={init:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++r._counter,d._sounds.push(u),u.create(),u},create:function(){var u=this,d=u._parent,f=r._muted||u._muted||u._parent._muted?0:u._volume;return d._webAudio?(u._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),u._node.gain.setValueAtTime(f,r.ctx.currentTime),u._node.paused=!0,u._node.connect(r.masterGain)):r.noAudio||(u._node=r._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(r._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=d._src,u._node.preload=d._preload===!0?"auto":d._preload,u._node.volume=f*r.volume(),u._node.load()),u},reset:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++r._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,d=u._parent;d._duration=Math.ceil(u._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),u._node.removeEventListener(r._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,d=u._parent;d._duration===1/0&&(d._duration=Math.ceil(u._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var i={},o=function(u){var d=u._src;if(i[d]){u._duration=i[d].duration,c(u);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),p=new Uint8Array(f.length),m=0;m<f.length;++m)p[m]=f.charCodeAt(m);l(p.buffer,u)}else{var g=new XMLHttpRequest;g.open(u._xhr.method,d,!0),g.withCredentials=u._xhr.withCredentials,g.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(y){g.setRequestHeader(y,u._xhr.headers[y])}),g.onload=function(){var y=(g.status+"")[0];if(y!=="0"&&y!=="2"&&y!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,u)},g.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete i[d],u.load())},a(g)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},p=function(m){m&&d._sounds.length>0?(i[d._src]=m,c(d,m)):f()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(u).then(p).catch(f):r.ctx.decodeAudioData(u,p,f)},c=function(u,d){d&&!u._duration&&(u._duration=d.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},h=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),d=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(u&&f&&f<9){var p=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!p&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};t.Howler=r,t.Howl=n,typeof kn<"u"?(kn.HowlerGlobal=e,kn.Howler=r,kn.Howl=n,kn.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=r,window.Howl=n,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var s=n._howls.length-1;s>=0;s--)n._howls[s].stereo(r);return n},HowlerGlobal.prototype.pos=function(r,n,s){var i=this;if(!i.ctx||!i.ctx.listener)return i;if(n=typeof n!="number"?i._pos[1]:n,s=typeof s!="number"?i._pos[2]:s,typeof r=="number")i._pos=[r,n,s],typeof i.ctx.listener.positionX<"u"?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]);else return i._pos;return i},HowlerGlobal.prototype.orientation=function(r,n,s,i,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(n=typeof n!="number"?c[1]:n,s=typeof s!="number"?c[2]:s,i=typeof i!="number"?c[3]:i,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof r=="number")l._orientation=[r,n,s,i,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(r,n,s,i,o,a);else return c;return l},Howl.prototype.init=function(r){return function(n){var s=this;return s._orientation=n.orientation||[1,0,0],s._stereo=n.stereo||null,s._pos=n.pos||null,s._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},s._onstereo=n.onstereo?[{fn:n.onstereo}]:[],s._onpos=n.onpos?[{fn:n.onpos}]:[],s._onorientation=n.onorientation?[{fn:n.onorientation}]:[],r.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,n){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(r,n)}}),s;var i=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof r=="number")s._stereo=r,s._pos=[r,0,0];else return s._stereo;for(var o=s._getSoundIds(n),a=0;a<o.length;a++){var l=s._soundById(o[a]);if(l)if(typeof r=="number")l._stereo=r,l._pos=[r,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,i),i==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(r,0,0):l._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),s._emit("stereo",l._id);else return l._stereo}return s},Howl.prototype.pos=function(r,n,s,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(r,n,s,i)}}),o;if(n=typeof n!="number"?0:n,s=typeof s!="number"?-.5:s,typeof i>"u")if(typeof r=="number")o._pos=[r,n,s];else return o._pos;for(var a=o._getSoundIds(i),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof r=="number")c._pos=[r,n,s],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):c._panner.setPosition(r,n,s)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(r,n,s,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(r,n,s,i)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,s=typeof s!="number"?o._orientation[2]:s,typeof i>"u")if(typeof r=="number")o._orientation=[r,n,s];else return o._orientation;for(var a=o._getSoundIds(i),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof r=="number")c._orientation=[r,n,s],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):c._panner.setOrientation(r,n,s)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var r=this,n=arguments,s,i,o;if(!r._webAudio)return r;if(n.length===0)return r._pannerAttr;if(n.length===1)if(typeof n[0]=="object")s=n[0],typeof i>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),r._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:r._panningModel});else return o=r._soundById(parseInt(n[0],10)),o?o._pannerAttr:r._pannerAttr;else n.length===2&&(s=n[0],i=parseInt(n[1],10));for(var a=r._getSoundIds(i),l=0;l<a.length;l++)if(o=r._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:c.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:c.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:c.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:c.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:c.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:c.panningModel};var h=o._panner;h||(o._pos||(o._pos=r._pos||[0,0,-.5]),e(o,"spatial"),h=o._panner),h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel}return r},Sound.prototype.init=function(r){return function(){var n=this,s=n._parent;n._orientation=s._orientation,n._stereo=s._stereo,n._pos=s._pos,n._pannerAttr=s._pannerAttr,r.call(this),n._stereo?s.stereo(n._stereo):n._pos&&s.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var n=this,s=n._parent;return n._orientation=s._orientation,n._stereo=s._stereo,n._pos=s._pos,n._pannerAttr=s._pannerAttr,n._stereo?s.stereo(n._stereo):n._pos?s.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,s._refreshBuffer(n)),r.call(this)}}(Sound.prototype.reset);var e=function(r,n){n=n||"spatial",n==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(v0);const _7="/chest/proj_1_zoggy_chest_PS_V2.json",w7="/chest/proj_1_zoggy_chest_PS_V2.atlas.txt",b7="/chest/proj_1_zoggy_chest_PS_V2.png";function A7({initial:t="open",autoChain:e="open_idle",fitScale:r=.75,bg:n="#0b0f17"}){const s=C.useRef(null),i=C.useRef(null),o=C.useRef(null),[a,l]=C.useState([]),[c,h]=C.useState(t);return C.useEffect(()=>{let u=!1;return(async()=>{const d=s.current;if(!d)return;const f=new YP;if(await f.init({resizeTo:d,antialias:!0}),u){f.destroy();return}d.style.background=n,d.appendChild(f.canvas),i.current=f;const p=new v0.Howl({src:["/chest/sfx_open.wav"],volume:.9}),m=new v0.Howl({src:["/chest/sfx_reveal.wav"],volume:.9});Hi.add({alias:"chest",src:_7,data:{metadata:{spineAtlasFile:w7}}}),Hi.add({alias:"chestPng",src:b7});const[g]=await Hi.load(["chest","chestPng"]);if(u){f.destroy();return}const y=g.spineData??g,v=new R9(y);o.current=v,f.stage.addChild(v);const x=v.spineData.animations.map(T=>T.name);l(x);const _=()=>{const{width:T,height:E}=f.renderer;v.skeleton.setToSetupPose(),v.update(0);const R=v.getBounds(),P=Math.min(T/R.width,E/R.height)*r;v.scale.set(P),v.position.set(T/2-(R.x+R.width/2)*P,E/2-(R.y+R.height/2)*P)};_();const b=new ResizeObserver(_);b.observe(d),v.state.addListener({start:T=>{var R;const E=(R=T==null?void 0:T.animation)==null?void 0:R.name;E==="open"&&p.play(),E==="reveal"&&m.play()},complete:T=>{var E;((E=T==null?void 0:T.animation)==null?void 0:E.name)==="open"&&e&&x.includes(e)&&(v.state.setAnimation(0,e,!0),h(e))}});const A=x.includes(c)?c:x[0];A&&v.state.setAnimation(0,A,A!=="open");const S=T=>{var R;const E=(R=T==null?void 0:T.detail)==null?void 0:R.name;E&&x.includes(E)&&(v.state.setAnimation(0,E,E!=="open"),h(E))};return window.addEventListener("spine:play",S),()=>{window.removeEventListener("spine:play",S),b.disconnect()}})(),()=>{u=!0;const d=i.current;try{d==null||d.destroy()}catch{}const f=s.current;d!=null&&d.canvas&&(f!=null&&f.contains(d.canvas))&&f.removeChild(d.canvas)}},[n,r,t,e,c]),w.jsxs("div",{className:"relative w-full h-[420px] rounded-2xl overflow-hidden ring-1 ring-white/10",children:[w.jsx("div",{ref:s,className:"w-full h-full"}),a.length>0&&w.jsx("div",{className:"absolute left-3 bottom-3 flex flex-wrap gap-2 bg-black/40 text-white p-2 rounded-lg",children:a.map(u=>w.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("spine:play",{detail:{name:u}})),className:`px-2 py-1 text-sm rounded border border-white/20 ${c===u?"bg-white/20":"bg-transparent"}`,children:u},u))})]})}const S7=()=>{const t=ws();C.useEffect(()=>{},[]);const e=()=>{t("/signin")};return w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950",children:[w.jsx(Js,{minimal:!1,title:""}),w.jsx(IV,{onJoinWaitlist:e}),w.jsx("div",{className:"min-h-screen bg-slate-950 text-white",children:w.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-10",children:[w.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Chest"}),w.jsx(A7,{initial:"open",autoChain:"open_idle"}),w.jsxs("div",{className:"mt-6 flex gap-3",children:[w.jsx("button",{className:"px-3 py-2 rounded bg-emerald-600",onClick:()=>window.dispatchEvent(new CustomEvent("spine:play",{detail:{name:"open"}})),children:"Open"}),w.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600",onClick:()=>window.dispatchEvent(new CustomEvent("spine:play",{detail:{name:"reveal"}})),children:"Reveal"}),w.jsx("button",{className:"px-3 py-2 rounded bg-gray-700",onClick:()=>window.dispatchEvent(new CustomEvent("spine:play",{detail:{name:"open_idle"}})),children:"Idle"})]})]})}),w.jsx($R,{}),w.jsx(GR,{}),w.jsx(XV,{})]})},T7=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),E7=()=>{const t=ws(),e=xn(),{setToken:r,setUser:n}=co(),{showToast:s,ToastContainer:i}=bs(),[o,a]=C.useState(""),[l,c]=C.useState(""),[h,u]=C.useState(!1);C.useEffect(()=>{var f;(f=e.state)!=null&&f.email&&a(e.state.email)},[e.state]);const d=async f=>{var p,m;if(f.preventDefault(),c(""),!o){c("Email is required");return}if(!T7(o)){c("Please enter a valid email address");return}u(!0);try{const g=await ba.signin(o),{token:y,user:v,redirect:x}=g.data;r(y),n(v),s("Successfully signed in!","success"),t(x)}catch(g){console.error("Signin failed:",g),((p=g.response)==null?void 0:p.status)===404?c("Email not found. Please sign up first."):((m=g.response)==null?void 0:m.status)===403?c("Please verify your email before signing in."):c("Failed to sign in. Please try again.")}finally{u(!1)}};return w.jsxs("div",{className:"min-h-screen bg-gray-950",children:[w.jsx(Js,{minimal:!0}),w.jsx("div",{className:"min-h-screen flex items-center justify-center px-6 py-12",children:w.jsxs("div",{className:"max-w-md w-full",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-brand to-red-700 rounded-full flex items-center justify-center mx-auto mb-6",children:w.jsx(pC,{className:"w-10 h-10 text-white"})}),w.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Welcome Back"}),w.jsx("p",{className:"text-xl text-gray-400",children:"Sign in to access your dashboard"})]}),w.jsxs(Fn,{children:[w.jsxs("form",{onSubmit:d,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),w.jsxs("div",{className:"relative",children:[w.jsx(Px,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),w.jsx("input",{type:"email",placeholder:"Enter your email",value:o,onChange:f=>a(f.target.value),className:`w-full pl-10 pr-4 py-3 bg-gray-700 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand transition-all ${l?"border-red-500 ring-red-500":"border-gray-600"}`,required:!0})]}),l&&w.jsx("p",{className:"text-red-400 text-sm mt-1",children:l})]}),w.jsx(Ot,{type:"submit",variant:"primary",size:"lg",loading:h,className:"w-full",children:"Sign In"})]}),w.jsx("div",{className:"mt-6 text-center",children:w.jsxs("p",{className:"text-gray-400",children:["Don't have an account?"," ",w.jsx("button",{onClick:()=>t("/signup"),className:"text-gold hover:text-yellow-400 transition-colors",children:"Join waitlist"})]})})]})]})})]})},C7=()=>{const[t]=qO(),e=ws(),{showToast:r,ToastContainer:n}=bs(),[s,i]=C.useState("verifying"),[o,a]=C.useState(""),[l,c]=C.useState(!1),h=t.get("token"),u=t.get("email");C.useEffect(()=>{if(!h){i("error"),a("Invalid verification link");return}d()},[h]);const d=async()=>{try{const p=await HE.verifyEmail(h);i("success"),a(p.data.message||"Email verified successfully!"),setTimeout(()=>{e("/dashboard")},3e3)}catch(p){console.error("Verification failed:",p),i("error"),a("Verification failed. The link may be expired or invalid.")}},f=async()=>{if(!u){r("Email address not found","error");return}c(!0);try{await ba.resendVerification(u),r("Verification email sent!","success")}catch(p){console.error("Failed to resend verification:",p),r("Failed to resend verification email","error")}finally{c(!1)}};return console.log(s),w.jsxs("div",{className:"min-h-screen bg-gray-950",children:[w.jsx(Js,{minimal:!0}),w.jsx("div",{className:"min-h-screen flex items-center justify-center px-6 py-12",children:w.jsx("div",{className:"max-w-md w-full",children:w.jsxs(Fn,{className:"text-center",children:[s==="verifying"&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:w.jsx(Px,{className:"w-10 h-10 text-white"})}),w.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Verifying Email"}),w.jsx("div",{className:"w-8 h-8 border-4 border-gray-600 border-t-brand rounded-full animate-spin mx-auto mb-4"}),w.jsx("p",{className:"text-gray-400",children:"Please wait while we verify your email address..."})]}),s==="success"&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:w.jsx(cC,{className:"w-10 h-10 text-white"})}),w.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Email Verified!"}),w.jsxs("p",{className:"text-gray-400 mb-6",children:[o," Redirecting to dashboard..."]}),w.jsx(Ot,{variant:"primary",onClick:()=>e("/dashboard"),children:"Go to Dashboard"})]}),s==="error"&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-6",children:w.jsx(dB,{className:"w-10 h-10 text-white"})}),w.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Verification Failed"}),w.jsx("p",{className:"text-gray-400 mb-6",children:o}),w.jsxs("div",{className:"space-y-4",children:[u&&w.jsx(Ot,{variant:"primary",onClick:f,loading:l,className:"w-full",children:"Resend Verification"}),w.jsx(Ot,{variant:"outline",onClick:()=>e("/signin"),className:"w-full",children:"Back to Sign In"})]})]})]})})}),w.jsx(n,{})]})};var pk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},iS=On.createContext&&On.createContext(pk),R7=["attr","size","title"];function P7(t,e){if(t==null)return{};var r=M7(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function M7(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Gd(){return Gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gd.apply(this,arguments)}function oS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function zd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oS(Object(r),!0).forEach(function(n){I7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I7(t,e,r){return e=k7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k7(t){var e=N7(t,"string");return typeof e=="symbol"?e:e+""}function N7(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mk(t){return t&&t.map((e,r)=>On.createElement(e.tag,zd({key:r},e.attr),mk(e.child)))}function F7(t){return e=>On.createElement(L7,Gd({attr:zd({},t.attr)},e),mk(t.child))}function L7(t){var e=r=>{var{attr:n,size:s,title:i}=t,o=P7(t,R7),a=s||r.size||"1em",l;return r.className&&(l=r.className),t.className&&(l=(l?l+" ":"")+t.className),On.createElement("svg",Gd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:l,style:zd(zd({color:t.color||r.color},r.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&On.createElement("title",null,i),t.children)};return iS!==void 0?On.createElement(iS.Consumer,null,r=>e(r)):e(pk)}function aS(t){return F7({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"},child:[]}]})(t)}const gk="/assets/chest-c8dbcc0f.png",O7=({dashboardData:t,onOpenChest:e})=>{var f,p;const{showToast:r}=bs(),[n,s]=C.useState(!1),i=qB(t==null?void 0:t.lastOpenAt,t==null?void 0:t.cooldownSeconds),o=mC(t==null?void 0:t.lastOpenAt,t==null?void 0:t.cooldownSeconds),[a,l]=C.useState(!1);C.useState(!1);const[c,h]=C.useState({});C.useEffect(()=>{const m=setInterval(async()=>{var g;try{(g=(await i1.verifyStatus()).data)!=null&&g.telegram_verified&&l(!0)}catch{}},2e3);return()=>clearInterval(m)},[]);const u=async()=>{try{const m=await i1.nonce();if(!m.data.ok)return;const{nonce:g,botUsername:y}=m.data,v="tg://resolve?domain="+y+"&start=auth_"+encodeURIComponent(g),x="https://t.me/"+y+"?start=auth_"+encodeURIComponent(g);location.href=v}catch(m){console.log("Festch nonce error",m)}},d=async()=>{var m,g;if(a){if(!i){r("You can only open one chest per day!","warning");return}try{s(!0);const y=await SL.open(),v={amount:((m=y.data)==null?void 0:m.reward)||"$5.00",type:((g=y.data)==null?void 0:g.type)||"cash"};e(v)}catch(y){console.error("Failed to open chest:",y),r("Failed to open chest. Please try again.","error")}finally{s(!1)}}};return w.jsxs("div",{className:"flex flex-col md:flex-row md:items-stretch gap-8",children:[w.jsxs("div",{className:"w-full md:basis-[30%] md:max-w-[30%] md:shrink-0 md:grow-0 text-center",children:[w.jsx("div",{className:"w-40 h-40 mx-auto mb-8 relative",children:w.jsxs(fe.div,{animate:i?{rotateY:[0,10,-10,0],scale:[1,1.05,1],y:[0,-5,0]}:{},transition:{duration:2,repeat:i?1/0:0,ease:"easeInOut"},className:`w-full h-full flex items-center justify-center transform hover:scale-110 transition-all duration-500 relative ${i?"":"opacity-60 grayscale"}`,children:[i&&w.jsx(fe.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-gold/20 rounded-full blur-xl"}),w.jsx(fe.img,{src:gk,alt:"Daily Chest",className:"w-48 h-48 object-contain drop-shadow-2xl relative z-10",animate:n?{rotateY:[0,180,360],scale:[1,1.2,1.1],y:[0,-20,-10]}:{},transition:{duration:1.5,ease:"easeInOut"}}),n&&[...Array(8)].map((m,g)=>w.jsx(fe.div,{initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1,0],x:[0,Math.cos(g*45*Math.PI/180)*60],y:[0,Math.sin(g*45*Math.PI/180)*60]},transition:{duration:1,delay:.5+g*.1,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-gold rounded-full"},g)),!i&&w.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:w.jsx(fe.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0},className:"bg-gray-800/80 rounded-full p-3 backdrop-blur-sm",children:w.jsx(RB,{className:"w-8 h-8 text-white"})})})]})}),w.jsx("h3",{className:"text-3xl font-bold text-white mb-8 font-poppins",children:"Open your Daily Chest!"}),t.telegram.verified||a?i?w.jsx(Ot,{variant:"primary",size:"lg",onClick:d,loading:n,className:"w-full",children:n?"Opening...":"Open Chest"}):w.jsxs("div",{className:"space-y-4",children:[w.jsx(Ot,{variant:"outline",size:"lg",disabled:!0,className:"w-full opacity-50 cursor-not-allowed",children:"Chest Opened"}),o&&w.jsx(Jg,{targetDate:o,label:"Next chest in",className:"justify-center"})]}):w.jsx("div",{className:"mt-auto",children:w.jsxs(Ot,{variant:"sky",size:"lg",className:"w-full",onClick:u,disabled:(f=t==null?void 0:t.telegram)==null?void 0:f.verified,children:[w.jsx(aS,{className:"w-5 h-5 mr-2"}),"Join Telegram"]})})]}),w.jsx("div",{className:"w-full md:basis-[70%] md:max-w-[70%] md:shrink md:grow",children:w.jsx("div",{className:"h-full flex flex-col bg-[#0d1320] border border-gray-800 rounded-lg",children:w.jsxs("div",{className:"flex flex-col justify-center flex-1 text-center p-8",children:[w.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[w.jsx(aS,{className:"w-8 h-8 text-sky-400"}),w.jsx("h3",{className:"text-2xl font-bold text-white font-poppins",children:"Telegram Required"})]}),w.jsx("p",{className:"text-lg text-gray-300 font-montserrat leading-relaxed",children:"You must connect Telegram and join our group to be able to open a daily chest and earn rewards up to $10.000."}),(((p=t==null?void 0:t.telegram)==null?void 0:p.linked)||c.ok)&&w.jsxs("div",{className:"mt-4 flex items-center space-x-2 justify-center",children:[w.jsx("div",{className:`w-3 h-3 rounded-full ${t.telegram.verified||a?"bg-green-500":"bg-yellow-500"}`}),w.jsx("span",{className:`text-sm font-medium ${t.telegram.verified||a?"text-green-400":"text-yellow-400"}`,children:t.telegram.verified||a?"Telegram Verified":"Telegram Linked (Pending Verification)"})]})]})})})]})},lS=({value:t,label:e,className:r=""})=>{const[n,s]=C.useState(!1),i=async()=>{try{await navigator.clipboard.writeText(t),s(!0),setTimeout(()=>s(!1),2e3)}catch(o){console.error("Failed to copy:",o)}};return w.jsxs("div",{className:`space-y-2 ${r}`,children:[e&&w.jsx("label",{className:"block text-sm font-medium text-gray-300",children:e}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("input",{type:"text",value:t,readOnly:!0,className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-brand"}),w.jsx(Ot,{variant:"outline",size:"sm",onClick:i,className:"px-3",children:n?w.jsx(aB,{className:"w-4 h-4"}):w.jsx(uC,{className:"w-4 h-4"})})]})]})},B7=({isOpen:t,onClose:e,reward:r})=>{const{user:n}=co(),[s,i]=C.useState(!1),[o,a]=C.useState(!1),[l,c]=C.useState(!1),{showToast:h}=bs();C.useEffect(()=>{if(t&&r){const f=setTimeout(()=>{c(!0)},800),p=setTimeout(()=>{i(!0)},2e3);return()=>{clearTimeout(f),clearTimeout(p)}}else i(!1),c(!1)},[t,r]);const u=()=>{const f=n.referralCode||"DEFAULT_CODE",p=`🎉 I just opened a daily chest on @Zoggycasino and got ${(r==null?void 0:r.amount)||"$0"}!💸

Join the waitlist and win up to $10.000 daily prizes 👇

`,m=`https://twitter.com/intent/tweet?text=${encodeURIComponent(p)}&url=${encodeURIComponent(window.location.origin)}?ref=${f}`;window.open(m,"_blank","width=550,height=420")},d=async()=>{try{await navigator.clipboard.writeText(window.location.origin),a(!0),h("Link copied to clipboard!","success"),setTimeout(()=>a(!1),2e3)}catch{h("Failed to copy link","error")}};return t?w.jsx(cr,{children:w.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 overflow-y-auto",children:[w.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:e}),w.jsxs(fe.div,{initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:50},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-2xl border border-gold/30 shadow-2xl max-w-md w-full mx-auto overflow-hidden",children:[w.jsx("button",{onClick:e,className:"absolute top-4 right-4 z-10 w-8 h-8 bg-gray-700/50 hover:bg-gray-600/50 rounded-full flex items-center justify-center transition-colors",children:w.jsx(ud,{className:"w-4 h-4 text-gray-300"})}),w.jsxs("div",{className:"p-8 text-center",children:[w.jsxs("div",{className:"mb-8 relative",children:[w.jsxs(fe.div,{className:"w-40 h-40 mx-auto mb-4 relative",children:[w.jsx(fe.div,{animate:l?{scale:[1,2,1.5],opacity:[0,.8,.4]}:{},transition:{duration:1.5,ease:"easeOut"},className:"absolute inset-0 bg-gold/30 rounded-full blur-2xl"}),w.jsx(fe.img,{src:gk,alt:"Opening Chest",className:"w-full h-full object-contain relative z-10",animate:l?{rotateY:[0,180,360],scale:[1,1.3,1.1],y:[0,-30,-20]}:{scale:[1,1.05,1],rotate:[0,2,-2,0]},transition:l?{duration:1.2,ease:"easeInOut"}:{duration:2,repeat:1/0,ease:"easeInOut"}}),w.jsx(cr,{children:l&&w.jsxs(w.Fragment,{children:[[...Array(12)].map((f,p)=>w.jsx(fe.div,{initial:{opacity:0,scale:0},animate:{opacity:[0,1,.5,0],scale:[0,1.5,1,0],x:[0,Math.cos(p*30*Math.PI/180)*100],y:[0,Math.sin(p*30*Math.PI/180)*100],rotate:[0,360]},transition:{duration:2,delay:.3+p*.05,ease:"easeOut"},className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:w.jsx(DB,{className:"w-4 h-4 text-gold"})},`sparkle-${p}`)),[...Array(8)].map((f,p)=>w.jsx(fe.div,{initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1,0],x:[0,Math.cos(p*45*Math.PI/180)*80],y:[0,Math.sin(p*45*Math.PI/180)*80]},transition:{duration:1.5,delay:.6+p*.08,ease:"easeOut"},className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:w.jsx(XB,{className:"w-3 h-3 text-yellow-400"})},`zap-${p}`)),[...Array(15)].map((f,p)=>w.jsx(fe.div,{initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1,0],x:[0,(Math.random()-.5)*200],y:[0,(Math.random()-.5)*200]},transition:{duration:3,delay:.8+p*.1,ease:"easeOut"},className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-gold rounded-full"},`particle-${p}`))]})})]}),w.jsx(cr,{mode:"wait",children:l?s?w.jsxs(fe.div,{initial:{opacity:0,y:30,scale:.8},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",damping:15,stiffness:300,delay:.2},children:[w.jsx(fe.h2,{className:"text-xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-poppins",animate:{scale:[1,1.05,1],textShadow:["0 0 0px rgba(255,215,0,0)","0 0 20px rgba(255,215,0,0.8)","0 0 0px rgba(255,215,0,0)"]},transition:{duration:2,repeat:1/0},children:"🎉 Congratulations! 🎉"}),w.jsx(fe.div,{className:"text-6xl font-bold text-gold mb-6 font-poppins",initial:{scale:0},animate:{scale:[0,1.2,1],rotate:[0,5,-5,0]},transition:{type:"spring",damping:10,stiffness:200,delay:.5},style:{filter:"drop-shadow(0 0 20px rgba(255,215,0,0.8))",textShadow:"0 0 30px rgba(255,215,0,0.6)"},children:(r==null?void 0:r.amount)||"$0.00"}),w.jsxs(fe.p,{className:"text-gray-300 font-montserrat text-lg",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:["Congrats! You unboxed ",w.jsx("span",{className:"text-gold font-semibold",children:(r==null?void 0:r.amount)||"$0.00"})]})]},"reward"):w.jsx(fe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"text-2xl font-bold text-gold font-poppins animate-pulse",children:"✨ Revealing your prize... ✨"},"revealing"):w.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-2xl font-bold text-white font-poppins",children:"Opening your daily chest..."},"opening")})]}),w.jsx(cr,{children:s&&w.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"space-y-4",children:[w.jsx("div",{className:"bg-gold/10 border border-gold/30 rounded-lg p-4 mb-6",children:w.jsxs("p",{className:"text-gold text-sm font-montserrat",children:[w.jsx("strong",{children:"Share your win"})," and help others discover Zoggy!"]})}),w.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[w.jsxs(Ot,{onClick:u,className:"bg-blue-600 hover:bg-blue-700 text-white border-blue-600 hover:border-blue-700",children:[w.jsx(jB,{className:"w-4 h-4 mr-2"}),"Tweet"]}),w.jsxs(Ot,{onClick:d,variant:"secondary",className:o?"bg-green-600 border-green-600":"",children:[w.jsx(uC,{className:"w-4 h-4 mr-2"}),o?"Copied!":"Copy Link"]})]}),w.jsx(Ot,{onClick:e,variant:"primary",size:"lg",className:"w-full mt-6",children:"Continue"})]})})]})]})]})}):null},D7=()=>{const{user:t,fetchUser:e}=co(),{showToast:r}=bs(),[n,s]=C.useState(null),[i,o]=C.useState(!0),[a,l]=C.useState(!1),[c,h]=C.useState(null),u=f=>{h(f),l(!0)},d=async()=>{l(!1),h(null),await e()};return C.useEffect(()=>{},[]),C.useEffect(()=>{t&&(async()=>{try{const p=await HE.getDashboard();s(p.data)}catch(p){console.error("Failed to fetch dashboard data:",p),r("Failed to load dashboard data","error")}finally{o(!1)}})()},[t,r]),!t||i?w.jsxs("div",{className:"min-h-screen bg-gray-950",children:[w.jsx(Js,{minimal:!1,title:""}),w.jsx("div",{className:"flex items-center justify-center min-h-screen",children:w.jsx("div",{className:"text-white text-xl",children:"Loading..."})})]}):n?w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950",children:[w.jsx(Js,{minimal:!1,title:""}),w.jsx("div",{className:"relative overflow-hidden",children:w.jsx(UR,{autoSlide:!0,slideInterval:6e3})}),w.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[w.jsxs(Fn,{className:"text-center",children:[w.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand to-red-700 rounded-full flex items-center justify-center mx-auto mb-4",children:w.jsx(Mx,{className:"w-8 h-8 text-white"})}),w.jsx("h3",{className:"text-xl font-bold text-white mb-2 font-poppins",children:"Waitlist Position"}),w.jsxs("div",{className:"text-3xl font-bold text-gold mb-1 font-poppins",children:["# ",n.position||"---"]}),w.jsx("p",{className:"text-gray-400 text-sm font-montserrat",children:"Your current position"})]}),w.jsxs(Fn,{className:"text-center",children:[w.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand to-red-700 rounded-full flex items-center justify-center mx-auto mb-4",children:w.jsx(Ix,{className:"w-8 h-8 text-white"})}),w.jsx("h3",{className:"text-xl font-bold text-white mb-2 font-poppins",children:"Total Waitlist"}),w.jsxs("div",{className:"text-3xl font-bold text-gold mb-1 font-poppins",children:["# ",n.total||"10K+"]}),w.jsx("p",{className:"text-gray-400 text-sm font-montserrat",children:"People waiting"})]}),w.jsxs(Fn,{className:"text-center",children:[w.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand to-red-700 rounded-full flex items-center justify-center mx-auto mb-4",children:w.jsx(fC,{className:"w-8 h-8 text-white"})}),w.jsx("h3",{className:"text-xl font-bold text-white mb-2 font-poppins",children:"My Referral Users"}),w.jsx("div",{className:"text-3xl font-bold text-gold mb-1 font-poppins",children:n.referrals||0}),w.jsx("p",{className:"text-gray-400 text-sm font-montserrat",children:"Friends referred"})]})]}),w.jsxs("div",{className:"mb-12",children:[w.jsx("div",{className:"text-center mb-8",children:w.jsx("h2",{className:"font-bold text-white mb-4 font-poppins text-lg sm:text-2xl md:text-3xl",children:"For every person who joins with your link, you will get referral"})}),w.jsx(Fn,{className:"max-w-2xl mx-auto",children:w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-lg font-semibold text-white mb-3 font-poppins",children:"Your Referral Code:"}),w.jsx(lS,{value:n.claimCode,label:"Claim Code"})]}),w.jsx("div",{children:w.jsx(lS,{value:`${window.location.origin}?ref=${n.referralCode||""}`,label:"Referral Link"})}),w.jsxs("div",{className:"bg-gold/10 border border-gold/30 rounded-lg p-4",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"text-white font-semibold",children:"Current Balance:"}),w.jsxs("span",{className:"text-gold font-bold text-lg",children:["$",n.balance||"0.00"]})]}),w.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Total earned from daily cases and referrals"})]})]})})]}),w.jsxs("div",{className:"mb-12",children:[w.jsx("div",{className:"text-center mb-8"}),w.jsx(Fn,{className:"text-center",children:w.jsx(O7,{dashboardData:n,onOpenChest:u})})]}),w.jsx($R,{}),w.jsx(GR,{})]}),w.jsx(B7,{isOpen:a,onClose:d,reward:c})]}):w.jsxs("div",{className:"min-h-screen bg-gray-950",children:[w.jsx(Js,{minimal:!1,title:""}),w.jsx("div",{className:"flex items-center justify-center min-h-screen",children:w.jsx("div",{className:"text-white text-xl",children:"Failed to load dashboard"})})]})},U7=()=>{const[t,e]=C.useState(!1),{showToast:r}=bs(),{data:n,loading:s}=Gl(Co.getUsers);Gl(Co.getUsers);const{data:i,loading:o}=Gl(Co.getReferrals),a=async()=>{try{const h=await Co.exportClaimCodes(),u=new Blob([h.data],{type:"text/csv"}),d=window.URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download="claim-codes.csv",document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(d),r("CSV exported successfully!","success")}catch(h){console.error("Failed to export CSV:",h),r("Failed to export CSV","error")}},l=async()=>{try{const h=await Co.exportReferrals(),u=new Blob([h.data],{type:"text/csv"}),d=window.URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download="referrals.csv",document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(d),r("Referrals CSV exported successfully!","success")}catch(h){console.error("Failed to export referrals CSV:",h),r("Failed to export referrals CSV","error")}},c=h=>{if(t)return h;const[u,d]=h.split("@");return`${u.substring(0,2)}***@${d}`};return w.jsxs("div",{className:"min-h-screen bg-gray-950",children:[w.jsx(Js,{minimal:!0}),w.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[w.jsxs("div",{className:"flex justify-between items-center mb-12",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Admin Dashboard"}),w.jsx("p",{className:"text-xl text-gray-400",children:"Manage users and referrals"})]}),w.jsx("div",{className:"flex items-center space-x-4",children:w.jsxs(Ot,{variant:"outline",onClick:()=>e(!t),children:[t?w.jsx(hC,{className:"w-4 h-4 mr-2"}):w.jsx(dC,{className:"w-4 h-4 mr-2"}),t?"Hide":"Show"," Emails"]})})]}),w.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[w.jsxs(Fn,{children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx(Ix,{className:"w-6 h-6 text-brand"}),w.jsx("h2",{className:"text-2x2 font-bold text-white",children:"Users"})]}),w.jsxs(Ot,{variant:"outline",size:"sm",onClick:a,className:"border-brand text-brand hover:bg-brand hover:text-black",children:[w.jsx(f1,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),n!==null&&w.jsx(_d,{data:n||[],loading:s,columns:[{header:"Email",accessor:"email",render:h=>w.jsx("span",{className:"text-white font-mono text-sm break-all",children:c(h)})},{header:"Claim Code",accessor:"claimCode",render:h=>w.jsx("span",{className:"text-gold font-mono text-sm",children:h})},{header:"Credits",accessor:"credits",render:(h,u)=>w.jsx("span",{className:"text-green-400 font-semibold",children:Rx(((u.credits+u.cents)/100).toFixed(2)||0)})}],emptyMessage:"No users found"})]}),w.jsxs(Fn,{children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx(GB,{className:"w-6 h-6 text-gold"}),w.jsx("h2",{className:"text-2x2 font-bold text-white",children:"Referrals"})]}),w.jsxs(Ot,{variant:"outline",size:"sm",onClick:l,className:"border-gold text-gold hover:bg-gold hover:text-black",children:[w.jsx(f1,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),i!==null&&w.jsx(_d,{data:i||[],loading:o,columns:[{header:"Referrer Email",accessor:"referrerEmail",render:h=>w.jsx("span",{className:"text-white font-mono text-sm break-all",children:c(h)})},{header:"Referral Code",accessor:"referralCode",render:h=>w.jsx("span",{className:"text-gold font-mono text-sm font-semibold",children:h})},{header:"Total Referrals",accessor:"totalReferrals",render:h=>w.jsx("span",{className:"text-white text-sm font-semibold",children:h})},{header:"Credits Earned",accessor:"referrerCredits",render:h=>w.jsxs("span",{className:"text-green-400 text-sm font-semibold",children:["$",h]})}],emptyMessage:"No referrals found"})]})]})]})]})},V7=({children:t})=>{const{isAuthenticated:e,loading:r}=co();return r?w.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:w.jsx("div",{className:"w-8 h-8 border-4 border-gray-600 border-t-brand rounded-full animate-spin"})}):e?t:w.jsx(Tx,{to:"/signin",replace:!0})},j7=({children:t})=>localStorage.getItem("zoggy_admin_token")?t:w.jsx(Tx,{to:"/?admin=true",replace:!0}),$7=()=>w.jsx(zO,{children:w.jsxs(vO,{children:[w.jsx(vi,{path:"/",element:w.jsx(S7,{})}),w.jsx(vi,{path:"/signin",element:w.jsx(E7,{})}),w.jsx(vi,{path:"/verify-email",element:w.jsx(C7,{})}),w.jsx(vi,{path:"/dashboard",element:w.jsx(V7,{children:w.jsx(D7,{})})}),w.jsx(vi,{path:"/admin",element:w.jsx(j7,{children:w.jsx(U7,{})})}),w.jsx(vi,{path:"*",element:w.jsx(Tx,{to:"/",replace:!0})})]})});function G7(){return w.jsx(CL,{children:w.jsx(dV,{children:w.jsx($7,{})})})}Zm.createRoot(document.getElementById("root")).render(w.jsx(On.StrictMode,{children:w.jsx(G7,{})}));export{uP as $,zP as A,ar as B,qc as C,Ve as D,ee as E,aP as F,Ef as G,Fj as H,Uw as I,Gw as J,o5 as K,g5 as L,_e as M,ut as N,Ft as O,hr as P,F5 as Q,Sy as R,s$ as S,Pu as T,_y as U,jw as V,$w as W,Bj as X,Hp as Y,bd as Z,gt as _,vn as a,HP as a0,Ne as a1,St as a2,U5 as a3,p$ as a4,a$ as a5,N$ as a6,L$ as a7,V$ as a8,$$ as a9,G$ as aa,Dj as ab,Ci as ac,wd as ad,Ah as ae,Py as af,Vb as ag,uM as ah,mb as ai,fb as aj,$b as ak,W6 as al,De as am,oj as an,Td as ao,fM as ap,Sc as b,bh as c,iv as d,Bt as e,pb as f,t$ as g,jP as h,nb as i,wP as j,_n as k,LP as l,Db as m,k$ as n,F$ as o,D$ as p,j$ as q,yj as r,p5 as s,ve as t,IP as u,ij as v,Le as w,H$ as x,gs as y,os as z};
